/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@livekit";
exports.ids = ["vendor-chunks/@livekit"];
exports.modules = {

/***/ "(ssr)/./node_modules/@livekit/components-core/node_modules/loglevel/lib/loglevel.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@livekit/components-core/node_modules/loglevel/lib/loglevel.js ***!
  \*************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      defaultLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = level;\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          self.setLevel(defaultLevel, false);\n          clearPersistedLevel();\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL25vZGVfbW9kdWxlcy9sb2dsZXZlbC9saWIvbG9nbGV2ZWwuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsSUFBMEM7QUFDbEQsUUFBUSxvQ0FBTyxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUEsa0dBQUM7QUFDMUIsTUFBTSxLQUFLLEVBSU47QUFDTCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUIsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQSxxRUFBcUU7QUFDckUsWUFBWTtBQUNaOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFlBQVk7O0FBRVo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQSxnQkFBZ0I7QUFDaEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsc0JBQXNCO0FBQ3RCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb21tdW5pdHkvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL25vZGVfbW9kdWxlcy9sb2dsZXZlbC9saWIvbG9nbGV2ZWwuanM/ZGE5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiBsb2dsZXZlbCAtIGh0dHBzOi8vZ2l0aHViLmNvbS9waW10ZXJyeS9sb2dsZXZlbFxuKlxuKiBDb3B5cmlnaHQgKGMpIDIwMTMgVGltIFBlcnJ5XG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiovXG4oZnVuY3Rpb24gKHJvb3QsIGRlZmluaXRpb24pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShkZWZpbml0aW9uKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZGVmaW5pdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3QubG9nID0gZGVmaW5pdGlvbigpO1xuICAgIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gU2xpZ2h0bHkgZHViaW91cyB0cmlja3MgdG8gY3V0IGRvd24gbWluaW1pemVkIGZpbGUgc2l6ZVxuICAgIHZhciBub29wID0gZnVuY3Rpb24oKSB7fTtcbiAgICB2YXIgdW5kZWZpbmVkVHlwZSA9IFwidW5kZWZpbmVkXCI7XG4gICAgdmFyIGlzSUUgPSAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSkgJiYgKHR5cGVvZiB3aW5kb3cubmF2aWdhdG9yICE9PSB1bmRlZmluZWRUeXBlKSAmJiAoXG4gICAgICAgIC9UcmlkZW50XFwvfE1TSUUgLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KVxuICAgICk7XG5cbiAgICB2YXIgbG9nTWV0aG9kcyA9IFtcbiAgICAgICAgXCJ0cmFjZVwiLFxuICAgICAgICBcImRlYnVnXCIsXG4gICAgICAgIFwiaW5mb1wiLFxuICAgICAgICBcIndhcm5cIixcbiAgICAgICAgXCJlcnJvclwiXG4gICAgXTtcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgYmluZCBlcXVpdmFsZW50IHRoYXQgd29ya3MgYXQgbGVhc3QgYmFjayB0byBJRTZcbiAgICBmdW5jdGlvbiBiaW5kTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgbWV0aG9kID0gb2JqW21ldGhvZE5hbWVdO1xuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZC5iaW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kLmJpbmQob2JqKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwobWV0aG9kLCBvYmopO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIE1pc3NpbmcgYmluZCBzaGltIG9yIElFOCArIE1vZGVybml6ciwgZmFsbGJhY2sgdG8gd3JhcHBpbmdcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkobWV0aG9kLCBbb2JqLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJhY2UoKSBkb2Vzbid0IHByaW50IHRoZSBtZXNzYWdlIGluIElFLCBzbyBmb3IgdGhhdCBjYXNlIHdlIG5lZWQgdG8gd3JhcCBpdFxuICAgIGZ1bmN0aW9uIHRyYWNlRm9ySUUoKSB7XG4gICAgICAgIGlmIChjb25zb2xlLmxvZykge1xuICAgICAgICAgICAgaWYgKGNvbnNvbGUubG9nLmFwcGx5KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gb2xkIElFLCBuYXRpdmUgY29uc29sZSBtZXRob2RzIHRoZW1zZWx2ZXMgZG9uJ3QgaGF2ZSBhcHBseSgpLlxuICAgICAgICAgICAgICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5hcHBseShjb25zb2xlLmxvZywgW2NvbnNvbGUsIGFyZ3VtZW50c10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb25zb2xlLnRyYWNlKSBjb25zb2xlLnRyYWNlKCk7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdGhlIGJlc3QgbG9nZ2luZyBtZXRob2QgcG9zc2libGUgZm9yIHRoaXMgZW52XG4gICAgLy8gV2hlcmV2ZXIgcG9zc2libGUgd2Ugd2FudCB0byBiaW5kLCBub3Qgd3JhcCwgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2VzXG4gICAgZnVuY3Rpb24gcmVhbE1ldGhvZChtZXRob2ROYW1lKSB7XG4gICAgICAgIGlmIChtZXRob2ROYW1lID09PSAnZGVidWcnKSB7XG4gICAgICAgICAgICBtZXRob2ROYW1lID0gJ2xvZyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09IHVuZGVmaW5lZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm8gbWV0aG9kIHBvc3NpYmxlLCBmb3Igbm93IC0gZml4ZWQgbGF0ZXIgYnkgZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlc1xuICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZE5hbWUgPT09ICd0cmFjZScgJiYgaXNJRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNlRm9ySUU7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uc29sZVttZXRob2ROYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYmluZE1ldGhvZChjb25zb2xlLCBtZXRob2ROYW1lKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb25zb2xlLmxvZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYmluZE1ldGhvZChjb25zb2xlLCAnbG9nJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbm9vcDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZXNlIHByaXZhdGUgZnVuY3Rpb25zIGFsd2F5cyBuZWVkIGB0aGlzYCB0byBiZSBzZXQgcHJvcGVybHlcblxuICAgIGZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyhsZXZlbCwgbG9nZ2VyTmFtZSkge1xuICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvZ01ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBtZXRob2ROYW1lID0gbG9nTWV0aG9kc1tpXTtcbiAgICAgICAgICAgIHRoaXNbbWV0aG9kTmFtZV0gPSAoaSA8IGxldmVsKSA/XG4gICAgICAgICAgICAgICAgbm9vcCA6XG4gICAgICAgICAgICAgICAgdGhpcy5tZXRob2RGYWN0b3J5KG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmluZSBsb2cubG9nIGFzIGFuIGFsaWFzIGZvciBsb2cuZGVidWdcbiAgICAgICAgdGhpcy5sb2cgPSB0aGlzLmRlYnVnO1xuICAgIH1cblxuICAgIC8vIEluIG9sZCBJRSB2ZXJzaW9ucywgdGhlIGNvbnNvbGUgaXNuJ3QgcHJlc2VudCB1bnRpbCB5b3UgZmlyc3Qgb3BlbiBpdC5cbiAgICAvLyBXZSBidWlsZCByZWFsTWV0aG9kKCkgcmVwbGFjZW1lbnRzIGhlcmUgdGhhdCByZWdlbmVyYXRlIGxvZ2dpbmcgbWV0aG9kc1xuICAgIGZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMobWV0aG9kTmFtZSwgbGV2ZWwsIGxvZ2dlck5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gdW5kZWZpbmVkVHlwZSkge1xuICAgICAgICAgICAgICAgIHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMsIGxldmVsLCBsb2dnZXJOYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzW21ldGhvZE5hbWVdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQnkgZGVmYXVsdCwgd2UgdXNlIGNsb3NlbHkgYm91bmQgcmVhbCBtZXRob2RzIHdoZXJldmVyIHBvc3NpYmxlLCBhbmRcbiAgICAvLyBvdGhlcndpc2Ugd2Ugd2FpdCBmb3IgYSBjb25zb2xlIHRvIGFwcGVhciwgYW5kIHRoZW4gdHJ5IGFnYWluLlxuICAgIGZ1bmN0aW9uIGRlZmF1bHRNZXRob2RGYWN0b3J5KG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKSB7XG4gICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgIHJldHVybiByZWFsTWV0aG9kKG1ldGhvZE5hbWUpIHx8XG4gICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTG9nZ2VyKG5hbWUsIGRlZmF1bHRMZXZlbCwgZmFjdG9yeSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGN1cnJlbnRMZXZlbDtcbiAgICAgIGRlZmF1bHRMZXZlbCA9IGRlZmF1bHRMZXZlbCA9PSBudWxsID8gXCJXQVJOXCIgOiBkZWZhdWx0TGV2ZWw7XG5cbiAgICAgIHZhciBzdG9yYWdlS2V5ID0gXCJsb2dsZXZlbFwiO1xuICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHN0b3JhZ2VLZXkgKz0gXCI6XCIgKyBuYW1lO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikge1xuICAgICAgICBzdG9yYWdlS2V5ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKGxldmVsTnVtKSB7XG4gICAgICAgICAgdmFyIGxldmVsTmFtZSA9IChsb2dNZXRob2RzW2xldmVsTnVtXSB8fCAnc2lsZW50JykudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWRUeXBlIHx8ICFzdG9yYWdlS2V5KSByZXR1cm47XG5cbiAgICAgICAgICAvLyBVc2UgbG9jYWxTdG9yYWdlIGlmIGF2YWlsYWJsZVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc3RvcmFnZUtleV0gPSBsZXZlbE5hbWU7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG5cbiAgICAgICAgICAvLyBVc2Ugc2Vzc2lvbiBjb29raWUgYXMgZmFsbGJhY2tcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuY29va2llID1cbiAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RvcmFnZUtleSkgKyBcIj1cIiArIGxldmVsTmFtZSArIFwiO1wiO1xuICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0UGVyc2lzdGVkTGV2ZWwoKSB7XG4gICAgICAgICAgdmFyIHN0b3JlZExldmVsO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IHVuZGVmaW5lZFR5cGUgfHwgIXN0b3JhZ2VLZXkpIHJldHVybjtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHN0b3JlZExldmVsID0gd2luZG93LmxvY2FsU3RvcmFnZVtzdG9yYWdlS2V5XTtcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG5cbiAgICAgICAgICAvLyBGYWxsYmFjayB0byBjb29raWVzIGlmIGxvY2FsIHN0b3JhZ2UgZ2l2ZXMgdXMgbm90aGluZ1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RvcmVkTGV2ZWwgPT09IHVuZGVmaW5lZFR5cGUpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSB3aW5kb3cuZG9jdW1lbnQuY29va2llO1xuICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gY29va2llLmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0b3JhZ2VLZXkpICsgXCI9XCIpO1xuICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIHN0b3JlZExldmVsID0gL14oW147XSspLy5leGVjKGNvb2tpZS5zbGljZShsb2NhdGlvbikpWzFdO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgdGhlIHN0b3JlZCBsZXZlbCBpcyBub3QgdmFsaWQsIHRyZWF0IGl0IGFzIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cbiAgICAgICAgICBpZiAoc2VsZi5sZXZlbHNbc3RvcmVkTGV2ZWxdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgc3RvcmVkTGV2ZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHN0b3JlZExldmVsO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhclBlcnNpc3RlZExldmVsKCkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWRUeXBlIHx8ICFzdG9yYWdlS2V5KSByZXR1cm47XG5cbiAgICAgICAgICAvLyBVc2UgbG9jYWxTdG9yYWdlIGlmIGF2YWlsYWJsZVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShzdG9yYWdlS2V5KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cblxuICAgICAgICAgIC8vIFVzZSBzZXNzaW9uIGNvb2tpZSBhcyBmYWxsYmFja1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5jb29raWUgPVxuICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdG9yYWdlS2V5KSArIFwiPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQ1wiO1xuICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgIH1cblxuICAgICAgLypcbiAgICAgICAqXG4gICAgICAgKiBQdWJsaWMgbG9nZ2VyIEFQSSAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwgZm9yIGRldGFpbHNcbiAgICAgICAqXG4gICAgICAgKi9cblxuICAgICAgc2VsZi5uYW1lID0gbmFtZTtcblxuICAgICAgc2VsZi5sZXZlbHMgPSB7IFwiVFJBQ0VcIjogMCwgXCJERUJVR1wiOiAxLCBcIklORk9cIjogMiwgXCJXQVJOXCI6IDMsXG4gICAgICAgICAgXCJFUlJPUlwiOiA0LCBcIlNJTEVOVFwiOiA1fTtcblxuICAgICAgc2VsZi5tZXRob2RGYWN0b3J5ID0gZmFjdG9yeSB8fCBkZWZhdWx0TWV0aG9kRmFjdG9yeTtcblxuICAgICAgc2VsZi5nZXRMZXZlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudExldmVsO1xuICAgICAgfTtcblxuICAgICAgc2VsZi5zZXRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCwgcGVyc2lzdCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09IFwic3RyaW5nXCIgJiYgc2VsZi5sZXZlbHNbbGV2ZWwudG9VcHBlckNhc2UoKV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBsZXZlbCA9IHNlbGYubGV2ZWxzW2xldmVsLnRvVXBwZXJDYXNlKCldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIGxldmVsID09PSBcIm51bWJlclwiICYmIGxldmVsID49IDAgJiYgbGV2ZWwgPD0gc2VsZi5sZXZlbHMuU0lMRU5UKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRMZXZlbCA9IGxldmVsO1xuICAgICAgICAgICAgICBpZiAocGVyc2lzdCAhPT0gZmFsc2UpIHsgIC8vIGRlZmF1bHRzIHRvIHRydWVcbiAgICAgICAgICAgICAgICAgIHBlcnNpc3RMZXZlbElmUG9zc2libGUobGV2ZWwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHNlbGYsIGxldmVsLCBuYW1lKTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlID09PSB1bmRlZmluZWRUeXBlICYmIGxldmVsIDwgc2VsZi5sZXZlbHMuU0lMRU5UKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgXCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIiArIGxldmVsO1xuICAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYuc2V0RGVmYXVsdExldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgZGVmYXVsdExldmVsID0gbGV2ZWw7XG4gICAgICAgICAgaWYgKCFnZXRQZXJzaXN0ZWRMZXZlbCgpKSB7XG4gICAgICAgICAgICAgIHNlbGYuc2V0TGV2ZWwobGV2ZWwsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLnJlc2V0TGV2ZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5zZXRMZXZlbChkZWZhdWx0TGV2ZWwsIGZhbHNlKTtcbiAgICAgICAgICBjbGVhclBlcnNpc3RlZExldmVsKCk7XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmVuYWJsZUFsbCA9IGZ1bmN0aW9uKHBlcnNpc3QpIHtcbiAgICAgICAgICBzZWxmLnNldExldmVsKHNlbGYubGV2ZWxzLlRSQUNFLCBwZXJzaXN0KTtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZGlzYWJsZUFsbCA9IGZ1bmN0aW9uKHBlcnNpc3QpIHtcbiAgICAgICAgICBzZWxmLnNldExldmVsKHNlbGYubGV2ZWxzLlNJTEVOVCwgcGVyc2lzdCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBJbml0aWFsaXplIHdpdGggdGhlIHJpZ2h0IGxldmVsXG4gICAgICB2YXIgaW5pdGlhbExldmVsID0gZ2V0UGVyc2lzdGVkTGV2ZWwoKTtcbiAgICAgIGlmIChpbml0aWFsTGV2ZWwgPT0gbnVsbCkge1xuICAgICAgICAgIGluaXRpYWxMZXZlbCA9IGRlZmF1bHRMZXZlbDtcbiAgICAgIH1cbiAgICAgIHNlbGYuc2V0TGV2ZWwoaW5pdGlhbExldmVsLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKlxuICAgICAqIFRvcC1sZXZlbCBBUElcbiAgICAgKlxuICAgICAqL1xuXG4gICAgdmFyIGRlZmF1bHRMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbiAgICB2YXIgX2xvZ2dlcnNCeU5hbWUgPSB7fTtcbiAgICBkZWZhdWx0TG9nZ2VyLmdldExvZ2dlciA9IGZ1bmN0aW9uIGdldExvZ2dlcihuYW1lKSB7XG4gICAgICAgIGlmICgodHlwZW9mIG5hbWUgIT09IFwic3ltYm9sXCIgJiYgdHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHx8IG5hbWUgPT09IFwiXCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsb2dnZXIgPSBfbG9nZ2Vyc0J5TmFtZVtuYW1lXTtcbiAgICAgICAgaWYgKCFsb2dnZXIpIHtcbiAgICAgICAgICBsb2dnZXIgPSBfbG9nZ2Vyc0J5TmFtZVtuYW1lXSA9IG5ldyBMb2dnZXIoXG4gICAgICAgICAgICBuYW1lLCBkZWZhdWx0TG9nZ2VyLmdldExldmVsKCksIGRlZmF1bHRMb2dnZXIubWV0aG9kRmFjdG9yeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvZ2dlcjtcbiAgICB9O1xuXG4gICAgLy8gR3JhYiB0aGUgY3VycmVudCBnbG9iYWwgbG9nIHZhcmlhYmxlIGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG4gICAgdmFyIF9sb2cgPSAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSkgPyB3aW5kb3cubG9nIDogdW5kZWZpbmVkO1xuICAgIGRlZmF1bHRMb2dnZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSAmJlxuICAgICAgICAgICAgICAgd2luZG93LmxvZyA9PT0gZGVmYXVsdExvZ2dlcikge1xuICAgICAgICAgICAgd2luZG93LmxvZyA9IF9sb2c7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVmYXVsdExvZ2dlcjtcbiAgICB9O1xuXG4gICAgZGVmYXVsdExvZ2dlci5nZXRMb2dnZXJzID0gZnVuY3Rpb24gZ2V0TG9nZ2VycygpIHtcbiAgICAgICAgcmV0dXJuIF9sb2dnZXJzQnlOYW1lO1xuICAgIH07XG5cbiAgICAvLyBFUzYgZGVmYXVsdCBleHBvcnQsIGZvciBjb21wYXRpYmlsaXR5XG4gICAgZGVmYXVsdExvZ2dlclsnZGVmYXVsdCddID0gZGVmYXVsdExvZ2dlcjtcblxuICAgIHJldHVybiBkZWZhdWx0TG9nZ2VyO1xufSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-core/node_modules/loglevel/lib/loglevel.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css":
/*!************************************************************************!*\
  !*** ./node_modules/@livekit/components-styles/dist/general/index.css ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"858b8382a103\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1zdHlsZXMvZGlzdC9nZW5lcmFsL2luZGV4LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbW11bml0eS8uL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXN0eWxlcy9kaXN0L2dlbmVyYWwvaW5kZXguY3NzPzNhM2EiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI4NThiODM4MmExMDNcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-core/dist/index.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@livekit/components-core/dist/index.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataTopic: () => (/* binding */ DataTopic),\n/* harmony export */   GRID_LAYOUTS: () => (/* binding */ GRID_LAYOUTS),\n/* harmony export */   PIN_DEFAULT_STATE: () => (/* binding */ PIN_DEFAULT_STATE),\n/* harmony export */   WIDGET_DEFAULT_STATE: () => (/* binding */ WIDGET_DEFAULT_STATE),\n/* harmony export */   activeSpeakerObserver: () => (/* binding */ activeSpeakerObserver),\n/* harmony export */   allParticipantEvents: () => (/* binding */ allParticipantEvents),\n/* harmony export */   allParticipantRoomEvents: () => (/* binding */ allParticipantRoomEvents),\n/* harmony export */   allRemoteParticipantEvents: () => (/* binding */ allRemoteParticipantEvents),\n/* harmony export */   allRemoteParticipantRoomEvents: () => (/* binding */ allRemoteParticipantRoomEvents),\n/* harmony export */   attachIfSubscribed: () => (/* binding */ attachIfSubscribed),\n/* harmony export */   computeMenuPosition: () => (/* binding */ computeMenuPosition),\n/* harmony export */   connectedParticipantObserver: () => (/* binding */ connectedParticipantObserver),\n/* harmony export */   connectedParticipantsObserver: () => (/* binding */ connectedParticipantsObserver),\n/* harmony export */   connectionStateObserver: () => (/* binding */ connectionStateObserver),\n/* harmony export */   createActiveDeviceObservable: () => (/* binding */ createActiveDeviceObservable),\n/* harmony export */   createConnectionQualityObserver: () => (/* binding */ createConnectionQualityObserver),\n/* harmony export */   createDataObserver: () => (/* binding */ createDataObserver),\n/* harmony export */   createDefaultGrammar: () => (/* binding */ createDefaultGrammar),\n/* harmony export */   createEmailRegExp: () => (/* reexport safe */ email_regex__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   createInteractingObservable: () => (/* binding */ createInteractingObservable),\n/* harmony export */   createIsSpeakingObserver: () => (/* binding */ createIsSpeakingObserver),\n/* harmony export */   createMediaDeviceObserver: () => (/* binding */ createMediaDeviceObserver),\n/* harmony export */   createTrackObserver: () => (/* binding */ createTrackObserver),\n/* harmony export */   createUrlRegExp: () => (/* binding */ createUrlRegExp),\n/* harmony export */   cssPrefix: () => (/* binding */ cssPrefix),\n/* harmony export */   encryptionStatusObservable: () => (/* binding */ encryptionStatusObservable),\n/* harmony export */   getScrollBarWidth: () => (/* binding */ getScrollBarWidth),\n/* harmony export */   getTrackByIdentifier: () => (/* binding */ getTrackByIdentifier),\n/* harmony export */   getTrackReferenceId: () => (/* binding */ getTrackReferenceId),\n/* harmony export */   getTrackReferenceSource: () => (/* binding */ getTrackReferenceSource),\n/* harmony export */   isEqualTrackRef: () => (/* binding */ isEqualTrackRef),\n/* harmony export */   isLocal: () => (/* binding */ isLocal),\n/* harmony export */   isMobileBrowser: () => (/* binding */ isMobileBrowser),\n/* harmony export */   isParticipantSourcePinned: () => (/* binding */ isParticipantSourcePinned),\n/* harmony export */   isParticipantTrackReferencePinned: () => (/* binding */ isParticipantTrackReferencePinned),\n/* harmony export */   isPlaceholderReplacement: () => (/* binding */ isPlaceholderReplacement),\n/* harmony export */   isRemote: () => (/* binding */ isRemote),\n/* harmony export */   isSourceWitOptions: () => (/* binding */ isSourceWitOptions),\n/* harmony export */   isSourcesWithOptions: () => (/* binding */ isSourcesWithOptions),\n/* harmony export */   isTrackReference: () => (/* binding */ isTrackReference),\n/* harmony export */   isTrackReferencePinned: () => (/* binding */ isTrackReferencePinned),\n/* harmony export */   isTrackReferencePlaceholder: () => (/* binding */ isTrackReferencePlaceholder),\n/* harmony export */   isWeb: () => (/* binding */ isWeb),\n/* harmony export */   loadUserChoices: () => (/* binding */ loadUserChoices),\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   mutedObserver: () => (/* binding */ mutedObserver),\n/* harmony export */   observeParticipantEvents: () => (/* binding */ observeParticipantEvents),\n/* harmony export */   observeParticipantMedia: () => (/* binding */ observeParticipantMedia),\n/* harmony export */   observeRoomEvents: () => (/* binding */ observeRoomEvents),\n/* harmony export */   observeTrackEvents: () => (/* binding */ observeTrackEvents),\n/* harmony export */   participantEventSelector: () => (/* binding */ participantEventSelector),\n/* harmony export */   participantInfoObserver: () => (/* binding */ participantInfoObserver),\n/* harmony export */   participantPermissionObserver: () => (/* binding */ participantPermissionObserver),\n/* harmony export */   roomAudioPlaybackAllowedObservable: () => (/* binding */ roomAudioPlaybackAllowedObservable),\n/* harmony export */   roomEventSelector: () => (/* binding */ roomEventSelector),\n/* harmony export */   roomInfoObserver: () => (/* binding */ roomInfoObserver),\n/* harmony export */   roomObserver: () => (/* binding */ roomObserver),\n/* harmony export */   roomVideoPlaybackAllowedObservable: () => (/* binding */ roomVideoPlaybackAllowedObservable),\n/* harmony export */   saveUserChoices: () => (/* binding */ saveUserChoices),\n/* harmony export */   screenShareObserver: () => (/* binding */ screenShareObserver),\n/* harmony export */   selectGridLayout: () => (/* binding */ selectGridLayout),\n/* harmony export */   sendMessage: () => (/* binding */ sendMessage),\n/* harmony export */   setDifference: () => (/* binding */ setDifference),\n/* harmony export */   setLogExtension: () => (/* binding */ setLogExtension),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel),\n/* harmony export */   setupChat: () => (/* binding */ setupChat),\n/* harmony export */   setupChatToggle: () => (/* binding */ setupChatToggle),\n/* harmony export */   setupClearPinButton: () => (/* binding */ setupClearPinButton),\n/* harmony export */   setupConnectionQualityIndicator: () => (/* binding */ setupConnectionQualityIndicator),\n/* harmony export */   setupDataMessageHandler: () => (/* binding */ setupDataMessageHandler),\n/* harmony export */   setupDeviceSelector: () => (/* binding */ setupDeviceSelector),\n/* harmony export */   setupDisconnectButton: () => (/* binding */ setupDisconnectButton),\n/* harmony export */   setupFocusToggle: () => (/* binding */ setupFocusToggle),\n/* harmony export */   setupLiveKitRoom: () => (/* binding */ setupLiveKitRoom),\n/* harmony export */   setupManualToggle: () => (/* binding */ setupManualToggle),\n/* harmony export */   setupMediaToggle: () => (/* binding */ setupMediaToggle),\n/* harmony export */   setupMediaTrack: () => (/* binding */ setupMediaTrack),\n/* harmony export */   setupParticipantName: () => (/* binding */ setupParticipantName),\n/* harmony export */   setupParticipantTile: () => (/* binding */ setupParticipantTile),\n/* harmony export */   setupStartAudio: () => (/* binding */ setupStartAudio),\n/* harmony export */   setupStartVideo: () => (/* binding */ setupStartVideo),\n/* harmony export */   setupTrackMutedIndicator: () => (/* binding */ setupTrackMutedIndicator),\n/* harmony export */   sortParticipants: () => (/* binding */ sortParticipants),\n/* harmony export */   sortTrackReferences: () => (/* binding */ sortTrackReferences),\n/* harmony export */   supportsScreenSharing: () => (/* binding */ supportsScreenSharing),\n/* harmony export */   tokenize: () => (/* binding */ tokenize),\n/* harmony export */   trackObservable: () => (/* binding */ trackObservable),\n/* harmony export */   trackReferencesObservable: () => (/* binding */ trackReferencesObservable),\n/* harmony export */   updatePages: () => (/* binding */ updatePages),\n/* harmony export */   wasClickOutside: () => (/* binding */ wasClickOutside)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var email_regex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! email-regex */ \"(ssr)/./node_modules/email-regex/index.js\");\n/* harmony import */ var _floating_ui_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @floating-ui/dom */ \"(ssr)/./node_modules/@livekit/components-core/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs\");\n/* harmony import */ var _floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @floating-ui/dom */ \"(ssr)/./node_modules/@floating-ui/core/dist/floating-ui.core.mjs\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! loglevel */ \"(ssr)/./node_modules/@livekit/components-core/node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/Subject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/Observable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/finalize.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/filter.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/timeout.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/skipUntil.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/constants.ts\nvar cssPrefix = \"lk\";\n\n// src/utils.ts\n\n\n// src/track-reference/track-reference.types.ts\nfunction isTrackReference(trackReference) {\n  if (typeof trackReference === \"undefined\") {\n    return false;\n  }\n  return isTrackReferenceSubscribed(trackReference) || isTrackReferencePublished(trackReference);\n}\nfunction isTrackReferenceSubscribed(trackReference) {\n  var _a;\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"track\") && typeof ((_a = trackReference.publication) == null ? void 0 : _a.track) !== \"undefined\";\n}\nfunction isTrackReferencePublished(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"publication\") && typeof trackReference.publication !== \"undefined\";\n}\nfunction isTrackReferencePlaceholder(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && typeof trackReference.publication === \"undefined\";\n}\n\n// src/track-reference/track-reference.utils.ts\nfunction getTrackReferenceId(trackReference) {\n  if (typeof trackReference === \"string\" || typeof trackReference === \"number\") {\n    return `${trackReference}`;\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.source}_placeholder`;\n  } else if (isTrackReference(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.publication.source}_${trackReference.publication.trackSid}`;\n  } else {\n    throw new Error(`Can't generate a id for the given track reference: ${trackReference}`);\n  }\n}\nfunction getTrackReferenceSource(trackReference) {\n  if (isTrackReference(trackReference)) {\n    return trackReference.publication.source;\n  } else {\n    return trackReference.source;\n  }\n}\nfunction isEqualTrackRef(a, b) {\n  if (a === void 0 || b === void 0) {\n    return false;\n  }\n  if (isTrackReference(a) && isTrackReference(b)) {\n    return a.publication.trackSid === b.publication.trackSid;\n  } else {\n    return getTrackReferenceId(a) === getTrackReferenceId(b);\n  }\n}\nfunction isTrackReferencePinned(trackReference, pinState) {\n  if (typeof pinState === \"undefined\") {\n    return false;\n  }\n  if (isTrackReference(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReference(pinnedTrackReference) && pinnedTrackReference.publication.trackSid === trackReference.publication.trackSid\n    );\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReferencePlaceholder(pinnedTrackReference) && pinnedTrackReference.source === trackReference.source\n    );\n  } else {\n    return false;\n  }\n}\nfunction isPlaceholderReplacement(currentTrackRef, nextTrackRef) {\n  return isTrackReferencePlaceholder(currentTrackRef) && isTrackReference(nextTrackRef) && nextTrackRef.participant.identity === currentTrackRef.participant.identity && nextTrackRef.source === currentTrackRef.source;\n}\n\n// src/utils.ts\nfunction isLocal(p) {\n  return p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant;\n}\nfunction isRemote(p) {\n  return p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.RemoteParticipant;\n}\nvar attachIfSubscribed = (publication, element) => {\n  if (!publication)\n    return;\n  const { isSubscribed, track } = publication;\n  if (element && track) {\n    if (isSubscribed) {\n      track.attach(element);\n    } else {\n      track.detach(element);\n    }\n  }\n};\nfunction isParticipantSourcePinned(participant, source, pinState) {\n  if (pinState === void 0) {\n    return false;\n  }\n  return pinState.some(\n    ({ source: pinnedSource, participant: pinnedParticipant }) => pinnedSource === source && pinnedParticipant.identity === participant.identity\n  );\n}\nfunction isParticipantTrackReferencePinned(trackRef, pinState) {\n  if (pinState === void 0) {\n    return false;\n  }\n  return pinState.some((pinnedTrackRef) => isEqualTrackRef(pinnedTrackRef, trackRef));\n}\nfunction getScrollBarWidth() {\n  const inner = document.createElement(\"p\");\n  inner.style.width = \"100%\";\n  inner.style.height = \"200px\";\n  const outer = document.createElement(\"div\");\n  outer.style.position = \"absolute\";\n  outer.style.top = \"0px\";\n  outer.style.left = \"0px\";\n  outer.style.visibility = \"hidden\";\n  outer.style.width = \"200px\";\n  outer.style.height = \"150px\";\n  outer.style.overflow = \"hidden\";\n  outer.appendChild(inner);\n  document.body.appendChild(outer);\n  const w1 = inner.offsetWidth;\n  outer.style.overflow = \"scroll\";\n  let w2 = inner.offsetWidth;\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n  document.body.removeChild(outer);\n  const scrollBarWidth = w1 - w2;\n  return scrollBarWidth;\n}\n\n// src/helper/detectMobileBrowser.ts\nfunction isWeb() {\n  return typeof document !== \"undefined\";\n}\nfunction isMobileBrowser() {\n  return isWeb() ? /Mobi/i.test(window.navigator.userAgent) : false;\n}\n\n// src/helper/url-regex.ts\nfunction createUrlRegExp(options) {\n  options = __spreadValues({}, options);\n  const protocol = `(?:(?:[a-z]+:)?//)?`;\n  const auth = \"(?:\\\\S+(?::\\\\S*)?@)?\";\n  const ip = new RegExp(\n    \"(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}\",\n    \"g\"\n  ).source;\n  const host = \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\";\n  const domain = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\";\n  const tld = `(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\\\\.?`;\n  const port = \"(?::\\\\d{2,5})?\";\n  const path = '(?:[/?#][^\\\\s\"]*)?';\n  const regex = `(?:${protocol}|www\\\\.)${auth}(?:localhost|${ip}|${host}${domain}${tld})${port}${path}`;\n  return options.exact ? new RegExp(`(?:^${regex}$)`, \"i\") : new RegExp(regex, \"ig\");\n}\n\n// src/helper/emailRegex.ts\n\n\n// src/helper/floating-menu.ts\n\nfunction computeMenuPosition(button, menu) {\n  return __async(this, null, function* () {\n    const { x, y } = yield (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_2__.computePosition)(button, menu, {\n      placement: \"top\",\n      middleware: [(0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.offset)(6), (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_2__.flip)(), (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_2__.shift)({ padding: 5 })]\n    });\n    return { x, y };\n  });\n}\nfunction wasClickOutside(insideElement, event) {\n  const isOutside = !insideElement.contains(event.target);\n  return isOutside;\n}\n\n// src/helper/tokenizer.ts\nvar createDefaultGrammar = () => {\n  return {\n    email: (0,email_regex__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),\n    url: createUrlRegExp({})\n  };\n};\nfunction tokenize(input, grammar) {\n  const matches = Object.entries(grammar).map(\n    ([type, rx], weight) => Array.from(input.matchAll(rx)).map(({ index, 0: content }) => ({\n      type,\n      weight,\n      content,\n      index: index != null ? index : 0\n    }))\n  ).flat().sort((a, b) => {\n    const d = a.index - b.index;\n    return d !== 0 ? d : a.weight - b.weight;\n  }).filter(({ index }, i, arr) => {\n    if (i === 0)\n      return true;\n    const prev = arr[i - 1];\n    return prev.index + prev.content.length <= index;\n  });\n  const tokens = [];\n  let pos = 0;\n  for (const { type, content, index } of matches) {\n    if (index > pos)\n      tokens.push(input.substring(pos, index));\n    tokens.push({ type, content });\n    pos = index + content.length;\n  }\n  if (input.length > pos)\n    tokens.push(input.substring(pos));\n  return tokens;\n}\n\n// src/helper/eventGroups.ts\n\nvar allRemoteParticipantRoomEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantRoomEvents = [\n  ...allRemoteParticipantRoomEvents,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished\n];\nvar allRemoteParticipantEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantEvents = [\n  ...allRemoteParticipantEvents,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n];\n\n// src/logger.ts\n\n\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_4__.getLogger(\"lk-components-js\");\nlog.setDefaultLevel(\"WARN\");\nfunction setLogLevel(level, options = {}) {\n  var _a;\n  log.setLevel(level);\n  (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel)((_a = options.liveKitClientLogLevel) != null ? _a : level);\n}\nfunction setLogExtension(extension, options = {}) {\n  var _a;\n  const originalFactory = log.methodFactory;\n  log.methodFactory = (methodName, configLevel, loggerName) => {\n    const rawMethod = originalFactory(methodName, configLevel, loggerName);\n    const logLevel = livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel[methodName];\n    const needLog = logLevel >= configLevel && logLevel < livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel.silent;\n    return (msg, context) => {\n      if (context)\n        rawMethod(msg, context);\n      else\n        rawMethod(msg);\n      if (needLog) {\n        extension(logLevel, msg, context);\n      }\n    };\n  };\n  log.setLevel(log.getLevel());\n  (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogExtension)((_a = options.liveKitClientLogExtension) != null ? _a : extension);\n}\n\n// src/helper/grid-layouts.ts\nvar GRID_LAYOUTS = [\n  {\n    columns: 1,\n    rows: 1,\n    name: \"1x1\",\n    minTiles: 1,\n    maxTiles: 1,\n    minWidth: 0,\n    minHeight: 0\n  },\n  {\n    columns: 1,\n    rows: 2,\n    name: \"1x2\",\n    minTiles: 2,\n    maxTiles: 2,\n    minWidth: 0,\n    minHeight: 0\n  },\n  {\n    columns: 2,\n    rows: 1,\n    name: \"2x1\",\n    minTiles: 2,\n    maxTiles: 2,\n    minWidth: 900,\n    minHeight: 0\n  },\n  {\n    columns: 2,\n    rows: 2,\n    name: \"2x2\",\n    minTiles: 3,\n    maxTiles: 4,\n    minWidth: 560,\n    minHeight: 0\n  },\n  {\n    columns: 3,\n    rows: 3,\n    name: \"3x3\",\n    minTiles: 5,\n    maxTiles: 9,\n    minWidth: 700,\n    minHeight: 0\n  },\n  {\n    columns: 4,\n    rows: 4,\n    name: \"4x4\",\n    minTiles: 10,\n    maxTiles: 16,\n    minWidth: 960,\n    minHeight: 0\n  },\n  {\n    columns: 5,\n    rows: 5,\n    name: \"5x5\",\n    minTiles: 17,\n    maxTiles: 25,\n    minWidth: 1100,\n    minHeight: 0\n  }\n];\nfunction selectGridLayout(layouts, participantCount, width, height) {\n  let currentLayoutIndex = 0;\n  let layout = layouts.find((layout_, index, allLayouts) => {\n    currentLayoutIndex = index;\n    const isBiggerLayoutAvailable = allLayouts.findIndex((l, i) => {\n      const layoutIsBiggerThanCurrent = i > index;\n      const layoutFitsSameAmountOfParticipants = l.maxTiles === layout_.maxTiles;\n      return layoutIsBiggerThanCurrent && layoutFitsSameAmountOfParticipants;\n    }) !== -1;\n    return layout_.maxTiles >= participantCount && !isBiggerLayoutAvailable;\n  });\n  if (layout === void 0) {\n    layout = layouts[layouts.length - 1];\n    if (layout) {\n      log.warn(\n        `No layout found for: participantCount: ${participantCount}, width/height: ${width}/${height} fallback to biggest available layout (${layout.name}).`\n      );\n    } else {\n      throw new Error(`No layout or fallback layout found.`);\n    }\n  }\n  if (width < layout.minWidth || height < layout.minHeight) {\n    if (currentLayoutIndex > 0) {\n      const smallerLayout = layouts[currentLayoutIndex - 1];\n      layout = selectGridLayout(\n        layouts.slice(0, currentLayoutIndex),\n        smallerLayout.maxTiles,\n        width,\n        height\n      );\n    }\n  }\n  return layout;\n}\n\n// src/helper/set-helper.ts\nfunction setDifference(setA, setB) {\n  const _difference = new Set(setA);\n  for (const elem of setB) {\n    _difference.delete(elem);\n  }\n  return _difference;\n}\n\n// src/helper/featureDetection.ts\nfunction supportsScreenSharing() {\n  return typeof navigator !== \"undefined\" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;\n}\n\n// src/types.ts\nvar PIN_DEFAULT_STATE = [];\nvar WIDGET_DEFAULT_STATE = { showChat: false, unreadMessages: 0 };\nfunction isSourceWitOptions(source) {\n  return typeof source === \"object\";\n}\nfunction isSourcesWithOptions(sources) {\n  return Array.isArray(sources) && sources.filter(isSourceWitOptions).length > 0;\n}\n\n// src/sorting/sort-track-bundles.ts\n\n\n// src/sorting/base-sort-functions.ts\n\nfunction sortParticipantsByAudioLevel(a, b) {\n  return b.audioLevel - a.audioLevel;\n}\nfunction sortParticipantsByIsSpeaking(a, b) {\n  if (a.isSpeaking === b.isSpeaking) {\n    return 0;\n  } else {\n    return a.isSpeaking ? -1 : 1;\n  }\n}\nfunction sortParticipantsByLastSpokenAT(a, b) {\n  var _a, _b, _c, _d;\n  if (a.lastSpokeAt !== void 0 || b.lastSpokeAt !== void 0) {\n    return ((_b = (_a = b.lastSpokeAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = a.lastSpokeAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n  } else {\n    return 0;\n  }\n}\nfunction sortParticipantsByJoinedAt(a, b) {\n  var _a, _b, _c, _d;\n  return ((_b = (_a = a.joinedAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = b.joinedAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n}\nfunction sortTrackReferencesByType(a, b) {\n  if (isTrackReference(a)) {\n    if (isTrackReference(b)) {\n      return 0;\n    } else {\n      return -1;\n    }\n  } else if (isTrackReference(b)) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\nfunction sortTrackRefsByIsCameraEnabled(a, b) {\n  const aVideo = a.participant.isCameraEnabled;\n  const bVideo = b.participant.isCameraEnabled;\n  if (aVideo !== bVideo) {\n    if (aVideo) {\n      return -1;\n    } else {\n      return 1;\n    }\n  } else {\n    return 0;\n  }\n}\n\n// src/sorting/sort-track-bundles.ts\nfunction sortTrackReferences(tracks) {\n  const localTracks = [];\n  const screenShareTracks = [];\n  const cameraTracks = [];\n  const undefinedTracks = [];\n  tracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal && trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera) {\n      localTracks.push(trackRef);\n    } else if (trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare) {\n      screenShareTracks.push(trackRef);\n    } else if (trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera) {\n      cameraTracks.push(trackRef);\n    } else {\n      undefinedTracks.push(trackRef);\n    }\n  });\n  const sortedScreenShareTracks = sortScreenShareTracks(screenShareTracks);\n  const sortedCameraTracks = sortCameraTracks(cameraTracks);\n  return [...localTracks, ...sortedScreenShareTracks, ...sortedCameraTracks, ...undefinedTracks];\n}\nfunction sortScreenShareTracks(screenShareTracks) {\n  const localScreenShares = [];\n  const remoteScreenShares = [];\n  screenShareTracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localScreenShares.push(trackRef);\n    } else {\n      remoteScreenShares.push(trackRef);\n    }\n  });\n  localScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  remoteScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  const sortedScreenShareTrackRefs = [...remoteScreenShares, ...localScreenShares];\n  return sortedScreenShareTrackRefs;\n}\nfunction sortCameraTracks(cameraTrackReferences) {\n  const localCameraTracks = [];\n  const remoteCameraTracks = [];\n  cameraTrackReferences.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localCameraTracks.push(trackRef);\n    } else {\n      remoteCameraTracks.push(trackRef);\n    }\n  });\n  remoteCameraTracks.sort((a, b) => {\n    if (a.participant.isSpeaking && b.participant.isSpeaking) {\n      return sortParticipantsByAudioLevel(a.participant, b.participant);\n    }\n    if (a.participant.isSpeaking !== b.participant.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a.participant, b.participant);\n    }\n    if (a.participant.lastSpokeAt !== b.participant.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a.participant, b.participant);\n    }\n    if (isTrackReference(a) !== isTrackReference(b)) {\n      return sortTrackReferencesByType(a, b);\n    }\n    if (a.participant.isCameraEnabled !== b.participant.isCameraEnabled) {\n      return sortTrackRefsByIsCameraEnabled(a, b);\n    }\n    return sortParticipantsByJoinedAt(a.participant, b.participant);\n  });\n  return [...localCameraTracks, ...remoteCameraTracks];\n}\n\n// src/sorting/sort-participants.ts\n\nfunction sortParticipants(participants) {\n  const sortedParticipants = [...participants];\n  sortedParticipants.sort((a, b) => {\n    if (a.isSpeaking && b.isSpeaking) {\n      return sortParticipantsByAudioLevel(a, b);\n    }\n    if (a.isSpeaking !== b.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a, b);\n    }\n    if (a.lastSpokeAt !== b.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a, b);\n    }\n    const aVideo = a.videoTracks.size > 0;\n    const bVideo = b.videoTracks.size > 0;\n    if (aVideo !== bVideo) {\n      if (aVideo) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n    return sortParticipantsByJoinedAt(a, b);\n  });\n  const localParticipant = sortedParticipants.find((p) => p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant);\n  if (localParticipant) {\n    const localIdx = sortedParticipants.indexOf(localParticipant);\n    if (localIdx >= 0) {\n      sortedParticipants.splice(localIdx, 1);\n      if (sortedParticipants.length > 0) {\n        sortedParticipants.splice(0, 0, localParticipant);\n      } else {\n        sortedParticipants.push(localParticipant);\n      }\n    }\n  }\n  return sortedParticipants;\n}\n\n// src/helper/array-helper.ts\nfunction chunk(input, size) {\n  return input.reduce(\n    (arr, item, idx) => {\n      return idx % size === 0 ? [...arr, [item]] : [...arr.slice(0, -1), [...arr.slice(-1)[0], item]];\n    },\n    []\n  );\n}\nfunction zip(a1, a2) {\n  const resultLength = Math.max(a1.length, a2.length);\n  return new Array(resultLength).fill([]).map((_val, idx) => [a1[idx], a2[idx]]);\n}\nfunction differenceBy(a1, a2, by) {\n  return a1.filter((c) => !a2.map((v) => by(v)).includes(by(c)));\n}\n\n// src/track-reference/test-utils.ts\n\nfunction flatTrackReferenceArray(list) {\n  return list.map((item) => {\n    if (typeof item === \"string\" || typeof item === \"number\") {\n      return `${item}`;\n    } else {\n      return getTrackReferenceId(item);\n    }\n  });\n}\n\n// src/sorting/tile-array-update.ts\nfunction visualPageChange(state, next) {\n  return {\n    dropped: differenceBy(state, next, getTrackReferenceId),\n    added: differenceBy(next, state, getTrackReferenceId)\n  };\n}\nfunction listNeedsUpdating(changes) {\n  return changes.added.length !== 0 || changes.dropped.length !== 0;\n}\nfunction findIndex(trackReference, trackReferences) {\n  const indexToReplace = trackReferences.findIndex(\n    (trackReference_) => getTrackReferenceId(trackReference_) === getTrackReferenceId(trackReference)\n  );\n  if (indexToReplace === -1) {\n    throw new Error(\n      `Element not part of the array: ${getTrackReferenceId(\n        trackReference\n      )} not in ${flatTrackReferenceArray(trackReferences)}`\n    );\n  }\n  return indexToReplace;\n}\nfunction swapItems(moveForward, moveBack, trackReferences) {\n  const indexToReplace = findIndex(moveForward, trackReferences);\n  const indexReplaceWith = findIndex(moveBack, trackReferences);\n  trackReferences.splice(indexToReplace, 1, moveBack);\n  trackReferences.splice(indexReplaceWith, 1, moveForward);\n  return trackReferences;\n}\nfunction dropItem(itemToDrop, list) {\n  const indexOfElementToDrop = findIndex(itemToDrop, list);\n  list.splice(indexOfElementToDrop, 1);\n  return list;\n}\nfunction addItem(itemToAdd, list) {\n  return [...list, itemToAdd];\n}\nfunction divideIntoPages(list, maxElementsOnPage) {\n  const pages = chunk(list, maxElementsOnPage);\n  return pages;\n}\nfunction updatePages(currentList, nextList, maxItemsOnPage) {\n  let updatedList = refreshList(currentList, nextList);\n  if (updatedList.length < nextList.length) {\n    const addedItems = differenceBy(nextList, updatedList, getTrackReferenceId);\n    updatedList = [...updatedList, ...addedItems];\n  }\n  const currentPages = divideIntoPages(updatedList, maxItemsOnPage);\n  const nextPages = divideIntoPages(nextList, maxItemsOnPage);\n  zip(currentPages, nextPages).forEach(([currentPage, nextPage], pageIndex) => {\n    if (currentPage && nextPage) {\n      const updatedPage = divideIntoPages(updatedList, maxItemsOnPage)[pageIndex];\n      const changes = visualPageChange(updatedPage, nextPage);\n      if (listNeedsUpdating(changes)) {\n        log.debug(\n          `Detected visual changes on page: ${pageIndex}, current: ${flatTrackReferenceArray(\n            currentPage\n          )}, next: ${flatTrackReferenceArray(nextPage)}`,\n          { changes }\n        );\n        if (changes.added.length === changes.dropped.length) {\n          zip(changes.added, changes.dropped).forEach(([added, dropped]) => {\n            if (added && dropped) {\n              updatedList = swapItems(added, dropped, updatedList);\n            } else {\n              throw new Error(\n                `For a swap action we need a addition and a removal one is missing: ${added}, ${dropped}`\n              );\n            }\n          });\n        }\n        if (changes.added.length === 0 && changes.dropped.length > 0) {\n          changes.dropped.forEach((item) => {\n            updatedList = dropItem(item, updatedList);\n          });\n        }\n        if (changes.added.length > 0 && changes.dropped.length === 0) {\n          changes.added.forEach((item) => {\n            updatedList = addItem(item, updatedList);\n          });\n        }\n      }\n    }\n  });\n  if (updatedList.length > nextList.length) {\n    const missingItems = differenceBy(updatedList, nextList, getTrackReferenceId);\n    updatedList = updatedList.filter(\n      (item) => !missingItems.map(getTrackReferenceId).includes(getTrackReferenceId(item))\n    );\n  }\n  return updatedList;\n}\nfunction refreshList(currentList, nextList) {\n  return currentList.map((currentItem) => {\n    const updateForCurrentItem = nextList.find(\n      (newItem_) => (\n        // If the IDs match or ..\n        getTrackReferenceId(currentItem) === getTrackReferenceId(newItem_) || // ... if the current item is a placeholder and the new item is the track reference can replace it.\n        typeof currentItem !== \"number\" && isTrackReferencePlaceholder(currentItem) && isTrackReference(newItem_) && isPlaceholderReplacement(currentItem, newItem_)\n      )\n    );\n    return updateForCurrentItem != null ? updateForCurrentItem : currentItem;\n  });\n}\n\n// src/components/mediaToggle.ts\n\n\n\n// src/observables/participant.ts\n\n\n\n// src/observables/room.ts\n\n\nfunction observeRoomEvents(room, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onRoomUpdate = () => {\n      subscribe.next(room);\n    };\n    events.forEach((evt) => {\n      room.on(evt, onRoomUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        room.off(evt, onRoomUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(room));\n  return observable;\n}\nfunction roomEventSelector(room, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    room.on(event, update);\n    const unsubscribe = () => {\n      room.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction roomObserver(room) {\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(room));\n  return observable;\n}\nfunction connectionStateObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(([connectionState]) => connectionState),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(room.state)\n  );\n}\nfunction screenShareObserver(room) {\n  let screenShareSubscriber;\n  const observers = [];\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscriber) => {\n    screenShareSubscriber = subscriber;\n    return () => {\n      observers.forEach((observer) => {\n        observer.unsubscribe();\n      });\n    };\n  });\n  const screenShareTracks = [];\n  const handleSub = (publication, participant) => {\n    if (publication.source !== livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare && publication.source !== livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShareAudio) {\n      return;\n    }\n    let trackMap = screenShareTracks.find((tr) => tr.participant.identity === participant.identity);\n    const getScreenShareTracks = (participant2) => {\n      return participant2.getTracks().filter(\n        (track) => (track.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare || track.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShareAudio) && track.track\n      );\n    };\n    if (!trackMap) {\n      trackMap = {\n        participant,\n        tracks: getScreenShareTracks(participant)\n      };\n    } else {\n      const index = screenShareTracks.indexOf(trackMap);\n      screenShareTracks.splice(index, 1);\n      trackMap.tracks = getScreenShareTracks(participant);\n    }\n    if (trackMap.tracks.length > 0) {\n      screenShareTracks.push(trackMap);\n    }\n    screenShareSubscriber.next(screenShareTracks);\n  };\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnsubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished).subscribe((args) => handleSub(...args))\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  setTimeout(() => {\n    for (const p of room.participants.values()) {\n      p.getTracks().forEach((track) => {\n        handleSub(track, p);\n      });\n    }\n  }, 1);\n  return observable;\n}\nfunction roomInfoObserver(room) {\n  const observer = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((r) => {\n      return { name: r.name, metadata: r.metadata };\n    })\n  );\n  return observer;\n}\nfunction activeSpeakerObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(([speakers]) => speakers)\n  );\n}\nfunction createMediaDeviceObserver(kind, onError, requestPermissions = true) {\n  var _a;\n  const onDeviceChange = () => __async(this, null, function* () {\n    try {\n      const newDevices = yield livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(kind, requestPermissions);\n      deviceSubject.next(newDevices);\n    } catch (e) {\n      onError == null ? void 0 : onError(e);\n    }\n  });\n  const deviceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Subject();\n  const observable = deviceSubject.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.finalize)(() => {\n      var _a2;\n      (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.removeEventListener(\"devicechange\", onDeviceChange);\n    })\n  );\n  if (typeof window !== \"undefined\") {\n    if (!window.isSecureContext) {\n      throw new Error(\n        `Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices`\n      );\n    }\n    (_a = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a.addEventListener(\"devicechange\", onDeviceChange);\n  }\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.concat)(\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(kind, requestPermissions).catch((e) => onError == null ? void 0 : onError(e)),\n    observable\n  );\n}\nfunction createDataObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived);\n}\nfunction roomAudioPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((room2) => {\n      return { canPlayAudio: room2.canPlaybackAudio };\n    })\n  );\n  return observable;\n}\nfunction roomVideoPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.VideoPlaybackStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((room2) => {\n      return { canPlayVideo: room2.canPlaybackVideo };\n    })\n  );\n  return observable;\n}\nfunction createActiveDeviceObservable(room, kind) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveDeviceChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.filter)(([kindOfDevice]) => kindOfDevice === kind),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(([kind2, deviceId]) => {\n      log.debug(\"activeDeviceObservable | RoomEvent.ActiveDeviceChanged\", { kind: kind2, deviceId });\n      return deviceId;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(room.getActiveDevice(kind))\n  );\n}\nfunction encryptionStatusObservable(room, participant) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantEncryptionStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.filter)(\n      ([, p]) => participant.identity === (p == null ? void 0 : p.identity) || !p && participant.identity === room.localParticipant.identity\n    ),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(([encrypted]) => encrypted),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(\n      participant instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant ? participant.isE2EEEnabled : participant.isEncrypted\n    )\n  );\n}\n\n// src/components/mediaTrack.ts\n\n\n\n// src/styles-interface/class-prefixer.ts\nfunction prefixClass(unprefixedClassName) {\n  return `${cssPrefix}-${unprefixedClassName}`;\n}\n\n// src/components/mediaTrack.ts\nfunction setupMediaTrack(trackIdentifier) {\n  const initialPub = getTrackByIdentifier(trackIdentifier);\n  const trackObserver = observeParticipantMedia(trackIdentifier.participant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(() => {\n      return getTrackByIdentifier(trackIdentifier);\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(initialPub)\n  );\n  const className = prefixClass(\n    trackIdentifier.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera || trackIdentifier.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? \"participant-media-video\" : \"participant-media-audio\"\n  );\n  return { className, trackObserver };\n}\nfunction getTrackByIdentifier(options) {\n  if (isTrackReference(options)) {\n    return options.publication;\n  } else {\n    const { source, name, participant } = options;\n    if (source && name) {\n      return participant.getTracks().find((pub) => pub.source === source && pub.trackName === name);\n    } else if (name) {\n      return participant.getTrackByName(name);\n    } else if (source) {\n      return participant.getTrack(source);\n    } else {\n      throw new Error(\"At least one of source and name needs to be defined\");\n    }\n  }\n}\n\n// src/observables/participant.ts\nfunction observeParticipantEvents(participant, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onParticipantUpdate = () => {\n      subscribe.next(participant);\n    };\n    events.forEach((evt) => {\n      participant.on(evt, onParticipantUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        participant.off(evt, onParticipantUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(participant));\n  return observable;\n}\nfunction observeParticipantMedia(participant) {\n  const participantObserver = observeParticipantEvents(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n    // ParticipantEvent.IsSpeakingChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.MediaDevicesError,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n    // ParticipantEvent.ConnectionQualityChanged,\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((p) => {\n      const { isMicrophoneEnabled, isCameraEnabled, isScreenShareEnabled } = p;\n      const microphoneTrack = p.getTrack(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone);\n      const cameraTrack = p.getTrack(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera);\n      const participantMedia = {\n        isCameraEnabled,\n        isMicrophoneEnabled,\n        isScreenShareEnabled,\n        cameraTrack,\n        microphoneTrack,\n        participant: p\n      };\n      return participantMedia;\n    })\n  );\n  return participantObserver;\n}\nfunction createTrackObserver(participant, options) {\n  return observeParticipantMedia(participant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(() => {\n      return { publication: getTrackByIdentifier(options) };\n    })\n  );\n}\nfunction participantInfoObserver(participant) {\n  const observer = observeParticipantEvents(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged\n    // ParticipantEvent.LocalTrackPublished,\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(({ name, identity, metadata }) => {\n      return {\n        name,\n        identity,\n        metadata\n      };\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)({\n      name: participant.name,\n      identity: participant.identity,\n      metadata: participant.metadata\n    })\n  );\n  return observer;\n}\nfunction createConnectionQualityObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(([quality]) => quality),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(participant.connectionQuality)\n  );\n  return observer;\n}\nfunction participantEventSelector(participant, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    participant.on(event, update);\n    const unsubscribe = () => {\n      participant.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction mutedObserver(trackRef) {\n  var _a, _b, _c, _d;\n  return observeParticipantEvents(\n    trackRef.participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((participant) => {\n      var _a2, _b2;\n      const pub = (_a2 = trackRef.publication) != null ? _a2 : participant.getTrack(trackRef.source);\n      return (_b2 = pub == null ? void 0 : pub.isMuted) != null ? _b2 : true;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(\n      (_d = (_c = (_a = trackRef.publication) == null ? void 0 : _a.isMuted) != null ? _c : (_b = trackRef.participant.getTrack(trackRef.source)) == null ? void 0 : _b.isMuted) != null ? _d : true\n    )\n  );\n}\nfunction createIsSpeakingObserver(participant) {\n  return participantEventSelector(participant, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(([isSpeaking]) => isSpeaking)\n  );\n}\nfunction connectedParticipantsObserver(room, options = {}) {\n  var _a;\n  let subscriber;\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((sub) => {\n    subscriber = sub;\n    return () => listener.unsubscribe();\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(Array.from(room.participants.values())));\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const roomEvents = Array.from(\n    /* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      ...additionalRoomEvents\n    ])\n  );\n  const listener = observeRoomEvents(room, ...roomEvents).subscribe(\n    (r) => subscriber == null ? void 0 : subscriber.next(Array.from(r.participants.values()))\n  );\n  if (room.participants.size > 0) {\n    subscriber == null ? void 0 : subscriber.next(Array.from(room.participants.values()));\n  }\n  return observable;\n}\nfunction connectedParticipantObserver(room, identity, options = {}) {\n  var _a;\n  const additionalEvents = (_a = options.additionalEvents) != null ? _a : allParticipantEvents;\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.switchMap)((r) => {\n      const participant = r.getParticipantByIdentity(identity);\n      if (participant) {\n        return observeParticipantEvents(participant, ...additionalEvents);\n      } else {\n        return new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => subscribe.next(void 0));\n      }\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(room.getParticipantByIdentity(identity))\n  );\n  return observable;\n}\nfunction participantPermissionObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(() => participant.permissions),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(participant.permissions)\n  );\n  return observer;\n}\n\n// src/components/mediaToggle.ts\nfunction setupMediaToggle(source, room, options) {\n  const { localParticipant } = room;\n  const getSourceEnabled = (source2, localParticipant2) => {\n    let isEnabled = false;\n    switch (source2) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n        isEnabled = localParticipant2.isCameraEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n        isEnabled = localParticipant2.isMicrophoneEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n        isEnabled = localParticipant2.isScreenShareEnabled;\n        break;\n      default:\n        break;\n    }\n    return isEnabled;\n  };\n  const enabledObserver = observeParticipantMedia(localParticipant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((media) => {\n      return getSourceEnabled(source, media.participant);\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(getSourceEnabled(source, localParticipant))\n  );\n  const pendingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Subject();\n  const toggle = (forceState, captureOptions) => __async(this, null, function* () {\n    try {\n      captureOptions != null ? captureOptions : captureOptions = options;\n      pendingSubject.next(true);\n      switch (source) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n          yield localParticipant.setCameraEnabled(\n            forceState != null ? forceState : !localParticipant.isCameraEnabled,\n            captureOptions\n          );\n          break;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n          yield localParticipant.setMicrophoneEnabled(\n            forceState != null ? forceState : !localParticipant.isMicrophoneEnabled,\n            captureOptions\n          );\n          break;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n          yield localParticipant.setScreenShareEnabled(\n            forceState != null ? forceState : !localParticipant.isScreenShareEnabled,\n            captureOptions\n          );\n          break;\n        default:\n          break;\n      }\n    } finally {\n      pendingSubject.next(false);\n    }\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver,\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\nfunction setupManualToggle() {\n  let state = false;\n  const enabledSubject = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Subject();\n  const pendingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Subject();\n  const toggle = (forceState) => __async(this, null, function* () {\n    pendingSubject.next(true);\n    state = forceState != null ? forceState : !state;\n    enabledSubject.next(state);\n    pendingSubject.next(false);\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver: enabledSubject.asObservable(),\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\n\n// src/components/mediaDeviceSelect.ts\n\n\nfunction setupDeviceSelector(kind, room, localTrack) {\n  const activeDeviceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_13__.BehaviorSubject(void 0);\n  const activeDeviceObservable = room ? createActiveDeviceObservable(room, kind) : activeDeviceSubject.asObservable();\n  const setActiveMediaDevice = (_0, ..._1) => __async(this, [_0, ..._1], function* (id, options = {}) {\n    var _a, _b, _c;\n    if (room) {\n      log.debug(`Switching active device of kind \"${kind}\" with id ${id}.`);\n      yield room.switchActiveDevice(kind, id, options.exact);\n      const actualDeviceId = (_a = room.getActiveDevice(kind)) != null ? _a : id;\n      if (actualDeviceId !== id && id !== \"default\") {\n        log.info(\n          `We tried to select the device with id (${id}), but the browser decided to select the device with id (${actualDeviceId}) instead.`\n        );\n      }\n      let targetTrack = void 0;\n      if (kind === \"audioinput\")\n        targetTrack = (_b = room.localParticipant.getTrack(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone)) == null ? void 0 : _b.track;\n      else if (kind === \"videoinput\") {\n        targetTrack = (_c = room.localParticipant.getTrack(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera)) == null ? void 0 : _c.track;\n      }\n      const useDefault = id === \"default\" && !targetTrack || id === \"default\" && (targetTrack == null ? void 0 : targetTrack.mediaStreamTrack.label.startsWith(\"Default\"));\n      activeDeviceSubject.next(useDefault ? id : actualDeviceId);\n    } else if (localTrack) {\n      yield localTrack.setDeviceId(options.exact ? { exact: id } : id);\n      const actualId = yield localTrack.getDeviceId();\n      activeDeviceSubject.next(\n        id === \"default\" && localTrack.mediaStreamTrack.label.startsWith(\"Default\") ? id : actualId\n      );\n    } else if (activeDeviceSubject.value !== id) {\n      log.warn(\n        \"device switch skipped, please provide either a room or a local track to switch on. \"\n      );\n      activeDeviceSubject.next(id);\n    }\n  });\n  const className = prefixClass(\"media-device-select\");\n  return {\n    className,\n    activeDeviceObservable,\n    setActiveMediaDevice\n  };\n}\n\n// src/components/disconnectButton.ts\nfunction setupDisconnectButton(room) {\n  const disconnect = (stopTracks) => {\n    room.disconnect(stopTracks);\n  };\n  const className = prefixClass(\"disconnect-button\");\n  return { className, disconnect };\n}\n\n// src/components/connectionQualityIndicator.ts\nfunction setupConnectionQualityIndicator(participant) {\n  const className = prefixClass(\"connection-quality\");\n  const connectionQualityObserver = createConnectionQualityObserver(participant);\n  return { className, connectionQualityObserver };\n}\n\n// src/components/trackMutedIndicator.ts\n\nfunction setupTrackMutedIndicator(trackRef) {\n  let classForSource = \"track-muted-indicator-camera\";\n  switch (trackRef.source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n      classForSource = \"track-muted-indicator-camera\";\n      break;\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n      classForSource = \"track-muted-indicator-microphone\";\n      break;\n    default:\n      break;\n  }\n  const className = prefixClass(classForSource);\n  const mediaMutedObserver = mutedObserver(trackRef);\n  return { className, mediaMutedObserver };\n}\n\n// src/components/participantName.ts\nfunction setupParticipantName(participant) {\n  const infoObserver = participantInfoObserver(participant);\n  return { className: \"lk-participant-name\", infoObserver };\n}\n\n// src/components/participantTile.ts\nfunction setupParticipantTile() {\n  const className = prefixClass(\"participant-tile\");\n  return {\n    className\n  };\n}\n\n// src/components/chat.ts\n\n\n\n// src/observables/dataChannel.ts\n\n\nvar DataTopic = {\n  CHAT: \"lk-chat-topic\"\n};\nfunction sendMessage(_0, _1, _2) {\n  return __async(this, arguments, function* (localParticipant, payload, topic, options = {}) {\n    const { kind, destination } = options;\n    yield localParticipant.publishData(payload, kind != null ? kind : livekit_client__WEBPACK_IMPORTED_MODULE_0__.DataPacket_Kind.RELIABLE, {\n      destination,\n      topic\n    });\n  });\n}\nfunction setupDataMessageHandler(room, topic, onMessage) {\n  const messageObservable = createDataObserver(room).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.filter)(([, , , messageTopic]) => topic === void 0 || messageTopic === topic),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(([payload, participant, , messageTopic]) => {\n      const msg = {\n        payload,\n        topic: messageTopic,\n        from: participant\n      };\n      onMessage == null ? void 0 : onMessage(msg);\n      return msg;\n    })\n  );\n  let isSendingSubscriber;\n  const isSendingObservable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscriber) => {\n    isSendingSubscriber = subscriber;\n  });\n  const send = (_0, ..._1) => __async(this, [_0, ..._1], function* (payload, options = {}) {\n    isSendingSubscriber.next(true);\n    try {\n      yield sendMessage(room.localParticipant, payload, topic, options);\n    } finally {\n      isSendingSubscriber.next(false);\n    }\n  });\n  return { messageObservable, isSendingObservable, send };\n}\n\n// src/components/chat.ts\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nvar topicSubjectMap = /* @__PURE__ */ new Map();\nvar encode = (message) => encoder.encode(JSON.stringify({ message: message.message, timestamp: message.timestamp }));\nvar decode = (message) => JSON.parse(decoder.decode(message));\nfunction setupChat(room, options) {\n  var _a, _b;\n  const onDestroyObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Subject();\n  const { messageDecoder, messageEncoder, channelTopic } = options != null ? options : {};\n  const topic = channelTopic != null ? channelTopic : DataTopic.CHAT;\n  let needsSetup = false;\n  if (!topicSubjectMap.has(room)) {\n    needsSetup = true;\n  }\n  const topicMap = (_a = topicSubjectMap.get(room)) != null ? _a : /* @__PURE__ */ new Map();\n  const messageSubject = (_b = topicMap.get(topic)) != null ? _b : new rxjs__WEBPACK_IMPORTED_MODULE_8__.Subject();\n  topicMap.set(topic, messageSubject);\n  topicSubjectMap.set(room, topicMap);\n  if (needsSetup) {\n    const { messageObservable } = setupDataMessageHandler(room, topic);\n    messageObservable.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_14__.takeUntil)(onDestroyObservable)).subscribe(messageSubject);\n  }\n  const finalMessageDecoder = messageDecoder != null ? messageDecoder : decode;\n  const messagesObservable = messageSubject.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((msg) => {\n      const parsedMessage = finalMessageDecoder(msg.payload);\n      const newMessage = __spreadProps(__spreadValues({}, parsedMessage), { from: msg.from });\n      return newMessage;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.scan)((acc, value) => [...acc, value], []),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.takeUntil)(onDestroyObservable)\n  );\n  const isSending$ = new rxjs__WEBPACK_IMPORTED_MODULE_13__.BehaviorSubject(false);\n  const finalMessageEncoder = messageEncoder != null ? messageEncoder : encode;\n  const send = (message) => __async(this, null, function* () {\n    const timestamp = Date.now();\n    const encodedMsg = finalMessageEncoder({ message, timestamp });\n    isSending$.next(true);\n    try {\n      yield sendMessage(room.localParticipant, encodedMsg, topic, {\n        kind: livekit_client__WEBPACK_IMPORTED_MODULE_0__.DataPacket_Kind.RELIABLE\n      });\n      messageSubject.next({\n        payload: encodedMsg,\n        topic,\n        from: room.localParticipant\n      });\n    } finally {\n      isSending$.next(false);\n    }\n  });\n  function destroy() {\n    onDestroyObservable.next();\n    onDestroyObservable.complete();\n    topicSubjectMap.clear();\n  }\n  room.once(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, destroy);\n  return { messageObservable: messagesObservable, isSendingObservable: isSending$, send };\n}\n\n// src/components/startAudio.ts\nfunction setupStartAudio() {\n  const handleStartAudioPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Audio for room: \", room);\n    yield room.startAudio();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomAudioPlaybackAllowedObservable, handleStartAudioPlayback };\n}\n\n// src/components/startVideo.ts\nfunction setupStartVideo() {\n  const handleStartVideoPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Video for room: \", room);\n    yield room.startVideo();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomVideoPlaybackAllowedObservable, handleStartVideoPlayback };\n}\n\n// src/components/chatToggle.ts\nfunction setupChatToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"chat-toggle\")].join(\" \");\n  return { className };\n}\n\n// src/components/focusToggle.ts\nfunction setupFocusToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"focus-toggle-button\")].join(\" \");\n  return { className };\n}\n\n// src/components/clearPinButton.ts\nfunction setupClearPinButton() {\n  const className = \"lk-clear-pin-button lk-button\";\n  return { className };\n}\n\n// src/components/room.ts\nfunction setupLiveKitRoom() {\n  const className = \"lk-room-container\";\n  return { className };\n}\n\n// src/observables/track.ts\n\n\nfunction trackObservable(track) {\n  const trackObserver = observeTrackEvents(\n    track,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Muted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Unmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Subscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Unsubscribed\n  );\n  return trackObserver;\n}\nfunction observeTrackEvents(track, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onTrackUpdate = () => {\n      subscribe.next(track);\n    };\n    events.forEach((evt) => {\n      track.on(evt, onTrackUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        track.off(evt, onTrackUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(track));\n  return observable;\n}\nfunction getTrackReferences(room, sources, onlySubscribedTracks = true) {\n  const localParticipant = room.localParticipant;\n  const allParticipants = [localParticipant, ...Array.from(room.participants.values())];\n  const trackReferences = [];\n  allParticipants.forEach((participant) => {\n    sources.forEach((source) => {\n      const sourceReferences = Array.from(\n        participant.tracks.values()\n      ).filter(\n        (track) => track.source === source && // either return all or only the ones that are subscribed\n        (!onlySubscribedTracks || track.track)\n      ).map((track) => {\n        return {\n          participant,\n          publication: track,\n          source: track.source\n        };\n      });\n      trackReferences.push(...sourceReferences);\n    });\n  });\n  return { trackReferences, participants: allParticipants };\n}\nfunction trackReferencesObservable(room, sources, options) {\n  var _a, _b;\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const onlySubscribedTracks = (_b = options.onlySubscribed) != null ? _b : true;\n  const roomEvents = Array.from(\n    (/* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged,\n      ...additionalRoomEvents\n    ])).values()\n  );\n  const observable = observeRoomEvents(room, ...roomEvents).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)((room2) => {\n      const data = getTrackReferences(room2, sources, onlySubscribedTracks);\n      log.debug(`TrackReference[] was updated. (length ${data.trackReferences.length})`, data);\n      return data;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.startWith)(getTrackReferences(room, sources, onlySubscribedTracks))\n  );\n  return observable;\n}\n\n// src/observables/dom-event.ts\n\nfunction createInteractingObservable(htmlElement, inactiveAfter = 1e3) {\n  if (htmlElement === null)\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(false);\n  const move$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.fromEvent)(htmlElement, \"mousemove\", { passive: true }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.map)(() => true));\n  const moveAndStop$ = move$.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.timeout)({\n      each: inactiveAfter,\n      with: () => (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(false), moveAndStop$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_19__.skipUntil)(move$)))\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)()\n  );\n  return moveAndStop$;\n}\n\n// src/persistent-storage/local-storage-helpers.ts\nfunction saveToLocalStorage(key, value) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (error) {\n    log.error(`Error setting item to local storage: ${error}`);\n  }\n}\nfunction loadFromLocalStorage(key) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return void 0;\n  }\n  try {\n    const item = localStorage.getItem(key);\n    if (!item) {\n      log.warn(`Item with key ${key} does not exist in local storage.`);\n      return void 0;\n    }\n    return JSON.parse(item);\n  } catch (error) {\n    log.error(`Error getting item from local storage: ${error}`);\n    return void 0;\n  }\n}\nfunction createLocalStorageInterface(key) {\n  return {\n    load: () => loadFromLocalStorage(key),\n    save: (value) => saveToLocalStorage(key, value)\n  };\n}\n\n// src/persistent-storage/user-choices.ts\nvar USER_CHOICES_KEY = `${cssPrefix}-user-choices`;\nvar defaultUserChoices = {\n  videoEnabled: true,\n  audioEnabled: true,\n  videoDeviceId: \"\",\n  audioDeviceId: \"\",\n  username: \"\",\n  e2ee: false,\n  sharedPassphrase: \"\"\n};\nvar { load, save } = createLocalStorageInterface(USER_CHOICES_KEY);\nfunction saveUserChoices(userChoices, preventSave = false) {\n  if (preventSave === true) {\n    return;\n  }\n  const _a = userChoices, { e2ee, sharedPassphrase } = _a, toSave = __objRest(_a, [\"e2ee\", \"sharedPassphrase\"]);\n  save(toSave);\n}\nfunction loadUserChoices(defaults, preventLoad = false) {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const fallback = {\n    videoEnabled: (_a = defaults == null ? void 0 : defaults.videoEnabled) != null ? _a : defaultUserChoices.videoEnabled,\n    audioEnabled: (_b = defaults == null ? void 0 : defaults.audioEnabled) != null ? _b : defaultUserChoices.audioEnabled,\n    videoDeviceId: (_c = defaults == null ? void 0 : defaults.videoDeviceId) != null ? _c : defaultUserChoices.videoDeviceId,\n    audioDeviceId: (_d = defaults == null ? void 0 : defaults.audioDeviceId) != null ? _d : defaultUserChoices.audioDeviceId,\n    username: (_e = defaults == null ? void 0 : defaults.username) != null ? _e : defaultUserChoices.username,\n    e2ee: (_f = defaults == null ? void 0 : defaults.e2ee) != null ? _f : defaultUserChoices.e2ee,\n    sharedPassphrase: (_g = defaults == null ? void 0 : defaults.sharedPassphrase) != null ? _g : defaultUserChoices.sharedPassphrase\n  };\n  if (preventLoad) {\n    return fallback;\n  } else {\n    const maybeLoadedObject = load();\n    const result = __spreadValues(__spreadValues({}, fallback), maybeLoadedObject != null ? maybeLoadedObject : {});\n    return result;\n  }\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7O0FBRUE7QUFDcUU7O0FBRXJFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYyxlQUFlO0FBQzdCLElBQUk7QUFDSixjQUFjLG9DQUFvQyxHQUFHLHNCQUFzQjtBQUMzRSxJQUFJO0FBQ0osY0FBYyxvQ0FBb0MsR0FBRyxrQ0FBa0MsR0FBRyxvQ0FBb0M7QUFDOUgsSUFBSTtBQUNKLDBFQUEwRSxlQUFlO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtB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QSxNQUFNLGFBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUJBQXlCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLG1EQUFtRCwrREFBK0Q7QUFDbEg7QUFDQTtBQUNBO0FBNEZFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb21tdW5pdHkvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzPzFmYzMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19vYmpSZXN0ID0gKHNvdXJjZSwgZXhjbHVkZSkgPT4ge1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIGZvciAodmFyIHByb3AgaW4gc291cmNlKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChzb3VyY2UsIHByb3ApICYmIGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDApXG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gIGlmIChzb3VyY2UgIT0gbnVsbCAmJiBfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhzb3VyY2UpKSB7XG4gICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHByb3ApIDwgMCAmJiBfX3Byb3BJc0VudW0uY2FsbChzb3VyY2UsIHByb3ApKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG5cbi8vIHNyYy9jb25zdGFudHMudHNcbnZhciBjc3NQcmVmaXggPSBcImxrXCI7XG5cbi8vIHNyYy91dGlscy50c1xuaW1wb3J0IHsgTG9jYWxQYXJ0aWNpcGFudCwgUmVtb3RlUGFydGljaXBhbnQgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcblxuLy8gc3JjL3RyYWNrLXJlZmVyZW5jZS90cmFjay1yZWZlcmVuY2UudHlwZXMudHNcbmZ1bmN0aW9uIGlzVHJhY2tSZWZlcmVuY2UodHJhY2tSZWZlcmVuY2UpIHtcbiAgaWYgKHR5cGVvZiB0cmFja1JlZmVyZW5jZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaXNUcmFja1JlZmVyZW5jZVN1YnNjcmliZWQodHJhY2tSZWZlcmVuY2UpIHx8IGlzVHJhY2tSZWZlcmVuY2VQdWJsaXNoZWQodHJhY2tSZWZlcmVuY2UpO1xufVxuZnVuY3Rpb24gaXNUcmFja1JlZmVyZW5jZVN1YnNjcmliZWQodHJhY2tSZWZlcmVuY2UpIHtcbiAgdmFyIF9hO1xuICBpZiAoIXRyYWNrUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eShcInBhcnRpY2lwYW50XCIpICYmIHRyYWNrUmVmZXJlbmNlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIHRyYWNrUmVmZXJlbmNlLmhhc093blByb3BlcnR5KFwidHJhY2tcIikgJiYgdHlwZW9mICgoX2EgPSB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRyYWNrKSAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cbmZ1bmN0aW9uIGlzVHJhY2tSZWZlcmVuY2VQdWJsaXNoZWQodHJhY2tSZWZlcmVuY2UpIHtcbiAgaWYgKCF0cmFja1JlZmVyZW5jZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZVwiKSAmJiB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eShcInB1YmxpY2F0aW9uXCIpICYmIHR5cGVvZiB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cbmZ1bmN0aW9uIGlzVHJhY2tSZWZlcmVuY2VQbGFjZWhvbGRlcih0cmFja1JlZmVyZW5jZSkge1xuICBpZiAoIXRyYWNrUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eShcInBhcnRpY2lwYW50XCIpICYmIHRyYWNrUmVmZXJlbmNlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIHR5cGVvZiB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbiA9PT0gXCJ1bmRlZmluZWRcIjtcbn1cblxuLy8gc3JjL3RyYWNrLXJlZmVyZW5jZS90cmFjay1yZWZlcmVuY2UudXRpbHMudHNcbmZ1bmN0aW9uIGdldFRyYWNrUmVmZXJlbmNlSWQodHJhY2tSZWZlcmVuY2UpIHtcbiAgaWYgKHR5cGVvZiB0cmFja1JlZmVyZW5jZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdHJhY2tSZWZlcmVuY2UgPT09IFwibnVtYmVyXCIpIHtcbiAgICByZXR1cm4gYCR7dHJhY2tSZWZlcmVuY2V9YDtcbiAgfSBlbHNlIGlmIChpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIGAke3RyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5fV8ke3RyYWNrUmVmZXJlbmNlLnNvdXJjZX1fcGxhY2Vob2xkZXJgO1xuICB9IGVsc2UgaWYgKGlzVHJhY2tSZWZlcmVuY2UodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIGAke3RyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5fV8ke3RyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uLnNvdXJjZX1fJHt0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi50cmFja1NpZH1gO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZ2VuZXJhdGUgYSBpZCBmb3IgdGhlIGdpdmVuIHRyYWNrIHJlZmVyZW5jZTogJHt0cmFja1JlZmVyZW5jZX1gKTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VHJhY2tSZWZlcmVuY2VTb3VyY2UodHJhY2tSZWZlcmVuY2UpIHtcbiAgaWYgKGlzVHJhY2tSZWZlcmVuY2UodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uLnNvdXJjZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdHJhY2tSZWZlcmVuY2Uuc291cmNlO1xuICB9XG59XG5mdW5jdGlvbiBpc0VxdWFsVHJhY2tSZWYoYSwgYikge1xuICBpZiAoYSA9PT0gdm9pZCAwIHx8IGIgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoaXNUcmFja1JlZmVyZW5jZShhKSAmJiBpc1RyYWNrUmVmZXJlbmNlKGIpKSB7XG4gICAgcmV0dXJuIGEucHVibGljYXRpb24udHJhY2tTaWQgPT09IGIucHVibGljYXRpb24udHJhY2tTaWQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGdldFRyYWNrUmVmZXJlbmNlSWQoYSkgPT09IGdldFRyYWNrUmVmZXJlbmNlSWQoYik7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzVHJhY2tSZWZlcmVuY2VQaW5uZWQodHJhY2tSZWZlcmVuY2UsIHBpblN0YXRlKSB7XG4gIGlmICh0eXBlb2YgcGluU3RhdGUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGlzVHJhY2tSZWZlcmVuY2UodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIHBpblN0YXRlLnNvbWUoXG4gICAgICAocGlubmVkVHJhY2tSZWZlcmVuY2UpID0+IHBpbm5lZFRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5pZGVudGl0eSAmJiBpc1RyYWNrUmVmZXJlbmNlKHBpbm5lZFRyYWNrUmVmZXJlbmNlKSAmJiBwaW5uZWRUcmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24udHJhY2tTaWRcbiAgICApO1xuICB9IGVsc2UgaWYgKGlzVHJhY2tSZWZlcmVuY2VQbGFjZWhvbGRlcih0cmFja1JlZmVyZW5jZSkpIHtcbiAgICByZXR1cm4gcGluU3RhdGUuc29tZShcbiAgICAgIChwaW5uZWRUcmFja1JlZmVyZW5jZSkgPT4gcGlubmVkVHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQuaWRlbnRpdHkgPT09IHRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5ICYmIGlzVHJhY2tSZWZlcmVuY2VQbGFjZWhvbGRlcihwaW5uZWRUcmFja1JlZmVyZW5jZSkgJiYgcGlubmVkVHJhY2tSZWZlcmVuY2Uuc291cmNlID09PSB0cmFja1JlZmVyZW5jZS5zb3VyY2VcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24gaXNQbGFjZWhvbGRlclJlcGxhY2VtZW50KGN1cnJlbnRUcmFja1JlZiwgbmV4dFRyYWNrUmVmKSB7XG4gIHJldHVybiBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIoY3VycmVudFRyYWNrUmVmKSAmJiBpc1RyYWNrUmVmZXJlbmNlKG5leHRUcmFja1JlZikgJiYgbmV4dFRyYWNrUmVmLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBjdXJyZW50VHJhY2tSZWYucGFydGljaXBhbnQuaWRlbnRpdHkgJiYgbmV4dFRyYWNrUmVmLnNvdXJjZSA9PT0gY3VycmVudFRyYWNrUmVmLnNvdXJjZTtcbn1cblxuLy8gc3JjL3V0aWxzLnRzXG5mdW5jdGlvbiBpc0xvY2FsKHApIHtcbiAgcmV0dXJuIHAgaW5zdGFuY2VvZiBMb2NhbFBhcnRpY2lwYW50O1xufVxuZnVuY3Rpb24gaXNSZW1vdGUocCkge1xuICByZXR1cm4gcCBpbnN0YW5jZW9mIFJlbW90ZVBhcnRpY2lwYW50O1xufVxudmFyIGF0dGFjaElmU3Vic2NyaWJlZCA9IChwdWJsaWNhdGlvbiwgZWxlbWVudCkgPT4ge1xuICBpZiAoIXB1YmxpY2F0aW9uKVxuICAgIHJldHVybjtcbiAgY29uc3QgeyBpc1N1YnNjcmliZWQsIHRyYWNrIH0gPSBwdWJsaWNhdGlvbjtcbiAgaWYgKGVsZW1lbnQgJiYgdHJhY2spIHtcbiAgICBpZiAoaXNTdWJzY3JpYmVkKSB7XG4gICAgICB0cmFjay5hdHRhY2goZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYWNrLmRldGFjaChlbGVtZW50KTtcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBpc1BhcnRpY2lwYW50U291cmNlUGlubmVkKHBhcnRpY2lwYW50LCBzb3VyY2UsIHBpblN0YXRlKSB7XG4gIGlmIChwaW5TdGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBwaW5TdGF0ZS5zb21lKFxuICAgICh7IHNvdXJjZTogcGlubmVkU291cmNlLCBwYXJ0aWNpcGFudDogcGlubmVkUGFydGljaXBhbnQgfSkgPT4gcGlubmVkU291cmNlID09PSBzb3VyY2UgJiYgcGlubmVkUGFydGljaXBhbnQuaWRlbnRpdHkgPT09IHBhcnRpY2lwYW50LmlkZW50aXR5XG4gICk7XG59XG5mdW5jdGlvbiBpc1BhcnRpY2lwYW50VHJhY2tSZWZlcmVuY2VQaW5uZWQodHJhY2tSZWYsIHBpblN0YXRlKSB7XG4gIGlmIChwaW5TdGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBwaW5TdGF0ZS5zb21lKChwaW5uZWRUcmFja1JlZikgPT4gaXNFcXVhbFRyYWNrUmVmKHBpbm5lZFRyYWNrUmVmLCB0cmFja1JlZikpO1xufVxuZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyV2lkdGgoKSB7XG4gIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGlubmVyLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gIGlubmVyLnN0eWxlLmhlaWdodCA9IFwiMjAwcHhcIjtcbiAgY29uc3Qgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBvdXRlci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgb3V0ZXIuc3R5bGUudG9wID0gXCIwcHhcIjtcbiAgb3V0ZXIuc3R5bGUubGVmdCA9IFwiMHB4XCI7XG4gIG91dGVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICBvdXRlci5zdHlsZS53aWR0aCA9IFwiMjAwcHhcIjtcbiAgb3V0ZXIuc3R5bGUuaGVpZ2h0ID0gXCIxNTBweFwiO1xuICBvdXRlci5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG4gIGNvbnN0IHcxID0gaW5uZXIub2Zmc2V0V2lkdGg7XG4gIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gXCJzY3JvbGxcIjtcbiAgbGV0IHcyID0gaW5uZXIub2Zmc2V0V2lkdGg7XG4gIGlmICh3MSA9PT0gdzIpIHtcbiAgICB3MiA9IG91dGVyLmNsaWVudFdpZHRoO1xuICB9XG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3V0ZXIpO1xuICBjb25zdCBzY3JvbGxCYXJXaWR0aCA9IHcxIC0gdzI7XG4gIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbn1cblxuLy8gc3JjL2hlbHBlci9kZXRlY3RNb2JpbGVCcm93c2VyLnRzXG5mdW5jdGlvbiBpc1dlYigpIHtcbiAgcmV0dXJuIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cbmZ1bmN0aW9uIGlzTW9iaWxlQnJvd3NlcigpIHtcbiAgcmV0dXJuIGlzV2ViKCkgPyAvTW9iaS9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpIDogZmFsc2U7XG59XG5cbi8vIHNyYy9oZWxwZXIvdXJsLXJlZ2V4LnRzXG5mdW5jdGlvbiBjcmVhdGVVcmxSZWdFeHAob3B0aW9ucykge1xuICBvcHRpb25zID0gX19zcHJlYWRWYWx1ZXMoe30sIG9wdGlvbnMpO1xuICBjb25zdCBwcm90b2NvbCA9IGAoPzooPzpbYS16XSs6KT8vLyk/YDtcbiAgY29uc3QgYXV0aCA9IFwiKD86XFxcXFMrKD86OlxcXFxTKik/QCk/XCI7XG4gIGNvbnN0IGlwID0gbmV3IFJlZ0V4cChcbiAgICBcIig/OjI1WzAtNV18MlswLTRdXFxcXGR8MVxcXFxkXFxcXGR8WzEtOV1cXFxcZHxcXFxcZCkoPzpcXFxcLig/OjI1WzAtNV18MlswLTRdXFxcXGR8MVxcXFxkXFxcXGR8WzEtOV1cXFxcZHxcXFxcZCkpezN9XCIsXG4gICAgXCJnXCJcbiAgKS5zb3VyY2U7XG4gIGNvbnN0IGhvc3QgPSBcIig/Oig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XVstX10qKSpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rKVwiO1xuICBjb25zdCBkb21haW4gPSBcIig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldLSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKlwiO1xuICBjb25zdCB0bGQgPSBgKD86XFxcXC4oPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZl17Mix9KSlcXFxcLj9gO1xuICBjb25zdCBwb3J0ID0gXCIoPzo6XFxcXGR7Miw1fSk/XCI7XG4gIGNvbnN0IHBhdGggPSAnKD86Wy8/I11bXlxcXFxzXCJdKik/JztcbiAgY29uc3QgcmVnZXggPSBgKD86JHtwcm90b2NvbH18d3d3XFxcXC4pJHthdXRofSg/OmxvY2FsaG9zdHwke2lwfXwke2hvc3R9JHtkb21haW59JHt0bGR9KSR7cG9ydH0ke3BhdGh9YDtcbiAgcmV0dXJuIG9wdGlvbnMuZXhhY3QgPyBuZXcgUmVnRXhwKGAoPzpeJHtyZWdleH0kKWAsIFwiaVwiKSA6IG5ldyBSZWdFeHAocmVnZXgsIFwiaWdcIik7XG59XG5cbi8vIHNyYy9oZWxwZXIvZW1haWxSZWdleC50c1xuaW1wb3J0IGNyZWF0ZUVtYWlsUmVnRXhwIGZyb20gXCJlbWFpbC1yZWdleFwiO1xuXG4vLyBzcmMvaGVscGVyL2Zsb2F0aW5nLW1lbnUudHNcbmltcG9ydCB7IGNvbXB1dGVQb3NpdGlvbiwgZmxpcCwgb2Zmc2V0LCBzaGlmdCB9IGZyb20gXCJAZmxvYXRpbmctdWkvZG9tXCI7XG5mdW5jdGlvbiBjb21wdXRlTWVudVBvc2l0aW9uKGJ1dHRvbiwgbWVudSkge1xuICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0geWllbGQgY29tcHV0ZVBvc2l0aW9uKGJ1dHRvbiwgbWVudSwge1xuICAgICAgcGxhY2VtZW50OiBcInRvcFwiLFxuICAgICAgbWlkZGxld2FyZTogW29mZnNldCg2KSwgZmxpcCgpLCBzaGlmdCh7IHBhZGRpbmc6IDUgfSldXG4gICAgfSk7XG4gICAgcmV0dXJuIHsgeCwgeSB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIHdhc0NsaWNrT3V0c2lkZShpbnNpZGVFbGVtZW50LCBldmVudCkge1xuICBjb25zdCBpc091dHNpZGUgPSAhaW5zaWRlRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpO1xuICByZXR1cm4gaXNPdXRzaWRlO1xufVxuXG4vLyBzcmMvaGVscGVyL3Rva2VuaXplci50c1xudmFyIGNyZWF0ZURlZmF1bHRHcmFtbWFyID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGVtYWlsOiBjcmVhdGVFbWFpbFJlZ0V4cCgpLFxuICAgIHVybDogY3JlYXRlVXJsUmVnRXhwKHt9KVxuICB9O1xufTtcbmZ1bmN0aW9uIHRva2VuaXplKGlucHV0LCBncmFtbWFyKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBPYmplY3QuZW50cmllcyhncmFtbWFyKS5tYXAoXG4gICAgKFt0eXBlLCByeF0sIHdlaWdodCkgPT4gQXJyYXkuZnJvbShpbnB1dC5tYXRjaEFsbChyeCkpLm1hcCgoeyBpbmRleCwgMDogY29udGVudCB9KSA9PiAoe1xuICAgICAgdHlwZSxcbiAgICAgIHdlaWdodCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBpbmRleDogaW5kZXggIT0gbnVsbCA/IGluZGV4IDogMFxuICAgIH0pKVxuICApLmZsYXQoKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgZCA9IGEuaW5kZXggLSBiLmluZGV4O1xuICAgIHJldHVybiBkICE9PSAwID8gZCA6IGEud2VpZ2h0IC0gYi53ZWlnaHQ7XG4gIH0pLmZpbHRlcigoeyBpbmRleCB9LCBpLCBhcnIpID0+IHtcbiAgICBpZiAoaSA9PT0gMClcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IHByZXYgPSBhcnJbaSAtIDFdO1xuICAgIHJldHVybiBwcmV2LmluZGV4ICsgcHJldi5jb250ZW50Lmxlbmd0aCA8PSBpbmRleDtcbiAgfSk7XG4gIGNvbnN0IHRva2VucyA9IFtdO1xuICBsZXQgcG9zID0gMDtcbiAgZm9yIChjb25zdCB7IHR5cGUsIGNvbnRlbnQsIGluZGV4IH0gb2YgbWF0Y2hlcykge1xuICAgIGlmIChpbmRleCA+IHBvcylcbiAgICAgIHRva2Vucy5wdXNoKGlucHV0LnN1YnN0cmluZyhwb3MsIGluZGV4KSk7XG4gICAgdG9rZW5zLnB1c2goeyB0eXBlLCBjb250ZW50IH0pO1xuICAgIHBvcyA9IGluZGV4ICsgY29udGVudC5sZW5ndGg7XG4gIH1cbiAgaWYgKGlucHV0Lmxlbmd0aCA+IHBvcylcbiAgICB0b2tlbnMucHVzaChpbnB1dC5zdWJzdHJpbmcocG9zKSk7XG4gIHJldHVybiB0b2tlbnM7XG59XG5cbi8vIHNyYy9oZWxwZXIvZXZlbnRHcm91cHMudHNcbmltcG9ydCB7IFBhcnRpY2lwYW50RXZlbnQsIFJvb21FdmVudCB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xudmFyIGFsbFJlbW90ZVBhcnRpY2lwYW50Um9vbUV2ZW50cyA9IFtcbiAgUm9vbUV2ZW50LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQsXG4gIFJvb21FdmVudC5Sb29tTWV0YWRhdGFDaGFuZ2VkLFxuICBSb29tRXZlbnQuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkLFxuICBSb29tRXZlbnQuQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkLFxuICBSb29tRXZlbnQuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gIFJvb21FdmVudC5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgUm9vbUV2ZW50LlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkLFxuICBSb29tRXZlbnQuUGFydGljaXBhbnRNZXRhZGF0YUNoYW5nZWQsXG4gIFJvb21FdmVudC5UcmFja011dGVkLFxuICBSb29tRXZlbnQuVHJhY2tVbm11dGVkLFxuICBSb29tRXZlbnQuVHJhY2tQdWJsaXNoZWQsXG4gIFJvb21FdmVudC5UcmFja1VucHVibGlzaGVkLFxuICBSb29tRXZlbnQuVHJhY2tTdHJlYW1TdGF0ZUNoYW5nZWQsXG4gIFJvb21FdmVudC5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgUm9vbUV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uUGVybWlzc2lvbkNoYW5nZWQsXG4gIFJvb21FdmVudC5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWRcbl07XG52YXIgYWxsUGFydGljaXBhbnRSb29tRXZlbnRzID0gW1xuICAuLi5hbGxSZW1vdGVQYXJ0aWNpcGFudFJvb21FdmVudHMsXG4gIFJvb21FdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICBSb29tRXZlbnQuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dO1xudmFyIGFsbFJlbW90ZVBhcnRpY2lwYW50RXZlbnRzID0gW1xuICBQYXJ0aWNpcGFudEV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5Jc1NwZWFraW5nQ2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5QYXJ0aWNpcGFudE1ldGFkYXRhQ2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja011dGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrVW5tdXRlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1B1Ymxpc2hlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1VucHVibGlzaGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3RyZWFtU3RhdGVDaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uRmFpbGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uUGVybWlzc2lvbkNoYW5nZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tTdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXG5dO1xudmFyIGFsbFBhcnRpY2lwYW50RXZlbnRzID0gW1xuICAuLi5hbGxSZW1vdGVQYXJ0aWNpcGFudEV2ZW50cyxcbiAgUGFydGljaXBhbnRFdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZFxuXTtcblxuLy8gc3JjL2xvZ2dlci50c1xuaW1wb3J0IHtcbiAgc2V0TG9nTGV2ZWwgYXMgc2V0Q2xpZW50U2RrTG9nTGV2ZWwsXG4gIHNldExvZ0V4dGVuc2lvbiBhcyBzZXRDbGllbnRTZGtMb2dFeHRlbnNpb24sXG4gIExvZ0xldmVsIGFzIExvZ0xldmVsRW51bVxufSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCBsb2dsZXZlbCBmcm9tIFwibG9nbGV2ZWxcIjtcbnZhciBsb2cgPSBsb2dsZXZlbC5nZXRMb2dnZXIoXCJsay1jb21wb25lbnRzLWpzXCIpO1xubG9nLnNldERlZmF1bHRMZXZlbChcIldBUk5cIik7XG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgbG9nLnNldExldmVsKGxldmVsKTtcbiAgc2V0Q2xpZW50U2RrTG9nTGV2ZWwoKF9hID0gb3B0aW9ucy5saXZlS2l0Q2xpZW50TG9nTGV2ZWwpICE9IG51bGwgPyBfYSA6IGxldmVsKTtcbn1cbmZ1bmN0aW9uIHNldExvZ0V4dGVuc2lvbihleHRlbnNpb24sIG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IG9yaWdpbmFsRmFjdG9yeSA9IGxvZy5tZXRob2RGYWN0b3J5O1xuICBsb2cubWV0aG9kRmFjdG9yeSA9IChtZXRob2ROYW1lLCBjb25maWdMZXZlbCwgbG9nZ2VyTmFtZSkgPT4ge1xuICAgIGNvbnN0IHJhd01ldGhvZCA9IG9yaWdpbmFsRmFjdG9yeShtZXRob2ROYW1lLCBjb25maWdMZXZlbCwgbG9nZ2VyTmFtZSk7XG4gICAgY29uc3QgbG9nTGV2ZWwgPSBMb2dMZXZlbEVudW1bbWV0aG9kTmFtZV07XG4gICAgY29uc3QgbmVlZExvZyA9IGxvZ0xldmVsID49IGNvbmZpZ0xldmVsICYmIGxvZ0xldmVsIDwgTG9nTGV2ZWxFbnVtLnNpbGVudDtcbiAgICByZXR1cm4gKG1zZywgY29udGV4dCkgPT4ge1xuICAgICAgaWYgKGNvbnRleHQpXG4gICAgICAgIHJhd01ldGhvZChtc2csIGNvbnRleHQpO1xuICAgICAgZWxzZVxuICAgICAgICByYXdNZXRob2QobXNnKTtcbiAgICAgIGlmIChuZWVkTG9nKSB7XG4gICAgICAgIGV4dGVuc2lvbihsb2dMZXZlbCwgbXNnLCBjb250ZXh0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICBsb2cuc2V0TGV2ZWwobG9nLmdldExldmVsKCkpO1xuICBzZXRDbGllbnRTZGtMb2dFeHRlbnNpb24oKF9hID0gb3B0aW9ucy5saXZlS2l0Q2xpZW50TG9nRXh0ZW5zaW9uKSAhPSBudWxsID8gX2EgOiBleHRlbnNpb24pO1xufVxuXG4vLyBzcmMvaGVscGVyL2dyaWQtbGF5b3V0cy50c1xudmFyIEdSSURfTEFZT1VUUyA9IFtcbiAge1xuICAgIGNvbHVtbnM6IDEsXG4gICAgcm93czogMSxcbiAgICBuYW1lOiBcIjF4MVwiLFxuICAgIG1pblRpbGVzOiAxLFxuICAgIG1heFRpbGVzOiAxLFxuICAgIG1pbldpZHRoOiAwLFxuICAgIG1pbkhlaWdodDogMFxuICB9LFxuICB7XG4gICAgY29sdW1uczogMSxcbiAgICByb3dzOiAyLFxuICAgIG5hbWU6IFwiMXgyXCIsXG4gICAgbWluVGlsZXM6IDIsXG4gICAgbWF4VGlsZXM6IDIsXG4gICAgbWluV2lkdGg6IDAsXG4gICAgbWluSGVpZ2h0OiAwXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAyLFxuICAgIHJvd3M6IDEsXG4gICAgbmFtZTogXCIyeDFcIixcbiAgICBtaW5UaWxlczogMixcbiAgICBtYXhUaWxlczogMixcbiAgICBtaW5XaWR0aDogOTAwLFxuICAgIG1pbkhlaWdodDogMFxuICB9LFxuICB7XG4gICAgY29sdW1uczogMixcbiAgICByb3dzOiAyLFxuICAgIG5hbWU6IFwiMngyXCIsXG4gICAgbWluVGlsZXM6IDMsXG4gICAgbWF4VGlsZXM6IDQsXG4gICAgbWluV2lkdGg6IDU2MCxcbiAgICBtaW5IZWlnaHQ6IDBcbiAgfSxcbiAge1xuICAgIGNvbHVtbnM6IDMsXG4gICAgcm93czogMyxcbiAgICBuYW1lOiBcIjN4M1wiLFxuICAgIG1pblRpbGVzOiA1LFxuICAgIG1heFRpbGVzOiA5LFxuICAgIG1pbldpZHRoOiA3MDAsXG4gICAgbWluSGVpZ2h0OiAwXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiA0LFxuICAgIHJvd3M6IDQsXG4gICAgbmFtZTogXCI0eDRcIixcbiAgICBtaW5UaWxlczogMTAsXG4gICAgbWF4VGlsZXM6IDE2LFxuICAgIG1pbldpZHRoOiA5NjAsXG4gICAgbWluSGVpZ2h0OiAwXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiA1LFxuICAgIHJvd3M6IDUsXG4gICAgbmFtZTogXCI1eDVcIixcbiAgICBtaW5UaWxlczogMTcsXG4gICAgbWF4VGlsZXM6IDI1LFxuICAgIG1pbldpZHRoOiAxMTAwLFxuICAgIG1pbkhlaWdodDogMFxuICB9XG5dO1xuZnVuY3Rpb24gc2VsZWN0R3JpZExheW91dChsYXlvdXRzLCBwYXJ0aWNpcGFudENvdW50LCB3aWR0aCwgaGVpZ2h0KSB7XG4gIGxldCBjdXJyZW50TGF5b3V0SW5kZXggPSAwO1xuICBsZXQgbGF5b3V0ID0gbGF5b3V0cy5maW5kKChsYXlvdXRfLCBpbmRleCwgYWxsTGF5b3V0cykgPT4ge1xuICAgIGN1cnJlbnRMYXlvdXRJbmRleCA9IGluZGV4O1xuICAgIGNvbnN0IGlzQmlnZ2VyTGF5b3V0QXZhaWxhYmxlID0gYWxsTGF5b3V0cy5maW5kSW5kZXgoKGwsIGkpID0+IHtcbiAgICAgIGNvbnN0IGxheW91dElzQmlnZ2VyVGhhbkN1cnJlbnQgPSBpID4gaW5kZXg7XG4gICAgICBjb25zdCBsYXlvdXRGaXRzU2FtZUFtb3VudE9mUGFydGljaXBhbnRzID0gbC5tYXhUaWxlcyA9PT0gbGF5b3V0Xy5tYXhUaWxlcztcbiAgICAgIHJldHVybiBsYXlvdXRJc0JpZ2dlclRoYW5DdXJyZW50ICYmIGxheW91dEZpdHNTYW1lQW1vdW50T2ZQYXJ0aWNpcGFudHM7XG4gICAgfSkgIT09IC0xO1xuICAgIHJldHVybiBsYXlvdXRfLm1heFRpbGVzID49IHBhcnRpY2lwYW50Q291bnQgJiYgIWlzQmlnZ2VyTGF5b3V0QXZhaWxhYmxlO1xuICB9KTtcbiAgaWYgKGxheW91dCA9PT0gdm9pZCAwKSB7XG4gICAgbGF5b3V0ID0gbGF5b3V0c1tsYXlvdXRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChsYXlvdXQpIHtcbiAgICAgIGxvZy53YXJuKFxuICAgICAgICBgTm8gbGF5b3V0IGZvdW5kIGZvcjogcGFydGljaXBhbnRDb3VudDogJHtwYXJ0aWNpcGFudENvdW50fSwgd2lkdGgvaGVpZ2h0OiAke3dpZHRofS8ke2hlaWdodH0gZmFsbGJhY2sgdG8gYmlnZ2VzdCBhdmFpbGFibGUgbGF5b3V0ICgke2xheW91dC5uYW1lfSkuYFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBsYXlvdXQgb3IgZmFsbGJhY2sgbGF5b3V0IGZvdW5kLmApO1xuICAgIH1cbiAgfVxuICBpZiAod2lkdGggPCBsYXlvdXQubWluV2lkdGggfHwgaGVpZ2h0IDwgbGF5b3V0Lm1pbkhlaWdodCkge1xuICAgIGlmIChjdXJyZW50TGF5b3V0SW5kZXggPiAwKSB7XG4gICAgICBjb25zdCBzbWFsbGVyTGF5b3V0ID0gbGF5b3V0c1tjdXJyZW50TGF5b3V0SW5kZXggLSAxXTtcbiAgICAgIGxheW91dCA9IHNlbGVjdEdyaWRMYXlvdXQoXG4gICAgICAgIGxheW91dHMuc2xpY2UoMCwgY3VycmVudExheW91dEluZGV4KSxcbiAgICAgICAgc21hbGxlckxheW91dC5tYXhUaWxlcyxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxheW91dDtcbn1cblxuLy8gc3JjL2hlbHBlci9zZXQtaGVscGVyLnRzXG5mdW5jdGlvbiBzZXREaWZmZXJlbmNlKHNldEEsIHNldEIpIHtcbiAgY29uc3QgX2RpZmZlcmVuY2UgPSBuZXcgU2V0KHNldEEpO1xuICBmb3IgKGNvbnN0IGVsZW0gb2Ygc2V0Qikge1xuICAgIF9kaWZmZXJlbmNlLmRlbGV0ZShlbGVtKTtcbiAgfVxuICByZXR1cm4gX2RpZmZlcmVuY2U7XG59XG5cbi8vIHNyYy9oZWxwZXIvZmVhdHVyZURldGVjdGlvbi50c1xuZnVuY3Rpb24gc3VwcG9ydHNTY3JlZW5TaGFyaW5nKCkge1xuICByZXR1cm4gdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmICEhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE7XG59XG5cbi8vIHNyYy90eXBlcy50c1xudmFyIFBJTl9ERUZBVUxUX1NUQVRFID0gW107XG52YXIgV0lER0VUX0RFRkFVTFRfU1RBVEUgPSB7IHNob3dDaGF0OiBmYWxzZSwgdW5yZWFkTWVzc2FnZXM6IDAgfTtcbmZ1bmN0aW9uIGlzU291cmNlV2l0T3B0aW9ucyhzb3VyY2UpIHtcbiAgcmV0dXJuIHR5cGVvZiBzb3VyY2UgPT09IFwib2JqZWN0XCI7XG59XG5mdW5jdGlvbiBpc1NvdXJjZXNXaXRoT3B0aW9ucyhzb3VyY2VzKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHNvdXJjZXMpICYmIHNvdXJjZXMuZmlsdGVyKGlzU291cmNlV2l0T3B0aW9ucykubGVuZ3RoID4gMDtcbn1cblxuLy8gc3JjL3NvcnRpbmcvc29ydC10cmFjay1idW5kbGVzLnRzXG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazIgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcblxuLy8gc3JjL3NvcnRpbmcvYmFzZS1zb3J0LWZ1bmN0aW9ucy50c1xuaW1wb3J0IHsgVHJhY2sgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIHNvcnRQYXJ0aWNpcGFudHNCeUF1ZGlvTGV2ZWwoYSwgYikge1xuICByZXR1cm4gYi5hdWRpb0xldmVsIC0gYS5hdWRpb0xldmVsO1xufVxuZnVuY3Rpb24gc29ydFBhcnRpY2lwYW50c0J5SXNTcGVha2luZyhhLCBiKSB7XG4gIGlmIChhLmlzU3BlYWtpbmcgPT09IGIuaXNTcGVha2luZykge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhLmlzU3BlYWtpbmcgPyAtMSA6IDE7XG4gIH1cbn1cbmZ1bmN0aW9uIHNvcnRQYXJ0aWNpcGFudHNCeUxhc3RTcG9rZW5BVChhLCBiKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgaWYgKGEubGFzdFNwb2tlQXQgIT09IHZvaWQgMCB8fCBiLmxhc3RTcG9rZUF0ICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gKChfYiA9IChfYSA9IGIubGFzdFNwb2tlQXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5nZXRUaW1lKCkpICE9IG51bGwgPyBfYiA6IDApIC0gKChfZCA9IChfYyA9IGEubGFzdFNwb2tlQXQpID09IG51bGwgPyB2b2lkIDAgOiBfYy5nZXRUaW1lKCkpICE9IG51bGwgPyBfZCA6IDApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5mdW5jdGlvbiBzb3J0UGFydGljaXBhbnRzQnlKb2luZWRBdChhLCBiKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgcmV0dXJuICgoX2IgPSAoX2EgPSBhLmpvaW5lZEF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuZ2V0VGltZSgpKSAhPSBudWxsID8gX2IgOiAwKSAtICgoX2QgPSAoX2MgPSBiLmpvaW5lZEF0KSA9PSBudWxsID8gdm9pZCAwIDogX2MuZ2V0VGltZSgpKSAhPSBudWxsID8gX2QgOiAwKTtcbn1cbmZ1bmN0aW9uIHNvcnRUcmFja1JlZmVyZW5jZXNCeVR5cGUoYSwgYikge1xuICBpZiAoaXNUcmFja1JlZmVyZW5jZShhKSkge1xuICAgIGlmIChpc1RyYWNrUmVmZXJlbmNlKGIpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc1RyYWNrUmVmZXJlbmNlKGIpKSB7XG4gICAgcmV0dXJuIDE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cbmZ1bmN0aW9uIHNvcnRUcmFja1JlZnNCeUlzQ2FtZXJhRW5hYmxlZChhLCBiKSB7XG4gIGNvbnN0IGFWaWRlbyA9IGEucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkO1xuICBjb25zdCBiVmlkZW8gPSBiLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZDtcbiAgaWYgKGFWaWRlbyAhPT0gYlZpZGVvKSB7XG4gICAgaWYgKGFWaWRlbykge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cblxuLy8gc3JjL3NvcnRpbmcvc29ydC10cmFjay1idW5kbGVzLnRzXG5mdW5jdGlvbiBzb3J0VHJhY2tSZWZlcmVuY2VzKHRyYWNrcykge1xuICBjb25zdCBsb2NhbFRyYWNrcyA9IFtdO1xuICBjb25zdCBzY3JlZW5TaGFyZVRyYWNrcyA9IFtdO1xuICBjb25zdCBjYW1lcmFUcmFja3MgPSBbXTtcbiAgY29uc3QgdW5kZWZpbmVkVHJhY2tzID0gW107XG4gIHRyYWNrcy5mb3JFYWNoKCh0cmFja1JlZikgPT4ge1xuICAgIGlmICh0cmFja1JlZi5wYXJ0aWNpcGFudC5pc0xvY2FsICYmIHRyYWNrUmVmLnNvdXJjZSA9PT0gVHJhY2syLlNvdXJjZS5DYW1lcmEpIHtcbiAgICAgIGxvY2FsVHJhY2tzLnB1c2godHJhY2tSZWYpO1xuICAgIH0gZWxzZSBpZiAodHJhY2tSZWYuc291cmNlID09PSBUcmFjazIuU291cmNlLlNjcmVlblNoYXJlKSB7XG4gICAgICBzY3JlZW5TaGFyZVRyYWNrcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9IGVsc2UgaWYgKHRyYWNrUmVmLnNvdXJjZSA9PT0gVHJhY2syLlNvdXJjZS5DYW1lcmEpIHtcbiAgICAgIGNhbWVyYVRyYWNrcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5kZWZpbmVkVHJhY2tzLnB1c2godHJhY2tSZWYpO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHNvcnRlZFNjcmVlblNoYXJlVHJhY2tzID0gc29ydFNjcmVlblNoYXJlVHJhY2tzKHNjcmVlblNoYXJlVHJhY2tzKTtcbiAgY29uc3Qgc29ydGVkQ2FtZXJhVHJhY2tzID0gc29ydENhbWVyYVRyYWNrcyhjYW1lcmFUcmFja3MpO1xuICByZXR1cm4gWy4uLmxvY2FsVHJhY2tzLCAuLi5zb3J0ZWRTY3JlZW5TaGFyZVRyYWNrcywgLi4uc29ydGVkQ2FtZXJhVHJhY2tzLCAuLi51bmRlZmluZWRUcmFja3NdO1xufVxuZnVuY3Rpb24gc29ydFNjcmVlblNoYXJlVHJhY2tzKHNjcmVlblNoYXJlVHJhY2tzKSB7XG4gIGNvbnN0IGxvY2FsU2NyZWVuU2hhcmVzID0gW107XG4gIGNvbnN0IHJlbW90ZVNjcmVlblNoYXJlcyA9IFtdO1xuICBzY3JlZW5TaGFyZVRyYWNrcy5mb3JFYWNoKCh0cmFja1JlZikgPT4ge1xuICAgIGlmICh0cmFja1JlZi5wYXJ0aWNpcGFudC5pc0xvY2FsKSB7XG4gICAgICBsb2NhbFNjcmVlblNoYXJlcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3RlU2NyZWVuU2hhcmVzLnB1c2godHJhY2tSZWYpO1xuICAgIH1cbiAgfSk7XG4gIGxvY2FsU2NyZWVuU2hhcmVzLnNvcnQoKGEsIGIpID0+IHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpKTtcbiAgcmVtb3RlU2NyZWVuU2hhcmVzLnNvcnQoKGEsIGIpID0+IHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpKTtcbiAgY29uc3Qgc29ydGVkU2NyZWVuU2hhcmVUcmFja1JlZnMgPSBbLi4ucmVtb3RlU2NyZWVuU2hhcmVzLCAuLi5sb2NhbFNjcmVlblNoYXJlc107XG4gIHJldHVybiBzb3J0ZWRTY3JlZW5TaGFyZVRyYWNrUmVmcztcbn1cbmZ1bmN0aW9uIHNvcnRDYW1lcmFUcmFja3MoY2FtZXJhVHJhY2tSZWZlcmVuY2VzKSB7XG4gIGNvbnN0IGxvY2FsQ2FtZXJhVHJhY2tzID0gW107XG4gIGNvbnN0IHJlbW90ZUNhbWVyYVRyYWNrcyA9IFtdO1xuICBjYW1lcmFUcmFja1JlZmVyZW5jZXMuZm9yRWFjaCgodHJhY2tSZWYpID0+IHtcbiAgICBpZiAodHJhY2tSZWYucGFydGljaXBhbnQuaXNMb2NhbCkge1xuICAgICAgbG9jYWxDYW1lcmFUcmFja3MucHVzaCh0cmFja1JlZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW90ZUNhbWVyYVRyYWNrcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9XG4gIH0pO1xuICByZW1vdGVDYW1lcmFUcmFja3Muc29ydCgoYSwgYikgPT4ge1xuICAgIGlmIChhLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcgJiYgYi5wYXJ0aWNpcGFudC5pc1NwZWFraW5nKSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5QXVkaW9MZXZlbChhLnBhcnRpY2lwYW50LCBiLnBhcnRpY2lwYW50KTtcbiAgICB9XG4gICAgaWYgKGEucGFydGljaXBhbnQuaXNTcGVha2luZyAhPT0gYi5wYXJ0aWNpcGFudC5pc1NwZWFraW5nKSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5SXNTcGVha2luZyhhLnBhcnRpY2lwYW50LCBiLnBhcnRpY2lwYW50KTtcbiAgICB9XG4gICAgaWYgKGEucGFydGljaXBhbnQubGFzdFNwb2tlQXQgIT09IGIucGFydGljaXBhbnQubGFzdFNwb2tlQXQpIHtcbiAgICAgIHJldHVybiBzb3J0UGFydGljaXBhbnRzQnlMYXN0U3Bva2VuQVQoYS5wYXJ0aWNpcGFudCwgYi5wYXJ0aWNpcGFudCk7XG4gICAgfVxuICAgIGlmIChpc1RyYWNrUmVmZXJlbmNlKGEpICE9PSBpc1RyYWNrUmVmZXJlbmNlKGIpKSB7XG4gICAgICByZXR1cm4gc29ydFRyYWNrUmVmZXJlbmNlc0J5VHlwZShhLCBiKTtcbiAgICB9XG4gICAgaWYgKGEucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkICE9PSBiLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCkge1xuICAgICAgcmV0dXJuIHNvcnRUcmFja1JlZnNCeUlzQ2FtZXJhRW5hYmxlZChhLCBiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpO1xuICB9KTtcbiAgcmV0dXJuIFsuLi5sb2NhbENhbWVyYVRyYWNrcywgLi4ucmVtb3RlQ2FtZXJhVHJhY2tzXTtcbn1cblxuLy8gc3JjL3NvcnRpbmcvc29ydC1wYXJ0aWNpcGFudHMudHNcbmltcG9ydCB7IExvY2FsUGFydGljaXBhbnQgYXMgTG9jYWxQYXJ0aWNpcGFudDIgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIHNvcnRQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKSB7XG4gIGNvbnN0IHNvcnRlZFBhcnRpY2lwYW50cyA9IFsuLi5wYXJ0aWNpcGFudHNdO1xuICBzb3J0ZWRQYXJ0aWNpcGFudHMuc29ydCgoYSwgYikgPT4ge1xuICAgIGlmIChhLmlzU3BlYWtpbmcgJiYgYi5pc1NwZWFraW5nKSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5QXVkaW9MZXZlbChhLCBiKTtcbiAgICB9XG4gICAgaWYgKGEuaXNTcGVha2luZyAhPT0gYi5pc1NwZWFraW5nKSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5SXNTcGVha2luZyhhLCBiKTtcbiAgICB9XG4gICAgaWYgKGEubGFzdFNwb2tlQXQgIT09IGIubGFzdFNwb2tlQXQpIHtcbiAgICAgIHJldHVybiBzb3J0UGFydGljaXBhbnRzQnlMYXN0U3Bva2VuQVQoYSwgYik7XG4gICAgfVxuICAgIGNvbnN0IGFWaWRlbyA9IGEudmlkZW9UcmFja3Muc2l6ZSA+IDA7XG4gICAgY29uc3QgYlZpZGVvID0gYi52aWRlb1RyYWNrcy5zaXplID4gMDtcbiAgICBpZiAoYVZpZGVvICE9PSBiVmlkZW8pIHtcbiAgICAgIGlmIChhVmlkZW8pIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzb3J0UGFydGljaXBhbnRzQnlKb2luZWRBdChhLCBiKTtcbiAgfSk7XG4gIGNvbnN0IGxvY2FsUGFydGljaXBhbnQgPSBzb3J0ZWRQYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcCBpbnN0YW5jZW9mIExvY2FsUGFydGljaXBhbnQyKTtcbiAgaWYgKGxvY2FsUGFydGljaXBhbnQpIHtcbiAgICBjb25zdCBsb2NhbElkeCA9IHNvcnRlZFBhcnRpY2lwYW50cy5pbmRleE9mKGxvY2FsUGFydGljaXBhbnQpO1xuICAgIGlmIChsb2NhbElkeCA+PSAwKSB7XG4gICAgICBzb3J0ZWRQYXJ0aWNpcGFudHMuc3BsaWNlKGxvY2FsSWR4LCAxKTtcbiAgICAgIGlmIChzb3J0ZWRQYXJ0aWNpcGFudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBzb3J0ZWRQYXJ0aWNpcGFudHMuc3BsaWNlKDAsIDAsIGxvY2FsUGFydGljaXBhbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc29ydGVkUGFydGljaXBhbnRzLnB1c2gobG9jYWxQYXJ0aWNpcGFudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBzb3J0ZWRQYXJ0aWNpcGFudHM7XG59XG5cbi8vIHNyYy9oZWxwZXIvYXJyYXktaGVscGVyLnRzXG5mdW5jdGlvbiBjaHVuayhpbnB1dCwgc2l6ZSkge1xuICByZXR1cm4gaW5wdXQucmVkdWNlKFxuICAgIChhcnIsIGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmV0dXJuIGlkeCAlIHNpemUgPT09IDAgPyBbLi4uYXJyLCBbaXRlbV1dIDogWy4uLmFyci5zbGljZSgwLCAtMSksIFsuLi5hcnIuc2xpY2UoLTEpWzBdLCBpdGVtXV07XG4gICAgfSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gemlwKGExLCBhMikge1xuICBjb25zdCByZXN1bHRMZW5ndGggPSBNYXRoLm1heChhMS5sZW5ndGgsIGEyLmxlbmd0aCk7XG4gIHJldHVybiBuZXcgQXJyYXkocmVzdWx0TGVuZ3RoKS5maWxsKFtdKS5tYXAoKF92YWwsIGlkeCkgPT4gW2ExW2lkeF0sIGEyW2lkeF1dKTtcbn1cbmZ1bmN0aW9uIGRpZmZlcmVuY2VCeShhMSwgYTIsIGJ5KSB7XG4gIHJldHVybiBhMS5maWx0ZXIoKGMpID0+ICFhMi5tYXAoKHYpID0+IGJ5KHYpKS5pbmNsdWRlcyhieShjKSkpO1xufVxuXG4vLyBzcmMvdHJhY2stcmVmZXJlbmNlL3Rlc3QtdXRpbHMudHNcbmltcG9ydCB7IFBhcnRpY2lwYW50LCBUcmFjayBhcyBUcmFjazMsIFRyYWNrUHVibGljYXRpb24gfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIGZsYXRUcmFja1JlZmVyZW5jZUFycmF5KGxpc3QpIHtcbiAgcmV0dXJuIGxpc3QubWFwKChpdGVtKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBpdGVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gYCR7aXRlbX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0VHJhY2tSZWZlcmVuY2VJZChpdGVtKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBzcmMvc29ydGluZy90aWxlLWFycmF5LXVwZGF0ZS50c1xuZnVuY3Rpb24gdmlzdWFsUGFnZUNoYW5nZShzdGF0ZSwgbmV4dCkge1xuICByZXR1cm4ge1xuICAgIGRyb3BwZWQ6IGRpZmZlcmVuY2VCeShzdGF0ZSwgbmV4dCwgZ2V0VHJhY2tSZWZlcmVuY2VJZCksXG4gICAgYWRkZWQ6IGRpZmZlcmVuY2VCeShuZXh0LCBzdGF0ZSwgZ2V0VHJhY2tSZWZlcmVuY2VJZClcbiAgfTtcbn1cbmZ1bmN0aW9uIGxpc3ROZWVkc1VwZGF0aW5nKGNoYW5nZXMpIHtcbiAgcmV0dXJuIGNoYW5nZXMuYWRkZWQubGVuZ3RoICE9PSAwIHx8IGNoYW5nZXMuZHJvcHBlZC5sZW5ndGggIT09IDA7XG59XG5mdW5jdGlvbiBmaW5kSW5kZXgodHJhY2tSZWZlcmVuY2UsIHRyYWNrUmVmZXJlbmNlcykge1xuICBjb25zdCBpbmRleFRvUmVwbGFjZSA9IHRyYWNrUmVmZXJlbmNlcy5maW5kSW5kZXgoXG4gICAgKHRyYWNrUmVmZXJlbmNlXykgPT4gZ2V0VHJhY2tSZWZlcmVuY2VJZCh0cmFja1JlZmVyZW5jZV8pID09PSBnZXRUcmFja1JlZmVyZW5jZUlkKHRyYWNrUmVmZXJlbmNlKVxuICApO1xuICBpZiAoaW5kZXhUb1JlcGxhY2UgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEVsZW1lbnQgbm90IHBhcnQgb2YgdGhlIGFycmF5OiAke2dldFRyYWNrUmVmZXJlbmNlSWQoXG4gICAgICAgIHRyYWNrUmVmZXJlbmNlXG4gICAgICApfSBub3QgaW4gJHtmbGF0VHJhY2tSZWZlcmVuY2VBcnJheSh0cmFja1JlZmVyZW5jZXMpfWBcbiAgICApO1xuICB9XG4gIHJldHVybiBpbmRleFRvUmVwbGFjZTtcbn1cbmZ1bmN0aW9uIHN3YXBJdGVtcyhtb3ZlRm9yd2FyZCwgbW92ZUJhY2ssIHRyYWNrUmVmZXJlbmNlcykge1xuICBjb25zdCBpbmRleFRvUmVwbGFjZSA9IGZpbmRJbmRleChtb3ZlRm9yd2FyZCwgdHJhY2tSZWZlcmVuY2VzKTtcbiAgY29uc3QgaW5kZXhSZXBsYWNlV2l0aCA9IGZpbmRJbmRleChtb3ZlQmFjaywgdHJhY2tSZWZlcmVuY2VzKTtcbiAgdHJhY2tSZWZlcmVuY2VzLnNwbGljZShpbmRleFRvUmVwbGFjZSwgMSwgbW92ZUJhY2spO1xuICB0cmFja1JlZmVyZW5jZXMuc3BsaWNlKGluZGV4UmVwbGFjZVdpdGgsIDEsIG1vdmVGb3J3YXJkKTtcbiAgcmV0dXJuIHRyYWNrUmVmZXJlbmNlcztcbn1cbmZ1bmN0aW9uIGRyb3BJdGVtKGl0ZW1Ub0Ryb3AsIGxpc3QpIHtcbiAgY29uc3QgaW5kZXhPZkVsZW1lbnRUb0Ryb3AgPSBmaW5kSW5kZXgoaXRlbVRvRHJvcCwgbGlzdCk7XG4gIGxpc3Quc3BsaWNlKGluZGV4T2ZFbGVtZW50VG9Ecm9wLCAxKTtcbiAgcmV0dXJuIGxpc3Q7XG59XG5mdW5jdGlvbiBhZGRJdGVtKGl0ZW1Ub0FkZCwgbGlzdCkge1xuICByZXR1cm4gWy4uLmxpc3QsIGl0ZW1Ub0FkZF07XG59XG5mdW5jdGlvbiBkaXZpZGVJbnRvUGFnZXMobGlzdCwgbWF4RWxlbWVudHNPblBhZ2UpIHtcbiAgY29uc3QgcGFnZXMgPSBjaHVuayhsaXN0LCBtYXhFbGVtZW50c09uUGFnZSk7XG4gIHJldHVybiBwYWdlcztcbn1cbmZ1bmN0aW9uIHVwZGF0ZVBhZ2VzKGN1cnJlbnRMaXN0LCBuZXh0TGlzdCwgbWF4SXRlbXNPblBhZ2UpIHtcbiAgbGV0IHVwZGF0ZWRMaXN0ID0gcmVmcmVzaExpc3QoY3VycmVudExpc3QsIG5leHRMaXN0KTtcbiAgaWYgKHVwZGF0ZWRMaXN0Lmxlbmd0aCA8IG5leHRMaXN0Lmxlbmd0aCkge1xuICAgIGNvbnN0IGFkZGVkSXRlbXMgPSBkaWZmZXJlbmNlQnkobmV4dExpc3QsIHVwZGF0ZWRMaXN0LCBnZXRUcmFja1JlZmVyZW5jZUlkKTtcbiAgICB1cGRhdGVkTGlzdCA9IFsuLi51cGRhdGVkTGlzdCwgLi4uYWRkZWRJdGVtc107XG4gIH1cbiAgY29uc3QgY3VycmVudFBhZ2VzID0gZGl2aWRlSW50b1BhZ2VzKHVwZGF0ZWRMaXN0LCBtYXhJdGVtc09uUGFnZSk7XG4gIGNvbnN0IG5leHRQYWdlcyA9IGRpdmlkZUludG9QYWdlcyhuZXh0TGlzdCwgbWF4SXRlbXNPblBhZ2UpO1xuICB6aXAoY3VycmVudFBhZ2VzLCBuZXh0UGFnZXMpLmZvckVhY2goKFtjdXJyZW50UGFnZSwgbmV4dFBhZ2VdLCBwYWdlSW5kZXgpID0+IHtcbiAgICBpZiAoY3VycmVudFBhZ2UgJiYgbmV4dFBhZ2UpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQYWdlID0gZGl2aWRlSW50b1BhZ2VzKHVwZGF0ZWRMaXN0LCBtYXhJdGVtc09uUGFnZSlbcGFnZUluZGV4XTtcbiAgICAgIGNvbnN0IGNoYW5nZXMgPSB2aXN1YWxQYWdlQ2hhbmdlKHVwZGF0ZWRQYWdlLCBuZXh0UGFnZSk7XG4gICAgICBpZiAobGlzdE5lZWRzVXBkYXRpbmcoY2hhbmdlcykpIHtcbiAgICAgICAgbG9nLmRlYnVnKFxuICAgICAgICAgIGBEZXRlY3RlZCB2aXN1YWwgY2hhbmdlcyBvbiBwYWdlOiAke3BhZ2VJbmRleH0sIGN1cnJlbnQ6ICR7ZmxhdFRyYWNrUmVmZXJlbmNlQXJyYXkoXG4gICAgICAgICAgICBjdXJyZW50UGFnZVxuICAgICAgICAgICl9LCBuZXh0OiAke2ZsYXRUcmFja1JlZmVyZW5jZUFycmF5KG5leHRQYWdlKX1gLFxuICAgICAgICAgIHsgY2hhbmdlcyB9XG4gICAgICAgICk7XG4gICAgICAgIGlmIChjaGFuZ2VzLmFkZGVkLmxlbmd0aCA9PT0gY2hhbmdlcy5kcm9wcGVkLmxlbmd0aCkge1xuICAgICAgICAgIHppcChjaGFuZ2VzLmFkZGVkLCBjaGFuZ2VzLmRyb3BwZWQpLmZvckVhY2goKFthZGRlZCwgZHJvcHBlZF0pID0+IHtcbiAgICAgICAgICAgIGlmIChhZGRlZCAmJiBkcm9wcGVkKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZWRMaXN0ID0gc3dhcEl0ZW1zKGFkZGVkLCBkcm9wcGVkLCB1cGRhdGVkTGlzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYEZvciBhIHN3YXAgYWN0aW9uIHdlIG5lZWQgYSBhZGRpdGlvbiBhbmQgYSByZW1vdmFsIG9uZSBpcyBtaXNzaW5nOiAke2FkZGVkfSwgJHtkcm9wcGVkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlcy5hZGRlZC5sZW5ndGggPT09IDAgJiYgY2hhbmdlcy5kcm9wcGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjaGFuZ2VzLmRyb3BwZWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlZExpc3QgPSBkcm9wSXRlbShpdGVtLCB1cGRhdGVkTGlzdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZXMuYWRkZWQubGVuZ3RoID4gMCAmJiBjaGFuZ2VzLmRyb3BwZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgY2hhbmdlcy5hZGRlZC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVkTGlzdCA9IGFkZEl0ZW0oaXRlbSwgdXBkYXRlZExpc3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKHVwZGF0ZWRMaXN0Lmxlbmd0aCA+IG5leHRMaXN0Lmxlbmd0aCkge1xuICAgIGNvbnN0IG1pc3NpbmdJdGVtcyA9IGRpZmZlcmVuY2VCeSh1cGRhdGVkTGlzdCwgbmV4dExpc3QsIGdldFRyYWNrUmVmZXJlbmNlSWQpO1xuICAgIHVwZGF0ZWRMaXN0ID0gdXBkYXRlZExpc3QuZmlsdGVyKFxuICAgICAgKGl0ZW0pID0+ICFtaXNzaW5nSXRlbXMubWFwKGdldFRyYWNrUmVmZXJlbmNlSWQpLmluY2x1ZGVzKGdldFRyYWNrUmVmZXJlbmNlSWQoaXRlbSkpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdXBkYXRlZExpc3Q7XG59XG5mdW5jdGlvbiByZWZyZXNoTGlzdChjdXJyZW50TGlzdCwgbmV4dExpc3QpIHtcbiAgcmV0dXJuIGN1cnJlbnRMaXN0Lm1hcCgoY3VycmVudEl0ZW0pID0+IHtcbiAgICBjb25zdCB1cGRhdGVGb3JDdXJyZW50SXRlbSA9IG5leHRMaXN0LmZpbmQoXG4gICAgICAobmV3SXRlbV8pID0+IChcbiAgICAgICAgLy8gSWYgdGhlIElEcyBtYXRjaCBvciAuLlxuICAgICAgICBnZXRUcmFja1JlZmVyZW5jZUlkKGN1cnJlbnRJdGVtKSA9PT0gZ2V0VHJhY2tSZWZlcmVuY2VJZChuZXdJdGVtXykgfHwgLy8gLi4uIGlmIHRoZSBjdXJyZW50IGl0ZW0gaXMgYSBwbGFjZWhvbGRlciBhbmQgdGhlIG5ldyBpdGVtIGlzIHRoZSB0cmFjayByZWZlcmVuY2UgY2FuIHJlcGxhY2UgaXQuXG4gICAgICAgIHR5cGVvZiBjdXJyZW50SXRlbSAhPT0gXCJudW1iZXJcIiAmJiBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIoY3VycmVudEl0ZW0pICYmIGlzVHJhY2tSZWZlcmVuY2UobmV3SXRlbV8pICYmIGlzUGxhY2Vob2xkZXJSZXBsYWNlbWVudChjdXJyZW50SXRlbSwgbmV3SXRlbV8pXG4gICAgICApXG4gICAgKTtcbiAgICByZXR1cm4gdXBkYXRlRm9yQ3VycmVudEl0ZW0gIT0gbnVsbCA/IHVwZGF0ZUZvckN1cnJlbnRJdGVtIDogY3VycmVudEl0ZW07XG4gIH0pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9tZWRpYVRvZ2dsZS50c1xuaW1wb3J0IHsgVHJhY2sgYXMgVHJhY2s3IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBTdWJqZWN0IGFzIFN1YmplY3QyLCBtYXAgYXMgbWFwNCwgc3RhcnRXaXRoIGFzIHN0YXJ0V2l0aDQgfSBmcm9tIFwicnhqc1wiO1xuXG4vLyBzcmMvb2JzZXJ2YWJsZXMvcGFydGljaXBhbnQudHNcbmltcG9ydCB7IFBhcnRpY2lwYW50RXZlbnQgYXMgUGFydGljaXBhbnRFdmVudDIsIFJvb21FdmVudCBhcyBSb29tRXZlbnQzLCBUcmFjayBhcyBUcmFjazYgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCB7IG1hcCBhcyBtYXAzLCBzd2l0Y2hNYXAsIE9ic2VydmFibGUgYXMgT2JzZXJ2YWJsZTIsIHN0YXJ0V2l0aCBhcyBzdGFydFdpdGgzIH0gZnJvbSBcInJ4anNcIjtcblxuLy8gc3JjL29ic2VydmFibGVzL3Jvb20udHNcbmltcG9ydCB7IFN1YmplY3QsIG1hcCwgT2JzZXJ2YWJsZSwgc3RhcnRXaXRoLCBmaW5hbGl6ZSwgZmlsdGVyLCBjb25jYXQgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgTG9jYWxQYXJ0aWNpcGFudCBhcyBMb2NhbFBhcnRpY2lwYW50MywgUm9vbSwgUm9vbUV2ZW50IGFzIFJvb21FdmVudDIsIFRyYWNrIGFzIFRyYWNrNCB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gb2JzZXJ2ZVJvb21FdmVudHMocm9vbSwgLi4uZXZlbnRzKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlKSA9PiB7XG4gICAgY29uc3Qgb25Sb29tVXBkYXRlID0gKCkgPT4ge1xuICAgICAgc3Vic2NyaWJlLm5leHQocm9vbSk7XG4gICAgfTtcbiAgICBldmVudHMuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICByb29tLm9uKGV2dCwgb25Sb29tVXBkYXRlKTtcbiAgICB9KTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgIGV2ZW50cy5mb3JFYWNoKChldnQpID0+IHtcbiAgICAgICAgcm9vbS5vZmYoZXZ0LCBvblJvb21VcGRhdGUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pLnBpcGUoc3RhcnRXaXRoKHJvb20pKTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBldmVudCkge1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICguLi5wYXJhbXMpID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHBhcmFtcyk7XG4gICAgfTtcbiAgICByb29tLm9uKGV2ZW50LCB1cGRhdGUpO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gKCkgPT4ge1xuICAgICAgcm9vbS5vZmYoZXZlbnQsIHVwZGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIHJvb21PYnNlcnZlcihyb29tKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUm9vbUV2ZW50cyhcbiAgICByb29tLFxuICAgIFJvb21FdmVudDIuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgUm9vbUV2ZW50Mi5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICBSb29tRXZlbnQyLkFjdGl2ZVNwZWFrZXJzQ2hhbmdlZCxcbiAgICBSb29tRXZlbnQyLlRyYWNrU3Vic2NyaWJlZCxcbiAgICBSb29tRXZlbnQyLlRyYWNrVW5zdWJzY3JpYmVkLFxuICAgIFJvb21FdmVudDIuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICBSb29tRXZlbnQyLkxvY2FsVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICBSb29tRXZlbnQyLkF1ZGlvUGxheWJhY2tTdGF0dXNDaGFuZ2VkLFxuICAgIFJvb21FdmVudDIuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZFxuICApLnBpcGUoc3RhcnRXaXRoKHJvb20pKTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiBjb25uZWN0aW9uU3RhdGVPYnNlcnZlcihyb29tKSB7XG4gIHJldHVybiByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQpLnBpcGUoXG4gICAgbWFwKChbY29ubmVjdGlvblN0YXRlXSkgPT4gY29ubmVjdGlvblN0YXRlKSxcbiAgICBzdGFydFdpdGgocm9vbS5zdGF0ZSlcbiAgKTtcbn1cbmZ1bmN0aW9uIHNjcmVlblNoYXJlT2JzZXJ2ZXIocm9vbSkge1xuICBsZXQgc2NyZWVuU2hhcmVTdWJzY3JpYmVyO1xuICBjb25zdCBvYnNlcnZlcnMgPSBbXTtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKChzdWJzY3JpYmVyKSA9PiB7XG4gICAgc2NyZWVuU2hhcmVTdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgb2JzZXJ2ZXJzLmZvckVhY2goKG9ic2VydmVyKSA9PiB7XG4gICAgICAgIG9ic2VydmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcbiAgY29uc3Qgc2NyZWVuU2hhcmVUcmFja3MgPSBbXTtcbiAgY29uc3QgaGFuZGxlU3ViID0gKHB1YmxpY2F0aW9uLCBwYXJ0aWNpcGFudCkgPT4ge1xuICAgIGlmIChwdWJsaWNhdGlvbi5zb3VyY2UgIT09IFRyYWNrNC5Tb3VyY2UuU2NyZWVuU2hhcmUgJiYgcHVibGljYXRpb24uc291cmNlICE9PSBUcmFjazQuU291cmNlLlNjcmVlblNoYXJlQXVkaW8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHRyYWNrTWFwID0gc2NyZWVuU2hhcmVUcmFja3MuZmluZCgodHIpID0+IHRyLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBwYXJ0aWNpcGFudC5pZGVudGl0eSk7XG4gICAgY29uc3QgZ2V0U2NyZWVuU2hhcmVUcmFja3MgPSAocGFydGljaXBhbnQyKSA9PiB7XG4gICAgICByZXR1cm4gcGFydGljaXBhbnQyLmdldFRyYWNrcygpLmZpbHRlcihcbiAgICAgICAgKHRyYWNrKSA9PiAodHJhY2suc291cmNlID09PSBUcmFjazQuU291cmNlLlNjcmVlblNoYXJlIHx8IHRyYWNrLnNvdXJjZSA9PT0gVHJhY2s0LlNvdXJjZS5TY3JlZW5TaGFyZUF1ZGlvKSAmJiB0cmFjay50cmFja1xuICAgICAgKTtcbiAgICB9O1xuICAgIGlmICghdHJhY2tNYXApIHtcbiAgICAgIHRyYWNrTWFwID0ge1xuICAgICAgICBwYXJ0aWNpcGFudCxcbiAgICAgICAgdHJhY2tzOiBnZXRTY3JlZW5TaGFyZVRyYWNrcyhwYXJ0aWNpcGFudClcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gc2NyZWVuU2hhcmVUcmFja3MuaW5kZXhPZih0cmFja01hcCk7XG4gICAgICBzY3JlZW5TaGFyZVRyYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgdHJhY2tNYXAudHJhY2tzID0gZ2V0U2NyZWVuU2hhcmVUcmFja3MocGFydGljaXBhbnQpO1xuICAgIH1cbiAgICBpZiAodHJhY2tNYXAudHJhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNjcmVlblNoYXJlVHJhY2tzLnB1c2godHJhY2tNYXApO1xuICAgIH1cbiAgICBzY3JlZW5TaGFyZVN1YnNjcmliZXIubmV4dChzY3JlZW5TaGFyZVRyYWNrcyk7XG4gIH07XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuVHJhY2tTdWJzY3JpYmVkKS5zdWJzY3JpYmUoXG4gICAgICAoWywgLi4uYXJnc10pID0+IGhhbmRsZVN1YiguLi5hcmdzKVxuICAgIClcbiAgKTtcbiAgb2JzZXJ2ZXJzLnB1c2goXG4gICAgcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50Mi5UcmFja1Vuc3Vic2NyaWJlZCkuc3Vic2NyaWJlKFxuICAgICAgKFssIC4uLmFyZ3NdKSA9PiBoYW5kbGVTdWIoLi4uYXJncylcbiAgICApXG4gICk7XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuTG9jYWxUcmFja1B1Ymxpc2hlZCkuc3Vic2NyaWJlKChhcmdzKSA9PiBoYW5kbGVTdWIoLi4uYXJncykpXG4gICk7XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuTG9jYWxUcmFja1VucHVibGlzaGVkKS5zdWJzY3JpYmUoKGFyZ3MpID0+IHtcbiAgICAgIGhhbmRsZVN1YiguLi5hcmdzKTtcbiAgICB9KVxuICApO1xuICBvYnNlcnZlcnMucHVzaChcbiAgICByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLlRyYWNrTXV0ZWQpLnN1YnNjcmliZSgoYXJncykgPT4ge1xuICAgICAgaGFuZGxlU3ViKC4uLmFyZ3MpO1xuICAgIH0pXG4gICk7XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuVHJhY2tVbm11dGVkKS5zdWJzY3JpYmUoKGFyZ3MpID0+IHtcbiAgICAgIGhhbmRsZVN1YiguLi5hcmdzKTtcbiAgICB9KVxuICApO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBmb3IgKGNvbnN0IHAgb2Ygcm9vbS5wYXJ0aWNpcGFudHMudmFsdWVzKCkpIHtcbiAgICAgIHAuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgaGFuZGxlU3ViKHRyYWNrLCBwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgMSk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gcm9vbUluZm9PYnNlcnZlcihyb29tKSB7XG4gIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZVJvb21FdmVudHMoXG4gICAgcm9vbSxcbiAgICBSb29tRXZlbnQyLlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gICAgUm9vbUV2ZW50Mi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBtYXAoKHIpID0+IHtcbiAgICAgIHJldHVybiB7IG5hbWU6IHIubmFtZSwgbWV0YWRhdGE6IHIubWV0YWRhdGEgfTtcbiAgICB9KVxuICApO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5mdW5jdGlvbiBhY3RpdmVTcGVha2VyT2JzZXJ2ZXIocm9vbSkge1xuICByZXR1cm4gcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50Mi5BY3RpdmVTcGVha2Vyc0NoYW5nZWQpLnBpcGUoXG4gICAgbWFwKChbc3BlYWtlcnNdKSA9PiBzcGVha2VycylcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU1lZGlhRGV2aWNlT2JzZXJ2ZXIoa2luZCwgb25FcnJvciwgcmVxdWVzdFBlcm1pc3Npb25zID0gdHJ1ZSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IG9uRGV2aWNlQ2hhbmdlID0gKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdEZXZpY2VzID0geWllbGQgUm9vbS5nZXRMb2NhbERldmljZXMoa2luZCwgcmVxdWVzdFBlcm1pc3Npb25zKTtcbiAgICAgIGRldmljZVN1YmplY3QubmV4dChuZXdEZXZpY2VzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBvbkVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkVycm9yKGUpO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGRldmljZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICBjb25zdCBvYnNlcnZhYmxlID0gZGV2aWNlU3ViamVjdC5waXBlKFxuICAgIGZpbmFsaXplKCgpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICAoX2EyID0gbmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkZXZpY2VjaGFuZ2VcIiwgb25EZXZpY2VDaGFuZ2UpO1xuICAgIH0pXG4gICk7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgaWYgKCF3aW5kb3cuaXNTZWN1cmVDb250ZXh0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBBY2Nlc3NpbmcgbWVkaWEgZGV2aWNlcyBpcyBhdmFpbGFibGUgb25seSBpbiBzZWN1cmUgY29udGV4dHMgKEhUVFBTIGFuZCBsb2NhbGhvc3QpLCBpbiBzb21lIG9yIGFsbCBzdXBwb3J0aW5nIGJyb3dzZXJzLiBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9OYXZpZ2F0b3IvbWVkaWFEZXZpY2VzYFxuICAgICAgKTtcbiAgICB9XG4gICAgKF9hID0gbmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLCBvbkRldmljZUNoYW5nZSk7XG4gIH1cbiAgcmV0dXJuIGNvbmNhdChcbiAgICBSb29tLmdldExvY2FsRGV2aWNlcyhraW5kLCByZXF1ZXN0UGVybWlzc2lvbnMpLmNhdGNoKChlKSA9PiBvbkVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkVycm9yKGUpKSxcbiAgICBvYnNlcnZhYmxlXG4gICk7XG59XG5mdW5jdGlvbiBjcmVhdGVEYXRhT2JzZXJ2ZXIocm9vbSkge1xuICByZXR1cm4gcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50Mi5EYXRhUmVjZWl2ZWQpO1xufVxuZnVuY3Rpb24gcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZShyb29tKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUm9vbUV2ZW50cyhyb29tLCBSb29tRXZlbnQyLkF1ZGlvUGxheWJhY2tTdGF0dXNDaGFuZ2VkKS5waXBlKFxuICAgIG1hcCgocm9vbTIpID0+IHtcbiAgICAgIHJldHVybiB7IGNhblBsYXlBdWRpbzogcm9vbTIuY2FuUGxheWJhY2tBdWRpbyB9O1xuICAgIH0pXG4gICk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gcm9vbVZpZGVvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZShyb29tKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUm9vbUV2ZW50cyhyb29tLCBSb29tRXZlbnQyLlZpZGVvUGxheWJhY2tTdGF0dXNDaGFuZ2VkKS5waXBlKFxuICAgIG1hcCgocm9vbTIpID0+IHtcbiAgICAgIHJldHVybiB7IGNhblBsYXlWaWRlbzogcm9vbTIuY2FuUGxheWJhY2tWaWRlbyB9O1xuICAgIH0pXG4gICk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gY3JlYXRlQWN0aXZlRGV2aWNlT2JzZXJ2YWJsZShyb29tLCBraW5kKSB7XG4gIHJldHVybiByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLkFjdGl2ZURldmljZUNoYW5nZWQpLnBpcGUoXG4gICAgZmlsdGVyKChba2luZE9mRGV2aWNlXSkgPT4ga2luZE9mRGV2aWNlID09PSBraW5kKSxcbiAgICBtYXAoKFtraW5kMiwgZGV2aWNlSWRdKSA9PiB7XG4gICAgICBsb2cuZGVidWcoXCJhY3RpdmVEZXZpY2VPYnNlcnZhYmxlIHwgUm9vbUV2ZW50LkFjdGl2ZURldmljZUNoYW5nZWRcIiwgeyBraW5kOiBraW5kMiwgZGV2aWNlSWQgfSk7XG4gICAgICByZXR1cm4gZGV2aWNlSWQ7XG4gICAgfSksXG4gICAgc3RhcnRXaXRoKHJvb20uZ2V0QWN0aXZlRGV2aWNlKGtpbmQpKVxuICApO1xufVxuZnVuY3Rpb24gZW5jcnlwdGlvblN0YXR1c09ic2VydmFibGUocm9vbSwgcGFydGljaXBhbnQpIHtcbiAgcmV0dXJuIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuUGFydGljaXBhbnRFbmNyeXB0aW9uU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBmaWx0ZXIoXG4gICAgICAoWywgcF0pID0+IHBhcnRpY2lwYW50LmlkZW50aXR5ID09PSAocCA9PSBudWxsID8gdm9pZCAwIDogcC5pZGVudGl0eSkgfHwgIXAgJiYgcGFydGljaXBhbnQuaWRlbnRpdHkgPT09IHJvb20ubG9jYWxQYXJ0aWNpcGFudC5pZGVudGl0eVxuICAgICksXG4gICAgbWFwKChbZW5jcnlwdGVkXSkgPT4gZW5jcnlwdGVkKSxcbiAgICBzdGFydFdpdGgoXG4gICAgICBwYXJ0aWNpcGFudCBpbnN0YW5jZW9mIExvY2FsUGFydGljaXBhbnQzID8gcGFydGljaXBhbnQuaXNFMkVFRW5hYmxlZCA6IHBhcnRpY2lwYW50LmlzRW5jcnlwdGVkXG4gICAgKVxuICApO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9tZWRpYVRyYWNrLnRzXG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazUgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCB7IG1hcCBhcyBtYXAyLCBzdGFydFdpdGggYXMgc3RhcnRXaXRoMiB9IGZyb20gXCJyeGpzXCI7XG5cbi8vIHNyYy9zdHlsZXMtaW50ZXJmYWNlL2NsYXNzLXByZWZpeGVyLnRzXG5mdW5jdGlvbiBwcmVmaXhDbGFzcyh1bnByZWZpeGVkQ2xhc3NOYW1lKSB7XG4gIHJldHVybiBgJHtjc3NQcmVmaXh9LSR7dW5wcmVmaXhlZENsYXNzTmFtZX1gO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9tZWRpYVRyYWNrLnRzXG5mdW5jdGlvbiBzZXR1cE1lZGlhVHJhY2sodHJhY2tJZGVudGlmaWVyKSB7XG4gIGNvbnN0IGluaXRpYWxQdWIgPSBnZXRUcmFja0J5SWRlbnRpZmllcih0cmFja0lkZW50aWZpZXIpO1xuICBjb25zdCB0cmFja09ic2VydmVyID0gb2JzZXJ2ZVBhcnRpY2lwYW50TWVkaWEodHJhY2tJZGVudGlmaWVyLnBhcnRpY2lwYW50KS5waXBlKFxuICAgIG1hcDIoKCkgPT4ge1xuICAgICAgcmV0dXJuIGdldFRyYWNrQnlJZGVudGlmaWVyKHRyYWNrSWRlbnRpZmllcik7XG4gICAgfSksXG4gICAgc3RhcnRXaXRoMihpbml0aWFsUHViKVxuICApO1xuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhcbiAgICB0cmFja0lkZW50aWZpZXIuc291cmNlID09PSBUcmFjazUuU291cmNlLkNhbWVyYSB8fCB0cmFja0lkZW50aWZpZXIuc291cmNlID09PSBUcmFjazUuU291cmNlLlNjcmVlblNoYXJlID8gXCJwYXJ0aWNpcGFudC1tZWRpYS12aWRlb1wiIDogXCJwYXJ0aWNpcGFudC1tZWRpYS1hdWRpb1wiXG4gICk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgdHJhY2tPYnNlcnZlciB9O1xufVxuZnVuY3Rpb24gZ2V0VHJhY2tCeUlkZW50aWZpZXIob3B0aW9ucykge1xuICBpZiAoaXNUcmFja1JlZmVyZW5jZShvcHRpb25zKSkge1xuICAgIHJldHVybiBvcHRpb25zLnB1YmxpY2F0aW9uO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHsgc291cmNlLCBuYW1lLCBwYXJ0aWNpcGFudCB9ID0gb3B0aW9ucztcbiAgICBpZiAoc291cmNlICYmIG5hbWUpIHtcbiAgICAgIHJldHVybiBwYXJ0aWNpcGFudC5nZXRUcmFja3MoKS5maW5kKChwdWIpID0+IHB1Yi5zb3VyY2UgPT09IHNvdXJjZSAmJiBwdWIudHJhY2tOYW1lID09PSBuYW1lKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiBwYXJ0aWNpcGFudC5nZXRUcmFja0J5TmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIHBhcnRpY2lwYW50LmdldFRyYWNrKHNvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0IGxlYXN0IG9uZSBvZiBzb3VyY2UgYW5kIG5hbWUgbmVlZHMgdG8gYmUgZGVmaW5lZFwiKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL29ic2VydmFibGVzL3BhcnRpY2lwYW50LnRzXG5mdW5jdGlvbiBvYnNlcnZlUGFydGljaXBhbnRFdmVudHMocGFydGljaXBhbnQsIC4uLmV2ZW50cykge1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUyKChzdWJzY3JpYmUpID0+IHtcbiAgICBjb25zdCBvblBhcnRpY2lwYW50VXBkYXRlID0gKCkgPT4ge1xuICAgICAgc3Vic2NyaWJlLm5leHQocGFydGljaXBhbnQpO1xuICAgIH07XG4gICAgZXZlbnRzLmZvckVhY2goKGV2dCkgPT4ge1xuICAgICAgcGFydGljaXBhbnQub24oZXZ0LCBvblBhcnRpY2lwYW50VXBkYXRlKTtcbiAgICB9KTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgIGV2ZW50cy5mb3JFYWNoKChldnQpID0+IHtcbiAgICAgICAgcGFydGljaXBhbnQub2ZmKGV2dCwgb25QYXJ0aWNpcGFudFVwZGF0ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSkucGlwZShzdGFydFdpdGgzKHBhcnRpY2lwYW50KSk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gb2JzZXJ2ZVBhcnRpY2lwYW50TWVkaWEocGFydGljaXBhbnQpIHtcbiAgY29uc3QgcGFydGljaXBhbnRPYnNlcnZlciA9IG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyhcbiAgICBwYXJ0aWNpcGFudCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5UcmFja011dGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlRyYWNrVW5tdXRlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZCxcbiAgICAvLyBQYXJ0aWNpcGFudEV2ZW50LklzU3BlYWtpbmdDaGFuZ2VkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlRyYWNrUHVibGlzaGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlRyYWNrVW5wdWJsaXNoZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuTWVkaWFEZXZpY2VzRXJyb3IsXG4gICAgUGFydGljaXBhbnRFdmVudDIuVHJhY2tTdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXG4gICAgLy8gUGFydGljaXBhbnRFdmVudC5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gICkucGlwZShcbiAgICBtYXAzKChwKSA9PiB7XG4gICAgICBjb25zdCB7IGlzTWljcm9waG9uZUVuYWJsZWQsIGlzQ2FtZXJhRW5hYmxlZCwgaXNTY3JlZW5TaGFyZUVuYWJsZWQgfSA9IHA7XG4gICAgICBjb25zdCBtaWNyb3Bob25lVHJhY2sgPSBwLmdldFRyYWNrKFRyYWNrNi5Tb3VyY2UuTWljcm9waG9uZSk7XG4gICAgICBjb25zdCBjYW1lcmFUcmFjayA9IHAuZ2V0VHJhY2soVHJhY2s2LlNvdXJjZS5DYW1lcmEpO1xuICAgICAgY29uc3QgcGFydGljaXBhbnRNZWRpYSA9IHtcbiAgICAgICAgaXNDYW1lcmFFbmFibGVkLFxuICAgICAgICBpc01pY3JvcGhvbmVFbmFibGVkLFxuICAgICAgICBpc1NjcmVlblNoYXJlRW5hYmxlZCxcbiAgICAgICAgY2FtZXJhVHJhY2ssXG4gICAgICAgIG1pY3JvcGhvbmVUcmFjayxcbiAgICAgICAgcGFydGljaXBhbnQ6IHBcbiAgICAgIH07XG4gICAgICByZXR1cm4gcGFydGljaXBhbnRNZWRpYTtcbiAgICB9KVxuICApO1xuICByZXR1cm4gcGFydGljaXBhbnRPYnNlcnZlcjtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRyYWNrT2JzZXJ2ZXIocGFydGljaXBhbnQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhKHBhcnRpY2lwYW50KS5waXBlKFxuICAgIG1hcDMoKCkgPT4ge1xuICAgICAgcmV0dXJuIHsgcHVibGljYXRpb246IGdldFRyYWNrQnlJZGVudGlmaWVyKG9wdGlvbnMpIH07XG4gICAgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIHBhcnRpY2lwYW50SW5mb09ic2VydmVyKHBhcnRpY2lwYW50KSB7XG4gIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZVBhcnRpY2lwYW50RXZlbnRzKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlBhcnRpY2lwYW50TWV0YWRhdGFDaGFuZ2VkXG4gICAgLy8gUGFydGljaXBhbnRFdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICApLnBpcGUoXG4gICAgbWFwMygoeyBuYW1lLCBpZGVudGl0eSwgbWV0YWRhdGEgfSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaWRlbnRpdHksXG4gICAgICAgIG1ldGFkYXRhXG4gICAgICB9O1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aDMoe1xuICAgICAgbmFtZTogcGFydGljaXBhbnQubmFtZSxcbiAgICAgIGlkZW50aXR5OiBwYXJ0aWNpcGFudC5pZGVudGl0eSxcbiAgICAgIG1ldGFkYXRhOiBwYXJ0aWNpcGFudC5tZXRhZGF0YVxuICAgIH0pXG4gICk7XG4gIHJldHVybiBvYnNlcnZlcjtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNvbm5lY3Rpb25RdWFsaXR5T2JzZXJ2ZXIocGFydGljaXBhbnQpIHtcbiAgY29uc3Qgb2JzZXJ2ZXIgPSBwYXJ0aWNpcGFudEV2ZW50U2VsZWN0b3IoXG4gICAgcGFydGljaXBhbnQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkXG4gICkucGlwZShcbiAgICBtYXAzKChbcXVhbGl0eV0pID0+IHF1YWxpdHkpLFxuICAgIHN0YXJ0V2l0aDMocGFydGljaXBhbnQuY29ubmVjdGlvblF1YWxpdHkpXG4gICk7XG4gIHJldHVybiBvYnNlcnZlcjtcbn1cbmZ1bmN0aW9uIHBhcnRpY2lwYW50RXZlbnRTZWxlY3RvcihwYXJ0aWNpcGFudCwgZXZlbnQpIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlMigoc3Vic2NyaWJlKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlID0gKC4uLnBhcmFtcykgPT4ge1xuICAgICAgc3Vic2NyaWJlLm5leHQocGFyYW1zKTtcbiAgICB9O1xuICAgIHBhcnRpY2lwYW50Lm9uKGV2ZW50LCB1cGRhdGUpO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gKCkgPT4ge1xuICAgICAgcGFydGljaXBhbnQub2ZmKGV2ZW50LCB1cGRhdGUpO1xuICAgIH07XG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICB9KTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiBtdXRlZE9ic2VydmVyKHRyYWNrUmVmKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgcmV0dXJuIG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyhcbiAgICB0cmFja1JlZi5wYXJ0aWNpcGFudCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5UcmFja011dGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlRyYWNrVW5tdXRlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5UcmFja1N1YnNjcmliZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuVHJhY2tVbnN1YnNjcmliZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5Mb2NhbFRyYWNrVW5wdWJsaXNoZWRcbiAgKS5waXBlKFxuICAgIG1hcDMoKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICB2YXIgX2EyLCBfYjI7XG4gICAgICBjb25zdCBwdWIgPSAoX2EyID0gdHJhY2tSZWYucHVibGljYXRpb24pICE9IG51bGwgPyBfYTIgOiBwYXJ0aWNpcGFudC5nZXRUcmFjayh0cmFja1JlZi5zb3VyY2UpO1xuICAgICAgcmV0dXJuIChfYjIgPSBwdWIgPT0gbnVsbCA/IHZvaWQgMCA6IHB1Yi5pc011dGVkKSAhPSBudWxsID8gX2IyIDogdHJ1ZTtcbiAgICB9KSxcbiAgICBzdGFydFdpdGgzKFxuICAgICAgKF9kID0gKF9jID0gKF9hID0gdHJhY2tSZWYucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYS5pc011dGVkKSAhPSBudWxsID8gX2MgOiAoX2IgPSB0cmFja1JlZi5wYXJ0aWNpcGFudC5nZXRUcmFjayh0cmFja1JlZi5zb3VyY2UpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaXNNdXRlZCkgIT0gbnVsbCA/IF9kIDogdHJ1ZVxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUlzU3BlYWtpbmdPYnNlcnZlcihwYXJ0aWNpcGFudCkge1xuICByZXR1cm4gcGFydGljaXBhbnRFdmVudFNlbGVjdG9yKHBhcnRpY2lwYW50LCBQYXJ0aWNpcGFudEV2ZW50Mi5Jc1NwZWFraW5nQ2hhbmdlZCkucGlwZShcbiAgICBtYXAzKChbaXNTcGVha2luZ10pID0+IGlzU3BlYWtpbmcpXG4gICk7XG59XG5mdW5jdGlvbiBjb25uZWN0ZWRQYXJ0aWNpcGFudHNPYnNlcnZlcihyb29tLCBvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hO1xuICBsZXQgc3Vic2NyaWJlcjtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlMigoc3ViKSA9PiB7XG4gICAgc3Vic2NyaWJlciA9IHN1YjtcbiAgICByZXR1cm4gKCkgPT4gbGlzdGVuZXIudW5zdWJzY3JpYmUoKTtcbiAgfSkucGlwZShzdGFydFdpdGgzKEFycmF5LmZyb20ocm9vbS5wYXJ0aWNpcGFudHMudmFsdWVzKCkpKSk7XG4gIGNvbnN0IGFkZGl0aW9uYWxSb29tRXZlbnRzID0gKF9hID0gb3B0aW9ucy5hZGRpdGlvbmFsUm9vbUV2ZW50cykgIT0gbnVsbCA/IF9hIDogYWxsUGFydGljaXBhbnRSb29tRXZlbnRzO1xuICBjb25zdCByb29tRXZlbnRzID0gQXJyYXkuZnJvbShcbiAgICAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gICAgICBSb29tRXZlbnQzLlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgICAgUm9vbUV2ZW50My5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICAgIFJvb21FdmVudDMuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgICAgIC4uLmFkZGl0aW9uYWxSb29tRXZlbnRzXG4gICAgXSlcbiAgKTtcbiAgY29uc3QgbGlzdGVuZXIgPSBvYnNlcnZlUm9vbUV2ZW50cyhyb29tLCAuLi5yb29tRXZlbnRzKS5zdWJzY3JpYmUoXG4gICAgKHIpID0+IHN1YnNjcmliZXIgPT0gbnVsbCA/IHZvaWQgMCA6IHN1YnNjcmliZXIubmV4dChBcnJheS5mcm9tKHIucGFydGljaXBhbnRzLnZhbHVlcygpKSlcbiAgKTtcbiAgaWYgKHJvb20ucGFydGljaXBhbnRzLnNpemUgPiAwKSB7XG4gICAgc3Vic2NyaWJlciA9PSBudWxsID8gdm9pZCAwIDogc3Vic2NyaWJlci5uZXh0KEFycmF5LmZyb20ocm9vbS5wYXJ0aWNpcGFudHMudmFsdWVzKCkpKTtcbiAgfVxuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIGNvbm5lY3RlZFBhcnRpY2lwYW50T2JzZXJ2ZXIocm9vbSwgaWRlbnRpdHksIG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IGFkZGl0aW9uYWxFdmVudHMgPSAoX2EgPSBvcHRpb25zLmFkZGl0aW9uYWxFdmVudHMpICE9IG51bGwgPyBfYSA6IGFsbFBhcnRpY2lwYW50RXZlbnRzO1xuICBjb25zdCBvYnNlcnZhYmxlID0gb2JzZXJ2ZVJvb21FdmVudHMoXG4gICAgcm9vbSxcbiAgICBSb29tRXZlbnQzLlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgIFJvb21FdmVudDMuUGFydGljaXBhbnREaXNjb25uZWN0ZWQsXG4gICAgUm9vbUV2ZW50My5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBzd2l0Y2hNYXAoKHIpID0+IHtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gci5nZXRQYXJ0aWNpcGFudEJ5SWRlbnRpdHkoaWRlbnRpdHkpO1xuICAgICAgaWYgKHBhcnRpY2lwYW50KSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZlUGFydGljaXBhbnRFdmVudHMocGFydGljaXBhbnQsIC4uLmFkZGl0aW9uYWxFdmVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlMigoc3Vic2NyaWJlKSA9PiBzdWJzY3JpYmUubmV4dCh2b2lkIDApKTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBzdGFydFdpdGgzKHJvb20uZ2V0UGFydGljaXBhbnRCeUlkZW50aXR5KGlkZW50aXR5KSlcbiAgKTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiBwYXJ0aWNpcGFudFBlcm1pc3Npb25PYnNlcnZlcihwYXJ0aWNpcGFudCkge1xuICBjb25zdCBvYnNlcnZlciA9IHBhcnRpY2lwYW50RXZlbnRTZWxlY3RvcihcbiAgICBwYXJ0aWNpcGFudCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZFxuICApLnBpcGUoXG4gICAgbWFwMygoKSA9PiBwYXJ0aWNpcGFudC5wZXJtaXNzaW9ucyksXG4gICAgc3RhcnRXaXRoMyhwYXJ0aWNpcGFudC5wZXJtaXNzaW9ucylcbiAgKTtcbiAgcmV0dXJuIG9ic2VydmVyO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9tZWRpYVRvZ2dsZS50c1xuZnVuY3Rpb24gc2V0dXBNZWRpYVRvZ2dsZShzb3VyY2UsIHJvb20sIG9wdGlvbnMpIHtcbiAgY29uc3QgeyBsb2NhbFBhcnRpY2lwYW50IH0gPSByb29tO1xuICBjb25zdCBnZXRTb3VyY2VFbmFibGVkID0gKHNvdXJjZTIsIGxvY2FsUGFydGljaXBhbnQyKSA9PiB7XG4gICAgbGV0IGlzRW5hYmxlZCA9IGZhbHNlO1xuICAgIHN3aXRjaCAoc291cmNlMikge1xuICAgICAgY2FzZSBUcmFjazcuU291cmNlLkNhbWVyYTpcbiAgICAgICAgaXNFbmFibGVkID0gbG9jYWxQYXJ0aWNpcGFudDIuaXNDYW1lcmFFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVHJhY2s3LlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgICBpc0VuYWJsZWQgPSBsb2NhbFBhcnRpY2lwYW50Mi5pc01pY3JvcGhvbmVFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVHJhY2s3LlNvdXJjZS5TY3JlZW5TaGFyZTpcbiAgICAgICAgaXNFbmFibGVkID0gbG9jYWxQYXJ0aWNpcGFudDIuaXNTY3JlZW5TaGFyZUVuYWJsZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBpc0VuYWJsZWQ7XG4gIH07XG4gIGNvbnN0IGVuYWJsZWRPYnNlcnZlciA9IG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhKGxvY2FsUGFydGljaXBhbnQpLnBpcGUoXG4gICAgbWFwNCgobWVkaWEpID0+IHtcbiAgICAgIHJldHVybiBnZXRTb3VyY2VFbmFibGVkKHNvdXJjZSwgbWVkaWEucGFydGljaXBhbnQpO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aDQoZ2V0U291cmNlRW5hYmxlZChzb3VyY2UsIGxvY2FsUGFydGljaXBhbnQpKVxuICApO1xuICBjb25zdCBwZW5kaW5nU3ViamVjdCA9IG5ldyBTdWJqZWN0MigpO1xuICBjb25zdCB0b2dnbGUgPSAoZm9yY2VTdGF0ZSwgY2FwdHVyZU9wdGlvbnMpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgY2FwdHVyZU9wdGlvbnMgIT0gbnVsbCA/IGNhcHR1cmVPcHRpb25zIDogY2FwdHVyZU9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgcGVuZGluZ1N1YmplY3QubmV4dCh0cnVlKTtcbiAgICAgIHN3aXRjaCAoc291cmNlKSB7XG4gICAgICAgIGNhc2UgVHJhY2s3LlNvdXJjZS5DYW1lcmE6XG4gICAgICAgICAgeWllbGQgbG9jYWxQYXJ0aWNpcGFudC5zZXRDYW1lcmFFbmFibGVkKFxuICAgICAgICAgICAgZm9yY2VTdGF0ZSAhPSBudWxsID8gZm9yY2VTdGF0ZSA6ICFsb2NhbFBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCxcbiAgICAgICAgICAgIGNhcHR1cmVPcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBUcmFjazcuU291cmNlLk1pY3JvcGhvbmU6XG4gICAgICAgICAgeWllbGQgbG9jYWxQYXJ0aWNpcGFudC5zZXRNaWNyb3Bob25lRW5hYmxlZChcbiAgICAgICAgICAgIGZvcmNlU3RhdGUgIT0gbnVsbCA/IGZvcmNlU3RhdGUgOiAhbG9jYWxQYXJ0aWNpcGFudC5pc01pY3JvcGhvbmVFbmFibGVkLFxuICAgICAgICAgICAgY2FwdHVyZU9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFRyYWNrNy5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgICAgeWllbGQgbG9jYWxQYXJ0aWNpcGFudC5zZXRTY3JlZW5TaGFyZUVuYWJsZWQoXG4gICAgICAgICAgICBmb3JjZVN0YXRlICE9IG51bGwgPyBmb3JjZVN0YXRlIDogIWxvY2FsUGFydGljaXBhbnQuaXNTY3JlZW5TaGFyZUVuYWJsZWQsXG4gICAgICAgICAgICBjYXB0dXJlT3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHBlbmRpbmdTdWJqZWN0Lm5leHQoZmFsc2UpO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHByZWZpeENsYXNzKFwiYnV0dG9uXCIpO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZSxcbiAgICB0b2dnbGUsXG4gICAgZW5hYmxlZE9ic2VydmVyLFxuICAgIHBlbmRpbmdPYnNlcnZlcjogcGVuZGluZ1N1YmplY3QuYXNPYnNlcnZhYmxlKClcbiAgfTtcbn1cbmZ1bmN0aW9uIHNldHVwTWFudWFsVG9nZ2xlKCkge1xuICBsZXQgc3RhdGUgPSBmYWxzZTtcbiAgY29uc3QgZW5hYmxlZFN1YmplY3QgPSBuZXcgU3ViamVjdDIoKTtcbiAgY29uc3QgcGVuZGluZ1N1YmplY3QgPSBuZXcgU3ViamVjdDIoKTtcbiAgY29uc3QgdG9nZ2xlID0gKGZvcmNlU3RhdGUpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBwZW5kaW5nU3ViamVjdC5uZXh0KHRydWUpO1xuICAgIHN0YXRlID0gZm9yY2VTdGF0ZSAhPSBudWxsID8gZm9yY2VTdGF0ZSA6ICFzdGF0ZTtcbiAgICBlbmFibGVkU3ViamVjdC5uZXh0KHN0YXRlKTtcbiAgICBwZW5kaW5nU3ViamVjdC5uZXh0KGZhbHNlKTtcbiAgfSk7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHByZWZpeENsYXNzKFwiYnV0dG9uXCIpO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZSxcbiAgICB0b2dnbGUsXG4gICAgZW5hYmxlZE9ic2VydmVyOiBlbmFibGVkU3ViamVjdC5hc09ic2VydmFibGUoKSxcbiAgICBwZW5kaW5nT2JzZXJ2ZXI6IHBlbmRpbmdTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpXG4gIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL21lZGlhRGV2aWNlU2VsZWN0LnRzXG5pbXBvcnQge1xuICBUcmFjayBhcyBUcmFjazhcbn0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuZnVuY3Rpb24gc2V0dXBEZXZpY2VTZWxlY3RvcihraW5kLCByb29tLCBsb2NhbFRyYWNrKSB7XG4gIGNvbnN0IGFjdGl2ZURldmljZVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHZvaWQgMCk7XG4gIGNvbnN0IGFjdGl2ZURldmljZU9ic2VydmFibGUgPSByb29tID8gY3JlYXRlQWN0aXZlRGV2aWNlT2JzZXJ2YWJsZShyb29tLCBraW5kKSA6IGFjdGl2ZURldmljZVN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gIGNvbnN0IHNldEFjdGl2ZU1lZGlhRGV2aWNlID0gKF8wLCAuLi5fMSkgPT4gX19hc3luYyh0aGlzLCBbXzAsIC4uLl8xXSwgZnVuY3Rpb24qIChpZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgaWYgKHJvb20pIHtcbiAgICAgIGxvZy5kZWJ1ZyhgU3dpdGNoaW5nIGFjdGl2ZSBkZXZpY2Ugb2Yga2luZCBcIiR7a2luZH1cIiB3aXRoIGlkICR7aWR9LmApO1xuICAgICAgeWllbGQgcm9vbS5zd2l0Y2hBY3RpdmVEZXZpY2Uoa2luZCwgaWQsIG9wdGlvbnMuZXhhY3QpO1xuICAgICAgY29uc3QgYWN0dWFsRGV2aWNlSWQgPSAoX2EgPSByb29tLmdldEFjdGl2ZURldmljZShraW5kKSkgIT0gbnVsbCA/IF9hIDogaWQ7XG4gICAgICBpZiAoYWN0dWFsRGV2aWNlSWQgIT09IGlkICYmIGlkICE9PSBcImRlZmF1bHRcIikge1xuICAgICAgICBsb2cuaW5mbyhcbiAgICAgICAgICBgV2UgdHJpZWQgdG8gc2VsZWN0IHRoZSBkZXZpY2Ugd2l0aCBpZCAoJHtpZH0pLCBidXQgdGhlIGJyb3dzZXIgZGVjaWRlZCB0byBzZWxlY3QgdGhlIGRldmljZSB3aXRoIGlkICgke2FjdHVhbERldmljZUlkfSkgaW5zdGVhZC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBsZXQgdGFyZ2V0VHJhY2sgPSB2b2lkIDA7XG4gICAgICBpZiAoa2luZCA9PT0gXCJhdWRpb2lucHV0XCIpXG4gICAgICAgIHRhcmdldFRyYWNrID0gKF9iID0gcm9vbS5sb2NhbFBhcnRpY2lwYW50LmdldFRyYWNrKFRyYWNrOC5Tb3VyY2UuTWljcm9waG9uZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYi50cmFjaztcbiAgICAgIGVsc2UgaWYgKGtpbmQgPT09IFwidmlkZW9pbnB1dFwiKSB7XG4gICAgICAgIHRhcmdldFRyYWNrID0gKF9jID0gcm9vbS5sb2NhbFBhcnRpY2lwYW50LmdldFRyYWNrKFRyYWNrOC5Tb3VyY2UuQ2FtZXJhKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnRyYWNrO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlRGVmYXVsdCA9IGlkID09PSBcImRlZmF1bHRcIiAmJiAhdGFyZ2V0VHJhY2sgfHwgaWQgPT09IFwiZGVmYXVsdFwiICYmICh0YXJnZXRUcmFjayA9PSBudWxsID8gdm9pZCAwIDogdGFyZ2V0VHJhY2subWVkaWFTdHJlYW1UcmFjay5sYWJlbC5zdGFydHNXaXRoKFwiRGVmYXVsdFwiKSk7XG4gICAgICBhY3RpdmVEZXZpY2VTdWJqZWN0Lm5leHQodXNlRGVmYXVsdCA/IGlkIDogYWN0dWFsRGV2aWNlSWQpO1xuICAgIH0gZWxzZSBpZiAobG9jYWxUcmFjaykge1xuICAgICAgeWllbGQgbG9jYWxUcmFjay5zZXREZXZpY2VJZChvcHRpb25zLmV4YWN0ID8geyBleGFjdDogaWQgfSA6IGlkKTtcbiAgICAgIGNvbnN0IGFjdHVhbElkID0geWllbGQgbG9jYWxUcmFjay5nZXREZXZpY2VJZCgpO1xuICAgICAgYWN0aXZlRGV2aWNlU3ViamVjdC5uZXh0KFxuICAgICAgICBpZCA9PT0gXCJkZWZhdWx0XCIgJiYgbG9jYWxUcmFjay5tZWRpYVN0cmVhbVRyYWNrLmxhYmVsLnN0YXJ0c1dpdGgoXCJEZWZhdWx0XCIpID8gaWQgOiBhY3R1YWxJZFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGFjdGl2ZURldmljZVN1YmplY3QudmFsdWUgIT09IGlkKSB7XG4gICAgICBsb2cud2FybihcbiAgICAgICAgXCJkZXZpY2Ugc3dpdGNoIHNraXBwZWQsIHBsZWFzZSBwcm92aWRlIGVpdGhlciBhIHJvb20gb3IgYSBsb2NhbCB0cmFjayB0byBzd2l0Y2ggb24uIFwiXG4gICAgICApO1xuICAgICAgYWN0aXZlRGV2aWNlU3ViamVjdC5uZXh0KGlkKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhcIm1lZGlhLWRldmljZS1zZWxlY3RcIik7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lLFxuICAgIGFjdGl2ZURldmljZU9ic2VydmFibGUsXG4gICAgc2V0QWN0aXZlTWVkaWFEZXZpY2VcbiAgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvZGlzY29ubmVjdEJ1dHRvbi50c1xuZnVuY3Rpb24gc2V0dXBEaXNjb25uZWN0QnV0dG9uKHJvb20pIHtcbiAgY29uc3QgZGlzY29ubmVjdCA9IChzdG9wVHJhY2tzKSA9PiB7XG4gICAgcm9vbS5kaXNjb25uZWN0KHN0b3BUcmFja3MpO1xuICB9O1xuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhcImRpc2Nvbm5lY3QtYnV0dG9uXCIpO1xuICByZXR1cm4geyBjbGFzc05hbWUsIGRpc2Nvbm5lY3QgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3IudHNcbmZ1bmN0aW9uIHNldHVwQ29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3IocGFydGljaXBhbnQpIHtcbiAgY29uc3QgY2xhc3NOYW1lID0gcHJlZml4Q2xhc3MoXCJjb25uZWN0aW9uLXF1YWxpdHlcIik7XG4gIGNvbnN0IGNvbm5lY3Rpb25RdWFsaXR5T2JzZXJ2ZXIgPSBjcmVhdGVDb25uZWN0aW9uUXVhbGl0eU9ic2VydmVyKHBhcnRpY2lwYW50KTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lLCBjb25uZWN0aW9uUXVhbGl0eU9ic2VydmVyIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3RyYWNrTXV0ZWRJbmRpY2F0b3IudHNcbmltcG9ydCB7IFRyYWNrIGFzIFRyYWNrOSB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gc2V0dXBUcmFja011dGVkSW5kaWNhdG9yKHRyYWNrUmVmKSB7XG4gIGxldCBjbGFzc0ZvclNvdXJjZSA9IFwidHJhY2stbXV0ZWQtaW5kaWNhdG9yLWNhbWVyYVwiO1xuICBzd2l0Y2ggKHRyYWNrUmVmLnNvdXJjZSkge1xuICAgIGNhc2UgVHJhY2s5LlNvdXJjZS5DYW1lcmE6XG4gICAgICBjbGFzc0ZvclNvdXJjZSA9IFwidHJhY2stbXV0ZWQtaW5kaWNhdG9yLWNhbWVyYVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUcmFjazkuU291cmNlLk1pY3JvcGhvbmU6XG4gICAgICBjbGFzc0ZvclNvdXJjZSA9IFwidHJhY2stbXV0ZWQtaW5kaWNhdG9yLW1pY3JvcGhvbmVcIjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhjbGFzc0ZvclNvdXJjZSk7XG4gIGNvbnN0IG1lZGlhTXV0ZWRPYnNlcnZlciA9IG11dGVkT2JzZXJ2ZXIodHJhY2tSZWYpO1xuICByZXR1cm4geyBjbGFzc05hbWUsIG1lZGlhTXV0ZWRPYnNlcnZlciB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudE5hbWUudHNcbmZ1bmN0aW9uIHNldHVwUGFydGljaXBhbnROYW1lKHBhcnRpY2lwYW50KSB7XG4gIGNvbnN0IGluZm9PYnNlcnZlciA9IHBhcnRpY2lwYW50SW5mb09ic2VydmVyKHBhcnRpY2lwYW50KTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW5hbWVcIiwgaW5mb09ic2VydmVyIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50VGlsZS50c1xuZnVuY3Rpb24gc2V0dXBQYXJ0aWNpcGFudFRpbGUoKSB7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHByZWZpeENsYXNzKFwicGFydGljaXBhbnQtdGlsZVwiKTtcbiAgcmV0dXJuIHtcbiAgICBjbGFzc05hbWVcbiAgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY2hhdC50c1xuaW1wb3J0IHsgRGF0YVBhY2tldF9LaW5kIGFzIERhdGFQYWNrZXRfS2luZDIsIFJvb21FdmVudCBhcyBSb29tRXZlbnQ0IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgYXMgQmVoYXZpb3JTdWJqZWN0MiwgU3ViamVjdCBhcyBTdWJqZWN0Mywgc2NhbiwgbWFwIGFzIG1hcDYsIHRha2VVbnRpbCB9IGZyb20gXCJyeGpzXCI7XG5cbi8vIHNyYy9vYnNlcnZhYmxlcy9kYXRhQ2hhbm5lbC50c1xuaW1wb3J0IHsgRGF0YVBhY2tldF9LaW5kIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIGFzIE9ic2VydmFibGUzLCBmaWx0ZXIgYXMgZmlsdGVyMiwgbWFwIGFzIG1hcDUgfSBmcm9tIFwicnhqc1wiO1xudmFyIERhdGFUb3BpYyA9IHtcbiAgQ0hBVDogXCJsay1jaGF0LXRvcGljXCJcbn07XG5mdW5jdGlvbiBzZW5kTWVzc2FnZShfMCwgXzEsIF8yKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24qIChsb2NhbFBhcnRpY2lwYW50LCBwYXlsb2FkLCB0b3BpYywgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgeyBraW5kLCBkZXN0aW5hdGlvbiB9ID0gb3B0aW9ucztcbiAgICB5aWVsZCBsb2NhbFBhcnRpY2lwYW50LnB1Ymxpc2hEYXRhKHBheWxvYWQsIGtpbmQgIT0gbnVsbCA/IGtpbmQgOiBEYXRhUGFja2V0X0tpbmQuUkVMSUFCTEUsIHtcbiAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgdG9waWNcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzZXR1cERhdGFNZXNzYWdlSGFuZGxlcihyb29tLCB0b3BpYywgb25NZXNzYWdlKSB7XG4gIGNvbnN0IG1lc3NhZ2VPYnNlcnZhYmxlID0gY3JlYXRlRGF0YU9ic2VydmVyKHJvb20pLnBpcGUoXG4gICAgZmlsdGVyMigoWywgLCAsIG1lc3NhZ2VUb3BpY10pID0+IHRvcGljID09PSB2b2lkIDAgfHwgbWVzc2FnZVRvcGljID09PSB0b3BpYyksXG4gICAgbWFwNSgoW3BheWxvYWQsIHBhcnRpY2lwYW50LCAsIG1lc3NhZ2VUb3BpY10pID0+IHtcbiAgICAgIGNvbnN0IG1zZyA9IHtcbiAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgdG9waWM6IG1lc3NhZ2VUb3BpYyxcbiAgICAgICAgZnJvbTogcGFydGljaXBhbnRcbiAgICAgIH07XG4gICAgICBvbk1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTWVzc2FnZShtc2cpO1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9KVxuICApO1xuICBsZXQgaXNTZW5kaW5nU3Vic2NyaWJlcjtcbiAgY29uc3QgaXNTZW5kaW5nT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlMygoc3Vic2NyaWJlcikgPT4ge1xuICAgIGlzU2VuZGluZ1N1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuICB9KTtcbiAgY29uc3Qgc2VuZCA9IChfMCwgLi4uXzEpID0+IF9fYXN5bmModGhpcywgW18wLCAuLi5fMV0sIGZ1bmN0aW9uKiAocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaXNTZW5kaW5nU3Vic2NyaWJlci5uZXh0KHRydWUpO1xuICAgIHRyeSB7XG4gICAgICB5aWVsZCBzZW5kTWVzc2FnZShyb29tLmxvY2FsUGFydGljaXBhbnQsIHBheWxvYWQsIHRvcGljLCBvcHRpb25zKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNTZW5kaW5nU3Vic2NyaWJlci5uZXh0KGZhbHNlKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4geyBtZXNzYWdlT2JzZXJ2YWJsZSwgaXNTZW5kaW5nT2JzZXJ2YWJsZSwgc2VuZCB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jaGF0LnRzXG52YXIgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xudmFyIGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbnZhciB0b3BpY1N1YmplY3RNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIGVuY29kZSA9IChtZXNzYWdlKSA9PiBlbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IG1lc3NhZ2UubWVzc2FnZSwgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCB9KSk7XG52YXIgZGVjb2RlID0gKG1lc3NhZ2UpID0+IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUobWVzc2FnZSkpO1xuZnVuY3Rpb24gc2V0dXBDaGF0KHJvb20sIG9wdGlvbnMpIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3Qgb25EZXN0cm95T2JzZXJ2YWJsZSA9IG5ldyBTdWJqZWN0MygpO1xuICBjb25zdCB7IG1lc3NhZ2VEZWNvZGVyLCBtZXNzYWdlRW5jb2RlciwgY2hhbm5lbFRvcGljIH0gPSBvcHRpb25zICE9IG51bGwgPyBvcHRpb25zIDoge307XG4gIGNvbnN0IHRvcGljID0gY2hhbm5lbFRvcGljICE9IG51bGwgPyBjaGFubmVsVG9waWMgOiBEYXRhVG9waWMuQ0hBVDtcbiAgbGV0IG5lZWRzU2V0dXAgPSBmYWxzZTtcbiAgaWYgKCF0b3BpY1N1YmplY3RNYXAuaGFzKHJvb20pKSB7XG4gICAgbmVlZHNTZXR1cCA9IHRydWU7XG4gIH1cbiAgY29uc3QgdG9waWNNYXAgPSAoX2EgPSB0b3BpY1N1YmplY3RNYXAuZ2V0KHJvb20pKSAhPSBudWxsID8gX2EgOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBtZXNzYWdlU3ViamVjdCA9IChfYiA9IHRvcGljTWFwLmdldCh0b3BpYykpICE9IG51bGwgPyBfYiA6IG5ldyBTdWJqZWN0MygpO1xuICB0b3BpY01hcC5zZXQodG9waWMsIG1lc3NhZ2VTdWJqZWN0KTtcbiAgdG9waWNTdWJqZWN0TWFwLnNldChyb29tLCB0b3BpY01hcCk7XG4gIGlmIChuZWVkc1NldHVwKSB7XG4gICAgY29uc3QgeyBtZXNzYWdlT2JzZXJ2YWJsZSB9ID0gc2V0dXBEYXRhTWVzc2FnZUhhbmRsZXIocm9vbSwgdG9waWMpO1xuICAgIG1lc3NhZ2VPYnNlcnZhYmxlLnBpcGUodGFrZVVudGlsKG9uRGVzdHJveU9ic2VydmFibGUpKS5zdWJzY3JpYmUobWVzc2FnZVN1YmplY3QpO1xuICB9XG4gIGNvbnN0IGZpbmFsTWVzc2FnZURlY29kZXIgPSBtZXNzYWdlRGVjb2RlciAhPSBudWxsID8gbWVzc2FnZURlY29kZXIgOiBkZWNvZGU7XG4gIGNvbnN0IG1lc3NhZ2VzT2JzZXJ2YWJsZSA9IG1lc3NhZ2VTdWJqZWN0LnBpcGUoXG4gICAgbWFwNigobXNnKSA9PiB7XG4gICAgICBjb25zdCBwYXJzZWRNZXNzYWdlID0gZmluYWxNZXNzYWdlRGVjb2Rlcihtc2cucGF5bG9hZCk7XG4gICAgICBjb25zdCBuZXdNZXNzYWdlID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcGFyc2VkTWVzc2FnZSksIHsgZnJvbTogbXNnLmZyb20gfSk7XG4gICAgICByZXR1cm4gbmV3TWVzc2FnZTtcbiAgICB9KSxcbiAgICBzY2FuKChhY2MsIHZhbHVlKSA9PiBbLi4uYWNjLCB2YWx1ZV0sIFtdKSxcbiAgICB0YWtlVW50aWwob25EZXN0cm95T2JzZXJ2YWJsZSlcbiAgKTtcbiAgY29uc3QgaXNTZW5kaW5nJCA9IG5ldyBCZWhhdmlvclN1YmplY3QyKGZhbHNlKTtcbiAgY29uc3QgZmluYWxNZXNzYWdlRW5jb2RlciA9IG1lc3NhZ2VFbmNvZGVyICE9IG51bGwgPyBtZXNzYWdlRW5jb2RlciA6IGVuY29kZTtcbiAgY29uc3Qgc2VuZCA9IChtZXNzYWdlKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlbmNvZGVkTXNnID0gZmluYWxNZXNzYWdlRW5jb2Rlcih7IG1lc3NhZ2UsIHRpbWVzdGFtcCB9KTtcbiAgICBpc1NlbmRpbmckLm5leHQodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIHlpZWxkIHNlbmRNZXNzYWdlKHJvb20ubG9jYWxQYXJ0aWNpcGFudCwgZW5jb2RlZE1zZywgdG9waWMsIHtcbiAgICAgICAga2luZDogRGF0YVBhY2tldF9LaW5kMi5SRUxJQUJMRVxuICAgICAgfSk7XG4gICAgICBtZXNzYWdlU3ViamVjdC5uZXh0KHtcbiAgICAgICAgcGF5bG9hZDogZW5jb2RlZE1zZyxcbiAgICAgICAgdG9waWMsXG4gICAgICAgIGZyb206IHJvb20ubG9jYWxQYXJ0aWNpcGFudFxuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzU2VuZGluZyQubmV4dChmYWxzZSk7XG4gICAgfVxuICB9KTtcbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBvbkRlc3Ryb3lPYnNlcnZhYmxlLm5leHQoKTtcbiAgICBvbkRlc3Ryb3lPYnNlcnZhYmxlLmNvbXBsZXRlKCk7XG4gICAgdG9waWNTdWJqZWN0TWFwLmNsZWFyKCk7XG4gIH1cbiAgcm9vbS5vbmNlKFJvb21FdmVudDQuRGlzY29ubmVjdGVkLCBkZXN0cm95KTtcbiAgcmV0dXJuIHsgbWVzc2FnZU9ic2VydmFibGU6IG1lc3NhZ2VzT2JzZXJ2YWJsZSwgaXNTZW5kaW5nT2JzZXJ2YWJsZTogaXNTZW5kaW5nJCwgc2VuZCB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9zdGFydEF1ZGlvLnRzXG5mdW5jdGlvbiBzZXR1cFN0YXJ0QXVkaW8oKSB7XG4gIGNvbnN0IGhhbmRsZVN0YXJ0QXVkaW9QbGF5YmFjayA9IChyb29tKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgbG9nLmluZm8oXCJTdGFydCBBdWRpbyBmb3Igcm9vbTogXCIsIHJvb20pO1xuICAgIHlpZWxkIHJvb20uc3RhcnRBdWRpbygpO1xuICB9KTtcbiAgY29uc3QgY2xhc3NOYW1lID0gcHJlZml4Q2xhc3MoXCJzdGFydC1hdWRpby1idXR0b25cIik7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZSwgaGFuZGxlU3RhcnRBdWRpb1BsYXliYWNrIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3N0YXJ0VmlkZW8udHNcbmZ1bmN0aW9uIHNldHVwU3RhcnRWaWRlbygpIHtcbiAgY29uc3QgaGFuZGxlU3RhcnRWaWRlb1BsYXliYWNrID0gKHJvb20pID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBsb2cuaW5mbyhcIlN0YXJ0IFZpZGVvIGZvciByb29tOiBcIiwgcm9vbSk7XG4gICAgeWllbGQgcm9vbS5zdGFydFZpZGVvKCk7XG4gIH0pO1xuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhcInN0YXJ0LWF1ZGlvLWJ1dHRvblwiKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lLCByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlLCBoYW5kbGVTdGFydFZpZGVvUGxheWJhY2sgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY2hhdFRvZ2dsZS50c1xuZnVuY3Rpb24gc2V0dXBDaGF0VG9nZ2xlKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSBbcHJlZml4Q2xhc3MoXCJidXR0b25cIiksIHByZWZpeENsYXNzKFwiY2hhdC10b2dnbGVcIildLmpvaW4oXCIgXCIpO1xuICByZXR1cm4geyBjbGFzc05hbWUgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvZm9jdXNUb2dnbGUudHNcbmZ1bmN0aW9uIHNldHVwRm9jdXNUb2dnbGUoKSB7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IFtwcmVmaXhDbGFzcyhcImJ1dHRvblwiKSwgcHJlZml4Q2xhc3MoXCJmb2N1cy10b2dnbGUtYnV0dG9uXCIpXS5qb2luKFwiIFwiKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2NsZWFyUGluQnV0dG9uLnRzXG5mdW5jdGlvbiBzZXR1cENsZWFyUGluQnV0dG9uKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSBcImxrLWNsZWFyLXBpbi1idXR0b24gbGstYnV0dG9uXCI7XG4gIHJldHVybiB7IGNsYXNzTmFtZSB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9yb29tLnRzXG5mdW5jdGlvbiBzZXR1cExpdmVLaXRSb29tKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSBcImxrLXJvb20tY29udGFpbmVyXCI7XG4gIHJldHVybiB7IGNsYXNzTmFtZSB9O1xufVxuXG4vLyBzcmMvb2JzZXJ2YWJsZXMvdHJhY2sudHNcbmltcG9ydCB7IFJvb21FdmVudCBhcyBSb29tRXZlbnQ1LCBUcmFja0V2ZW50IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBtYXAgYXMgbWFwNywgT2JzZXJ2YWJsZSBhcyBPYnNlcnZhYmxlNCwgc3RhcnRXaXRoIGFzIHN0YXJ0V2l0aDUgfSBmcm9tIFwicnhqc1wiO1xuZnVuY3Rpb24gdHJhY2tPYnNlcnZhYmxlKHRyYWNrKSB7XG4gIGNvbnN0IHRyYWNrT2JzZXJ2ZXIgPSBvYnNlcnZlVHJhY2tFdmVudHMoXG4gICAgdHJhY2ssXG4gICAgVHJhY2tFdmVudC5NdXRlZCxcbiAgICBUcmFja0V2ZW50LlVubXV0ZWQsXG4gICAgVHJhY2tFdmVudC5TdWJzY3JpYmVkLFxuICAgIFRyYWNrRXZlbnQuVW5zdWJzY3JpYmVkXG4gICk7XG4gIHJldHVybiB0cmFja09ic2VydmVyO1xufVxuZnVuY3Rpb24gb2JzZXJ2ZVRyYWNrRXZlbnRzKHRyYWNrLCAuLi5ldmVudHMpIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlNCgoc3Vic2NyaWJlKSA9PiB7XG4gICAgY29uc3Qgb25UcmFja1VwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHRyYWNrKTtcbiAgICB9O1xuICAgIGV2ZW50cy5mb3JFYWNoKChldnQpID0+IHtcbiAgICAgIHRyYWNrLm9uKGV2dCwgb25UcmFja1VwZGF0ZSk7XG4gICAgfSk7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBldmVudHMuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICAgIHRyYWNrLm9mZihldnQsIG9uVHJhY2tVcGRhdGUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pLnBpcGUoc3RhcnRXaXRoNSh0cmFjaykpO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIGdldFRyYWNrUmVmZXJlbmNlcyhyb29tLCBzb3VyY2VzLCBvbmx5U3Vic2NyaWJlZFRyYWNrcyA9IHRydWUpIHtcbiAgY29uc3QgbG9jYWxQYXJ0aWNpcGFudCA9IHJvb20ubG9jYWxQYXJ0aWNpcGFudDtcbiAgY29uc3QgYWxsUGFydGljaXBhbnRzID0gW2xvY2FsUGFydGljaXBhbnQsIC4uLkFycmF5LmZyb20ocm9vbS5wYXJ0aWNpcGFudHMudmFsdWVzKCkpXTtcbiAgY29uc3QgdHJhY2tSZWZlcmVuY2VzID0gW107XG4gIGFsbFBhcnRpY2lwYW50cy5mb3JFYWNoKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgIHNvdXJjZXMuZm9yRWFjaCgoc291cmNlKSA9PiB7XG4gICAgICBjb25zdCBzb3VyY2VSZWZlcmVuY2VzID0gQXJyYXkuZnJvbShcbiAgICAgICAgcGFydGljaXBhbnQudHJhY2tzLnZhbHVlcygpXG4gICAgICApLmZpbHRlcihcbiAgICAgICAgKHRyYWNrKSA9PiB0cmFjay5zb3VyY2UgPT09IHNvdXJjZSAmJiAvLyBlaXRoZXIgcmV0dXJuIGFsbCBvciBvbmx5IHRoZSBvbmVzIHRoYXQgYXJlIHN1YnNjcmliZWRcbiAgICAgICAgKCFvbmx5U3Vic2NyaWJlZFRyYWNrcyB8fCB0cmFjay50cmFjaylcbiAgICAgICkubWFwKCh0cmFjaykgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBhcnRpY2lwYW50LFxuICAgICAgICAgIHB1YmxpY2F0aW9uOiB0cmFjayxcbiAgICAgICAgICBzb3VyY2U6IHRyYWNrLnNvdXJjZVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICB0cmFja1JlZmVyZW5jZXMucHVzaCguLi5zb3VyY2VSZWZlcmVuY2VzKTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiB7IHRyYWNrUmVmZXJlbmNlcywgcGFydGljaXBhbnRzOiBhbGxQYXJ0aWNpcGFudHMgfTtcbn1cbmZ1bmN0aW9uIHRyYWNrUmVmZXJlbmNlc09ic2VydmFibGUocm9vbSwgc291cmNlcywgb3B0aW9ucykge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBhZGRpdGlvbmFsUm9vbUV2ZW50cyA9IChfYSA9IG9wdGlvbnMuYWRkaXRpb25hbFJvb21FdmVudHMpICE9IG51bGwgPyBfYSA6IGFsbFBhcnRpY2lwYW50Um9vbUV2ZW50cztcbiAgY29uc3Qgb25seVN1YnNjcmliZWRUcmFja3MgPSAoX2IgPSBvcHRpb25zLm9ubHlTdWJzY3JpYmVkKSAhPSBudWxsID8gX2IgOiB0cnVlO1xuICBjb25zdCByb29tRXZlbnRzID0gQXJyYXkuZnJvbShcbiAgICAoLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICAgICAgUm9vbUV2ZW50NS5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgICAgIFJvb21FdmVudDUuUGFydGljaXBhbnREaXNjb25uZWN0ZWQsXG4gICAgICBSb29tRXZlbnQ1LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQsXG4gICAgICBSb29tRXZlbnQ1LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gICAgICBSb29tRXZlbnQ1LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICAgIFJvb21FdmVudDUuVHJhY2tQdWJsaXNoZWQsXG4gICAgICBSb29tRXZlbnQ1LlRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICBSb29tRXZlbnQ1LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZCxcbiAgICAgIC4uLmFkZGl0aW9uYWxSb29tRXZlbnRzXG4gICAgXSkpLnZhbHVlcygpXG4gICk7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUm9vbUV2ZW50cyhyb29tLCAuLi5yb29tRXZlbnRzKS5waXBlKFxuICAgIG1hcDcoKHJvb20yKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZ2V0VHJhY2tSZWZlcmVuY2VzKHJvb20yLCBzb3VyY2VzLCBvbmx5U3Vic2NyaWJlZFRyYWNrcyk7XG4gICAgICBsb2cuZGVidWcoYFRyYWNrUmVmZXJlbmNlW10gd2FzIHVwZGF0ZWQuIChsZW5ndGggJHtkYXRhLnRyYWNrUmVmZXJlbmNlcy5sZW5ndGh9KWAsIGRhdGEpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSksXG4gICAgc3RhcnRXaXRoNShnZXRUcmFja1JlZmVyZW5jZXMocm9vbSwgc291cmNlcywgb25seVN1YnNjcmliZWRUcmFja3MpKVxuICApO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cblxuLy8gc3JjL29ic2VydmFibGVzL2RvbS1ldmVudC50c1xuaW1wb3J0IHsgY29uY2F0IGFzIGNvbmNhdDIsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBmcm9tRXZlbnQsIG1hcCBhcyBtYXA4LCBvZiwgc2tpcFVudGlsLCB0aW1lb3V0IH0gZnJvbSBcInJ4anNcIjtcbmZ1bmN0aW9uIGNyZWF0ZUludGVyYWN0aW5nT2JzZXJ2YWJsZShodG1sRWxlbWVudCwgaW5hY3RpdmVBZnRlciA9IDFlMykge1xuICBpZiAoaHRtbEVsZW1lbnQgPT09IG51bGwpXG4gICAgcmV0dXJuIG9mKGZhbHNlKTtcbiAgY29uc3QgbW92ZSQgPSBmcm9tRXZlbnQoaHRtbEVsZW1lbnQsIFwibW91c2Vtb3ZlXCIsIHsgcGFzc2l2ZTogdHJ1ZSB9KS5waXBlKG1hcDgoKCkgPT4gdHJ1ZSkpO1xuICBjb25zdCBtb3ZlQW5kU3RvcCQgPSBtb3ZlJC5waXBlKFxuICAgIHRpbWVvdXQoe1xuICAgICAgZWFjaDogaW5hY3RpdmVBZnRlcixcbiAgICAgIHdpdGg6ICgpID0+IGNvbmNhdDIob2YoZmFsc2UpLCBtb3ZlQW5kU3RvcCQucGlwZShza2lwVW50aWwobW92ZSQpKSlcbiAgICB9KSxcbiAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpXG4gICk7XG4gIHJldHVybiBtb3ZlQW5kU3RvcCQ7XG59XG5cbi8vIHNyYy9wZXJzaXN0ZW50LXN0b3JhZ2UvbG9jYWwtc3RvcmFnZS1oZWxwZXJzLnRzXG5mdW5jdGlvbiBzYXZlVG9Mb2NhbFN0b3JhZ2Uoa2V5LCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGxvZy5lcnJvcihcIkxvY2FsIHN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZS5cIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZy5lcnJvcihgRXJyb3Igc2V0dGluZyBpdGVtIHRvIGxvY2FsIHN0b3JhZ2U6ICR7ZXJyb3J9YCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGxvYWRGcm9tTG9jYWxTdG9yYWdlKGtleSkge1xuICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGxvZy5lcnJvcihcIkxvY2FsIHN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZS5cIik7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIGlmICghaXRlbSkge1xuICAgICAgbG9nLndhcm4oYEl0ZW0gd2l0aCBrZXkgJHtrZXl9IGRvZXMgbm90IGV4aXN0IGluIGxvY2FsIHN0b3JhZ2UuYCk7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2cuZXJyb3IoYEVycm9yIGdldHRpbmcgaXRlbSBmcm9tIGxvY2FsIHN0b3JhZ2U6ICR7ZXJyb3J9YCk7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlTG9jYWxTdG9yYWdlSW50ZXJmYWNlKGtleSkge1xuICByZXR1cm4ge1xuICAgIGxvYWQ6ICgpID0+IGxvYWRGcm9tTG9jYWxTdG9yYWdlKGtleSksXG4gICAgc2F2ZTogKHZhbHVlKSA9PiBzYXZlVG9Mb2NhbFN0b3JhZ2Uoa2V5LCB2YWx1ZSlcbiAgfTtcbn1cblxuLy8gc3JjL3BlcnNpc3RlbnQtc3RvcmFnZS91c2VyLWNob2ljZXMudHNcbnZhciBVU0VSX0NIT0lDRVNfS0VZID0gYCR7Y3NzUHJlZml4fS11c2VyLWNob2ljZXNgO1xudmFyIGRlZmF1bHRVc2VyQ2hvaWNlcyA9IHtcbiAgdmlkZW9FbmFibGVkOiB0cnVlLFxuICBhdWRpb0VuYWJsZWQ6IHRydWUsXG4gIHZpZGVvRGV2aWNlSWQ6IFwiXCIsXG4gIGF1ZGlvRGV2aWNlSWQ6IFwiXCIsXG4gIHVzZXJuYW1lOiBcIlwiLFxuICBlMmVlOiBmYWxzZSxcbiAgc2hhcmVkUGFzc3BocmFzZTogXCJcIlxufTtcbnZhciB7IGxvYWQsIHNhdmUgfSA9IGNyZWF0ZUxvY2FsU3RvcmFnZUludGVyZmFjZShVU0VSX0NIT0lDRVNfS0VZKTtcbmZ1bmN0aW9uIHNhdmVVc2VyQ2hvaWNlcyh1c2VyQ2hvaWNlcywgcHJldmVudFNhdmUgPSBmYWxzZSkge1xuICBpZiAocHJldmVudFNhdmUgPT09IHRydWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgX2EgPSB1c2VyQ2hvaWNlcywgeyBlMmVlLCBzaGFyZWRQYXNzcGhyYXNlIH0gPSBfYSwgdG9TYXZlID0gX19vYmpSZXN0KF9hLCBbXCJlMmVlXCIsIFwic2hhcmVkUGFzc3BocmFzZVwiXSk7XG4gIHNhdmUodG9TYXZlKTtcbn1cbmZ1bmN0aW9uIGxvYWRVc2VyQ2hvaWNlcyhkZWZhdWx0cywgcHJldmVudExvYWQgPSBmYWxzZSkge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gIGNvbnN0IGZhbGxiYWNrID0ge1xuICAgIHZpZGVvRW5hYmxlZDogKF9hID0gZGVmYXVsdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGRlZmF1bHRzLnZpZGVvRW5hYmxlZCkgIT0gbnVsbCA/IF9hIDogZGVmYXVsdFVzZXJDaG9pY2VzLnZpZGVvRW5hYmxlZCxcbiAgICBhdWRpb0VuYWJsZWQ6IChfYiA9IGRlZmF1bHRzID09IG51bGwgPyB2b2lkIDAgOiBkZWZhdWx0cy5hdWRpb0VuYWJsZWQpICE9IG51bGwgPyBfYiA6IGRlZmF1bHRVc2VyQ2hvaWNlcy5hdWRpb0VuYWJsZWQsXG4gICAgdmlkZW9EZXZpY2VJZDogKF9jID0gZGVmYXVsdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGRlZmF1bHRzLnZpZGVvRGV2aWNlSWQpICE9IG51bGwgPyBfYyA6IGRlZmF1bHRVc2VyQ2hvaWNlcy52aWRlb0RldmljZUlkLFxuICAgIGF1ZGlvRGV2aWNlSWQ6IChfZCA9IGRlZmF1bHRzID09IG51bGwgPyB2b2lkIDAgOiBkZWZhdWx0cy5hdWRpb0RldmljZUlkKSAhPSBudWxsID8gX2QgOiBkZWZhdWx0VXNlckNob2ljZXMuYXVkaW9EZXZpY2VJZCxcbiAgICB1c2VybmFtZTogKF9lID0gZGVmYXVsdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGRlZmF1bHRzLnVzZXJuYW1lKSAhPSBudWxsID8gX2UgOiBkZWZhdWx0VXNlckNob2ljZXMudXNlcm5hbWUsXG4gICAgZTJlZTogKF9mID0gZGVmYXVsdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGRlZmF1bHRzLmUyZWUpICE9IG51bGwgPyBfZiA6IGRlZmF1bHRVc2VyQ2hvaWNlcy5lMmVlLFxuICAgIHNoYXJlZFBhc3NwaHJhc2U6IChfZyA9IGRlZmF1bHRzID09IG51bGwgPyB2b2lkIDAgOiBkZWZhdWx0cy5zaGFyZWRQYXNzcGhyYXNlKSAhPSBudWxsID8gX2cgOiBkZWZhdWx0VXNlckNob2ljZXMuc2hhcmVkUGFzc3BocmFzZVxuICB9O1xuICBpZiAocHJldmVudExvYWQpIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbWF5YmVMb2FkZWRPYmplY3QgPSBsb2FkKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGZhbGxiYWNrKSwgbWF5YmVMb2FkZWRPYmplY3QgIT0gbnVsbCA/IG1heWJlTG9hZGVkT2JqZWN0IDoge30pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIERhdGFUb3BpYyxcbiAgR1JJRF9MQVlPVVRTLFxuICBQSU5fREVGQVVMVF9TVEFURSxcbiAgV0lER0VUX0RFRkFVTFRfU1RBVEUsXG4gIGFjdGl2ZVNwZWFrZXJPYnNlcnZlcixcbiAgYWxsUGFydGljaXBhbnRFdmVudHMsXG4gIGFsbFBhcnRpY2lwYW50Um9vbUV2ZW50cyxcbiAgYWxsUmVtb3RlUGFydGljaXBhbnRFdmVudHMsXG4gIGFsbFJlbW90ZVBhcnRpY2lwYW50Um9vbUV2ZW50cyxcbiAgYXR0YWNoSWZTdWJzY3JpYmVkLFxuICBjb21wdXRlTWVudVBvc2l0aW9uLFxuICBjb25uZWN0ZWRQYXJ0aWNpcGFudE9ic2VydmVyLFxuICBjb25uZWN0ZWRQYXJ0aWNpcGFudHNPYnNlcnZlcixcbiAgY29ubmVjdGlvblN0YXRlT2JzZXJ2ZXIsXG4gIGNyZWF0ZUFjdGl2ZURldmljZU9ic2VydmFibGUsXG4gIGNyZWF0ZUNvbm5lY3Rpb25RdWFsaXR5T2JzZXJ2ZXIsXG4gIGNyZWF0ZURhdGFPYnNlcnZlcixcbiAgY3JlYXRlRGVmYXVsdEdyYW1tYXIsXG4gIGNyZWF0ZUVtYWlsUmVnRXhwLFxuICBjcmVhdGVJbnRlcmFjdGluZ09ic2VydmFibGUsXG4gIGNyZWF0ZUlzU3BlYWtpbmdPYnNlcnZlcixcbiAgY3JlYXRlTWVkaWFEZXZpY2VPYnNlcnZlcixcbiAgY3JlYXRlVHJhY2tPYnNlcnZlcixcbiAgY3JlYXRlVXJsUmVnRXhwLFxuICBjc3NQcmVmaXgsXG4gIGVuY3J5cHRpb25TdGF0dXNPYnNlcnZhYmxlLFxuICBnZXRTY3JvbGxCYXJXaWR0aCxcbiAgZ2V0VHJhY2tCeUlkZW50aWZpZXIsXG4gIGdldFRyYWNrUmVmZXJlbmNlSWQsXG4gIGdldFRyYWNrUmVmZXJlbmNlU291cmNlLFxuICBpc0VxdWFsVHJhY2tSZWYsXG4gIGlzTG9jYWwsXG4gIGlzTW9iaWxlQnJvd3NlcixcbiAgaXNQYXJ0aWNpcGFudFNvdXJjZVBpbm5lZCxcbiAgaXNQYXJ0aWNpcGFudFRyYWNrUmVmZXJlbmNlUGlubmVkLFxuICBpc1BsYWNlaG9sZGVyUmVwbGFjZW1lbnQsXG4gIGlzUmVtb3RlLFxuICBpc1NvdXJjZVdpdE9wdGlvbnMsXG4gIGlzU291cmNlc1dpdGhPcHRpb25zLFxuICBpc1RyYWNrUmVmZXJlbmNlLFxuICBpc1RyYWNrUmVmZXJlbmNlUGlubmVkLFxuICBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIsXG4gIGlzV2ViLFxuICBsb2FkVXNlckNob2ljZXMsXG4gIGxvZyxcbiAgbXV0ZWRPYnNlcnZlcixcbiAgb2JzZXJ2ZVBhcnRpY2lwYW50RXZlbnRzLFxuICBvYnNlcnZlUGFydGljaXBhbnRNZWRpYSxcbiAgb2JzZXJ2ZVJvb21FdmVudHMsXG4gIG9ic2VydmVUcmFja0V2ZW50cyxcbiAgcGFydGljaXBhbnRFdmVudFNlbGVjdG9yLFxuICBwYXJ0aWNpcGFudEluZm9PYnNlcnZlcixcbiAgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIsXG4gIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUsXG4gIHJvb21FdmVudFNlbGVjdG9yLFxuICByb29tSW5mb09ic2VydmVyLFxuICByb29tT2JzZXJ2ZXIsXG4gIHJvb21WaWRlb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUsXG4gIHNhdmVVc2VyQ2hvaWNlcyxcbiAgc2NyZWVuU2hhcmVPYnNlcnZlcixcbiAgc2VsZWN0R3JpZExheW91dCxcbiAgc2VuZE1lc3NhZ2UsXG4gIHNldERpZmZlcmVuY2UsXG4gIHNldExvZ0V4dGVuc2lvbixcbiAgc2V0TG9nTGV2ZWwsXG4gIHNldHVwQ2hhdCxcbiAgc2V0dXBDaGF0VG9nZ2xlLFxuICBzZXR1cENsZWFyUGluQnV0dG9uLFxuICBzZXR1cENvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yLFxuICBzZXR1cERhdGFNZXNzYWdlSGFuZGxlcixcbiAgc2V0dXBEZXZpY2VTZWxlY3RvcixcbiAgc2V0dXBEaXNjb25uZWN0QnV0dG9uLFxuICBzZXR1cEZvY3VzVG9nZ2xlLFxuICBzZXR1cExpdmVLaXRSb29tLFxuICBzZXR1cE1hbnVhbFRvZ2dsZSxcbiAgc2V0dXBNZWRpYVRvZ2dsZSxcbiAgc2V0dXBNZWRpYVRyYWNrLFxuICBzZXR1cFBhcnRpY2lwYW50TmFtZSxcbiAgc2V0dXBQYXJ0aWNpcGFudFRpbGUsXG4gIHNldHVwU3RhcnRBdWRpbyxcbiAgc2V0dXBTdGFydFZpZGVvLFxuICBzZXR1cFRyYWNrTXV0ZWRJbmRpY2F0b3IsXG4gIHNvcnRQYXJ0aWNpcGFudHMsXG4gIHNvcnRUcmFja1JlZmVyZW5jZXMsXG4gIHN1cHBvcnRzU2NyZWVuU2hhcmluZyxcbiAgdG9rZW5pemUsXG4gIHRyYWNrT2JzZXJ2YWJsZSxcbiAgdHJhY2tSZWZlcmVuY2VzT2JzZXJ2YWJsZSxcbiAgdXBkYXRlUGFnZXMsXG4gIHdhc0NsaWNrT3V0c2lkZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-core/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-core/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@livekit/components-core/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   arrow: () => (/* binding */ arrow),\n/* harmony export */   autoPlacement: () => (/* binding */ autoPlacement),\n/* harmony export */   autoUpdate: () => (/* binding */ autoUpdate),\n/* harmony export */   computePosition: () => (/* binding */ computePosition),\n/* harmony export */   detectOverflow: () => (/* reexport safe */ _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.detectOverflow),\n/* harmony export */   flip: () => (/* binding */ flip),\n/* harmony export */   getOverflowAncestors: () => (/* reexport safe */ _floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getOverflowAncestors),\n/* harmony export */   hide: () => (/* binding */ hide),\n/* harmony export */   inline: () => (/* binding */ inline),\n/* harmony export */   limitShift: () => (/* binding */ limitShift),\n/* harmony export */   offset: () => (/* reexport safe */ _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.offset),\n/* harmony export */   platform: () => (/* binding */ platform),\n/* harmony export */   shift: () => (/* binding */ shift),\n/* harmony export */   size: () => (/* binding */ size)\n/* harmony export */ });\n/* harmony import */ var _floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @floating-ui/utils */ \"(ssr)/./node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs\");\n/* harmony import */ var _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @floating-ui/core */ \"(ssr)/./node_modules/@floating-ui/core/dist/floating-ui.core.mjs\");\n/* harmony import */ var _floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @floating-ui/utils/dom */ \"(ssr)/./node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs\");\n\n\n\n\n\n\nfunction getCssDimensions(element) {\n  const css = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.round)(width) !== offsetWidth || (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.round)(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement)(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(domElement)) {\n    return (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.round)(rect.width) : rect.width) / width;\n  let y = ($ ? (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.round)(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(0);\nfunction getVisualOffsets(element) {\n  const win = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getWindow)(element);\n  if (!(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isWebKit)() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getWindow)(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement)(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getWindow)(domElement);\n    const offsetWin = offsetParent && (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement)(offsetParent) ? (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getWindow)(offsetParent) : offsetParent;\n    let currentIFrame = win.frameElement;\n    while (currentIFrame && offsetParent && offsetWin !== win) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentIFrame = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getWindow)(currentIFrame).frameElement;\n    }\n  }\n  return (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.rectToClientRect)({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isOffsetParentAnElement = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(offsetParent);\n  const documentElement = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement)(offsetParent);\n  if (offsetParent === documentElement) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(1);\n  const offsets = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== 'fixed') {\n    if ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeName)(offsetParent) !== 'body' || (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isOverflowElement)(documentElement)) {\n      scroll = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeScroll)(offsetParent);\n    }\n    if ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\nfunction getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  return getBoundingClientRect((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement)(element)).left + (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeScroll)(element).scrollLeft;\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement)(element);\n  const scroll = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeScroll)(element);\n  const body = element.ownerDocument.body;\n  const width = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.max)(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.max)(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(body).direction === 'rtl') {\n    x += (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.max)(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getWindow)(element);\n  const html = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement)(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isWebKit)();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(element) ? getScale(element) : (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement)(element));\n  } else if ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement)(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      ...clippingAncestor,\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y\n    };\n  }\n  return (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.rectToClientRect)(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getParentNode)(element);\n  if (parentNode === stopNode || !(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement)(parentNode) || (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isLastTraversableNode)(parentNode)) {\n    return false;\n  }\n  return (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getOverflowAncestors)(element, [], false).filter(el => (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement)(el) && (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeName)(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(element).position === 'fixed';\n  let currentNode = elementIsFixed ? (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getParentNode)(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement)(currentNode) && !(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isLastTraversableNode)(currentNode)) {\n    const computedStyle = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(currentNode);\n    const currentNodeIsContaining = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isContainingBlock)(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isOverflowElement)(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getParentNode)(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.max)(rect.top, accRect.top);\n    accRect.right = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.min)(rect.right, accRect.right);\n    accRect.bottom = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.min)(rect.bottom, accRect.bottom);\n    accRect.left = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.max)(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(offsetParent);\n  const documentElement = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement)(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.createCoords)(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeName)(offsetParent) !== 'body' || (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isOverflowElement)(documentElement)) {\n      scroll = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeScroll)(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(element) || (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  return element.offsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const window = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getWindow)(element);\n  if (!(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(element)) {\n    return window;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isTableElement)(offsetParent) && (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && ((0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeName)(offsetParent) === 'html' || (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getNodeName)(offsetParent) === 'body' && (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(offsetParent).position === 'static' && !(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isContainingBlock)(offsetParent))) {\n    return window;\n  }\n  return offsetParent || (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getContainingBlock)(element) || window;\n}\n\nconst getElementRects = async function (_ref) {\n  let {\n    reference,\n    floating,\n    strategy\n  } = _ref;\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  return {\n    reference: getRectRelativeToOffsetParent(reference, await getOffsetParentFn(floating), strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      ...(await getDimensionsFn(floating))\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getComputedStyle)(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement: _floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement: _floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.isElement,\n  isRTL\n};\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getDocumentElement)(element);\n  function cleanup() {\n    clearTimeout(timeoutId);\n    io && io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.floor)(top);\n    const insetRight = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.floor)(root.clientWidth - (left + width));\n    const insetBottom = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.floor)(root.clientHeight - (top + height));\n    const insetLeft = (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.floor)(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.max)(0, (0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_2__.min)(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 100);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? (0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getOverflowAncestors)(referenceEl) : []), ...(0,_floating_ui_utils_dom__WEBPACK_IMPORTED_MODULE_1__.getOverflowAncestors)(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          resizeObserver && resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo && cleanupIo();\n    resizeObserver && resizeObserver.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.autoPlacement;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.shift;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.flip;\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.size;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.hide;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.arrow;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.inline;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = _floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.limitShift;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return (0,_floating_ui_core__WEBPACK_IMPORTED_MODULE_0__.computePosition)(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL25vZGVfbW9kdWxlcy9AZmxvYXRpbmctdWkvZG9tL2Rpc3QvZmxvYXRpbmctdWkuZG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFpUTtBQUN0TTtBQUNlO0FBQ3FOO0FBQ2pPOztBQUU5RDtBQUNBLGNBQWMsd0VBQWdCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFFQUFhO0FBQ2pDO0FBQ0E7QUFDQSx5QkFBeUIseURBQUssMkJBQTJCLHlEQUFLO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVSxpRUFBUztBQUNuQjs7QUFFQTtBQUNBO0FBQ0EsT0FBTyxxRUFBYTtBQUNwQixXQUFXLGdFQUFZO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixlQUFlLHlEQUFLO0FBQ3BCLGVBQWUseURBQUs7O0FBRXBCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLGdFQUFZO0FBQzNDO0FBQ0EsY0FBYyxpRUFBUztBQUN2QixPQUFPLGdFQUFRO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxpRUFBUztBQUM1RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdFQUFZO0FBQzFCO0FBQ0E7QUFDQSxVQUFVLGlFQUFTO0FBQ25CO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsMkhBQTJILGdFQUFZO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUVBQVM7QUFDekIsc0NBQXND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QSxhQUFhLG1EQUFNOztBQUVuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtREFBTTs7QUFFbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0RBQU87O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHFEQUFROztBQUV2QjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseURBQVk7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtFQUFpQjtBQUMxQjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVvSCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbW11bml0eS8uL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvbm9kZV9tb2R1bGVzL0BmbG9hdGluZy11aS9kb20vZGlzdC9mbG9hdGluZy11aS5kb20ubWpzPzEzNTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVjdFRvQ2xpZW50UmVjdCwgYXV0b1BsYWNlbWVudCBhcyBhdXRvUGxhY2VtZW50JDEsIHNoaWZ0IGFzIHNoaWZ0JDEsIGZsaXAgYXMgZmxpcCQxLCBzaXplIGFzIHNpemUkMSwgaGlkZSBhcyBoaWRlJDEsIGFycm93IGFzIGFycm93JDEsIGlubGluZSBhcyBpbmxpbmUkMSwgbGltaXRTaGlmdCBhcyBsaW1pdFNoaWZ0JDEsIGNvbXB1dGVQb3NpdGlvbiBhcyBjb21wdXRlUG9zaXRpb24kMSB9IGZyb20gJ0BmbG9hdGluZy11aS9jb3JlJztcbmV4cG9ydCB7IGRldGVjdE92ZXJmbG93LCBvZmZzZXQgfSBmcm9tICdAZmxvYXRpbmctdWkvY29yZSc7XG5pbXBvcnQgeyByb3VuZCwgY3JlYXRlQ29vcmRzLCBtYXgsIG1pbiwgZmxvb3IgfSBmcm9tICdAZmxvYXRpbmctdWkvdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q29tcHV0ZWRTdHlsZSwgaXNIVE1MRWxlbWVudCwgaXNFbGVtZW50LCBnZXRXaW5kb3csIGlzV2ViS2l0LCBnZXREb2N1bWVudEVsZW1lbnQsIGdldE5vZGVOYW1lLCBpc092ZXJmbG93RWxlbWVudCwgZ2V0Tm9kZVNjcm9sbCwgZ2V0T3ZlcmZsb3dBbmNlc3RvcnMsIGdldFBhcmVudE5vZGUsIGlzTGFzdFRyYXZlcnNhYmxlTm9kZSwgaXNDb250YWluaW5nQmxvY2ssIGlzVGFibGVFbGVtZW50LCBnZXRDb250YWluaW5nQmxvY2sgfSBmcm9tICdAZmxvYXRpbmctdWkvdXRpbHMvZG9tJztcbmV4cG9ydCB7IGdldE92ZXJmbG93QW5jZXN0b3JzIH0gZnJvbSAnQGZsb2F0aW5nLXVpL3V0aWxzL2RvbSc7XG5cbmZ1bmN0aW9uIGdldENzc0RpbWVuc2lvbnMoZWxlbWVudCkge1xuICBjb25zdCBjc3MgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAvLyBJbiB0ZXN0aW5nIGVudmlyb25tZW50cywgdGhlIGB3aWR0aGAgYW5kIGBoZWlnaHRgIHByb3BlcnRpZXMgYXJlIGVtcHR5XG4gIC8vIHN0cmluZ3MgZm9yIFNWRyBlbGVtZW50cywgcmV0dXJuaW5nIE5hTi4gRmFsbGJhY2sgdG8gYDBgIGluIHRoaXMgY2FzZS5cbiAgbGV0IHdpZHRoID0gcGFyc2VGbG9hdChjc3Mud2lkdGgpIHx8IDA7XG4gIGxldCBoZWlnaHQgPSBwYXJzZUZsb2F0KGNzcy5oZWlnaHQpIHx8IDA7XG4gIGNvbnN0IGhhc09mZnNldCA9IGlzSFRNTEVsZW1lbnQoZWxlbWVudCk7XG4gIGNvbnN0IG9mZnNldFdpZHRoID0gaGFzT2Zmc2V0ID8gZWxlbWVudC5vZmZzZXRXaWR0aCA6IHdpZHRoO1xuICBjb25zdCBvZmZzZXRIZWlnaHQgPSBoYXNPZmZzZXQgPyBlbGVtZW50Lm9mZnNldEhlaWdodCA6IGhlaWdodDtcbiAgY29uc3Qgc2hvdWxkRmFsbGJhY2sgPSByb3VuZCh3aWR0aCkgIT09IG9mZnNldFdpZHRoIHx8IHJvdW5kKGhlaWdodCkgIT09IG9mZnNldEhlaWdodDtcbiAgaWYgKHNob3VsZEZhbGxiYWNrKSB7XG4gICAgd2lkdGggPSBvZmZzZXRXaWR0aDtcbiAgICBoZWlnaHQgPSBvZmZzZXRIZWlnaHQ7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgJDogc2hvdWxkRmFsbGJhY2tcbiAgfTtcbn1cblxuZnVuY3Rpb24gdW53cmFwRWxlbWVudChlbGVtZW50KSB7XG4gIHJldHVybiAhaXNFbGVtZW50KGVsZW1lbnQpID8gZWxlbWVudC5jb250ZXh0RWxlbWVudCA6IGVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGdldFNjYWxlKGVsZW1lbnQpIHtcbiAgY29uc3QgZG9tRWxlbWVudCA9IHVud3JhcEVsZW1lbnQoZWxlbWVudCk7XG4gIGlmICghaXNIVE1MRWxlbWVudChkb21FbGVtZW50KSkge1xuICAgIHJldHVybiBjcmVhdGVDb29yZHMoMSk7XG4gIH1cbiAgY29uc3QgcmVjdCA9IGRvbUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IHtcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgJFxuICB9ID0gZ2V0Q3NzRGltZW5zaW9ucyhkb21FbGVtZW50KTtcbiAgbGV0IHggPSAoJCA/IHJvdW5kKHJlY3Qud2lkdGgpIDogcmVjdC53aWR0aCkgLyB3aWR0aDtcbiAgbGV0IHkgPSAoJCA/IHJvdW5kKHJlY3QuaGVpZ2h0KSA6IHJlY3QuaGVpZ2h0KSAvIGhlaWdodDtcblxuICAvLyAwLCBOYU4sIG9yIEluZmluaXR5IHNob3VsZCBhbHdheXMgZmFsbGJhY2sgdG8gMS5cblxuICBpZiAoIXggfHwgIU51bWJlci5pc0Zpbml0ZSh4KSkge1xuICAgIHggPSAxO1xuICB9XG4gIGlmICgheSB8fCAhTnVtYmVyLmlzRmluaXRlKHkpKSB7XG4gICAgeSA9IDE7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB4LFxuICAgIHlcbiAgfTtcbn1cblxuY29uc3Qgbm9PZmZzZXRzID0gLyojX19QVVJFX18qL2NyZWF0ZUNvb3JkcygwKTtcbmZ1bmN0aW9uIGdldFZpc3VhbE9mZnNldHMoZWxlbWVudCkge1xuICBjb25zdCB3aW4gPSBnZXRXaW5kb3coZWxlbWVudCk7XG4gIGlmICghaXNXZWJLaXQoKSB8fCAhd2luLnZpc3VhbFZpZXdwb3J0KSB7XG4gICAgcmV0dXJuIG5vT2Zmc2V0cztcbiAgfVxuICByZXR1cm4ge1xuICAgIHg6IHdpbi52aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0LFxuICAgIHk6IHdpbi52aXN1YWxWaWV3cG9ydC5vZmZzZXRUb3BcbiAgfTtcbn1cbmZ1bmN0aW9uIHNob3VsZEFkZFZpc3VhbE9mZnNldHMoZWxlbWVudCwgaXNGaXhlZCwgZmxvYXRpbmdPZmZzZXRQYXJlbnQpIHtcbiAgaWYgKGlzRml4ZWQgPT09IHZvaWQgMCkge1xuICAgIGlzRml4ZWQgPSBmYWxzZTtcbiAgfVxuICBpZiAoIWZsb2F0aW5nT2Zmc2V0UGFyZW50IHx8IGlzRml4ZWQgJiYgZmxvYXRpbmdPZmZzZXRQYXJlbnQgIT09IGdldFdpbmRvdyhlbGVtZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaXNGaXhlZDtcbn1cblxuZnVuY3Rpb24gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIGluY2x1ZGVTY2FsZSwgaXNGaXhlZFN0cmF0ZWd5LCBvZmZzZXRQYXJlbnQpIHtcbiAgaWYgKGluY2x1ZGVTY2FsZSA9PT0gdm9pZCAwKSB7XG4gICAgaW5jbHVkZVNjYWxlID0gZmFsc2U7XG4gIH1cbiAgaWYgKGlzRml4ZWRTdHJhdGVneSA9PT0gdm9pZCAwKSB7XG4gICAgaXNGaXhlZFN0cmF0ZWd5ID0gZmFsc2U7XG4gIH1cbiAgY29uc3QgY2xpZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGRvbUVsZW1lbnQgPSB1bndyYXBFbGVtZW50KGVsZW1lbnQpO1xuICBsZXQgc2NhbGUgPSBjcmVhdGVDb29yZHMoMSk7XG4gIGlmIChpbmNsdWRlU2NhbGUpIHtcbiAgICBpZiAob2Zmc2V0UGFyZW50KSB7XG4gICAgICBpZiAoaXNFbGVtZW50KG9mZnNldFBhcmVudCkpIHtcbiAgICAgICAgc2NhbGUgPSBnZXRTY2FsZShvZmZzZXRQYXJlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzY2FsZSA9IGdldFNjYWxlKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICBjb25zdCB2aXN1YWxPZmZzZXRzID0gc2hvdWxkQWRkVmlzdWFsT2Zmc2V0cyhkb21FbGVtZW50LCBpc0ZpeGVkU3RyYXRlZ3ksIG9mZnNldFBhcmVudCkgPyBnZXRWaXN1YWxPZmZzZXRzKGRvbUVsZW1lbnQpIDogY3JlYXRlQ29vcmRzKDApO1xuICBsZXQgeCA9IChjbGllbnRSZWN0LmxlZnQgKyB2aXN1YWxPZmZzZXRzLngpIC8gc2NhbGUueDtcbiAgbGV0IHkgPSAoY2xpZW50UmVjdC50b3AgKyB2aXN1YWxPZmZzZXRzLnkpIC8gc2NhbGUueTtcbiAgbGV0IHdpZHRoID0gY2xpZW50UmVjdC53aWR0aCAvIHNjYWxlLng7XG4gIGxldCBoZWlnaHQgPSBjbGllbnRSZWN0LmhlaWdodCAvIHNjYWxlLnk7XG4gIGlmIChkb21FbGVtZW50KSB7XG4gICAgY29uc3Qgd2luID0gZ2V0V2luZG93KGRvbUVsZW1lbnQpO1xuICAgIGNvbnN0IG9mZnNldFdpbiA9IG9mZnNldFBhcmVudCAmJiBpc0VsZW1lbnQob2Zmc2V0UGFyZW50KSA/IGdldFdpbmRvdyhvZmZzZXRQYXJlbnQpIDogb2Zmc2V0UGFyZW50O1xuICAgIGxldCBjdXJyZW50SUZyYW1lID0gd2luLmZyYW1lRWxlbWVudDtcbiAgICB3aGlsZSAoY3VycmVudElGcmFtZSAmJiBvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0V2luICE9PSB3aW4pIHtcbiAgICAgIGNvbnN0IGlmcmFtZVNjYWxlID0gZ2V0U2NhbGUoY3VycmVudElGcmFtZSk7XG4gICAgICBjb25zdCBpZnJhbWVSZWN0ID0gY3VycmVudElGcmFtZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IGNzcyA9IGdldENvbXB1dGVkU3R5bGUoY3VycmVudElGcmFtZSk7XG4gICAgICBjb25zdCBsZWZ0ID0gaWZyYW1lUmVjdC5sZWZ0ICsgKGN1cnJlbnRJRnJhbWUuY2xpZW50TGVmdCArIHBhcnNlRmxvYXQoY3NzLnBhZGRpbmdMZWZ0KSkgKiBpZnJhbWVTY2FsZS54O1xuICAgICAgY29uc3QgdG9wID0gaWZyYW1lUmVjdC50b3AgKyAoY3VycmVudElGcmFtZS5jbGllbnRUb3AgKyBwYXJzZUZsb2F0KGNzcy5wYWRkaW5nVG9wKSkgKiBpZnJhbWVTY2FsZS55O1xuICAgICAgeCAqPSBpZnJhbWVTY2FsZS54O1xuICAgICAgeSAqPSBpZnJhbWVTY2FsZS55O1xuICAgICAgd2lkdGggKj0gaWZyYW1lU2NhbGUueDtcbiAgICAgIGhlaWdodCAqPSBpZnJhbWVTY2FsZS55O1xuICAgICAgeCArPSBsZWZ0O1xuICAgICAgeSArPSB0b3A7XG4gICAgICBjdXJyZW50SUZyYW1lID0gZ2V0V2luZG93KGN1cnJlbnRJRnJhbWUpLmZyYW1lRWxlbWVudDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlY3RUb0NsaWVudFJlY3Qoe1xuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICB4LFxuICAgIHlcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRPZmZzZXRQYXJlbnRSZWxhdGl2ZVJlY3RUb1ZpZXdwb3J0UmVsYXRpdmVSZWN0KF9yZWYpIHtcbiAgbGV0IHtcbiAgICByZWN0LFxuICAgIG9mZnNldFBhcmVudCxcbiAgICBzdHJhdGVneVxuICB9ID0gX3JlZjtcbiAgY29uc3QgaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgPSBpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCk7XG4gIGNvbnN0IGRvY3VtZW50RWxlbWVudCA9IGdldERvY3VtZW50RWxlbWVudChvZmZzZXRQYXJlbnQpO1xuICBpZiAob2Zmc2V0UGFyZW50ID09PSBkb2N1bWVudEVsZW1lbnQpIHtcbiAgICByZXR1cm4gcmVjdDtcbiAgfVxuICBsZXQgc2Nyb2xsID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH07XG4gIGxldCBzY2FsZSA9IGNyZWF0ZUNvb3JkcygxKTtcbiAgY29uc3Qgb2Zmc2V0cyA9IGNyZWF0ZUNvb3JkcygwKTtcbiAgaWYgKGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50IHx8ICFpc09mZnNldFBhcmVudEFuRWxlbWVudCAmJiBzdHJhdGVneSAhPT0gJ2ZpeGVkJykge1xuICAgIGlmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpICE9PSAnYm9keScgfHwgaXNPdmVyZmxvd0VsZW1lbnQoZG9jdW1lbnRFbGVtZW50KSkge1xuICAgICAgc2Nyb2xsID0gZ2V0Tm9kZVNjcm9sbChvZmZzZXRQYXJlbnQpO1xuICAgIH1cbiAgICBpZiAoaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpKSB7XG4gICAgICBjb25zdCBvZmZzZXRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KG9mZnNldFBhcmVudCk7XG4gICAgICBzY2FsZSA9IGdldFNjYWxlKG9mZnNldFBhcmVudCk7XG4gICAgICBvZmZzZXRzLnggPSBvZmZzZXRSZWN0LnggKyBvZmZzZXRQYXJlbnQuY2xpZW50TGVmdDtcbiAgICAgIG9mZnNldHMueSA9IG9mZnNldFJlY3QueSArIG9mZnNldFBhcmVudC5jbGllbnRUb3A7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHJlY3Qud2lkdGggKiBzY2FsZS54LFxuICAgIGhlaWdodDogcmVjdC5oZWlnaHQgKiBzY2FsZS55LFxuICAgIHg6IHJlY3QueCAqIHNjYWxlLnggLSBzY3JvbGwuc2Nyb2xsTGVmdCAqIHNjYWxlLnggKyBvZmZzZXRzLngsXG4gICAgeTogcmVjdC55ICogc2NhbGUueSAtIHNjcm9sbC5zY3JvbGxUb3AgKiBzY2FsZS55ICsgb2Zmc2V0cy55XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudFJlY3RzKGVsZW1lbnQpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5nZXRDbGllbnRSZWN0cygpKTtcbn1cblxuZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KSB7XG4gIC8vIElmIDxodG1sPiBoYXMgYSBDU1Mgd2lkdGggZ3JlYXRlciB0aGFuIHRoZSB2aWV3cG9ydCwgdGhlbiB0aGlzIHdpbGwgYmVcbiAgLy8gaW5jb3JyZWN0IGZvciBSVEwuXG4gIHJldHVybiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpKS5sZWZ0ICsgZ2V0Tm9kZVNjcm9sbChlbGVtZW50KS5zY3JvbGxMZWZ0O1xufVxuXG4vLyBHZXRzIHRoZSBlbnRpcmUgc2l6ZSBvZiB0aGUgc2Nyb2xsYWJsZSBkb2N1bWVudCBhcmVhLCBldmVuIGV4dGVuZGluZyBvdXRzaWRlXG4vLyBvZiB0aGUgYDxodG1sPmAgYW5kIGA8Ym9keT5gIHJlY3QgYm91bmRzIGlmIGhvcml6b250YWxseSBzY3JvbGxhYmxlLlxuZnVuY3Rpb24gZ2V0RG9jdW1lbnRSZWN0KGVsZW1lbnQpIHtcbiAgY29uc3QgaHRtbCA9IGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KTtcbiAgY29uc3Qgc2Nyb2xsID0gZ2V0Tm9kZVNjcm9sbChlbGVtZW50KTtcbiAgY29uc3QgYm9keSA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5ib2R5O1xuICBjb25zdCB3aWR0aCA9IG1heChodG1sLnNjcm9sbFdpZHRoLCBodG1sLmNsaWVudFdpZHRoLCBib2R5LnNjcm9sbFdpZHRoLCBib2R5LmNsaWVudFdpZHRoKTtcbiAgY29uc3QgaGVpZ2h0ID0gbWF4KGh0bWwuc2Nyb2xsSGVpZ2h0LCBodG1sLmNsaWVudEhlaWdodCwgYm9keS5zY3JvbGxIZWlnaHQsIGJvZHkuY2xpZW50SGVpZ2h0KTtcbiAgbGV0IHggPSAtc2Nyb2xsLnNjcm9sbExlZnQgKyBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpO1xuICBjb25zdCB5ID0gLXNjcm9sbC5zY3JvbGxUb3A7XG4gIGlmIChnZXRDb21wdXRlZFN0eWxlKGJvZHkpLmRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICB4ICs9IG1heChodG1sLmNsaWVudFdpZHRoLCBib2R5LmNsaWVudFdpZHRoKSAtIHdpZHRoO1xuICB9XG4gIHJldHVybiB7XG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIHgsXG4gICAgeVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRWaWV3cG9ydFJlY3QoZWxlbWVudCwgc3RyYXRlZ3kpIHtcbiAgY29uc3Qgd2luID0gZ2V0V2luZG93KGVsZW1lbnQpO1xuICBjb25zdCBodG1sID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICBjb25zdCB2aXN1YWxWaWV3cG9ydCA9IHdpbi52aXN1YWxWaWV3cG9ydDtcbiAgbGV0IHdpZHRoID0gaHRtbC5jbGllbnRXaWR0aDtcbiAgbGV0IGhlaWdodCA9IGh0bWwuY2xpZW50SGVpZ2h0O1xuICBsZXQgeCA9IDA7XG4gIGxldCB5ID0gMDtcbiAgaWYgKHZpc3VhbFZpZXdwb3J0KSB7XG4gICAgd2lkdGggPSB2aXN1YWxWaWV3cG9ydC53aWR0aDtcbiAgICBoZWlnaHQgPSB2aXN1YWxWaWV3cG9ydC5oZWlnaHQ7XG4gICAgY29uc3QgdmlzdWFsVmlld3BvcnRCYXNlZCA9IGlzV2ViS2l0KCk7XG4gICAgaWYgKCF2aXN1YWxWaWV3cG9ydEJhc2VkIHx8IHZpc3VhbFZpZXdwb3J0QmFzZWQgJiYgc3RyYXRlZ3kgPT09ICdmaXhlZCcpIHtcbiAgICAgIHggPSB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0O1xuICAgICAgeSA9IHZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgeCxcbiAgICB5XG4gIH07XG59XG5cbi8vIFJldHVybnMgdGhlIGlubmVyIGNsaWVudCByZWN0LCBzdWJ0cmFjdGluZyBzY3JvbGxiYXJzIGlmIHByZXNlbnQuXG5mdW5jdGlvbiBnZXRJbm5lckJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBzdHJhdGVneSkge1xuICBjb25zdCBjbGllbnRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIHRydWUsIHN0cmF0ZWd5ID09PSAnZml4ZWQnKTtcbiAgY29uc3QgdG9wID0gY2xpZW50UmVjdC50b3AgKyBlbGVtZW50LmNsaWVudFRvcDtcbiAgY29uc3QgbGVmdCA9IGNsaWVudFJlY3QubGVmdCArIGVsZW1lbnQuY2xpZW50TGVmdDtcbiAgY29uc3Qgc2NhbGUgPSBpc0hUTUxFbGVtZW50KGVsZW1lbnQpID8gZ2V0U2NhbGUoZWxlbWVudCkgOiBjcmVhdGVDb29yZHMoMSk7XG4gIGNvbnN0IHdpZHRoID0gZWxlbWVudC5jbGllbnRXaWR0aCAqIHNjYWxlLng7XG4gIGNvbnN0IGhlaWdodCA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0ICogc2NhbGUueTtcbiAgY29uc3QgeCA9IGxlZnQgKiBzY2FsZS54O1xuICBjb25zdCB5ID0gdG9wICogc2NhbGUueTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgeCxcbiAgICB5XG4gIH07XG59XG5mdW5jdGlvbiBnZXRDbGllbnRSZWN0RnJvbUNsaXBwaW5nQW5jZXN0b3IoZWxlbWVudCwgY2xpcHBpbmdBbmNlc3Rvciwgc3RyYXRlZ3kpIHtcbiAgbGV0IHJlY3Q7XG4gIGlmIChjbGlwcGluZ0FuY2VzdG9yID09PSAndmlld3BvcnQnKSB7XG4gICAgcmVjdCA9IGdldFZpZXdwb3J0UmVjdChlbGVtZW50LCBzdHJhdGVneSk7XG4gIH0gZWxzZSBpZiAoY2xpcHBpbmdBbmNlc3RvciA9PT0gJ2RvY3VtZW50Jykge1xuICAgIHJlY3QgPSBnZXREb2N1bWVudFJlY3QoZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpKTtcbiAgfSBlbHNlIGlmIChpc0VsZW1lbnQoY2xpcHBpbmdBbmNlc3RvcikpIHtcbiAgICByZWN0ID0gZ2V0SW5uZXJCb3VuZGluZ0NsaWVudFJlY3QoY2xpcHBpbmdBbmNlc3Rvciwgc3RyYXRlZ3kpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHZpc3VhbE9mZnNldHMgPSBnZXRWaXN1YWxPZmZzZXRzKGVsZW1lbnQpO1xuICAgIHJlY3QgPSB7XG4gICAgICAuLi5jbGlwcGluZ0FuY2VzdG9yLFxuICAgICAgeDogY2xpcHBpbmdBbmNlc3Rvci54IC0gdmlzdWFsT2Zmc2V0cy54LFxuICAgICAgeTogY2xpcHBpbmdBbmNlc3Rvci55IC0gdmlzdWFsT2Zmc2V0cy55XG4gICAgfTtcbiAgfVxuICByZXR1cm4gcmVjdFRvQ2xpZW50UmVjdChyZWN0KTtcbn1cbmZ1bmN0aW9uIGhhc0ZpeGVkUG9zaXRpb25BbmNlc3RvcihlbGVtZW50LCBzdG9wTm9kZSkge1xuICBjb25zdCBwYXJlbnROb2RlID0gZ2V0UGFyZW50Tm9kZShlbGVtZW50KTtcbiAgaWYgKHBhcmVudE5vZGUgPT09IHN0b3BOb2RlIHx8ICFpc0VsZW1lbnQocGFyZW50Tm9kZSkgfHwgaXNMYXN0VHJhdmVyc2FibGVOb2RlKHBhcmVudE5vZGUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHBhcmVudE5vZGUpLnBvc2l0aW9uID09PSAnZml4ZWQnIHx8IGhhc0ZpeGVkUG9zaXRpb25BbmNlc3RvcihwYXJlbnROb2RlLCBzdG9wTm9kZSk7XG59XG5cbi8vIEEgXCJjbGlwcGluZyBhbmNlc3RvclwiIGlzIGFuIGBvdmVyZmxvd2AgZWxlbWVudCB3aXRoIHRoZSBjaGFyYWN0ZXJpc3RpYyBvZlxuLy8gY2xpcHBpbmcgKG9yIGhpZGluZykgY2hpbGQgZWxlbWVudHMuIFRoaXMgcmV0dXJucyBhbGwgY2xpcHBpbmcgYW5jZXN0b3JzXG4vLyBvZiB0aGUgZ2l2ZW4gZWxlbWVudCB1cCB0aGUgdHJlZS5cbmZ1bmN0aW9uIGdldENsaXBwaW5nRWxlbWVudEFuY2VzdG9ycyhlbGVtZW50LCBjYWNoZSkge1xuICBjb25zdCBjYWNoZWRSZXN1bHQgPSBjYWNoZS5nZXQoZWxlbWVudCk7XG4gIGlmIChjYWNoZWRSZXN1bHQpIHtcbiAgICByZXR1cm4gY2FjaGVkUmVzdWx0O1xuICB9XG4gIGxldCByZXN1bHQgPSBnZXRPdmVyZmxvd0FuY2VzdG9ycyhlbGVtZW50LCBbXSwgZmFsc2UpLmZpbHRlcihlbCA9PiBpc0VsZW1lbnQoZWwpICYmIGdldE5vZGVOYW1lKGVsKSAhPT0gJ2JvZHknKTtcbiAgbGV0IGN1cnJlbnRDb250YWluaW5nQmxvY2tDb21wdXRlZFN0eWxlID0gbnVsbDtcbiAgY29uc3QgZWxlbWVudElzRml4ZWQgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uID09PSAnZml4ZWQnO1xuICBsZXQgY3VycmVudE5vZGUgPSBlbGVtZW50SXNGaXhlZCA/IGdldFBhcmVudE5vZGUoZWxlbWVudCkgOiBlbGVtZW50O1xuXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9Db250YWluaW5nX2Jsb2NrI2lkZW50aWZ5aW5nX3RoZV9jb250YWluaW5nX2Jsb2NrXG4gIHdoaWxlIChpc0VsZW1lbnQoY3VycmVudE5vZGUpICYmICFpc0xhc3RUcmF2ZXJzYWJsZU5vZGUoY3VycmVudE5vZGUpKSB7XG4gICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoY3VycmVudE5vZGUpO1xuICAgIGNvbnN0IGN1cnJlbnROb2RlSXNDb250YWluaW5nID0gaXNDb250YWluaW5nQmxvY2soY3VycmVudE5vZGUpO1xuICAgIGlmICghY3VycmVudE5vZGVJc0NvbnRhaW5pbmcgJiYgY29tcHV0ZWRTdHlsZS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgICAgY3VycmVudENvbnRhaW5pbmdCbG9ja0NvbXB1dGVkU3R5bGUgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCBzaG91bGREcm9wQ3VycmVudE5vZGUgPSBlbGVtZW50SXNGaXhlZCA/ICFjdXJyZW50Tm9kZUlzQ29udGFpbmluZyAmJiAhY3VycmVudENvbnRhaW5pbmdCbG9ja0NvbXB1dGVkU3R5bGUgOiAhY3VycmVudE5vZGVJc0NvbnRhaW5pbmcgJiYgY29tcHV0ZWRTdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycgJiYgISFjdXJyZW50Q29udGFpbmluZ0Jsb2NrQ29tcHV0ZWRTdHlsZSAmJiBbJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5jbHVkZXMoY3VycmVudENvbnRhaW5pbmdCbG9ja0NvbXB1dGVkU3R5bGUucG9zaXRpb24pIHx8IGlzT3ZlcmZsb3dFbGVtZW50KGN1cnJlbnROb2RlKSAmJiAhY3VycmVudE5vZGVJc0NvbnRhaW5pbmcgJiYgaGFzRml4ZWRQb3NpdGlvbkFuY2VzdG9yKGVsZW1lbnQsIGN1cnJlbnROb2RlKTtcbiAgICBpZiAoc2hvdWxkRHJvcEN1cnJlbnROb2RlKSB7XG4gICAgICAvLyBEcm9wIG5vbi1jb250YWluaW5nIGJsb2Nrcy5cbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoYW5jZXN0b3IgPT4gYW5jZXN0b3IgIT09IGN1cnJlbnROb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVjb3JkIGxhc3QgY29udGFpbmluZyBibG9jayBmb3IgbmV4dCBpdGVyYXRpb24uXG4gICAgICBjdXJyZW50Q29udGFpbmluZ0Jsb2NrQ29tcHV0ZWRTdHlsZSA9IGNvbXB1dGVkU3R5bGU7XG4gICAgfVxuICAgIGN1cnJlbnROb2RlID0gZ2V0UGFyZW50Tm9kZShjdXJyZW50Tm9kZSk7XG4gIH1cbiAgY2FjaGUuc2V0KGVsZW1lbnQsIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIEdldHMgdGhlIG1heGltdW0gYXJlYSB0aGF0IHRoZSBlbGVtZW50IGlzIHZpc2libGUgaW4gZHVlIHRvIGFueSBudW1iZXIgb2Zcbi8vIGNsaXBwaW5nIGFuY2VzdG9ycy5cbmZ1bmN0aW9uIGdldENsaXBwaW5nUmVjdChfcmVmKSB7XG4gIGxldCB7XG4gICAgZWxlbWVudCxcbiAgICBib3VuZGFyeSxcbiAgICByb290Qm91bmRhcnksXG4gICAgc3RyYXRlZ3lcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IGVsZW1lbnRDbGlwcGluZ0FuY2VzdG9ycyA9IGJvdW5kYXJ5ID09PSAnY2xpcHBpbmdBbmNlc3RvcnMnID8gZ2V0Q2xpcHBpbmdFbGVtZW50QW5jZXN0b3JzKGVsZW1lbnQsIHRoaXMuX2MpIDogW10uY29uY2F0KGJvdW5kYXJ5KTtcbiAgY29uc3QgY2xpcHBpbmdBbmNlc3RvcnMgPSBbLi4uZWxlbWVudENsaXBwaW5nQW5jZXN0b3JzLCByb290Qm91bmRhcnldO1xuICBjb25zdCBmaXJzdENsaXBwaW5nQW5jZXN0b3IgPSBjbGlwcGluZ0FuY2VzdG9yc1swXTtcbiAgY29uc3QgY2xpcHBpbmdSZWN0ID0gY2xpcHBpbmdBbmNlc3RvcnMucmVkdWNlKChhY2NSZWN0LCBjbGlwcGluZ0FuY2VzdG9yKSA9PiB7XG4gICAgY29uc3QgcmVjdCA9IGdldENsaWVudFJlY3RGcm9tQ2xpcHBpbmdBbmNlc3RvcihlbGVtZW50LCBjbGlwcGluZ0FuY2VzdG9yLCBzdHJhdGVneSk7XG4gICAgYWNjUmVjdC50b3AgPSBtYXgocmVjdC50b3AsIGFjY1JlY3QudG9wKTtcbiAgICBhY2NSZWN0LnJpZ2h0ID0gbWluKHJlY3QucmlnaHQsIGFjY1JlY3QucmlnaHQpO1xuICAgIGFjY1JlY3QuYm90dG9tID0gbWluKHJlY3QuYm90dG9tLCBhY2NSZWN0LmJvdHRvbSk7XG4gICAgYWNjUmVjdC5sZWZ0ID0gbWF4KHJlY3QubGVmdCwgYWNjUmVjdC5sZWZ0KTtcbiAgICByZXR1cm4gYWNjUmVjdDtcbiAgfSwgZ2V0Q2xpZW50UmVjdEZyb21DbGlwcGluZ0FuY2VzdG9yKGVsZW1lbnQsIGZpcnN0Q2xpcHBpbmdBbmNlc3Rvciwgc3RyYXRlZ3kpKTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogY2xpcHBpbmdSZWN0LnJpZ2h0IC0gY2xpcHBpbmdSZWN0LmxlZnQsXG4gICAgaGVpZ2h0OiBjbGlwcGluZ1JlY3QuYm90dG9tIC0gY2xpcHBpbmdSZWN0LnRvcCxcbiAgICB4OiBjbGlwcGluZ1JlY3QubGVmdCxcbiAgICB5OiBjbGlwcGluZ1JlY3QudG9wXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldERpbWVuc2lvbnMoZWxlbWVudCkge1xuICBjb25zdCB7XG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0XG4gIH0gPSBnZXRDc3NEaW1lbnNpb25zKGVsZW1lbnQpO1xuICByZXR1cm4ge1xuICAgIHdpZHRoLFxuICAgIGhlaWdodFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRSZWN0UmVsYXRpdmVUb09mZnNldFBhcmVudChlbGVtZW50LCBvZmZzZXRQYXJlbnQsIHN0cmF0ZWd5KSB7XG4gIGNvbnN0IGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50ID0gaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpO1xuICBjb25zdCBkb2N1bWVudEVsZW1lbnQgPSBnZXREb2N1bWVudEVsZW1lbnQob2Zmc2V0UGFyZW50KTtcbiAgY29uc3QgaXNGaXhlZCA9IHN0cmF0ZWd5ID09PSAnZml4ZWQnO1xuICBjb25zdCByZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIHRydWUsIGlzRml4ZWQsIG9mZnNldFBhcmVudCk7XG4gIGxldCBzY3JvbGwgPSB7XG4gICAgc2Nyb2xsTGVmdDogMCxcbiAgICBzY3JvbGxUb3A6IDBcbiAgfTtcbiAgY29uc3Qgb2Zmc2V0cyA9IGNyZWF0ZUNvb3JkcygwKTtcbiAgaWYgKGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50IHx8ICFpc09mZnNldFBhcmVudEFuRWxlbWVudCAmJiAhaXNGaXhlZCkge1xuICAgIGlmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpICE9PSAnYm9keScgfHwgaXNPdmVyZmxvd0VsZW1lbnQoZG9jdW1lbnRFbGVtZW50KSkge1xuICAgICAgc2Nyb2xsID0gZ2V0Tm9kZVNjcm9sbChvZmZzZXRQYXJlbnQpO1xuICAgIH1cbiAgICBpZiAoaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IG9mZnNldFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3Qob2Zmc2V0UGFyZW50LCB0cnVlLCBpc0ZpeGVkLCBvZmZzZXRQYXJlbnQpO1xuICAgICAgb2Zmc2V0cy54ID0gb2Zmc2V0UmVjdC54ICsgb2Zmc2V0UGFyZW50LmNsaWVudExlZnQ7XG4gICAgICBvZmZzZXRzLnkgPSBvZmZzZXRSZWN0LnkgKyBvZmZzZXRQYXJlbnQuY2xpZW50VG9wO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICBvZmZzZXRzLnggPSBnZXRXaW5kb3dTY3JvbGxCYXJYKGRvY3VtZW50RWxlbWVudCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgeDogcmVjdC5sZWZ0ICsgc2Nyb2xsLnNjcm9sbExlZnQgLSBvZmZzZXRzLngsXG4gICAgeTogcmVjdC50b3AgKyBzY3JvbGwuc2Nyb2xsVG9wIC0gb2Zmc2V0cy55LFxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgIGhlaWdodDogcmVjdC5oZWlnaHRcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0VHJ1ZU9mZnNldFBhcmVudChlbGVtZW50LCBwb2x5ZmlsbCkge1xuICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChwb2x5ZmlsbCkge1xuICAgIHJldHVybiBwb2x5ZmlsbChlbGVtZW50KTtcbiAgfVxuICByZXR1cm4gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG59XG5cbi8vIEdldHMgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgcG9zaXRpb25lZCBlbGVtZW50LiBIYW5kbGVzIHNvbWUgZWRnZSBjYXNlcyxcbi8vIHN1Y2ggYXMgdGFibGUgYW5jZXN0b3JzIGFuZCBjcm9zcyBicm93c2VyIGJ1Z3MuXG5mdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCwgcG9seWZpbGwpIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KGVsZW1lbnQpO1xuICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9XG4gIGxldCBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KGVsZW1lbnQsIHBvbHlmaWxsKTtcbiAgd2hpbGUgKG9mZnNldFBhcmVudCAmJiBpc1RhYmxlRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KG9mZnNldFBhcmVudCwgcG9seWZpbGwpO1xuICB9XG4gIGlmIChvZmZzZXRQYXJlbnQgJiYgKGdldE5vZGVOYW1lKG9mZnNldFBhcmVudCkgPT09ICdodG1sJyB8fCBnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpID09PSAnYm9keScgJiYgZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uID09PSAnc3RhdGljJyAmJiAhaXNDb250YWluaW5nQmxvY2sob2Zmc2V0UGFyZW50KSkpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9XG4gIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHx8IHdpbmRvdztcbn1cblxuY29uc3QgZ2V0RWxlbWVudFJlY3RzID0gYXN5bmMgZnVuY3Rpb24gKF9yZWYpIHtcbiAgbGV0IHtcbiAgICByZWZlcmVuY2UsXG4gICAgZmxvYXRpbmcsXG4gICAgc3RyYXRlZ3lcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IGdldE9mZnNldFBhcmVudEZuID0gdGhpcy5nZXRPZmZzZXRQYXJlbnQgfHwgZ2V0T2Zmc2V0UGFyZW50O1xuICBjb25zdCBnZXREaW1lbnNpb25zRm4gPSB0aGlzLmdldERpbWVuc2lvbnM7XG4gIHJldHVybiB7XG4gICAgcmVmZXJlbmNlOiBnZXRSZWN0UmVsYXRpdmVUb09mZnNldFBhcmVudChyZWZlcmVuY2UsIGF3YWl0IGdldE9mZnNldFBhcmVudEZuKGZsb2F0aW5nKSwgc3RyYXRlZ3kpLFxuICAgIGZsb2F0aW5nOiB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIC4uLihhd2FpdCBnZXREaW1lbnNpb25zRm4oZmxvYXRpbmcpKVxuICAgIH1cbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGlzUlRMKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkuZGlyZWN0aW9uID09PSAncnRsJztcbn1cblxuY29uc3QgcGxhdGZvcm0gPSB7XG4gIGNvbnZlcnRPZmZzZXRQYXJlbnRSZWxhdGl2ZVJlY3RUb1ZpZXdwb3J0UmVsYXRpdmVSZWN0LFxuICBnZXREb2N1bWVudEVsZW1lbnQsXG4gIGdldENsaXBwaW5nUmVjdCxcbiAgZ2V0T2Zmc2V0UGFyZW50LFxuICBnZXRFbGVtZW50UmVjdHMsXG4gIGdldENsaWVudFJlY3RzLFxuICBnZXREaW1lbnNpb25zLFxuICBnZXRTY2FsZSxcbiAgaXNFbGVtZW50LFxuICBpc1JUTFxufTtcblxuLy8gaHR0cHM6Ly9zYW10aG9yLmF1LzIwMjEvb2JzZXJ2aW5nLWRvbS9cbmZ1bmN0aW9uIG9ic2VydmVNb3ZlKGVsZW1lbnQsIG9uTW92ZSkge1xuICBsZXQgaW8gPSBudWxsO1xuICBsZXQgdGltZW91dElkO1xuICBjb25zdCByb290ID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIGlvICYmIGlvLmRpc2Nvbm5lY3QoKTtcbiAgICBpbyA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gcmVmcmVzaChza2lwLCB0aHJlc2hvbGQpIHtcbiAgICBpZiAoc2tpcCA9PT0gdm9pZCAwKSB7XG4gICAgICBza2lwID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aHJlc2hvbGQgPT09IHZvaWQgMCkge1xuICAgICAgdGhyZXNob2xkID0gMTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICAgIGNvbnN0IHtcbiAgICAgIGxlZnQsXG4gICAgICB0b3AsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIH0gPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmICghc2tpcCkge1xuICAgICAgb25Nb3ZlKCk7XG4gICAgfVxuICAgIGlmICghd2lkdGggfHwgIWhlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbnNldFRvcCA9IGZsb29yKHRvcCk7XG4gICAgY29uc3QgaW5zZXRSaWdodCA9IGZsb29yKHJvb3QuY2xpZW50V2lkdGggLSAobGVmdCArIHdpZHRoKSk7XG4gICAgY29uc3QgaW5zZXRCb3R0b20gPSBmbG9vcihyb290LmNsaWVudEhlaWdodCAtICh0b3AgKyBoZWlnaHQpKTtcbiAgICBjb25zdCBpbnNldExlZnQgPSBmbG9vcihsZWZ0KTtcbiAgICBjb25zdCByb290TWFyZ2luID0gLWluc2V0VG9wICsgXCJweCBcIiArIC1pbnNldFJpZ2h0ICsgXCJweCBcIiArIC1pbnNldEJvdHRvbSArIFwicHggXCIgKyAtaW5zZXRMZWZ0ICsgXCJweFwiO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICByb290TWFyZ2luLFxuICAgICAgdGhyZXNob2xkOiBtYXgoMCwgbWluKDEsIHRocmVzaG9sZCkpIHx8IDFcbiAgICB9O1xuICAgIGxldCBpc0ZpcnN0VXBkYXRlID0gdHJ1ZTtcbiAgICBmdW5jdGlvbiBoYW5kbGVPYnNlcnZlKGVudHJpZXMpIHtcbiAgICAgIGNvbnN0IHJhdGlvID0gZW50cmllc1swXS5pbnRlcnNlY3Rpb25SYXRpbztcbiAgICAgIGlmIChyYXRpbyAhPT0gdGhyZXNob2xkKSB7XG4gICAgICAgIGlmICghaXNGaXJzdFVwZGF0ZSkge1xuICAgICAgICAgIHJldHVybiByZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyYXRpbykge1xuICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVmcmVzaChmYWxzZSwgMWUtNyk7XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWZyZXNoKGZhbHNlLCByYXRpbyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlzRmlyc3RVcGRhdGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBPbGRlciBicm93c2VycyBkb24ndCBzdXBwb3J0IGEgYGRvY3VtZW50YCBhcyB0aGUgcm9vdCBhbmQgd2lsbCB0aHJvdyBhblxuICAgIC8vIGVycm9yLlxuICAgIHRyeSB7XG4gICAgICBpbyA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihoYW5kbGVPYnNlcnZlLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIC8vIEhhbmRsZSA8aWZyYW1lPnNcbiAgICAgICAgcm9vdDogcm9vdC5vd25lckRvY3VtZW50XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpbyA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihoYW5kbGVPYnNlcnZlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgaW8ub2JzZXJ2ZShlbGVtZW50KTtcbiAgfVxuICByZWZyZXNoKHRydWUpO1xuICByZXR1cm4gY2xlYW51cDtcbn1cblxuLyoqXG4gKiBBdXRvbWF0aWNhbGx5IHVwZGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBmbG9hdGluZyBlbGVtZW50IHdoZW4gbmVjZXNzYXJ5LlxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW4gdGhlIGZsb2F0aW5nIGVsZW1lbnQgaXMgbW91bnRlZCBvbiB0aGUgRE9NIG9yXG4gKiB2aXNpYmxlIG9uIHRoZSBzY3JlZW4uXG4gKiBAcmV0dXJucyBjbGVhbnVwIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGludm9rZWQgd2hlbiB0aGUgZmxvYXRpbmcgZWxlbWVudCBpc1xuICogcmVtb3ZlZCBmcm9tIHRoZSBET00gb3IgaGlkZGVuIGZyb20gdGhlIHNjcmVlbi5cbiAqIEBzZWUgaHR0cHM6Ly9mbG9hdGluZy11aS5jb20vZG9jcy9hdXRvVXBkYXRlXG4gKi9cbmZ1bmN0aW9uIGF1dG9VcGRhdGUocmVmZXJlbmNlLCBmbG9hdGluZywgdXBkYXRlLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgY29uc3Qge1xuICAgIGFuY2VzdG9yU2Nyb2xsID0gdHJ1ZSxcbiAgICBhbmNlc3RvclJlc2l6ZSA9IHRydWUsXG4gICAgZWxlbWVudFJlc2l6ZSA9IHR5cGVvZiBSZXNpemVPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJyxcbiAgICBsYXlvdXRTaGlmdCA9IHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJyxcbiAgICBhbmltYXRpb25GcmFtZSA9IGZhbHNlXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCByZWZlcmVuY2VFbCA9IHVud3JhcEVsZW1lbnQocmVmZXJlbmNlKTtcbiAgY29uc3QgYW5jZXN0b3JzID0gYW5jZXN0b3JTY3JvbGwgfHwgYW5jZXN0b3JSZXNpemUgPyBbLi4uKHJlZmVyZW5jZUVsID8gZ2V0T3ZlcmZsb3dBbmNlc3RvcnMocmVmZXJlbmNlRWwpIDogW10pLCAuLi5nZXRPdmVyZmxvd0FuY2VzdG9ycyhmbG9hdGluZyldIDogW107XG4gIGFuY2VzdG9ycy5mb3JFYWNoKGFuY2VzdG9yID0+IHtcbiAgICBhbmNlc3RvclNjcm9sbCAmJiBhbmNlc3Rvci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB1cGRhdGUsIHtcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgICBhbmNlc3RvclJlc2l6ZSAmJiBhbmNlc3Rvci5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB1cGRhdGUpO1xuICB9KTtcbiAgY29uc3QgY2xlYW51cElvID0gcmVmZXJlbmNlRWwgJiYgbGF5b3V0U2hpZnQgPyBvYnNlcnZlTW92ZShyZWZlcmVuY2VFbCwgdXBkYXRlKSA6IG51bGw7XG4gIGxldCByZW9ic2VydmVGcmFtZSA9IC0xO1xuICBsZXQgcmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xuICBpZiAoZWxlbWVudFJlc2l6ZSkge1xuICAgIHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKF9yZWYgPT4ge1xuICAgICAgbGV0IFtmaXJzdEVudHJ5XSA9IF9yZWY7XG4gICAgICBpZiAoZmlyc3RFbnRyeSAmJiBmaXJzdEVudHJ5LnRhcmdldCA9PT0gcmVmZXJlbmNlRWwgJiYgcmVzaXplT2JzZXJ2ZXIpIHtcbiAgICAgICAgLy8gUHJldmVudCB1cGRhdGUgbG9vcHMgd2hlbiB1c2luZyB0aGUgYHNpemVgIG1pZGRsZXdhcmUuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mbG9hdGluZy11aS9mbG9hdGluZy11aS9pc3N1ZXMvMTc0MFxuICAgICAgICByZXNpemVPYnNlcnZlci51bm9ic2VydmUoZmxvYXRpbmcpO1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyZW9ic2VydmVGcmFtZSk7XG4gICAgICAgIHJlb2JzZXJ2ZUZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICByZXNpemVPYnNlcnZlciAmJiByZXNpemVPYnNlcnZlci5vYnNlcnZlKGZsb2F0aW5nKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB1cGRhdGUoKTtcbiAgICB9KTtcbiAgICBpZiAocmVmZXJlbmNlRWwgJiYgIWFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKHJlZmVyZW5jZUVsKTtcbiAgICB9XG4gICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShmbG9hdGluZyk7XG4gIH1cbiAgbGV0IGZyYW1lSWQ7XG4gIGxldCBwcmV2UmVmUmVjdCA9IGFuaW1hdGlvbkZyYW1lID8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHJlZmVyZW5jZSkgOiBudWxsO1xuICBpZiAoYW5pbWF0aW9uRnJhbWUpIHtcbiAgICBmcmFtZUxvb3AoKTtcbiAgfVxuICBmdW5jdGlvbiBmcmFtZUxvb3AoKSB7XG4gICAgY29uc3QgbmV4dFJlZlJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QocmVmZXJlbmNlKTtcbiAgICBpZiAocHJldlJlZlJlY3QgJiYgKG5leHRSZWZSZWN0LnggIT09IHByZXZSZWZSZWN0LnggfHwgbmV4dFJlZlJlY3QueSAhPT0gcHJldlJlZlJlY3QueSB8fCBuZXh0UmVmUmVjdC53aWR0aCAhPT0gcHJldlJlZlJlY3Qud2lkdGggfHwgbmV4dFJlZlJlY3QuaGVpZ2h0ICE9PSBwcmV2UmVmUmVjdC5oZWlnaHQpKSB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG4gICAgcHJldlJlZlJlY3QgPSBuZXh0UmVmUmVjdDtcbiAgICBmcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZyYW1lTG9vcCk7XG4gIH1cbiAgdXBkYXRlKCk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgYW5jZXN0b3JzLmZvckVhY2goYW5jZXN0b3IgPT4ge1xuICAgICAgYW5jZXN0b3JTY3JvbGwgJiYgYW5jZXN0b3IucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdXBkYXRlKTtcbiAgICAgIGFuY2VzdG9yUmVzaXplICYmIGFuY2VzdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHVwZGF0ZSk7XG4gICAgfSk7XG4gICAgY2xlYW51cElvICYmIGNsZWFudXBJbygpO1xuICAgIHJlc2l6ZU9ic2VydmVyICYmIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICByZXNpemVPYnNlcnZlciA9IG51bGw7XG4gICAgaWYgKGFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZUlkKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogT3B0aW1pemVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBmbG9hdGluZyBlbGVtZW50IGJ5IGNob29zaW5nIHRoZSBwbGFjZW1lbnRcbiAqIHRoYXQgaGFzIHRoZSBtb3N0IHNwYWNlIGF2YWlsYWJsZSBhdXRvbWF0aWNhbGx5LCB3aXRob3V0IG5lZWRpbmcgdG8gc3BlY2lmeSBhXG4gKiBwcmVmZXJyZWQgcGxhY2VtZW50LiBBbHRlcm5hdGl2ZSB0byBgZmxpcGAuXG4gKiBAc2VlIGh0dHBzOi8vZmxvYXRpbmctdWkuY29tL2RvY3MvYXV0b1BsYWNlbWVudFxuICovXG5jb25zdCBhdXRvUGxhY2VtZW50ID0gYXV0b1BsYWNlbWVudCQxO1xuXG4vKipcbiAqIE9wdGltaXplcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgZmxvYXRpbmcgZWxlbWVudCBieSBzaGlmdGluZyBpdCBpbiBvcmRlciB0b1xuICoga2VlcCBpdCBpbiB2aWV3IHdoZW4gaXQgd2lsbCBvdmVyZmxvdyB0aGUgY2xpcHBpbmcgYm91bmRhcnkuXG4gKiBAc2VlIGh0dHBzOi8vZmxvYXRpbmctdWkuY29tL2RvY3Mvc2hpZnRcbiAqL1xuY29uc3Qgc2hpZnQgPSBzaGlmdCQxO1xuXG4vKipcbiAqIE9wdGltaXplcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgZmxvYXRpbmcgZWxlbWVudCBieSBmbGlwcGluZyB0aGUgYHBsYWNlbWVudGBcbiAqIGluIG9yZGVyIHRvIGtlZXAgaXQgaW4gdmlldyB3aGVuIHRoZSBwcmVmZXJyZWQgcGxhY2VtZW50KHMpIHdpbGwgb3ZlcmZsb3cgdGhlXG4gKiBjbGlwcGluZyBib3VuZGFyeS4gQWx0ZXJuYXRpdmUgdG8gYGF1dG9QbGFjZW1lbnRgLlxuICogQHNlZSBodHRwczovL2Zsb2F0aW5nLXVpLmNvbS9kb2NzL2ZsaXBcbiAqL1xuY29uc3QgZmxpcCA9IGZsaXAkMTtcblxuLyoqXG4gKiBQcm92aWRlcyBkYXRhIHRoYXQgYWxsb3dzIHlvdSB0byBjaGFuZ2UgdGhlIHNpemUgb2YgdGhlIGZsb2F0aW5nIGVsZW1lbnQg4oCUXG4gKiBmb3IgaW5zdGFuY2UsIHByZXZlbnQgaXQgZnJvbSBvdmVyZmxvd2luZyB0aGUgY2xpcHBpbmcgYm91bmRhcnkgb3IgbWF0Y2ggdGhlXG4gKiB3aWR0aCBvZiB0aGUgcmVmZXJlbmNlIGVsZW1lbnQuXG4gKiBAc2VlIGh0dHBzOi8vZmxvYXRpbmctdWkuY29tL2RvY3Mvc2l6ZVxuICovXG5jb25zdCBzaXplID0gc2l6ZSQxO1xuXG4vKipcbiAqIFByb3ZpZGVzIGRhdGEgdG8gaGlkZSB0aGUgZmxvYXRpbmcgZWxlbWVudCBpbiBhcHBsaWNhYmxlIHNpdHVhdGlvbnMsIHN1Y2ggYXNcbiAqIHdoZW4gaXQgaXMgbm90IGluIHRoZSBzYW1lIGNsaXBwaW5nIGNvbnRleHQgYXMgdGhlIHJlZmVyZW5jZSBlbGVtZW50LlxuICogQHNlZSBodHRwczovL2Zsb2F0aW5nLXVpLmNvbS9kb2NzL2hpZGVcbiAqL1xuY29uc3QgaGlkZSA9IGhpZGUkMTtcblxuLyoqXG4gKiBQcm92aWRlcyBkYXRhIHRvIHBvc2l0aW9uIGFuIGlubmVyIGVsZW1lbnQgb2YgdGhlIGZsb2F0aW5nIGVsZW1lbnQgc28gdGhhdCBpdFxuICogYXBwZWFycyBjZW50ZXJlZCB0byB0aGUgcmVmZXJlbmNlIGVsZW1lbnQuXG4gKiBAc2VlIGh0dHBzOi8vZmxvYXRpbmctdWkuY29tL2RvY3MvYXJyb3dcbiAqL1xuY29uc3QgYXJyb3cgPSBhcnJvdyQxO1xuXG4vKipcbiAqIFByb3ZpZGVzIGltcHJvdmVkIHBvc2l0aW9uaW5nIGZvciBpbmxpbmUgcmVmZXJlbmNlIGVsZW1lbnRzIHRoYXQgY2FuIHNwYW5cbiAqIG92ZXIgbXVsdGlwbGUgbGluZXMsIHN1Y2ggYXMgaHlwZXJsaW5rcyBvciByYW5nZSBzZWxlY3Rpb25zLlxuICogQHNlZSBodHRwczovL2Zsb2F0aW5nLXVpLmNvbS9kb2NzL2lubGluZVxuICovXG5jb25zdCBpbmxpbmUgPSBpbmxpbmUkMTtcblxuLyoqXG4gKiBCdWlsdC1pbiBgbGltaXRlcmAgdGhhdCB3aWxsIHN0b3AgYHNoaWZ0KClgIGF0IGEgY2VydGFpbiBwb2ludC5cbiAqL1xuY29uc3QgbGltaXRTaGlmdCA9IGxpbWl0U2hpZnQkMTtcblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgYHhgIGFuZCBgeWAgY29vcmRpbmF0ZXMgdGhhdCB3aWxsIHBsYWNlIHRoZSBmbG9hdGluZyBlbGVtZW50XG4gKiBuZXh0IHRvIGEgZ2l2ZW4gcmVmZXJlbmNlIGVsZW1lbnQuXG4gKi9cbmNvbnN0IGNvbXB1dGVQb3NpdGlvbiA9IChyZWZlcmVuY2UsIGZsb2F0aW5nLCBvcHRpb25zKSA9PiB7XG4gIC8vIFRoaXMgY2FjaGVzIHRoZSBleHBlbnNpdmUgYGdldENsaXBwaW5nRWxlbWVudEFuY2VzdG9yc2AgZnVuY3Rpb24gc28gdGhhdFxuICAvLyBtdWx0aXBsZSBsaWZlY3ljbGUgcmVzZXRzIHJlLXVzZSB0aGUgc2FtZSByZXN1bHQuIEl0IG9ubHkgbGl2ZXMgZm9yIGFcbiAgLy8gc2luZ2xlIGNhbGwuIElmIG90aGVyIGZ1bmN0aW9ucyBiZWNvbWUgZXhwZW5zaXZlLCB3ZSBjYW4gYWRkIHRoZW0gYXMgd2VsbC5cbiAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSB7XG4gICAgcGxhdGZvcm0sXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuICBjb25zdCBwbGF0Zm9ybVdpdGhDYWNoZSA9IHtcbiAgICAuLi5tZXJnZWRPcHRpb25zLnBsYXRmb3JtLFxuICAgIF9jOiBjYWNoZVxuICB9O1xuICByZXR1cm4gY29tcHV0ZVBvc2l0aW9uJDEocmVmZXJlbmNlLCBmbG9hdGluZywge1xuICAgIC4uLm1lcmdlZE9wdGlvbnMsXG4gICAgcGxhdGZvcm06IHBsYXRmb3JtV2l0aENhY2hlXG4gIH0pO1xufTtcblxuZXhwb3J0IHsgYXJyb3csIGF1dG9QbGFjZW1lbnQsIGF1dG9VcGRhdGUsIGNvbXB1dGVQb3NpdGlvbiwgZmxpcCwgaGlkZSwgaW5saW5lLCBsaW1pdFNoaWZ0LCBwbGF0Zm9ybSwgc2hpZnQsIHNpemUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-core/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/index.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/index.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioConference: () => (/* binding */ AudioConference),\n/* harmony export */   AudioTrack: () => (/* binding */ AudioTrack),\n/* harmony export */   AudioVisualizer: () => (/* binding */ AudioVisualizer),\n/* harmony export */   CameraDisabledIcon: () => (/* binding */ CameraDisabledIcon_default),\n/* harmony export */   CameraIcon: () => (/* binding */ CameraIcon_default),\n/* harmony export */   CarouselLayout: () => (/* binding */ CarouselLayout),\n/* harmony export */   CarouselView: () => (/* binding */ CarouselView),\n/* harmony export */   Chat: () => (/* binding */ Chat),\n/* harmony export */   ChatCloseIcon: () => (/* binding */ ChatCloseIcon_default),\n/* harmony export */   ChatEntry: () => (/* binding */ ChatEntry),\n/* harmony export */   ChatIcon: () => (/* binding */ ChatIcon_default),\n/* harmony export */   ChatToggle: () => (/* binding */ ChatToggle),\n/* harmony export */   Chevron: () => (/* binding */ Chevron_default),\n/* harmony export */   ClearPinButton: () => (/* binding */ ClearPinButton),\n/* harmony export */   ConnectionQualityIndicator: () => (/* binding */ ConnectionQualityIndicator),\n/* harmony export */   ConnectionState: () => (/* binding */ ConnectionState3),\n/* harmony export */   ConnectionStateToast: () => (/* binding */ ConnectionStateToast),\n/* harmony export */   ControlBar: () => (/* binding */ ControlBar),\n/* harmony export */   DisconnectButton: () => (/* binding */ DisconnectButton),\n/* harmony export */   FocusLayout: () => (/* binding */ FocusLayout),\n/* harmony export */   FocusLayoutContainer: () => (/* binding */ FocusLayoutContainer),\n/* harmony export */   FocusToggle: () => (/* binding */ FocusToggle),\n/* harmony export */   FocusToggleIcon: () => (/* binding */ FocusToggleIcon_default),\n/* harmony export */   GearIcon: () => (/* binding */ GearIcon_default),\n/* harmony export */   GridLayout: () => (/* binding */ GridLayout),\n/* harmony export */   LKFeatureContext: () => (/* binding */ LKFeatureContext),\n/* harmony export */   LayoutContext: () => (/* binding */ LayoutContext),\n/* harmony export */   LayoutContextProvider: () => (/* binding */ LayoutContextProvider),\n/* harmony export */   LeaveIcon: () => (/* binding */ LeaveIcon_default),\n/* harmony export */   LiveKitRoom: () => (/* binding */ LiveKitRoom),\n/* harmony export */   LockLockedIcon: () => (/* binding */ LockLockedIcon_default),\n/* harmony export */   MediaDeviceMenu: () => (/* binding */ MediaDeviceMenu),\n/* harmony export */   MediaDeviceSelect: () => (/* binding */ MediaDeviceSelect),\n/* harmony export */   MicDisabledIcon: () => (/* binding */ MicDisabledIcon_default),\n/* harmony export */   MicIcon: () => (/* binding */ MicIcon_default),\n/* harmony export */   ParticipantAudioTile: () => (/* binding */ ParticipantAudioTile),\n/* harmony export */   ParticipantContext: () => (/* binding */ ParticipantContext),\n/* harmony export */   ParticipantContextIfNeeded: () => (/* binding */ ParticipantContextIfNeeded),\n/* harmony export */   ParticipantLoop: () => (/* binding */ ParticipantLoop),\n/* harmony export */   ParticipantName: () => (/* binding */ ParticipantName),\n/* harmony export */   ParticipantPlaceholder: () => (/* binding */ ParticipantPlaceholder_default),\n/* harmony export */   ParticipantTile: () => (/* binding */ ParticipantTile),\n/* harmony export */   PreJoin: () => (/* binding */ PreJoin),\n/* harmony export */   QualityExcellentIcon: () => (/* binding */ QualityExcellentIcon_default),\n/* harmony export */   QualityGoodIcon: () => (/* binding */ QualityGoodIcon_default),\n/* harmony export */   QualityPoorIcon: () => (/* binding */ QualityPoorIcon_default),\n/* harmony export */   QualityUnknownIcon: () => (/* binding */ QualityUnknownIcon_default),\n/* harmony export */   RoomAudioRenderer: () => (/* binding */ RoomAudioRenderer),\n/* harmony export */   RoomContext: () => (/* binding */ RoomContext),\n/* harmony export */   RoomName: () => (/* binding */ RoomName),\n/* harmony export */   ScreenShareIcon: () => (/* binding */ ScreenShareIcon_default),\n/* harmony export */   ScreenShareStopIcon: () => (/* binding */ ScreenShareStopIcon_default),\n/* harmony export */   SpinnerIcon: () => (/* binding */ SpinnerIcon_default),\n/* harmony export */   StartAudio: () => (/* binding */ StartAudio),\n/* harmony export */   Toast: () => (/* binding */ Toast),\n/* harmony export */   TrackContext: () => (/* binding */ TrackContext),\n/* harmony export */   TrackLoop: () => (/* binding */ TrackLoop),\n/* harmony export */   TrackMutedIndicator: () => (/* binding */ TrackMutedIndicator),\n/* harmony export */   TrackRefContext: () => (/* binding */ TrackRefContext),\n/* harmony export */   TrackToggle: () => (/* binding */ TrackToggle),\n/* harmony export */   UnfocusToggleIcon: () => (/* binding */ UnfocusToggleIcon_default),\n/* harmony export */   VideoConference: () => (/* binding */ VideoConference),\n/* harmony export */   VideoTrack: () => (/* binding */ VideoTrack),\n/* harmony export */   formatChatMessageLinks: () => (/* binding */ formatChatMessageLinks),\n/* harmony export */   isTrackReference: () => (/* reexport safe */ _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReference),\n/* harmony export */   setLogExtension: () => (/* reexport safe */ _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setLogExtension),\n/* harmony export */   setLogLevel: () => (/* reexport safe */ _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setLogLevel),\n/* harmony export */   useAudioPlayback: () => (/* binding */ useAudioPlayback),\n/* harmony export */   useChat: () => (/* binding */ useChat),\n/* harmony export */   useChatToggle: () => (/* binding */ useChatToggle),\n/* harmony export */   useClearPinButton: () => (/* binding */ useClearPinButton),\n/* harmony export */   useConnectionQualityIndicator: () => (/* binding */ useConnectionQualityIndicator),\n/* harmony export */   useConnectionState: () => (/* binding */ useConnectionState),\n/* harmony export */   useCreateLayoutContext: () => (/* binding */ useCreateLayoutContext),\n/* harmony export */   useDataChannel: () => (/* binding */ useDataChannel),\n/* harmony export */   useDisconnectButton: () => (/* binding */ useDisconnectButton),\n/* harmony export */   useEnsureCreateLayoutContext: () => (/* binding */ useEnsureCreateLayoutContext),\n/* harmony export */   useEnsureLayoutContext: () => (/* binding */ useEnsureLayoutContext),\n/* harmony export */   useEnsureParticipant: () => (/* binding */ useEnsureParticipant),\n/* harmony export */   useEnsureRoom: () => (/* binding */ useEnsureRoom),\n/* harmony export */   useEnsureTrackRef: () => (/* binding */ useEnsureTrackRef),\n/* harmony export */   useEnsureTrackReference: () => (/* binding */ useEnsureTrackReference),\n/* harmony export */   useFacingMode: () => (/* binding */ useFacingMode),\n/* harmony export */   useFeatureContext: () => (/* binding */ useFeatureContext),\n/* harmony export */   useFocusToggle: () => (/* binding */ useFocusToggle),\n/* harmony export */   useGridLayout: () => (/* binding */ useGridLayout),\n/* harmony export */   useIsEncrypted: () => (/* binding */ useIsEncrypted),\n/* harmony export */   useIsMuted: () => (/* binding */ useIsMuted),\n/* harmony export */   useIsSpeaking: () => (/* binding */ useIsSpeaking),\n/* harmony export */   useLayoutContext: () => (/* binding */ useLayoutContext),\n/* harmony export */   useLiveKitRoom: () => (/* binding */ useLiveKitRoom),\n/* harmony export */   useLocalParticipant: () => (/* binding */ useLocalParticipant),\n/* harmony export */   useLocalParticipantPermissions: () => (/* binding */ useLocalParticipantPermissions),\n/* harmony export */   useMaybeLayoutContext: () => (/* binding */ useMaybeLayoutContext),\n/* harmony export */   useMaybeParticipantContext: () => (/* binding */ useMaybeParticipantContext),\n/* harmony export */   useMaybeRoomContext: () => (/* binding */ useMaybeRoomContext),\n/* harmony export */   useMaybeTrackContext: () => (/* binding */ useMaybeTrackContext),\n/* harmony export */   useMaybeTrackRefContext: () => (/* binding */ useMaybeTrackRefContext),\n/* harmony export */   useMediaDeviceSelect: () => (/* binding */ useMediaDeviceSelect),\n/* harmony export */   useMediaDevices: () => (/* binding */ useMediaDevices),\n/* harmony export */   useMediaTrack: () => (/* binding */ useMediaTrack),\n/* harmony export */   useMediaTrackByName: () => (/* binding */ useMediaTrackByName),\n/* harmony export */   useMultibandTrackVolume: () => (/* binding */ useMultibandTrackVolume),\n/* harmony export */   usePagination: () => (/* binding */ usePagination),\n/* harmony export */   useParticipantContext: () => (/* binding */ useParticipantContext),\n/* harmony export */   useParticipantInfo: () => (/* binding */ useParticipantInfo),\n/* harmony export */   useParticipantPermissions: () => (/* binding */ useParticipantPermissions),\n/* harmony export */   useParticipantTile: () => (/* binding */ useParticipantTile),\n/* harmony export */   useParticipants: () => (/* binding */ useParticipants),\n/* harmony export */   usePersistentUserChoices: () => (/* binding */ usePersistentUserChoices),\n/* harmony export */   usePinnedTracks: () => (/* binding */ usePinnedTracks),\n/* harmony export */   usePreviewDevice: () => (/* binding */ usePreviewDevice),\n/* harmony export */   usePreviewTracks: () => (/* binding */ usePreviewTracks),\n/* harmony export */   useRemoteParticipant: () => (/* binding */ useRemoteParticipant),\n/* harmony export */   useRemoteParticipants: () => (/* binding */ useRemoteParticipants),\n/* harmony export */   useRoomContext: () => (/* binding */ useRoomContext),\n/* harmony export */   useRoomInfo: () => (/* binding */ useRoomInfo),\n/* harmony export */   useSortedParticipants: () => (/* binding */ useSortedParticipants),\n/* harmony export */   useSpeakingParticipants: () => (/* binding */ useSpeakingParticipants),\n/* harmony export */   useStartAudio: () => (/* binding */ useStartAudio),\n/* harmony export */   useStartVideo: () => (/* binding */ useStartVideo),\n/* harmony export */   useSwipe: () => (/* binding */ useSwipe),\n/* harmony export */   useToken: () => (/* binding */ useToken),\n/* harmony export */   useTrack: () => (/* binding */ useTrack),\n/* harmony export */   useTrackByName: () => (/* binding */ useTrackByName),\n/* harmony export */   useTrackContext: () => (/* binding */ useTrackContext),\n/* harmony export */   useTrackMutedIndicator: () => (/* binding */ useTrackMutedIndicator),\n/* harmony export */   useTrackRefContext: () => (/* binding */ useTrackRefContext),\n/* harmony export */   useTrackToggle: () => (/* binding */ useTrackToggle),\n/* harmony export */   useTrackVolume: () => (/* binding */ useTrackVolume),\n/* harmony export */   useTracks: () => (/* binding */ useTracks),\n/* harmony export */   useVisualStableUpdate: () => (/* binding */ useVisualStableUpdate)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_hook_latest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-hook/latest */ \"(ssr)/./node_modules/@react-hook/latest/dist/esm/index.mjs\");\n/* harmony import */ var _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livekit/components-core */ \"(ssr)/./node_modules/@livekit/components-core/dist/index.mjs\");\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! clsx */ \"(ssr)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var usehooks_ts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! usehooks-ts */ \"(ssr)/./node_modules/usehooks-ts/dist/cjs/index.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/components/controls/ClearPinButton.tsx\n\n\n// src/hooks/useAudioPlayback.ts\n\n\n// src/hooks/internal/useResizeObserver.ts\n\n\nfunction useResizeObserver(target, callback) {\n  const resizeObserver = getResizeObserver();\n  const storedCallback = (0,_react_hook_latest__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(callback);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    let didUnsubscribe = false;\n    const targetEl = target.current;\n    if (!targetEl)\n      return;\n    function cb(entry, observer) {\n      if (didUnsubscribe)\n        return;\n      storedCallback.current(entry, observer);\n    }\n    resizeObserver == null ? void 0 : resizeObserver.subscribe(targetEl, cb);\n    return () => {\n      didUnsubscribe = true;\n      resizeObserver == null ? void 0 : resizeObserver.unsubscribe(targetEl, cb);\n    };\n  }, [target.current, resizeObserver, storedCallback]);\n  return resizeObserver == null ? void 0 : resizeObserver.observer;\n}\nfunction createResizeObserver() {\n  let ticking = false;\n  let allEntries = [];\n  const callbacks = /* @__PURE__ */ new Map();\n  if (typeof window === \"undefined\") {\n    return;\n  }\n  const observer = new ResizeObserver((entries, obs) => {\n    allEntries = allEntries.concat(entries);\n    if (!ticking) {\n      window.requestAnimationFrame(() => {\n        const triggered = /* @__PURE__ */ new Set();\n        for (let i = 0; i < allEntries.length; i++) {\n          if (triggered.has(allEntries[i].target))\n            continue;\n          triggered.add(allEntries[i].target);\n          const cbs = callbacks.get(allEntries[i].target);\n          cbs == null ? void 0 : cbs.forEach((cb) => cb(allEntries[i], obs));\n        }\n        allEntries = [];\n        ticking = false;\n      });\n    }\n    ticking = true;\n  });\n  return {\n    observer,\n    subscribe(target, callback) {\n      var _a;\n      observer.observe(target);\n      const cbs = (_a = callbacks.get(target)) != null ? _a : [];\n      cbs.push(callback);\n      callbacks.set(target, cbs);\n    },\n    unsubscribe(target, callback) {\n      var _a;\n      const cbs = (_a = callbacks.get(target)) != null ? _a : [];\n      if (cbs.length === 1) {\n        observer.unobserve(target);\n        callbacks.delete(target);\n        return;\n      }\n      const cbIndex = cbs.indexOf(callback);\n      if (cbIndex !== -1)\n        cbs.splice(cbIndex, 1);\n      callbacks.set(target, cbs);\n    }\n  };\n}\nvar _resizeObserver;\nvar getResizeObserver = () => !_resizeObserver ? _resizeObserver = createResizeObserver() : _resizeObserver;\nvar useSize = (target) => {\n  const [size, setSize] = react__WEBPACK_IMPORTED_MODULE_0__.useState({ width: 0, height: 0 });\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (target.current) {\n      const { width, height } = target.current.getBoundingClientRect();\n      setSize({ width, height });\n    }\n  }, [target.current]);\n  const resizeCallback = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (entry) => setSize(entry.contentRect),\n    []\n  );\n  useResizeObserver(target, resizeCallback);\n  return size;\n};\n\n// src/hooks/internal/useObservableState.ts\n\nfunction useObservableState(observable, startWith) {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState(startWith);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (typeof window === \"undefined\" || !observable)\n      return;\n    const subscription = observable.subscribe(setState);\n    return () => subscription.unsubscribe();\n  }, [observable]);\n  return state;\n}\n\n// src/hooks/internal/useMediaQuery.ts\n\nfunction useMediaQuery(query) {\n  const getMatches = (query2) => {\n    if (typeof window !== \"undefined\") {\n      return window.matchMedia(query2).matches;\n    }\n    return false;\n  };\n  const [matches, setMatches] = react__WEBPACK_IMPORTED_MODULE_0__.useState(getMatches(query));\n  function handleChange() {\n    setMatches(getMatches(query));\n  }\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const matchMedia = window.matchMedia(query);\n    handleChange();\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener(\"change\", handleChange);\n    }\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener(\"change\", handleChange);\n      }\n    };\n  }, [query]);\n  return matches;\n}\n\n// src/hooks/useAudioPlayback.ts\n\n\n// src/context/layout-context.ts\n\n\n\n// src/context/chat-context.ts\nfunction chatReducer(state, action) {\n  if (action.msg === \"show_chat\") {\n    return __spreadProps(__spreadValues({}, state), { showChat: true, unreadMessages: 0 });\n  } else if (action.msg === \"hide_chat\") {\n    return __spreadProps(__spreadValues({}, state), { showChat: false });\n  } else if (action.msg === \"toggle_chat\") {\n    const newState = __spreadProps(__spreadValues({}, state), { showChat: !state.showChat });\n    if (newState.showChat === true) {\n      newState.unreadMessages = 0;\n    }\n    return newState;\n  } else if (action.msg === \"unread_msg\") {\n    return __spreadProps(__spreadValues({}, state), { unreadMessages: action.count });\n  } else {\n    return __spreadValues({}, state);\n  }\n}\n\n// src/context/pin-context.ts\nfunction pinReducer(state, action) {\n  if (action.msg === \"set_pin\") {\n    return [action.trackReference];\n  } else if (action.msg === \"clear_pin\") {\n    return [];\n  } else {\n    return __spreadValues({}, state);\n  }\n}\n\n// src/context/layout-context.ts\nvar LayoutContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useLayoutContext() {\n  const layoutContext = react__WEBPACK_IMPORTED_MODULE_0__.useContext(LayoutContext);\n  if (!layoutContext) {\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  }\n  return layoutContext;\n}\nfunction useEnsureLayoutContext(layoutContext) {\n  const layout = useMaybeLayoutContext();\n  layoutContext != null ? layoutContext : layoutContext = layout;\n  if (!layoutContext) {\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  }\n  return layoutContext;\n}\nfunction useCreateLayoutContext() {\n  const [pinState, pinDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(pinReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.PIN_DEFAULT_STATE);\n  const [widgetState, widgetDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(chatReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.WIDGET_DEFAULT_STATE);\n  return {\n    pin: { dispatch: pinDispatch, state: pinState },\n    widget: { dispatch: widgetDispatch, state: widgetState }\n  };\n}\nfunction useEnsureCreateLayoutContext(layoutContext) {\n  const [pinState, pinDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(pinReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.PIN_DEFAULT_STATE);\n  const [widgetState, widgetDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(chatReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.WIDGET_DEFAULT_STATE);\n  return layoutContext != null ? layoutContext : {\n    pin: { dispatch: pinDispatch, state: pinState },\n    widget: { dispatch: widgetDispatch, state: widgetState }\n  };\n}\nfunction useMaybeLayoutContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(LayoutContext);\n}\n\n// src/context/participant-context.ts\n\n\n// src/context/track-reference-context.ts\n\nvar TrackRefContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(\n  void 0\n);\nvar TrackContext = TrackRefContext;\nfunction useTrackContext() {\n  return useTrackRefContext();\n}\nfunction useTrackRefContext() {\n  const trackReference = react__WEBPACK_IMPORTED_MODULE_0__.useContext(TrackRefContext);\n  if (!trackReference) {\n    throw Error(\"tried to access track context outside of track context provider\");\n  }\n  return trackReference;\n}\nfunction useMaybeTrackContext() {\n  return useMaybeTrackRefContext();\n}\nfunction useMaybeTrackRefContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(TrackRefContext);\n}\nfunction useEnsureTrackReference(track) {\n  return useEnsureTrackRef(track);\n}\nfunction useEnsureTrackRef(trackRef) {\n  const context = useMaybeTrackRefContext();\n  const ref = trackRef != null ? trackRef : context;\n  if (!ref) {\n    throw new Error(\n      \"No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly\"\n    );\n  }\n  return ref;\n}\n\n// src/context/participant-context.ts\nvar ParticipantContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useParticipantContext() {\n  const participant = react__WEBPACK_IMPORTED_MODULE_0__.useContext(ParticipantContext);\n  if (!participant) {\n    throw Error(\"tried to access participant context outside of participant context provider\");\n  }\n  return participant;\n}\nfunction useMaybeParticipantContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(ParticipantContext);\n}\nfunction useEnsureParticipant(participant) {\n  var _a;\n  const context = useMaybeParticipantContext();\n  const trackContext = useMaybeTrackRefContext();\n  const p = (_a = participant != null ? participant : context) != null ? _a : trackContext == null ? void 0 : trackContext.participant;\n  if (!p) {\n    throw new Error(\n      \"No participant provided, make sure you are inside a participant context or pass the participant explicitly\"\n    );\n  }\n  return p;\n}\n\n// src/context/room-context.ts\n\nvar RoomContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useRoomContext() {\n  const ctx = react__WEBPACK_IMPORTED_MODULE_0__.useContext(RoomContext);\n  if (!ctx) {\n    throw Error(\"tried to access room context outside of livekit room component\");\n  }\n  return ctx;\n}\nfunction useMaybeRoomContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(RoomContext);\n}\nfunction useEnsureRoom(room) {\n  const context = useMaybeRoomContext();\n  const r = room != null ? room : context;\n  if (!r) {\n    throw new Error(\n      \"No room provided, make sure you are inside a Room context or pass the room explicitly\"\n    );\n  }\n  return r;\n}\n\n// src/context/feature-context.ts\n\nvar LKFeatureContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useFeatureContext(require2) {\n  const ctx = react__WEBPACK_IMPORTED_MODULE_0__.useContext(LKFeatureContext);\n  if (require2 === true) {\n    if (ctx) {\n      return ctx;\n    } else {\n      throw Error(\"tried to access feature context, but none is present\");\n    }\n  }\n  return ctx;\n}\n\n// src/hooks/useAudioPlayback.ts\nfunction useAudioPlayback(room) {\n  const roomEnsured = useEnsureRoom(room);\n  const startAudio = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => __async(this, null, function* () {\n    yield roomEnsured.startAudio();\n  }), [roomEnsured]);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.roomAudioPlaybackAllowedObservable)(roomEnsured),\n    [roomEnsured]\n  );\n  const { canPlayAudio } = useObservableState(observable, {\n    canPlayAudio: roomEnsured.canPlaybackAudio\n  });\n  return { canPlayAudio, startAudio };\n}\n\n// src/hooks/useClearPinButton.ts\n\n\n\n// src/mergeProps.ts\n\nfunction chain(...callbacks) {\n  return (...args) => {\n    for (const callback of callbacks) {\n      if (typeof callback === \"function\") {\n        callback(...args);\n      }\n    }\n  };\n}\nfunction mergeProps(...args) {\n  const result = __spreadValues({}, args[0]);\n  for (let i = 1; i < args.length; i++) {\n    const props = args[i];\n    for (const key in props) {\n      const a = result[key];\n      const b = props[key];\n      if (typeof a === \"function\" && typeof b === \"function\" && // This is a lot faster than a regex.\n      key[0] === \"o\" && key[1] === \"n\" && key.charCodeAt(2) >= /* 'A' */\n      65 && key.charCodeAt(2) <= /* 'Z' */\n      90) {\n        result[key] = chain(a, b);\n      } else if ((key === \"className\" || key === \"UNSAFE_className\") && typeof a === \"string\" && typeof b === \"string\") {\n        result[key] = (0,clsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(a, b);\n      } else {\n        result[key] = b !== void 0 ? b : a;\n      }\n    }\n  }\n  return result;\n}\n\n// src/hooks/useClearPinButton.ts\nfunction useClearPinButton(props) {\n  const { state, dispatch } = useLayoutContext().pin;\n  const buttonProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupClearPinButton)();\n    const mergedProps = mergeProps(props, {\n      className,\n      disabled: !(state == null ? void 0 : state.length),\n      onClick: () => {\n        if (dispatch)\n          dispatch({ msg: \"clear_pin\" });\n      }\n    });\n    return mergedProps;\n  }, [props, dispatch, state]);\n  return { buttonProps };\n}\n\n// src/hooks/useConnectionQualityIndicator.ts\n\n\n\nfunction useConnectionQualityIndicator(options = {}) {\n  const p = useEnsureParticipant(options.participant);\n  const { className, connectionQualityObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupConnectionQualityIndicator)(p),\n    [p]\n  );\n  const quality = useObservableState(connectionQualityObserver, livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionQuality.Unknown);\n  return { className, quality };\n}\n\n// src/hooks/useConnectionStatus.ts\n\n\nfunction useConnectionState(room) {\n  const r = useEnsureRoom(room);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.connectionStateObserver)(r), [r]);\n  const connectionState = useObservableState(observable, r.state);\n  return connectionState;\n}\n\n// src/hooks/useDataChannel.ts\n\n\nfunction useDataChannel(topicOrCallback, callback) {\n  const onMessage = typeof topicOrCallback === \"function\" ? topicOrCallback : callback;\n  const topic = typeof topicOrCallback === \"string\" ? topicOrCallback : void 0;\n  const room = useRoomContext();\n  const { send, messageObservable, isSendingObservable } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupDataMessageHandler)(room, topic, onMessage),\n    [room, topic, onMessage]\n  );\n  const message = useObservableState(messageObservable, void 0);\n  const isSending = useObservableState(isSendingObservable, false);\n  return {\n    message,\n    send,\n    isSending\n  };\n}\n\n// src/hooks/useDisconnectButton.ts\n\n\n\nfunction useDisconnectButton(props) {\n  const room = useRoomContext();\n  const connectionState = useConnectionState(room);\n  const buttonProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className, disconnect } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupDisconnectButton)(room);\n    const mergedProps = mergeProps(props, {\n      className,\n      onClick: () => {\n        var _a;\n        return disconnect((_a = props.stopTracks) != null ? _a : true);\n      },\n      disabled: connectionState === livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionState.Disconnected\n    });\n    return mergedProps;\n  }, [room, props, connectionState]);\n  return { buttonProps };\n}\n\n// src/hooks/useFacingMode.ts\n\nfunction useFacingMode(trackReference) {\n  if (trackReference.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_4__.LocalTrackPublication) {\n    const localTrack = trackReference.publication.track;\n    if (localTrack) {\n      const { facingMode } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_4__.facingModeFromLocalTrack)(localTrack);\n      return facingMode;\n    }\n  }\n  return \"undefined\";\n}\n\n// src/hooks/useFocusToggle.ts\n\n\nfunction useFocusToggle({ trackRef, trackSource, participant, props }) {\n  const p = useEnsureParticipant(participant);\n  if (!trackRef && !trackSource) {\n    throw new Error(\"trackRef or trackSource must be defined.\");\n  }\n  const layoutContext = useMaybeLayoutContext();\n  const { className } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupFocusToggle)(), []);\n  const inFocus = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (trackRef) {\n      return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReferencePinned)(trackRef, layoutContext == null ? void 0 : layoutContext.pin.state);\n    } else if (trackSource) {\n      const track = p.getTrack(trackSource);\n      if ((layoutContext == null ? void 0 : layoutContext.pin.state) && track) {\n        return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReferencePinned)(\n          { participant: p, source: trackSource, publication: track },\n          layoutContext.pin.state\n        );\n      } else {\n        return false;\n      }\n    } else {\n      throw new Error(\"trackRef or trackSource and participant must be defined.\");\n    }\n  }, [trackRef, layoutContext == null ? void 0 : layoutContext.pin.state, p, trackSource]);\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps(props, {\n      className,\n      onClick: (event) => {\n        var _a, _b, _c, _d, _e;\n        (_a = props.onClick) == null ? void 0 : _a.call(props, event);\n        if (trackRef) {\n          if (inFocus) {\n            (_c = layoutContext == null ? void 0 : (_b = layoutContext.pin).dispatch) == null ? void 0 : _c.call(_b, {\n              msg: \"clear_pin\"\n            });\n          } else {\n            (_e = layoutContext == null ? void 0 : (_d = layoutContext.pin).dispatch) == null ? void 0 : _e.call(_d, {\n              msg: \"set_pin\",\n              trackReference: trackRef\n            });\n          }\n        } else if (trackSource) {\n          const track = p.getTrack(trackSource);\n          if ((layoutContext == null ? void 0 : layoutContext.pin.dispatch) && track) {\n            if (inFocus) {\n              layoutContext.pin.dispatch({\n                msg: \"clear_pin\"\n              });\n            } else {\n              layoutContext.pin.dispatch({\n                msg: \"set_pin\",\n                trackReference: {\n                  participant: p,\n                  publication: track,\n                  source: track.source\n                }\n              });\n            }\n          }\n        }\n      }\n    }),\n    [props, className, trackRef, trackSource, inFocus, layoutContext == null ? void 0 : layoutContext.pin, p]\n  );\n  return { mergedProps, inFocus };\n}\n\n// src/hooks/useGridLayout.ts\n\n\nfunction useGridLayout(gridElement, trackCount) {\n  const { width, height } = useSize(gridElement);\n  const layout = width > 0 && height > 0 ? (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.selectGridLayout)(_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.GRID_LAYOUTS, trackCount, width, height) : _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.GRID_LAYOUTS[0];\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (gridElement.current && layout) {\n      gridElement.current.style.setProperty(\"--lk-col-count\", layout == null ? void 0 : layout.columns.toString());\n      gridElement.current.style.setProperty(\"--lk-row-count\", layout == null ? void 0 : layout.rows.toString());\n    }\n  }, [gridElement, layout]);\n  return {\n    layout\n  };\n}\n\n// src/hooks/useIsMuted.ts\n\n\nfunction useIsMuted(sourceOrTrackRef, options = {}) {\n  var _a, _b;\n  const passedParticipant = typeof sourceOrTrackRef === \"string\" ? options.participant : sourceOrTrackRef.participant;\n  const p = useEnsureParticipant(passedParticipant);\n  const ref = typeof sourceOrTrackRef === \"string\" ? { participant: p, source: sourceOrTrackRef } : sourceOrTrackRef;\n  const [isMuted, setIsMuted] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    !!(((_a = ref.publication) == null ? void 0 : _a.isMuted) || ((_b = p.getTrack(ref.source)) == null ? void 0 : _b.isMuted))\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.mutedObserver)(ref).subscribe(setIsMuted);\n    return () => listener.unsubscribe();\n  }, [(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.getTrackReferenceId)(ref)]);\n  return isMuted;\n}\n\n// src/hooks/useIsSpeaking.ts\n\n\nfunction useIsSpeaking(participant) {\n  const p = useEnsureParticipant(participant);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.createIsSpeakingObserver)(p), [p]);\n  const isSpeaking = useObservableState(observable, p.isSpeaking);\n  return isSpeaking;\n}\n\n// src/hooks/useLiveKitRoom.ts\n\n\n\nvar defaultRoomProps = {\n  connect: true,\n  audio: false,\n  video: false\n};\nfunction useLiveKitRoom(props) {\n  const _a = __spreadValues(__spreadValues({}, defaultRoomProps), props), {\n    token,\n    serverUrl,\n    options,\n    room: passedRoom,\n    connectOptions,\n    connect,\n    audio,\n    video,\n    screen,\n    onConnected,\n    onDisconnected,\n    onError,\n    onMediaDeviceFailure,\n    onEncryptionError,\n    simulateParticipants\n  } = _a, rest = __objRest(_a, [\n    \"token\",\n    \"serverUrl\",\n    \"options\",\n    \"room\",\n    \"connectOptions\",\n    \"connect\",\n    \"audio\",\n    \"video\",\n    \"screen\",\n    \"onConnected\",\n    \"onDisconnected\",\n    \"onError\",\n    \"onMediaDeviceFailure\",\n    \"onEncryptionError\",\n    \"simulateParticipants\"\n  ]);\n  if (options && passedRoom) {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(\n      \"when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.\"\n    );\n  }\n  const [room, setRoom] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setRoom(passedRoom != null ? passedRoom : new livekit_client__WEBPACK_IMPORTED_MODULE_4__.Room(options));\n  }, [passedRoom]);\n  const htmlProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupLiveKitRoom)();\n    return mergeProps(rest, { className });\n  }, [rest]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room)\n      return;\n    const onSignalConnected = () => {\n      const localP = room.localParticipant;\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"trying to publish local tracks\");\n      Promise.all([\n        localP.setMicrophoneEnabled(!!audio, typeof audio !== \"boolean\" ? audio : void 0),\n        localP.setCameraEnabled(!!video, typeof video !== \"boolean\" ? video : void 0),\n        localP.setScreenShareEnabled(!!screen, typeof screen !== \"boolean\" ? screen : void 0)\n      ]).catch((e) => {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(e);\n        onError == null ? void 0 : onError(e);\n      });\n    };\n    const handleMediaDeviceError = (e) => {\n      const mediaDeviceFailure = livekit_client__WEBPACK_IMPORTED_MODULE_4__.MediaDeviceFailure.getFailure(e);\n      onMediaDeviceFailure == null ? void 0 : onMediaDeviceFailure(mediaDeviceFailure);\n    };\n    const handleEncryptionError = (e) => {\n      onEncryptionError == null ? void 0 : onEncryptionError(e);\n    };\n    room.on(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.SignalConnected, onSignalConnected).on(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.MediaDevicesError, handleMediaDeviceError).on(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.EncryptionError, handleEncryptionError);\n    return () => {\n      room.off(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.SignalConnected, onSignalConnected).off(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.MediaDevicesError, handleMediaDeviceError).off(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.EncryptionError, handleEncryptionError);\n    };\n  }, [room, audio, video, screen, onError, onEncryptionError, onMediaDeviceFailure]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room)\n      return;\n    if (simulateParticipants) {\n      room.simulateParticipants({\n        participants: {\n          count: simulateParticipants\n        },\n        publish: {\n          audio: true,\n          useRealTracks: true\n        }\n      });\n      return;\n    }\n    if (!token) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"no token yet\");\n      return;\n    }\n    if (!serverUrl) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(\"no livekit url provided\");\n      onError == null ? void 0 : onError(Error(\"no livekit url provided\"));\n      return;\n    }\n    if (connect) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"connecting\");\n      room.connect(serverUrl, token, connectOptions).catch((e) => {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(e);\n        onError == null ? void 0 : onError(e);\n      });\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"disconnecting because connect is false\");\n      room.disconnect();\n    }\n  }, [\n    connect,\n    token,\n    JSON.stringify(connectOptions),\n    room,\n    onError,\n    serverUrl,\n    simulateParticipants\n  ]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room)\n      return;\n    const connectionStateChangeListener = (state) => {\n      switch (state) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionState.Disconnected:\n          if (onDisconnected)\n            onDisconnected();\n          break;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionState.Connected:\n          if (onConnected)\n            onConnected();\n          break;\n        default:\n          break;\n      }\n    };\n    room.on(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\n    return () => {\n      room.off(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\n    };\n  }, [token, onConnected, onDisconnected, room]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room)\n      return;\n    return () => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.info(\"disconnecting on onmount\");\n      room.disconnect();\n    };\n  }, [room]);\n  return { room, htmlProps };\n}\n\n// src/hooks/useLocalParticipant.ts\n\n\nfunction useLocalParticipant(options = {}) {\n  const room = useEnsureRoom(options.room);\n  const [localParticipant, setLocalParticipant] = react__WEBPACK_IMPORTED_MODULE_0__.useState(room.localParticipant);\n  const [isMicrophoneEnabled, setIsMicrophoneEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.isMicrophoneEnabled\n  );\n  const [isCameraEnabled, setIsCameraEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.isMicrophoneEnabled\n  );\n  const [lastMicrophoneError, setLastMicrophoneError] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.lastMicrophoneError\n  );\n  const [lastCameraError, setLastCameraError] = react__WEBPACK_IMPORTED_MODULE_0__.useState(localParticipant.lastCameraError);\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.isMicrophoneEnabled\n  );\n  const [microphoneTrack, setMicrophoneTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  );\n  const [cameraTrack, setCameraTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  const handleUpdate = (media) => {\n    setIsCameraEnabled(media.isCameraEnabled);\n    setIsMicrophoneEnabled(media.isMicrophoneEnabled);\n    setIsScreenShareEnabled(media.isScreenShareEnabled);\n    setCameraTrack(media.cameraTrack);\n    setMicrophoneTrack(media.microphoneTrack);\n    setLastMicrophoneError(media.participant.lastMicrophoneError);\n    setLastCameraError(media.participant.lastCameraError);\n    setLocalParticipant(media.participant);\n  };\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.observeParticipantMedia)(room.localParticipant).subscribe(handleUpdate);\n    return () => listener.unsubscribe();\n  }, [room]);\n  return {\n    isMicrophoneEnabled,\n    isScreenShareEnabled,\n    isCameraEnabled,\n    microphoneTrack,\n    cameraTrack,\n    lastMicrophoneError,\n    lastCameraError,\n    localParticipant\n  };\n}\n\n// src/hooks/useLocalParticipantPermissions.ts\n\n\nfunction useLocalParticipantPermissions() {\n  const room = useRoomContext();\n  const permissionObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.participantPermissionObserver)(room.localParticipant),\n    [room]\n  );\n  const permissions = useObservableState(permissionObserver, room.localParticipant.permissions);\n  return permissions;\n}\n\n// src/hooks/useMediaDeviceSelect.ts\n\n\nfunction useMediaDeviceSelect({\n  kind,\n  room,\n  track,\n  requestPermissions,\n  onError\n}) {\n  const roomContext = useMaybeRoomContext();\n  const deviceObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.createMediaDeviceObserver)(kind, onError, requestPermissions),\n    [kind, requestPermissions, onError]\n  );\n  const devices = useObservableState(deviceObserver, []);\n  const [currentDeviceId, setCurrentDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"\");\n  const { className, activeDeviceObservable, setActiveMediaDevice } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupDeviceSelector)(kind, room != null ? room : roomContext, track),\n    [kind, room, roomContext, track]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = activeDeviceObservable.subscribe((deviceId) => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.info(\"setCurrentDeviceId\", deviceId);\n      if (deviceId)\n        setCurrentDeviceId(deviceId);\n    });\n    return () => {\n      listener == null ? void 0 : listener.unsubscribe();\n    };\n  }, [activeDeviceObservable]);\n  return { devices, className, activeDeviceId: currentDeviceId, setActiveMediaDevice };\n}\n\n// src/hooks/useMediaDevices.ts\n\n\nfunction useMediaDevices({ kind }) {\n  const deviceObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.createMediaDeviceObserver)(kind), [kind]);\n  const devices = useObservableState(deviceObserver, []);\n  return devices;\n}\n\n// src/hooks/useMediaTrackBySourceOrName.ts\n\n\n\n\n// src/utils.ts\n\n\nfunction isProp(prop) {\n  return prop !== void 0;\n}\nfunction mergeProps2(...props) {\n  return mergeProps(...props.filter(isProp));\n}\nfunction cloneSingleChild(children, props, key) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.Children.map(children, (child) => {\n    if (react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(child) && react__WEBPACK_IMPORTED_MODULE_0__.Children.only(children)) {\n      return react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(child, __spreadProps(__spreadValues({}, props), { key }));\n    }\n    return child;\n  });\n}\nfunction warnAboutMissingStyles(el) {\n  var _a, _b;\n  if (\n    // eslint-disable-next-line turbo/no-undeclared-env-vars\n    (((_a = process == null ? void 0 : process.env) == null ? void 0 : _a.NODE_ENV) === \"dev\" || ((_b = process == null ? void 0 : process.env) == null ? void 0 : _b.NODE_ENV) === \"development\") && typeof window !== \"undefined\"\n  ) {\n    const target = el != null ? el : document.querySelector(\".lk-room-container\");\n    if (target && !getComputedStyle(target).getPropertyValue(\"--lk-has-imported-styles\")) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(\n        \"It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.\"\n      );\n    }\n  }\n}\n\n// src/hooks/useMediaTrackBySourceOrName.ts\nfunction useMediaTrackBySourceOrName(observerOptions, options = {}) {\n  var _a;\n  const [publication, setPublication] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.getTrackByIdentifier)(observerOptions));\n  const [isMuted, setMuted] = react__WEBPACK_IMPORTED_MODULE_0__.useState(publication == null ? void 0 : publication.isMuted);\n  const [isSubscribed, setSubscribed] = react__WEBPACK_IMPORTED_MODULE_0__.useState(publication == null ? void 0 : publication.isSubscribed);\n  const [track, setTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(publication == null ? void 0 : publication.track);\n  const [orientation, setOrientation] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"landscape\");\n  const previousElement = react__WEBPACK_IMPORTED_MODULE_0__.useRef();\n  const { className, trackObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupMediaTrack)(observerOptions);\n  }, [\n    (_a = observerOptions.participant.sid) != null ? _a : observerOptions.participant.identity,\n    observerOptions.source,\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReference)(observerOptions) && observerOptions.publication.trackSid\n  ]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const subscription = trackObserver.subscribe((publication2) => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"update track\", publication2);\n      setPublication(publication2);\n      setMuted(publication2 == null ? void 0 : publication2.isMuted);\n      setSubscribed(publication2 == null ? void 0 : publication2.isSubscribed);\n      setTrack(publication2 == null ? void 0 : publication2.track);\n    });\n    return () => subscription == null ? void 0 : subscription.unsubscribe();\n  }, [trackObserver]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2, _b;\n    if (track) {\n      if (previousElement.current) {\n        track.detach(previousElement.current);\n      }\n      if (((_a2 = options.element) == null ? void 0 : _a2.current) && !((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isLocal)(observerOptions.participant) && (track == null ? void 0 : track.kind) === \"audio\")) {\n        track.attach(options.element.current);\n      }\n    }\n    previousElement.current = (_b = options.element) == null ? void 0 : _b.current;\n    return () => {\n      if (previousElement.current) {\n        track == null ? void 0 : track.detach(previousElement.current);\n      }\n    };\n  }, [track, options.element]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2, _b;\n    if (typeof ((_a2 = publication == null ? void 0 : publication.dimensions) == null ? void 0 : _a2.width) === \"number\" && typeof ((_b = publication == null ? void 0 : publication.dimensions) == null ? void 0 : _b.height) === \"number\") {\n      const orientation_ = publication.dimensions.width > publication.dimensions.height ? \"landscape\" : \"portrait\";\n      setOrientation(orientation_);\n    }\n  }, [publication]);\n  return {\n    publication,\n    isMuted,\n    isSubscribed,\n    track,\n    elementProps: mergeProps2(options.props, __spreadValues({\n      className,\n      \"data-lk-local-participant\": observerOptions.participant.isLocal,\n      \"data-lk-source\": publication == null ? void 0 : publication.source\n    }, (publication == null ? void 0 : publication.kind) === \"video\" && { \"data-lk-orientation\": orientation }))\n  };\n}\n\n// src/hooks/useMediaTrack.ts\nfunction useMediaTrack(source, participant, options = {}) {\n  const p = useEnsureParticipant(participant);\n  return useMediaTrackBySourceOrName({ source, participant: p }, options);\n}\n\n// src/hooks/useMediaTrackByName.ts\nfunction useMediaTrackByName(name, participant, options = {}) {\n  const p = useEnsureParticipant(participant);\n  return useMediaTrackBySourceOrName({ name, participant: p }, options);\n}\n\n// src/hooks/usePagination.ts\n\n\n// src/hooks/useVisualStableUpdate.ts\n\n\nfunction useVisualStableUpdate(trackReferences, maxItemsOnPage, options = {}) {\n  const lastTrackRefs = react__WEBPACK_IMPORTED_MODULE_0__.useRef([]);\n  const lastMaxItemsOnPage = react__WEBPACK_IMPORTED_MODULE_0__.useRef(-1);\n  const layoutChanged = maxItemsOnPage !== lastMaxItemsOnPage.current;\n  const sortedTrackRefs = typeof options.customSortFunction === \"function\" ? options.customSortFunction(trackReferences) : (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.sortTrackReferences)(trackReferences);\n  let updatedTrackRefs = [...sortedTrackRefs];\n  if (layoutChanged === false) {\n    try {\n      updatedTrackRefs = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.updatePages)(lastTrackRefs.current, sortedTrackRefs, maxItemsOnPage);\n    } catch (error) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.error(\"Error while running updatePages(): \", error);\n    }\n  }\n  if (layoutChanged) {\n    lastTrackRefs.current = sortedTrackRefs;\n  } else {\n    lastTrackRefs.current = updatedTrackRefs;\n  }\n  lastMaxItemsOnPage.current = maxItemsOnPage;\n  return updatedTrackRefs;\n}\n\n// src/hooks/usePagination.ts\nfunction usePagination(itemPerPage, trackReferences) {\n  const [currentPage, setCurrentPage] = react__WEBPACK_IMPORTED_MODULE_0__.useState(1);\n  const totalPageCount = Math.max(Math.ceil(trackReferences.length / itemPerPage), 1);\n  if (currentPage > totalPageCount) {\n    setCurrentPage(totalPageCount);\n  }\n  const lastItemIndex = currentPage * itemPerPage;\n  const firstItemIndex = lastItemIndex - itemPerPage;\n  const changePage = (direction) => {\n    setCurrentPage((state) => {\n      if (direction === \"next\") {\n        if (state === totalPageCount) {\n          return state;\n        }\n        return state + 1;\n      } else {\n        if (state === 1) {\n          return state;\n        }\n        return state - 1;\n      }\n    });\n  };\n  const goToPage = (num) => {\n    if (num > totalPageCount) {\n      setCurrentPage(totalPageCount);\n    } else if (num < 1) {\n      setCurrentPage(1);\n    } else {\n      setCurrentPage(num);\n    }\n  };\n  const updatedTrackReferences = useVisualStableUpdate(trackReferences, itemPerPage);\n  const tracksOnPage = updatedTrackReferences.slice(firstItemIndex, lastItemIndex);\n  return {\n    totalPageCount,\n    nextPage: () => changePage(\"next\"),\n    prevPage: () => changePage(\"previous\"),\n    setPage: goToPage,\n    firstItemIndex,\n    lastItemIndex,\n    tracks: tracksOnPage,\n    currentPage\n  };\n}\n\n// src/hooks/useParticipantInfo.ts\n\n\nfunction useParticipantInfo(props = {}) {\n  const p = useEnsureParticipant(props.participant);\n  const infoObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.participantInfoObserver)(p), [p]);\n  const { identity, name, metadata } = useObservableState(infoObserver, {\n    name: p.name,\n    identity: p.identity,\n    metadata: p.metadata\n  });\n  return { identity, name, metadata };\n}\n\n// src/hooks/useParticipantPermissions.ts\n\n\nfunction useParticipantPermissions(options = {}) {\n  const p = useEnsureParticipant(options.participant);\n  const permissionObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.participantPermissionObserver)(p), [p]);\n  const permissions = useObservableState(permissionObserver, p.permissions);\n  return permissions;\n}\n\n// src/hooks/useParticipantTile.ts\n\n\n\nfunction useParticipantTile({\n  trackRef,\n  participant,\n  source,\n  publication,\n  onParticipantClick,\n  disableSpeakingIndicator,\n  htmlProps\n}) {\n  const maybeTrackRef = useMaybeTrackRefContext();\n  const p = useEnsureParticipant(participant);\n  const trackReference = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    var _a, _b, _c, _d, _e, _f;\n    const _source = (_b = (_a = trackRef == null ? void 0 : trackRef.source) != null ? _a : maybeTrackRef == null ? void 0 : maybeTrackRef.source) != null ? _b : source;\n    if (_source === void 0) {\n      throw new Error(\n        \"Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.\"\n      );\n    }\n    return {\n      participant: (_d = (_c = trackRef == null ? void 0 : trackRef.participant) != null ? _c : maybeTrackRef == null ? void 0 : maybeTrackRef.participant) != null ? _d : p,\n      publication: (_f = (_e = trackRef == null ? void 0 : trackRef.publication) != null ? _e : maybeTrackRef == null ? void 0 : maybeTrackRef.publication) != null ? _f : publication,\n      source: _source\n    };\n  }, [\n    trackRef == null ? void 0 : trackRef.participant,\n    trackRef == null ? void 0 : trackRef.source,\n    trackRef == null ? void 0 : trackRef.publication,\n    maybeTrackRef == null ? void 0 : maybeTrackRef.participant,\n    maybeTrackRef == null ? void 0 : maybeTrackRef.source,\n    maybeTrackRef == null ? void 0 : maybeTrackRef.publication,\n    p,\n    source,\n    publication\n  ]);\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupParticipantTile)();\n    return mergeProps(htmlProps, {\n      className,\n      onClick: (event) => {\n        var _a, _b;\n        (_a = htmlProps.onClick) == null ? void 0 : _a.call(htmlProps, event);\n        if (typeof onParticipantClick === \"function\") {\n          const track = (_b = trackReference.publication) != null ? _b : trackReference.participant.getTrack(trackReference.source);\n          onParticipantClick({ participant: trackReference.participant, track });\n        }\n      }\n    });\n  }, [\n    htmlProps,\n    onParticipantClick,\n    trackReference.publication,\n    trackReference.source,\n    trackReference.participant\n  ]);\n  const isVideoMuted = useIsMuted(livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera, { participant: trackReference.participant });\n  const isAudioMuted = useIsMuted(livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone, {\n    participant: trackReference.participant\n  });\n  const isSpeaking = useIsSpeaking(trackReference.participant);\n  const facingMode = useFacingMode(trackReference);\n  return {\n    elementProps: __spreadValues({\n      \"data-lk-audio-muted\": isAudioMuted,\n      \"data-lk-video-muted\": isVideoMuted,\n      \"data-lk-speaking\": disableSpeakingIndicator === true ? false : isSpeaking,\n      \"data-lk-local-participant\": trackReference.participant.isLocal,\n      \"data-lk-source\": trackReference.source,\n      \"data-lk-facing-mode\": facingMode\n    }, mergedProps)\n  };\n}\n\n// src/hooks/useRemoteParticipants.ts\n\n\nfunction useRemoteParticipants(options = {}) {\n  const room = useEnsureRoom(options.room);\n  const [participants, setParticipants] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.connectedParticipantsObserver)(room, {\n      additionalRoomEvents: options.updateOnlyOn\n    }).subscribe(setParticipants);\n    return () => listener.unsubscribe();\n  }, [room, JSON.stringify(options.updateOnlyOn)]);\n  return participants;\n}\n\n// src/hooks/useParticipants.ts\nfunction useParticipants(options = {}) {\n  const remoteParticipants = useRemoteParticipants(options);\n  const { localParticipant } = useLocalParticipant(options);\n  return [localParticipant, ...remoteParticipants];\n}\n\n// src/hooks/usePinnedTracks.ts\n\nfunction usePinnedTracks(layoutContext) {\n  layoutContext = useEnsureLayoutContext(layoutContext);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if ((layoutContext == null ? void 0 : layoutContext.pin.state) !== void 0 && layoutContext.pin.state.length >= 1) {\n      return layoutContext.pin.state;\n    }\n    return [];\n  }, [layoutContext.pin.state]);\n}\n\n// src/hooks/useRemoteParticipant.ts\n\n\nfunction useRemoteParticipant(identity, options = {}) {\n  const room = useRoomContext();\n  const [updateOnlyOn] = react__WEBPACK_IMPORTED_MODULE_0__.useState(options.updateOnlyOn);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.connectedParticipantObserver)(room, identity, { additionalEvents: updateOnlyOn }),\n    [room, identity, updateOnlyOn]\n  );\n  const participant = useObservableState(\n    observable,\n    room.getParticipantByIdentity(identity)\n  );\n  return participant;\n}\n\n// src/hooks/useRoomInfo.ts\n\n\nfunction useRoomInfo(options = {}) {\n  const room = useEnsureRoom(options.room);\n  const infoObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.roomInfoObserver)(room), [room]);\n  const { name, metadata } = useObservableState(infoObserver, {\n    name: room.name,\n    metadata: room.metadata\n  });\n  return { name, metadata };\n}\n\n// src/hooks/useSortedParticipants.ts\n\n\n\n// src/hooks/useSpeakingParticipants.ts\n\n\nfunction useSpeakingParticipants() {\n  const room = useRoomContext();\n  const speakerObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.activeSpeakerObserver)(room), [room]);\n  const activeSpeakers = useObservableState(speakerObserver, room.activeSpeakers);\n  return activeSpeakers;\n}\n\n// src/hooks/useSortedParticipants.ts\nfunction useSortedParticipants(participants) {\n  const [sortedParticipants, setSortedParticipants] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.sortParticipants)(participants)\n  );\n  const activeSpeakers = useSpeakingParticipants();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setSortedParticipants((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.sortParticipants)(participants));\n  }, [activeSpeakers, participants]);\n  return sortedParticipants;\n}\n\n// src/hooks/useStartAudio.ts\n\n\nfunction useStartAudio({ room, props }) {\n  const roomEnsured = useEnsureRoom(room);\n  const { className, roomAudioPlaybackAllowedObservable: roomAudioPlaybackAllowedObservable2, handleStartAudioPlayback } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupStartAudio)(),\n    []\n  );\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => roomAudioPlaybackAllowedObservable2(roomEnsured),\n    [roomEnsured, roomAudioPlaybackAllowedObservable2]\n  );\n  const { canPlayAudio } = useObservableState(observable, {\n    canPlayAudio: roomEnsured.canPlaybackAudio\n  });\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps(props, {\n      className,\n      onClick: () => {\n        handleStartAudioPlayback(roomEnsured);\n      },\n      style: { display: canPlayAudio ? \"none\" : \"block\" }\n    }),\n    [props, className, canPlayAudio, handleStartAudioPlayback, roomEnsured]\n  );\n  return { mergedProps, canPlayAudio };\n}\n\n// src/hooks/useStartVideo.ts\n\n\nfunction useStartVideo({ room, props }) {\n  const roomEnsured = useEnsureRoom(room);\n  const { className, roomVideoPlaybackAllowedObservable, handleStartVideoPlayback } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupStartVideo)(),\n    []\n  );\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => roomVideoPlaybackAllowedObservable(roomEnsured),\n    [roomEnsured, roomVideoPlaybackAllowedObservable]\n  );\n  const { canPlayVideo } = useObservableState(observable, {\n    canPlayVideo: roomEnsured.canPlaybackVideo\n  });\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps(props, {\n      className,\n      onClick: () => {\n        handleStartVideoPlayback(roomEnsured);\n      },\n      style: { display: canPlayVideo ? \"none\" : \"block\" }\n    }),\n    [props, className, canPlayVideo, handleStartVideoPlayback, roomEnsured]\n  );\n  return { mergedProps, canPlayVideo };\n}\n\n// src/hooks/useSwipe.ts\n\nfunction useSwipe(element, options = {}) {\n  var _a;\n  const touchStart = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const touchEnd = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const minSwipeDistance = (_a = options.minSwipeDistance) != null ? _a : 50;\n  const onTouchStart = (event) => {\n    touchEnd.current = null;\n    touchStart.current = event.targetTouches[0].clientX;\n  };\n  const onTouchMove = (event) => {\n    touchEnd.current = event.targetTouches[0].clientX;\n  };\n  const onTouchEnd = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (!touchStart.current || !touchEnd.current) {\n      return;\n    }\n    const distance = touchStart.current - touchEnd.current;\n    const isLeftSwipe = distance > minSwipeDistance;\n    const isRightSwipe = distance < -minSwipeDistance;\n    if (isLeftSwipe && options.onLeftSwipe)\n      options.onLeftSwipe();\n    if (isRightSwipe && options.onRightSwipe)\n      options.onRightSwipe();\n  }, [minSwipeDistance, options]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const elementCopy = element.current;\n    if (elementCopy) {\n      elementCopy.addEventListener(\"touchstart\", onTouchStart, { passive: true });\n      elementCopy.addEventListener(\"touchmove\", onTouchMove, { passive: true });\n      elementCopy.addEventListener(\"touchend\", onTouchEnd, { passive: true });\n    }\n    return () => {\n      if (elementCopy) {\n        elementCopy.removeEventListener(\"touchstart\", onTouchStart);\n        elementCopy.removeEventListener(\"touchmove\", onTouchMove);\n        elementCopy.removeEventListener(\"touchend\", onTouchEnd);\n      }\n    };\n  }, [element, onTouchEnd]);\n}\n\n// src/hooks/useChatToggle.ts\n\n\nfunction useChatToggle({ props }) {\n  const { dispatch, state } = useLayoutContext().widget;\n  const { className } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupChatToggle)(), []);\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return mergeProps(props, {\n      className,\n      onClick: () => {\n        if (dispatch)\n          dispatch({ msg: \"toggle_chat\" });\n      },\n      \"aria-pressed\": (state == null ? void 0 : state.showChat) ? \"true\" : \"false\",\n      \"data-lk-unread-msgs\": state ? state.unreadMessages < 10 ? state.unreadMessages.toFixed(0) : \"9+\" : \"0\"\n    });\n  }, [props, className, dispatch, state]);\n  return { mergedProps };\n}\n\n// src/hooks/useToken.ts\n\n\nfunction useToken(tokenEndpoint, roomName, options = {}) {\n  const [token, setToken] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a;\n    if (tokenEndpoint === void 0) {\n      throw Error(\"token endpoint needs to be defined\");\n    }\n    if (((_a = options.userInfo) == null ? void 0 : _a.identity) === void 0) {\n      return;\n    }\n    const tokenFetcher = () => __async(this, null, function* () {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"fetching token\");\n      const params = new URLSearchParams(__spreadProps(__spreadValues({}, options.userInfo), { roomName }));\n      const res = yield fetch(`${tokenEndpoint}?${params.toString()}`);\n      if (!res.ok) {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.error(\n          `Could not fetch token. Server responded with status ${res.status}: ${res.statusText}`\n        );\n        return;\n      }\n      const { accessToken } = yield res.json();\n      setToken(accessToken);\n    });\n    tokenFetcher();\n  }, [tokenEndpoint, roomName, JSON.stringify(options)]);\n  return token;\n}\n\n// src/hooks/useTrackMutedIndicator.ts\n\n\nfunction useTrackMutedIndicator(trackRefOrSource, options = {}) {\n  var _a, _b, _c, _d;\n  let ref = useMaybeTrackRefContext();\n  const p = (_b = (_a = useMaybeParticipantContext()) != null ? _a : options.participant) != null ? _b : ref == null ? void 0 : ref.participant;\n  if (typeof trackRefOrSource === \"string\") {\n    if (!p) {\n      throw Error(`Participant missing, either provide it via context or pass it in directly`);\n    }\n    ref = { participant: p, source: trackRefOrSource };\n  } else if (trackRefOrSource) {\n    ref = trackRefOrSource;\n  } else {\n    throw Error(`No track reference found, either provide it via context or pass it in directly`);\n  }\n  const { className, mediaMutedObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupTrackMutedIndicator)(ref),\n    [(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.getTrackReferenceId)(ref)]\n  );\n  const isMuted = useObservableState(\n    mediaMutedObserver,\n    !!(((_c = ref.publication) == null ? void 0 : _c.isMuted) || ((_d = ref.participant.getTrack(ref.source)) == null ? void 0 : _d.isMuted))\n  );\n  return { isMuted, className };\n}\n\n// src/hooks/useTrackToggle.ts\n\n\nfunction useTrackToggle(_a) {\n  var _b = _a, {\n    source,\n    onChange,\n    initialState,\n    captureOptions\n  } = _b, rest = __objRest(_b, [\n    \"source\",\n    \"onChange\",\n    \"initialState\",\n    \"captureOptions\"\n  ]);\n  var _a2;\n  const room = useMaybeRoomContext();\n  const track = (_a2 = room == null ? void 0 : room.localParticipant) == null ? void 0 : _a2.getTrack(source);\n  const userInteractionRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false);\n  const { toggle, className, pendingObserver, enabledObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => room ? (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupMediaToggle)(source, room, captureOptions) : (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupManualToggle)(),\n    [room, source, JSON.stringify(captureOptions)]\n  );\n  const pending = useObservableState(pendingObserver, false);\n  const enabled = useObservableState(enabledObserver, initialState != null ? initialState : !!(track == null ? void 0 : track.isEnabled));\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    onChange == null ? void 0 : onChange(enabled, userInteractionRef.current);\n    userInteractionRef.current = false;\n  }, [enabled, onChange]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (initialState !== void 0) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"forcing initial toggle state\", source, initialState);\n      toggle(initialState);\n    }\n  }, []);\n  const newProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => mergeProps(rest, { className }), [rest, className]);\n  const clickHandler = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (evt) => {\n      var _a3;\n      userInteractionRef.current = true;\n      toggle().finally(() => userInteractionRef.current = false);\n      (_a3 = rest.onClick) == null ? void 0 : _a3.call(rest, evt);\n    },\n    [rest, toggle]\n  );\n  return {\n    toggle,\n    enabled,\n    pending,\n    track,\n    buttonProps: __spreadProps(__spreadValues({}, newProps), {\n      \"aria-pressed\": enabled,\n      \"data-lk-source\": source,\n      \"data-lk-enabled\": enabled,\n      disabled: pending,\n      onClick: clickHandler\n    })\n  };\n}\n\n// src/hooks/useTracks.ts\n\n\n\nfunction useTracks(sources = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera,\n  livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone,\n  livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShare,\n  livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShareAudio,\n  livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Unknown\n], options = {}) {\n  const room = useEnsureRoom(options.room);\n  const [trackReferences, setTrackReferences] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const [participants, setParticipants] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const sources_ = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return sources.map((s) => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isSourceWitOptions)(s) ? s.source : s);\n  }, [JSON.stringify(sources)]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const subscription = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.trackReferencesObservable)(room, sources_, {\n      additionalRoomEvents: options.updateOnlyOn,\n      onlySubscribed: options.onlySubscribed\n    }).subscribe(({ trackReferences: trackReferences2, participants: participants2 }) => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"setting track bundles\", trackReferences2, participants2);\n      setTrackReferences(trackReferences2);\n      setParticipants(participants2);\n    });\n    return () => subscription.unsubscribe();\n  }, [room, JSON.stringify(options.updateOnlyOn), JSON.stringify(sources)]);\n  const maybeTrackReferences = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if ((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isSourcesWithOptions)(sources)) {\n      const requirePlaceholder = requiredPlaceholders(sources, participants);\n      const trackReferencesWithPlaceholders = Array.from(trackReferences);\n      participants.forEach((participant) => {\n        var _a;\n        if (requirePlaceholder.has(participant.identity)) {\n          const sourcesToAddPlaceholder = (_a = requirePlaceholder.get(participant.identity)) != null ? _a : [];\n          sourcesToAddPlaceholder.forEach((placeholderSource) => {\n            if (trackReferences.find(\n              ({ participant: p, publication }) => participant.identity === p.identity && publication.source === placeholderSource\n            )) {\n              return;\n            }\n            _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\n              `Add ${placeholderSource} placeholder for participant ${participant.identity}.`\n            );\n            const placeholder = {\n              participant,\n              source: placeholderSource\n            };\n            trackReferencesWithPlaceholders.push(placeholder);\n          });\n        }\n      });\n      return trackReferencesWithPlaceholders;\n    } else {\n      return trackReferences;\n    }\n  }, [trackReferences, participants, sources]);\n  return maybeTrackReferences;\n}\nfunction difference(setA, setB) {\n  const _difference = new Set(setA);\n  for (const elem of setB) {\n    _difference.delete(elem);\n  }\n  return _difference;\n}\nfunction requiredPlaceholders(sources, participants) {\n  const placeholderMap = /* @__PURE__ */ new Map();\n  if ((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isSourcesWithOptions)(sources)) {\n    const sourcesThatNeedPlaceholder = sources.filter((sourceWithOption) => sourceWithOption.withPlaceholder).map((sourceWithOption) => sourceWithOption.source);\n    participants.forEach((participant) => {\n      const sourcesOfSubscribedTracks = participant.getTracks().map((pub) => {\n        var _a;\n        return (_a = pub.track) == null ? void 0 : _a.source;\n      }).filter((trackSource) => trackSource !== void 0);\n      const placeholderNeededForThisParticipant = Array.from(\n        difference(new Set(sourcesThatNeedPlaceholder), new Set(sourcesOfSubscribedTracks))\n      );\n      if (placeholderNeededForThisParticipant.length > 0) {\n        placeholderMap.set(participant.identity, placeholderNeededForThisParticipant);\n      }\n    });\n  }\n  return placeholderMap;\n}\n\n// src/hooks/useTrack.ts\nfunction useTrack(trackRef, options = {}) {\n  return useMediaTrackBySourceOrName(trackRef, options);\n}\n\n// src/hooks/useTrackByName.ts\nfunction useTrackByName(trackRef, options = {}) {\n  const ref = useEnsureTrackRef(trackRef);\n  return useMediaTrackBySourceOrName(ref, options);\n}\n\n// src/hooks/useChat.ts\n\n\nfunction useChat(options) {\n  const room = useRoomContext();\n  const [setup, setSetup] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  const isSending = useObservableState(setup == null ? void 0 : setup.isSendingObservable, false);\n  const chatMessages = useObservableState(setup == null ? void 0 : setup.messageObservable, []);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const setupChatReturn = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupChat)(room, options);\n    setSetup(setupChatReturn);\n  }, [room, options]);\n  return { send: setup == null ? void 0 : setup.send, update: setup == null ? void 0 : setup.update, chatMessages, isSending };\n}\n\n// src/hooks/usePersistentUserChoices.ts\n\n\nfunction usePersistentUserChoices(options = {}) {\n  var _a;\n  const [userChoices, setSettings] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.loadUserChoices)(options.defaults, (_a = options.preventLoad) != null ? _a : false)\n  );\n  const saveAudioInputEnabled = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((isEnabled) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { audioEnabled: isEnabled }));\n  }, []);\n  const saveVideoInputEnabled = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((isEnabled) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { videoEnabled: isEnabled }));\n  }, []);\n  const saveAudioInputDeviceId = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((deviceId) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { audioDeviceId: deviceId }));\n  }, []);\n  const saveVideoInputDeviceId = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((deviceId) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { videoDeviceId: deviceId }));\n  }, []);\n  const saveUsername = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((username) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { username }));\n  }, []);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2;\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.saveUserChoices)(userChoices, (_a2 = options.preventSave) != null ? _a2 : false);\n  }, [userChoices, options.preventSave]);\n  return {\n    userChoices,\n    saveAudioInputEnabled,\n    saveVideoInputEnabled,\n    saveAudioInputDeviceId,\n    saveVideoInputDeviceId,\n    saveUsername\n  };\n}\n\n// src/hooks/useIsEncrypted.ts\n\n\n\nfunction useIsEncrypted(participant) {\n  const p = useEnsureParticipant(participant);\n  const room = useEnsureRoom();\n  const observer = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.encryptionStatusObservable)(room, p), [room, p]);\n  const isEncrypted = useObservableState(\n    observer,\n    p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_4__.LocalParticipant ? p.isE2EEEnabled : p.isEncrypted\n  );\n  return isEncrypted;\n}\n\n// src/hooks/useTrackVolume.ts\n\n\n\nvar useTrackVolume = (trackOrTrackReference, options = { fftSize: 32, smoothingTimeConstant: 0 }) => {\n  const track = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReference)(trackOrTrackReference) ? trackOrTrackReference.publication.track : trackOrTrackReference;\n  const [volume, setVolume] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!track || !track.mediaStream) {\n      return;\n    }\n    const { cleanup, analyser } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_4__.createAudioAnalyser)(track, options);\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    const updateVolume = () => {\n      analyser.getByteFrequencyData(dataArray);\n      let sum = 0;\n      for (let i = 0; i < dataArray.length; i++) {\n        const a = dataArray[i];\n        sum += a * a;\n      }\n      setVolume(Math.sqrt(sum / dataArray.length) / 255);\n    };\n    const interval = setInterval(updateVolume, 1e3 / 30);\n    return () => {\n      cleanup();\n      clearInterval(interval);\n    };\n  }, [track, track == null ? void 0 : track.mediaStream, JSON.stringify(options)]);\n  return volume;\n};\nvar normalizeFrequencies = (frequencies) => {\n  const normalizeDb = (value) => {\n    const minDb = -100;\n    const maxDb = -10;\n    let db = 1 - Math.max(minDb, Math.min(maxDb, value)) * -1 / 100;\n    db = Math.sqrt(db);\n    return db;\n  };\n  return frequencies.map((value) => {\n    if (value === -Infinity) {\n      return 0;\n    }\n    return normalizeDb(value);\n  });\n};\nvar multibandDefaults = {\n  bands: 5,\n  loPass: 100,\n  hiPass: 600,\n  updateInterval: 10,\n  analyserOptions: { fftSize: 2048 }\n};\nvar useMultibandTrackVolume = (trackOrTrackReference, options = {}) => {\n  var _a;\n  const track = trackOrTrackReference instanceof livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track ? trackOrTrackReference : (_a = trackOrTrackReference == null ? void 0 : trackOrTrackReference.publication) == null ? void 0 : _a.track;\n  const [frequencyBands, setFrequencyBands] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const opts = __spreadValues(__spreadValues({}, multibandDefaults), options);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!track || !(track == null ? void 0 : track.mediaStream)) {\n      return;\n    }\n    const { analyser, cleanup } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_4__.createAudioAnalyser)(track, opts.analyserOptions);\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Float32Array(bufferLength);\n    const updateVolume = () => {\n      analyser.getFloatFrequencyData(dataArray);\n      let frequencies = new Float32Array(dataArray.length);\n      for (let i = 0; i < dataArray.length; i++) {\n        frequencies[i] = dataArray[i];\n      }\n      frequencies = frequencies.slice(options.loPass, options.hiPass);\n      const normalizedFrequencies = normalizeFrequencies(frequencies);\n      const chunkSize = Math.ceil(normalizedFrequencies.length / opts.bands);\n      const chunks = [];\n      for (let i = 0; i < opts.bands; i++) {\n        const summedVolumes = normalizedFrequencies.slice(i * chunkSize, (i + 1) * chunkSize).reduce((acc, val) => acc += val, 0);\n        chunks.push(summedVolumes / chunkSize);\n      }\n      setFrequencyBands(chunks);\n    };\n    const interval = setInterval(updateVolume, opts.updateInterval);\n    return () => {\n      cleanup();\n      clearInterval(interval);\n    };\n  }, [track, track == null ? void 0 : track.mediaStream, JSON.stringify(options)]);\n  return frequencyBands;\n};\n\n// src/components/controls/ClearPinButton.tsx\nfunction ClearPinButton(props) {\n  const { buttonProps } = useClearPinButton(props);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({}, buttonProps), props.children);\n}\n\n// src/components/ConnectionState.tsx\n\nfunction ConnectionState3(_a) {\n  var _b = _a, { room } = _b, props = __objRest(_b, [\"room\"]);\n  const connectionState = useConnectionState(room);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, props), connectionState);\n}\n\n// src/components/controls/ChatToggle.tsx\n\nfunction ChatToggle(props) {\n  const { mergedProps } = useChatToggle({ props });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({}, mergedProps), props.children);\n}\n\n// src/components/controls/DisconnectButton.tsx\n\nfunction DisconnectButton(props) {\n  const { buttonProps } = useDisconnectButton(props);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({}, buttonProps), props.children);\n}\n\n// src/components/controls/FocusToggle.tsx\n\n\n// src/assets/icons/CameraDisabledIcon.tsx\n\nvar SvgCameraDisabledIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" }));\nvar CameraDisabledIcon_default = SvgCameraDisabledIcon;\n\n// src/assets/icons/CameraIcon.tsx\n\nvar SvgCameraIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" }));\nvar CameraIcon_default = SvgCameraIcon;\n\n// src/assets/icons/ChatCloseIcon.tsx\n\nvar SvgChatCloseIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, viewBox: \"0 0 24 24\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"#FFF\",\n    d: \"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z\"\n  }\n));\nvar ChatCloseIcon_default = SvgChatCloseIcon;\n\n// src/assets/icons/ChatIcon.tsx\n\nvar SvgChatIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 18, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar ChatIcon_default = SvgChatIcon;\n\n// src/assets/icons/Chevron.tsx\n\nvar SvgChevron = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar Chevron_default = SvgChevron;\n\n// src/assets/icons/FocusToggleIcon.tsx\n\nvar SvgFocusToggleIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9\" })));\nvar FocusToggleIcon_default = SvgFocusToggleIcon;\n\n// src/assets/icons/GearIcon.tsx\n\nvar SvgGearIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar GearIcon_default = SvgGearIcon;\n\n// src/assets/icons/LeaveIcon.tsx\n\nvar SvgLeaveIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar LeaveIcon_default = SvgLeaveIcon;\n\n// src/assets/icons/LockLockedIcon.tsx\n\nvar SvgLockLockedIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar LockLockedIcon_default = SvgLockLockedIcon;\n\n// src/assets/icons/MicDisabledIcon.tsx\n\nvar SvgMicDisabledIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z\" }));\nvar MicDisabledIcon_default = SvgMicDisabledIcon;\n\n// src/assets/icons/MicIcon.tsx\n\nvar SvgMicIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z\" }));\nvar MicIcon_default = SvgMicIcon;\n\n// src/assets/icons/QualityExcellentIcon.tsx\n\nvar SvgQualityExcellentIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }));\nvar QualityExcellentIcon_default = SvgQualityExcellentIcon;\n\n// src/assets/icons/QualityGoodIcon.tsx\n\nvar SvgQualityGoodIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" })));\nvar QualityGoodIcon_default = SvgQualityGoodIcon;\n\n// src/assets/icons/QualityPoorIcon.tsx\n\nvar SvgQualityPoorIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" })));\nvar QualityPoorIcon_default = SvgQualityPoorIcon;\n\n// src/assets/icons/QualityUnknownIcon.tsx\n\nvar SvgQualityUnknownIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" })));\nvar QualityUnknownIcon_default = SvgQualityUnknownIcon;\n\n// src/assets/icons/ScreenShareIcon.tsx\n\nvar SvgScreenShareIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar ScreenShareIcon_default = SvgScreenShareIcon;\n\n// src/assets/icons/ScreenShareStopIcon.tsx\n\nvar SvgScreenShareStopIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { fill: \"currentColor\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z\",\n    clipRule: \"evenodd\"\n  }\n)));\nvar ScreenShareStopIcon_default = SvgScreenShareStopIcon;\n\n// src/assets/icons/SpinnerIcon.tsx\n\nvar SvgSpinnerIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.7\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.6\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.5\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.4\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.9\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.3\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.8\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.2\n  }\n));\nvar SpinnerIcon_default = SvgSpinnerIcon;\n\n// src/assets/icons/UnfocusToggleIcon.tsx\n\nvar SvgUnfocusToggleIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25\" })));\nvar UnfocusToggleIcon_default = SvgUnfocusToggleIcon;\n\n// src/components/controls/FocusToggle.tsx\nfunction FocusToggle(_a) {\n  var _b = _a, { trackRef, trackSource, participant } = _b, props = __objRest(_b, [\"trackRef\", \"trackSource\", \"participant\"]);\n  const trackRefFromContext = useMaybeTrackRefContext();\n  const { mergedProps, inFocus } = useFocusToggle({\n    trackRef: trackRef != null ? trackRef : trackRefFromContext,\n    trackSource,\n    participant,\n    props\n  });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LayoutContext.Consumer, null, (layoutContext) => layoutContext !== void 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({}, mergedProps), props.children ? props.children : inFocus ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(UnfocusToggleIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusToggleIcon_default, null)));\n}\n\n// src/components/controls/MediaDeviceSelect.tsx\n\n\nfunction MediaDeviceSelect(_a) {\n  var _b = _a, {\n    kind,\n    initialSelection,\n    onActiveDeviceChange,\n    onDeviceListChange,\n    onDeviceSelectError,\n    exactMatch,\n    track,\n    requestPermissions,\n    onError\n  } = _b, props = __objRest(_b, [\n    \"kind\",\n    \"initialSelection\",\n    \"onActiveDeviceChange\",\n    \"onDeviceListChange\",\n    \"onDeviceSelectError\",\n    \"exactMatch\",\n    \"track\",\n    \"requestPermissions\",\n    \"onError\"\n  ]);\n  const room = useMaybeRoomContext();\n  const handleError = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (e) => {\n      if (room) {\n        room.emit(livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.MediaDevicesError, e);\n      }\n      onError == null ? void 0 : onError(e);\n    },\n    [room, onError]\n  );\n  const { devices, activeDeviceId, setActiveMediaDevice, className } = useMediaDeviceSelect({\n    kind,\n    room,\n    track,\n    requestPermissions,\n    onError: handleError\n  });\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (initialSelection !== void 0) {\n      setActiveMediaDevice(initialSelection);\n    }\n  }, [setActiveMediaDevice]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (typeof onDeviceListChange === \"function\") {\n      onDeviceListChange(devices);\n    }\n  }, [onDeviceListChange, devices]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (activeDeviceId && activeDeviceId !== \"\") {\n      onActiveDeviceChange == null ? void 0 : onActiveDeviceChange(activeDeviceId);\n    }\n  }, [activeDeviceId]);\n  const handleActiveDeviceChange = (deviceId) => __async(this, null, function* () {\n    try {\n      yield setActiveMediaDevice(deviceId, { exact: exactMatch });\n    } catch (e) {\n      if (e instanceof Error) {\n        onDeviceSelectError == null ? void 0 : onDeviceSelectError(e);\n      } else {\n        throw e;\n      }\n    }\n  });\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps2(props, { className }, { className: \"lk-list\" }),\n    [className, props]\n  );\n  function isActive(deviceId, activeDeviceId2, index) {\n    return deviceId === activeDeviceId2 || index === 0 && activeDeviceId2 === \"default\";\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", __spreadValues({}, mergedProps), devices.map((device, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"li\",\n    {\n      key: device.deviceId,\n      id: device.deviceId,\n      \"data-lk-active\": isActive(device.deviceId, activeDeviceId, index),\n      \"aria-selected\": isActive(device.deviceId, activeDeviceId, index),\n      role: \"option\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: () => handleActiveDeviceChange(device.deviceId) }, device.label)\n  )));\n}\n\n// src/components/controls/StartAudio.tsx\n\nfunction StartAudio(_a) {\n  var _b = _a, { label = \"Allow Audio\" } = _b, props = __objRest(_b, [\"label\"]);\n  const room = useRoomContext();\n  const { mergedProps } = useStartAudio({ room, props });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({}, mergedProps), label);\n}\n\n// src/components/controls/TrackToggle.tsx\n\n\n// src/assets/icons/util.tsx\n\n\nfunction getSourceIcon(source, enabled) {\n  switch (source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone:\n      return enabled ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(MicIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(MicDisabledIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera:\n      return enabled ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CameraIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CameraDisabledIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShare:\n      return enabled ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScreenShareStopIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScreenShareIcon_default, null);\n    default:\n      return void 0;\n  }\n}\nfunction getConnectionQualityIcon(quality) {\n  switch (quality) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionQuality.Excellent:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityExcellentIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionQuality.Good:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityGoodIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionQuality.Poor:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityPoorIcon_default, null);\n    default:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityUnknownIcon_default, null);\n  }\n}\n\n// src/components/controls/TrackToggle.tsx\nfunction TrackToggle(_a) {\n  var _b = _a, { showIcon } = _b, props = __objRest(_b, [\"showIcon\"]);\n  const { buttonProps, enabled } = useTrackToggle(props);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({}, buttonProps), (showIcon != null ? showIcon : true) && getSourceIcon(props.source, enabled), props.children);\n}\n\n// src/components/layout/FocusLayout.tsx\n\n\n// src/components/participant/ParticipantTile.tsx\n\n\n\n\n// src/components/participant/ConnectionQualityIndicator.tsx\n\nfunction ConnectionQualityIndicator(props) {\n  var _a;\n  const { className, quality } = useConnectionQualityIndicator(props);\n  const elementProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return __spreadProps(__spreadValues({}, mergeProps2(props, { className })), { \"data-lk-quality\": quality });\n  }, [quality, props, className]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, elementProps), (_a = props.children) != null ? _a : getConnectionQualityIcon(quality));\n}\n\n// src/components/participant/ParticipantName.tsx\n\n\nfunction ParticipantName(_a) {\n  var _b = _a, { participant } = _b, props = __objRest(_b, [\"participant\"]);\n  const p = useEnsureParticipant(participant);\n  const { className, infoObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.setupParticipantName)(p);\n  }, [p]);\n  const { identity, name } = useObservableState(infoObserver, {\n    name: p.name,\n    identity: p.identity,\n    metadata: p.metadata\n  });\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return mergeProps2(props, { className, \"data-lk-participant-name\": name });\n  }, [props, className, name]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({}, mergedProps), name !== \"\" ? name : identity, props.children);\n}\n\n// src/components/participant/TrackMutedIndicator.tsx\n\nfunction TrackMutedIndicator(_a) {\n  var _b = _a, {\n    source,\n    participant,\n    trackRef,\n    show = \"always\"\n  } = _b, props = __objRest(_b, [\n    \"source\",\n    \"participant\",\n    \"trackRef\",\n    \"show\"\n  ]);\n  var _a2, _b2;\n  const { className, isMuted } = useTrackMutedIndicator(trackRef != null ? trackRef : source, { participant });\n  const showIndicator = show === \"always\" || show === \"muted\" && isMuted || show === \"unmuted\" && !isMuted;\n  const htmlProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps2(props, {\n      className\n    }),\n    [className, props]\n  );\n  if (!showIndicator) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadProps(__spreadValues({}, htmlProps), { \"data-lk-muted\": isMuted }), (_b2 = props.children) != null ? _b2 : getSourceIcon((_a2 = trackRef == null ? void 0 : trackRef.source) != null ? _a2 : source, !isMuted));\n}\n\n// src/assets/images/ParticipantPlaceholder.tsx\n\nvar SvgParticipantPlaceholder = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"svg\",\n  __spreadValues({\n    width: 320,\n    height: 320,\n    viewBox: \"0 0 320 320\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props),\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  ),\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  )\n);\nvar ParticipantPlaceholder_default = SvgParticipantPlaceholder;\n\n// src/components/participant/VideoTrack.tsx\n\n\n\nfunction VideoTrack(_a) {\n  var _b = _a, {\n    onTrackClick,\n    onClick,\n    onSubscriptionStatusChanged,\n    trackRef,\n    name,\n    publication,\n    source,\n    participant: p,\n    manageSubscription\n  } = _b, props = __objRest(_b, [\n    \"onTrackClick\",\n    \"onClick\",\n    \"onSubscriptionStatusChanged\",\n    \"trackRef\",\n    \"name\",\n    \"publication\",\n    \"source\",\n    \"participant\",\n    \"manageSubscription\"\n  ]);\n  var _a2, _b2, _c, _d, _e, _f, _g, _h, _i, _j;\n  const maybeTrackRef = useMaybeTrackRefContext();\n  const _name = (_d = (_c = (_a2 = trackRef == null ? void 0 : trackRef.publication) == null ? void 0 : _a2.trackName) != null ? _c : (_b2 = maybeTrackRef == null ? void 0 : maybeTrackRef.publication) == null ? void 0 : _b2.trackName) != null ? _d : name;\n  const _source = (_f = (_e = trackRef == null ? void 0 : trackRef.source) != null ? _e : maybeTrackRef == null ? void 0 : maybeTrackRef.source) != null ? _f : source;\n  const _publication = (_h = (_g = trackRef == null ? void 0 : trackRef.publication) != null ? _g : maybeTrackRef == null ? void 0 : maybeTrackRef.publication) != null ? _h : publication;\n  const _participant = (_j = (_i = trackRef == null ? void 0 : trackRef.participant) != null ? _i : maybeTrackRef == null ? void 0 : maybeTrackRef.participant) != null ? _j : p;\n  if (_source === void 0) {\n    throw new Error(\"VideoTrack: You must provide a trackRef or source property.\");\n  }\n  const participant = useEnsureParticipant(_participant);\n  const mediaEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const intersectionEntry = usehooks_ts__WEBPACK_IMPORTED_MODULE_5__.useIntersectionObserver(mediaEl, {});\n  const debouncedIntersectionEntry = usehooks_ts__WEBPACK_IMPORTED_MODULE_5__.useDebounce(intersectionEntry, 3e3);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (manageSubscription && _publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_4__.RemoteTrackPublication && (debouncedIntersectionEntry == null ? void 0 : debouncedIntersectionEntry.isIntersecting) === false && (intersectionEntry == null ? void 0 : intersectionEntry.isIntersecting) === false) {\n      _publication.setSubscribed(false);\n    }\n  }, [debouncedIntersectionEntry, _publication, manageSubscription]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (manageSubscription && _publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_4__.RemoteTrackPublication && (intersectionEntry == null ? void 0 : intersectionEntry.isIntersecting) === true) {\n      _publication.setSubscribed(true);\n    }\n  }, [intersectionEntry, _publication, manageSubscription]);\n  const {\n    elementProps,\n    publication: pub,\n    isSubscribed\n  } = useMediaTrackBySourceOrName(\n    { participant, name: _name, source: _source, publication: _publication },\n    {\n      element: mediaEl,\n      props\n    }\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    onSubscriptionStatusChanged == null ? void 0 : onSubscriptionStatusChanged(!!isSubscribed);\n  }, [isSubscribed, onSubscriptionStatusChanged]);\n  const clickHandler = (evt) => {\n    onClick == null ? void 0 : onClick(evt);\n    onTrackClick == null ? void 0 : onTrackClick({ participant, track: pub });\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", __spreadProps(__spreadValues({ ref: mediaEl }, elementProps), { muted: true, onClick: clickHandler }));\n}\n\n// src/components/participant/AudioTrack.tsx\n\n\n\nfunction AudioTrack(_a) {\n  var _b = _a, {\n    trackRef,\n    onSubscriptionStatusChanged,\n    volume,\n    source,\n    name,\n    publication,\n    participant: p\n  } = _b, props = __objRest(_b, [\n    \"trackRef\",\n    \"onSubscriptionStatusChanged\",\n    \"volume\",\n    \"source\",\n    \"name\",\n    \"publication\",\n    \"participant\"\n  ]);\n  var _a2, _b2, _c, _d, _e, _f, _g, _h, _i, _j;\n  const maybeTrackRef = useMaybeTrackRefContext();\n  const _name = (_d = (_c = (_a2 = trackRef == null ? void 0 : trackRef.publication) == null ? void 0 : _a2.trackName) != null ? _c : (_b2 = maybeTrackRef == null ? void 0 : maybeTrackRef.publication) == null ? void 0 : _b2.trackName) != null ? _d : name;\n  const _source = (_f = (_e = trackRef == null ? void 0 : trackRef.source) != null ? _e : maybeTrackRef == null ? void 0 : maybeTrackRef.source) != null ? _f : source;\n  const _publication = (_h = (_g = trackRef == null ? void 0 : trackRef.publication) != null ? _g : maybeTrackRef == null ? void 0 : maybeTrackRef.publication) != null ? _h : publication;\n  const _participant = (_j = (_i = trackRef == null ? void 0 : trackRef.participant) != null ? _i : maybeTrackRef == null ? void 0 : maybeTrackRef.participant) != null ? _j : p;\n  if (_source === void 0) {\n    throw new Error(\"The AudioTrack component expects a trackRef or source property.\");\n  }\n  const mediaEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const participant = useEnsureParticipant(_participant);\n  const {\n    elementProps,\n    isSubscribed,\n    track,\n    publication: pub\n  } = useMediaTrackBySourceOrName(\n    { source: _source, name: _name, participant, publication: _publication },\n    {\n      element: mediaEl,\n      props\n    }\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    onSubscriptionStatusChanged == null ? void 0 : onSubscriptionStatusChanged(!!isSubscribed);\n  }, [isSubscribed, onSubscriptionStatusChanged]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (track === void 0 || volume === void 0) {\n      return;\n    }\n    if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_4__.RemoteAudioTrack) {\n      track.setVolume(volume);\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(\"Volume can only be set on remote audio tracks.\");\n    }\n  }, [volume, track]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (pub === void 0 || props.muted === void 0) {\n      return;\n    }\n    if (pub instanceof livekit_client__WEBPACK_IMPORTED_MODULE_4__.RemoteTrackPublication) {\n      pub.setEnabled(!props.muted);\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(\"Can only call setEnabled on remote track publications.\");\n    }\n  }, [props.muted, pub, track]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"audio\", __spreadValues({ ref: mediaEl }, elementProps));\n}\n\n// src/components/participant/ParticipantTile.tsx\nfunction ParticipantContextIfNeeded(props) {\n  const hasContext = !!useMaybeParticipantContext();\n  return props.participant && !hasContext ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantContext.Provider, { value: props.participant }, props.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, props.children);\n}\nfunction TrackRefContextIfNeeded(props) {\n  const hasContext = !!useMaybeTrackRefContext();\n  return props.trackRef && !hasContext ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackRefContext.Provider, { value: props.trackRef }, props.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, props.children);\n}\nfunction ParticipantTile(_a) {\n  var _b = _a, {\n    trackRef,\n    participant,\n    children,\n    source = livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera,\n    onParticipantClick,\n    publication,\n    disableSpeakingIndicator\n  } = _b, htmlProps = __objRest(_b, [\n    \"trackRef\",\n    \"participant\",\n    \"children\",\n    \"source\",\n    \"onParticipantClick\",\n    \"publication\",\n    \"disableSpeakingIndicator\"\n  ]);\n  var _a2, _b2;\n  const maybeTrackRef = useMaybeTrackRefContext();\n  const p = useEnsureParticipant(participant);\n  const trackReference = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    var _a3, _b3, _c, _d, _e, _f;\n    return {\n      participant: (_b3 = (_a3 = trackRef == null ? void 0 : trackRef.participant) != null ? _a3 : maybeTrackRef == null ? void 0 : maybeTrackRef.participant) != null ? _b3 : p,\n      source: (_d = (_c = trackRef == null ? void 0 : trackRef.source) != null ? _c : maybeTrackRef == null ? void 0 : maybeTrackRef.source) != null ? _d : source,\n      publication: (_f = (_e = trackRef == null ? void 0 : trackRef.publication) != null ? _e : maybeTrackRef == null ? void 0 : maybeTrackRef.publication) != null ? _f : publication\n    };\n  }, [maybeTrackRef, p, publication, source, trackRef]);\n  const { elementProps } = useParticipantTile({\n    participant: trackReference.participant,\n    htmlProps,\n    source: trackReference.source,\n    publication: trackReference.publication,\n    disableSpeakingIndicator,\n    onParticipantClick\n  });\n  const isEncrypted = useIsEncrypted(p);\n  const layoutContext = useMaybeLayoutContext();\n  const autoManageSubscription = (_a2 = useFeatureContext()) == null ? void 0 : _a2.autoSubscription;\n  const handleSubscribe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (subscribed) => {\n      if (trackReference.source && !subscribed && layoutContext && layoutContext.pin.dispatch && (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReferencePinned)(trackReference, layoutContext.pin.state)) {\n        layoutContext.pin.dispatch({ msg: \"clear_pin\" });\n      }\n    },\n    [trackReference, layoutContext]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ style: { position: \"relative\" } }, elementProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackRefContextIfNeeded, { trackRef: trackReference }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantContextIfNeeded, { participant: trackReference.participant }, children != null ? children : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReference)(trackReference) && (((_b2 = trackReference.publication) == null ? void 0 : _b2.kind) === \"video\" || trackReference.source === livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera || trackReference.source === livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShare) ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    VideoTrack,\n    {\n      trackRef: trackReference,\n      onSubscriptionStatusChanged: handleSubscribe,\n      manageSubscription: autoManageSubscription\n    }\n  ) : (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReference)(trackReference) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    AudioTrack,\n    {\n      trackRef: trackReference,\n      onSubscriptionStatusChanged: handleSubscribe\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-placeholder\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantPlaceholder_default, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, trackReference.source === livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, isEncrypted && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LockLockedIcon_default, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackMutedIndicator,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone,\n      show: \"muted\"\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantName, null)) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScreenShareIcon_default, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantName, null, \"'s screen\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConnectionQualityIndicator, { className: \"lk-participant-metadata-item\" }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusToggle, { trackRef: trackReference }))));\n}\n\n// src/components/layout/FocusLayout.tsx\nfunction FocusLayoutContainer(props) {\n  const elementProps = mergeProps2(props, { className: \"lk-focus-layout\" });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, elementProps), props.children);\n}\nfunction FocusLayout(_a) {\n  var _b = _a, { trackRef, track } = _b, htmlProps = __objRest(_b, [\"trackRef\", \"track\"]);\n  const trackReference = trackRef != null ? trackRef : track;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantTile, __spreadValues(__spreadValues({}, trackReference), htmlProps));\n}\n\n// src/components/layout/GridLayout.tsx\n\n\n// src/components/TrackLoop.tsx\n\n\nfunction TrackLoop(_a) {\n  var _b = _a, { tracks } = _b, props = __objRest(_b, [\"tracks\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, tracks.map((trackReference) => {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      TrackRefContext.Provider,\n      {\n        value: trackReference,\n        key: (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.getTrackReferenceId)(trackReference)\n      },\n      cloneSingleChild(props.children)\n    );\n  }));\n}\n\n// src/components/controls/PaginationControl.tsx\n\n\nfunction PaginationControl({\n  totalPageCount,\n  nextPage,\n  prevPage,\n  currentPage,\n  pagesContainer: connectedElement\n}) {\n  const [interactive, setInteractive] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let subscription;\n    if (connectedElement) {\n      subscription = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.createInteractingObservable)(connectedElement.current, 2e3).subscribe(\n        setInteractive\n      );\n    }\n    return () => {\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n    };\n  }, [connectedElement]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-pagination-control\", \"data-lk-user-interaction\": interactive }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: prevPage }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Chevron_default, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-pagination-count\" }, `${currentPage} of ${totalPageCount}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: nextPage }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Chevron_default, null)));\n}\n\n// src/components/controls/PaginationIndicator.tsx\n\nfunction PaginationIndicator({ totalPageCount, currentPage }) {\n  const bubbles = new Array(totalPageCount).fill(\"\").map((_, index) => {\n    if (index + 1 === currentPage) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { \"data-lk-active\": true, key: index });\n    } else {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { key: index });\n    }\n  });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-pagination-indicator\" }, bubbles);\n}\n\n// src/components/layout/GridLayout.tsx\nfunction GridLayout(_a) {\n  var _b = _a, { tracks } = _b, props = __objRest(_b, [\"tracks\"]);\n  const gridEl = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n  const elementProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps2(props, { className: \"lk-grid-layout\" }),\n    [props]\n  );\n  const { layout } = useGridLayout(gridEl, tracks.length);\n  const pagination = usePagination(layout.maxTiles, tracks);\n  useSwipe(gridEl, {\n    onLeftSwipe: pagination.nextPage,\n    onRightSwipe: pagination.prevPage\n  });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ ref: gridEl, \"data-lk-pagination\": pagination.totalPageCount > 1 }, elementProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackLoop, { tracks: pagination.tracks }, props.children), tracks.length > layout.maxTiles && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    PaginationIndicator,\n    {\n      totalPageCount: pagination.totalPageCount,\n      currentPage: pagination.currentPage\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PaginationControl, __spreadValues({ pagesContainer: gridEl }, pagination))));\n}\n\n// src/components/layout/CarouselLayout.tsx\n\n\nvar MIN_HEIGHT = 130;\nvar MIN_WIDTH = 140;\nvar MIN_VISIBLE_TILES = 1;\nvar ASPECT_RATIO = 16 / 10;\nvar ASPECT_RATIO_INVERT = (1 - ASPECT_RATIO) * -1;\nvar CarouselView = CarouselLayout;\nfunction CarouselLayout(_a) {\n  var _b = _a, { tracks, orientation } = _b, props = __objRest(_b, [\"tracks\", \"orientation\"]);\n  const asideEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const [prevTiles, setPrevTiles] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0);\n  const { width, height } = useSize(asideEl);\n  const carouselOrientation = orientation ? orientation : height >= width ? \"vertical\" : \"horizontal\";\n  const tileSpan = carouselOrientation === \"vertical\" ? Math.max(width * ASPECT_RATIO_INVERT, MIN_HEIGHT) : Math.max(height * ASPECT_RATIO, MIN_WIDTH);\n  const scrollBarWidth = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.getScrollBarWidth)();\n  const tilesThatFit = carouselOrientation === \"vertical\" ? Math.max((height - scrollBarWidth) / tileSpan, MIN_VISIBLE_TILES) : Math.max((width - scrollBarWidth) / tileSpan, MIN_VISIBLE_TILES);\n  let maxVisibleTiles = Math.round(tilesThatFit);\n  if (Math.abs(tilesThatFit - prevTiles) < 0.5) {\n    maxVisibleTiles = Math.round(prevTiles);\n  } else if (prevTiles !== tilesThatFit) {\n    setPrevTiles(tilesThatFit);\n  }\n  const sortedTiles = useVisualStableUpdate(tracks, maxVisibleTiles);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (asideEl.current) {\n      asideEl.current.dataset.lkOrientation = carouselOrientation;\n      asideEl.current.style.setProperty(\"--lk-max-visible-tiles\", maxVisibleTiles.toString());\n    }\n  }, [maxVisibleTiles, carouselOrientation]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"aside\", __spreadValues({ key: carouselOrientation, className: \"lk-carousel\", ref: asideEl }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackLoop, { tracks: sortedTiles }, props.children));\n}\n\n// src/components/layout/LayoutContextProvider.tsx\n\n\nfunction LayoutContextProvider({\n  value,\n  onPinChange,\n  onWidgetChange,\n  children\n}) {\n  const layoutContextValue = useEnsureCreateLayoutContext(value);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"PinState Updated\", { state: layoutContextValue.pin.state });\n    if (onPinChange && layoutContextValue.pin.state)\n      onPinChange(layoutContextValue.pin.state);\n  }, [layoutContextValue.pin.state, onPinChange]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"Widget Updated\", { widgetState: layoutContextValue.widget.state });\n    if (onWidgetChange && layoutContextValue.widget.state) {\n      onWidgetChange(layoutContextValue.widget.state);\n    }\n  }, [onWidgetChange, layoutContextValue.widget.state]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LayoutContext.Provider, { value: layoutContextValue }, children);\n}\n\n// src/components/LiveKitRoom.tsx\n\nfunction LiveKitRoom(props) {\n  const { room, htmlProps } = useLiveKitRoom(props);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, htmlProps), room && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(RoomContext.Provider, { value: room }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LKFeatureContext.Provider, { value: props.featureFlags }, props.children)));\n}\n\n// src/components/participant/AudioVisualizer.tsx\n\n\nfunction AudioVisualizer(_a) {\n  var _b = _a, { participant, trackRef } = _b, props = __objRest(_b, [\"participant\", \"trackRef\"]);\n  var _a2, _b2;\n  const svgWidth = 200;\n  const svgHeight = 90;\n  const barWidth = 6;\n  const barSpacing = 4;\n  const volMultiplier = 50;\n  const barCount = 7;\n  const p = (_a2 = useMaybeParticipantContext()) != null ? _a2 : participant;\n  let ref = (_b2 = useMaybeTrackRefContext()) != null ? _b2 : trackRef;\n  if (!ref) {\n    if (!p) {\n      throw Error(`Participant missing, provide it directly or within a context`);\n    }\n    ref = { participant: p, source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone };\n  }\n  const volumes = useMultibandTrackVolume(ref, { bands: 7, loPass: 300 });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"svg\",\n    __spreadProps(__spreadValues({\n      width: \"100%\",\n      height: \"100%\",\n      viewBox: `0 0 ${svgWidth} ${svgHeight}`\n    }, props), {\n      className: \"lk-audio-visualizer\"\n    }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", { x: \"0\", y: \"0\", width: \"100%\", height: \"100%\" }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"g\",\n      {\n        style: {\n          transform: `translate(${(svgWidth - barCount * (barWidth + barSpacing)) / 2}px, 0)`\n        }\n      },\n      volumes.map((vol, idx) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"rect\",\n        {\n          key: idx,\n          x: idx * (barWidth + barSpacing),\n          y: svgHeight / 2 - vol * volMultiplier / 2,\n          width: barWidth,\n          height: vol * volMultiplier\n        }\n      ))\n    )\n  );\n}\n\n// src/components/ParticipantLoop.tsx\n\nfunction ParticipantLoop(_a) {\n  var _b = _a, { participants } = _b, props = __objRest(_b, [\"participants\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, participants.map((participant) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantContext.Provider, { value: participant, key: participant.identity }, cloneSingleChild(props.children))));\n}\n\n// src/components/RoomAudioRenderer.tsx\n\n\n\nfunction RoomAudioRenderer({ volume, muted }) {\n  const tracks = useTracks(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShareAudio, livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Unknown],\n    {\n      updateOnlyOn: [],\n      onlySubscribed: false\n    }\n  ).filter((ref) => !(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isLocal)(ref.participant) && ref.publication.kind === livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Kind.Audio);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    for (const track of tracks) {\n      track.publication.setSubscribed(true);\n    }\n  }, [tracks]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"none\" } }, tracks.map((trackRef) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    AudioTrack,\n    {\n      key: (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.getTrackReferenceId)(trackRef),\n      trackRef,\n      volume,\n      muted\n    }\n  )));\n}\n\n// src/components/RoomName.tsx\n\nfunction RoomName(_a) {\n  var _b = _a, {\n    childrenPosition = \"before\",\n    children\n  } = _b, htmlAttributes = __objRest(_b, [\n    \"childrenPosition\",\n    \"children\"\n  ]);\n  const { name } = useRoomInfo();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({}, htmlAttributes), childrenPosition === \"before\" && children, name, childrenPosition === \"after\" && children);\n}\n\n// src/components/Toast.tsx\n\nfunction Toast(props) {\n  const htmlProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => mergeProps2(props, { className: \"lk-toast\" }), [props]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, htmlProps), props.children);\n}\n\n// src/components/participant/ParticipantAudioTile.tsx\n\n\nfunction ParticipantAudioTile(_a) {\n  var _b = _a, {\n    participant,\n    children,\n    source,\n    publication,\n    disableSpeakingIndicator,\n    onParticipantClick\n  } = _b, htmlProps = __objRest(_b, [\n    \"participant\",\n    \"children\",\n    \"source\",\n    \"publication\",\n    \"disableSpeakingIndicator\",\n    \"onParticipantClick\"\n  ]);\n  const p = useEnsureParticipant(participant);\n  const { elementProps } = useParticipantTile({\n    participant: p,\n    htmlProps,\n    disableSpeakingIndicator,\n    source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone,\n    publication,\n    onParticipantClick\n  });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ style: { position: \"relative\" } }, elementProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantContextIfNeeded, { participant: p }, children != null ? children : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AudioTrack, { source: source != null ? source : livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AudioVisualizer, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackMutedIndicator, { source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantName, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConnectionQualityIndicator, { className: \"lk-participant-metadata-item\" })))));\n}\n\n// src/components/ConnectionStateToast.tsx\n\n\nfunction ConnectionStateToast(props) {\n  const [notification, setNotification] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  const state = useConnectionState(props.room);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    switch (state) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionState.Reconnecting:\n        setNotification(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SpinnerIcon_default, { className: \"lk-spinner\" }), \" Reconnecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionState.Connecting:\n        setNotification(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SpinnerIcon_default, { className: \"lk-spinner\" }), \" Connecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_4__.ConnectionState.Disconnected:\n        setNotification(/* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, \"Disconnected\"));\n        break;\n      default:\n        setNotification(void 0);\n        break;\n    }\n  }, [state]);\n  return notification ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Toast, { className: \"lk-toast-connection-state\" }, notification) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\n}\n\n// src/components/ChatEntry.tsx\n\n\nfunction ChatEntry(_a) {\n  var _b = _a, {\n    entry,\n    hideName = false,\n    hideTimestamp = false,\n    messageFormatter\n  } = _b, props = __objRest(_b, [\n    \"entry\",\n    \"hideName\",\n    \"hideTimestamp\",\n    \"messageFormatter\"\n  ]);\n  var _a2, _b2, _c, _d;\n  const formattedMessage = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return messageFormatter ? messageFormatter(entry.message) : entry.message;\n  }, [entry.message, messageFormatter]);\n  const hasBeenEdited = !!entry.editTimestamp;\n  const time = new Date(entry.timestamp);\n  const locale = navigator ? navigator.language : \"en-US\";\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"li\",\n    __spreadValues({\n      className: \"lk-chat-entry\",\n      title: time.toLocaleTimeString(locale, { timeStyle: \"full\" }),\n      \"data-lk-message-origin\": ((_a2 = entry.from) == null ? void 0 : _a2.isLocal) ? \"local\" : \"remote\"\n    }, props),\n    (!hideTimestamp || !hideName || hasBeenEdited) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-meta-data\" }, !hideName && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", { className: \"lk-participant-name\" }, (_d = (_b2 = entry.from) == null ? void 0 : _b2.name) != null ? _d : (_c = entry.from) == null ? void 0 : _c.identity), (!hideTimestamp || hasBeenEdited) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-timestamp\" }, hasBeenEdited && \"edited \", time.toLocaleTimeString(locale, { timeStyle: \"short\" }))),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-message-body\" }, formattedMessage)\n  );\n}\nfunction formatChatMessageLinks(message) {\n  return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.tokenize)(message, (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.createDefaultGrammar)()).map((tok, i) => {\n    if (typeof tok === `string`) {\n      return tok;\n    } else {\n      const content = tok.content.toString();\n      const href = tok.type === `url` ? /^http(s?):\\/\\//.test(content) ? content : `https://${content}` : `mailto:${content}`;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", { className: \"lk-chat-link\", key: i, href, target: \"_blank\", rel: \"noreferrer\" }, content);\n    }\n  });\n}\n\n// src/prefabs/Chat.tsx\n\nfunction Chat(_a) {\n  var _b = _a, {\n    messageFormatter,\n    messageDecoder,\n    messageEncoder,\n    channelTopic\n  } = _b, props = __objRest(_b, [\n    \"messageFormatter\",\n    \"messageDecoder\",\n    \"messageEncoder\",\n    \"channelTopic\"\n  ]);\n  const inputRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const ulRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const chatOptions = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return { messageDecoder, messageEncoder, channelTopic };\n  }, [messageDecoder, messageEncoder, channelTopic]);\n  const { send, chatMessages, isSending } = useChat(chatOptions);\n  const layoutContext = useMaybeLayoutContext();\n  const lastReadMsgAt = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n  function handleSubmit(event) {\n    return __async(this, null, function* () {\n      event.preventDefault();\n      if (inputRef.current && inputRef.current.value.trim() !== \"\") {\n        if (send) {\n          yield send(inputRef.current.value);\n          inputRef.current.value = \"\";\n          inputRef.current.focus();\n        }\n      }\n    });\n  }\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2;\n    if (ulRef) {\n      (_a2 = ulRef.current) == null ? void 0 : _a2.scrollTo({ top: ulRef.current.scrollHeight });\n    }\n  }, [ulRef, chatMessages]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2, _b2, _c, _d, _e;\n    if (!layoutContext || chatMessages.length === 0) {\n      return;\n    }\n    if (((_a2 = layoutContext.widget.state) == null ? void 0 : _a2.showChat) && chatMessages.length > 0 && lastReadMsgAt.current !== ((_b2 = chatMessages[chatMessages.length - 1]) == null ? void 0 : _b2.timestamp)) {\n      lastReadMsgAt.current = (_c = chatMessages[chatMessages.length - 1]) == null ? void 0 : _c.timestamp;\n      return;\n    }\n    const unreadMessageCount = chatMessages.filter(\n      (msg) => !lastReadMsgAt.current || msg.timestamp > lastReadMsgAt.current\n    ).length;\n    const { widget } = layoutContext;\n    if (unreadMessageCount > 0 && ((_d = widget.state) == null ? void 0 : _d.unreadMessages) !== unreadMessageCount) {\n      (_e = widget.dispatch) == null ? void 0 : _e.call(widget, { msg: \"unread_msg\", count: unreadMessageCount });\n    }\n  }, [chatMessages, layoutContext == null ? void 0 : layoutContext.widget]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadProps(__spreadValues({}, props), { className: \"lk-chat\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-chat-header\" }, \"Messages\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatToggle, { className: \"lk-close-button\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatCloseIcon_default, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { className: \"lk-list lk-chat-messages\", ref: ulRef }, props.children ? chatMessages.map(\n    (msg, idx) => {\n      var _a2;\n      return cloneSingleChild(props.children, {\n        entry: msg,\n        key: (_a2 = msg.id) != null ? _a2 : idx,\n        messageFormatter\n      });\n    }\n  ) : chatMessages.map((msg, idx, allMsg) => {\n    var _a2;\n    const hideName = idx >= 1 && allMsg[idx - 1].from === msg.from;\n    const hideTimestamp = idx >= 1 && msg.timestamp - allMsg[idx - 1].timestamp < 6e4;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ChatEntry,\n      {\n        key: (_a2 = msg.id) != null ? _a2 : idx,\n        hideName,\n        hideTimestamp: hideName === false ? false : hideTimestamp,\n        entry: msg,\n        messageFormatter\n      }\n    );\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", { className: \"lk-chat-form\", onSubmit: handleSubmit }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      className: \"lk-form-control lk-chat-form-input\",\n      disabled: isSending,\n      ref: inputRef,\n      type: \"text\",\n      placeholder: \"Enter a message...\"\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { type: \"submit\", className: \"lk-button lk-chat-form-button\", disabled: isSending }, \"Send\")));\n}\n\n// src/prefabs/PreJoin.tsx\n\n\n\n// src/prefabs/MediaDeviceMenu.tsx\n\n\n\nfunction MediaDeviceMenu(_a) {\n  var _b = _a, {\n    kind,\n    initialSelection,\n    onActiveDeviceChange,\n    tracks,\n    requestPermissions = false\n  } = _b, props = __objRest(_b, [\n    \"kind\",\n    \"initialSelection\",\n    \"onActiveDeviceChange\",\n    \"tracks\",\n    \"requestPermissions\"\n  ]);\n  const [isOpen, setIsOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [devices, setDevices] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const [updateRequired, setUpdateRequired] = react__WEBPACK_IMPORTED_MODULE_0__.useState(true);\n  const handleActiveDeviceChange = (kind2, deviceId) => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"handle device change\");\n    setIsOpen(false);\n    onActiveDeviceChange == null ? void 0 : onActiveDeviceChange(kind2, deviceId);\n  };\n  const button = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const tooltip = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (button.current && tooltip.current && (devices || updateRequired)) {\n      (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.computeMenuPosition)(button.current, tooltip.current).then(({ x, y }) => {\n        if (tooltip.current) {\n          Object.assign(tooltip.current.style, { left: `${x}px`, top: `${y}px` });\n        }\n      });\n    }\n    setUpdateRequired(false);\n  }, [button, tooltip, devices, updateRequired]);\n  const handleClickOutside = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (event) => {\n      if (!tooltip.current) {\n        return;\n      }\n      if (event.target === button.current) {\n        return;\n      }\n      if (isOpen && (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.wasClickOutside)(tooltip.current, event)) {\n        setIsOpen(false);\n      }\n    },\n    [isOpen, tooltip, button]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside);\n    window.addEventListener(\"resize\", () => setUpdateRequired(true));\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside);\n      window.removeEventListener(\"resize\", () => setUpdateRequired(true));\n    };\n  }, [handleClickOutside, setUpdateRequired]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"button\",\n    __spreadProps(__spreadValues({\n      className: \"lk-button lk-button-menu\",\n      \"aria-pressed\": isOpen\n    }, props), {\n      onClick: () => setIsOpen(!isOpen),\n      ref: button\n    }),\n    props.children\n  ), !props.disabled && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"div\",\n    {\n      className: \"lk-device-menu\",\n      ref: tooltip,\n      style: { visibility: isOpen ? \"visible\" : \"hidden\" }\n    },\n    kind ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      MediaDeviceSelect,\n      {\n        initialSelection,\n        onActiveDeviceChange: (deviceId) => handleActiveDeviceChange(kind, deviceId),\n        onDeviceListChange: setDevices,\n        kind,\n        track: tracks == null ? void 0 : tracks[kind],\n        requestPermissions\n      }\n    ) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-device-menu-heading\" }, \"Audio inputs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      MediaDeviceSelect,\n      {\n        kind: \"audioinput\",\n        onActiveDeviceChange: (deviceId) => handleActiveDeviceChange(\"audioinput\", deviceId),\n        onDeviceListChange: setDevices,\n        track: tracks == null ? void 0 : tracks.audioinput,\n        requestPermissions\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-device-menu-heading\" }, \"Video inputs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      MediaDeviceSelect,\n      {\n        kind: \"videoinput\",\n        onActiveDeviceChange: (deviceId) => handleActiveDeviceChange(\"videoinput\", deviceId),\n        onDeviceListChange: setDevices,\n        track: tracks == null ? void 0 : tracks.videoinput,\n        requestPermissions\n      }\n    ))\n  ));\n}\n\n// src/prefabs/PreJoin.tsx\n\n\n// src/hooks/useWarnAboutMissingStyles.ts\n\nfunction useWarnAboutMissingStyles() {\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    warnAboutMissingStyles();\n  }, []);\n}\n\n// src/prefabs/PreJoin.tsx\nvar DEFAULT_USER_CHOICES = {\n  username: \"\",\n  videoEnabled: true,\n  audioEnabled: true,\n  videoDeviceId: \"default\",\n  audioDeviceId: \"default\",\n  e2ee: false,\n  sharedPassphrase: \"\"\n};\nfunction usePreviewTracks(options, onError) {\n  const [tracks, setTracks] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let trackPromise = void 0;\n    let needsCleanup = false;\n    if (options.audio || options.video) {\n      trackPromise = (0,livekit_client__WEBPACK_IMPORTED_MODULE_4__.createLocalTracks)(options);\n      trackPromise.then((tracks2) => {\n        if (needsCleanup) {\n          tracks2.forEach((tr) => tr.stop());\n        } else {\n          setTracks(tracks2);\n        }\n      }).catch(onError);\n    }\n    return () => {\n      needsCleanup = true;\n      trackPromise == null ? void 0 : trackPromise.then(\n        (tracks2) => tracks2.forEach((track) => {\n          track.stop();\n        })\n      );\n    };\n  }, [JSON.stringify(options)]);\n  return tracks;\n}\nfunction usePreviewDevice(enabled, deviceId, kind) {\n  const [deviceError, setDeviceError] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n  const [isCreatingTrack, setIsCreatingTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const devices = useMediaDevices({ kind });\n  const [selectedDevice, setSelectedDevice] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  );\n  const [localTrack, setLocalTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  const [localDeviceId, setLocalDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(deviceId);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setLocalDeviceId(deviceId);\n  }, [deviceId]);\n  const createTrack = (deviceId2, kind2) => __async(this, null, function* () {\n    try {\n      const track = kind2 === \"videoinput\" ? yield (0,livekit_client__WEBPACK_IMPORTED_MODULE_4__.createLocalVideoTrack)({\n        deviceId: deviceId2,\n        resolution: livekit_client__WEBPACK_IMPORTED_MODULE_4__.VideoPresets.h720.resolution\n      }) : yield (0,livekit_client__WEBPACK_IMPORTED_MODULE_4__.createLocalAudioTrack)({ deviceId: deviceId2 });\n      const newDeviceId = yield track.getDeviceId();\n      if (newDeviceId && deviceId2 !== newDeviceId) {\n        prevDeviceId.current = newDeviceId;\n        setLocalDeviceId(newDeviceId);\n      }\n      setLocalTrack(track);\n    } catch (e) {\n      if (e instanceof Error) {\n        setDeviceError(e);\n      }\n    }\n  });\n  const switchDevice = (track, id) => __async(this, null, function* () {\n    yield track.setDeviceId(id);\n    prevDeviceId.current = id;\n  });\n  const prevDeviceId = react__WEBPACK_IMPORTED_MODULE_0__.useRef(localDeviceId);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (enabled && !localTrack && !deviceError && !isCreatingTrack) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"creating track\", kind);\n      setIsCreatingTrack(true);\n      createTrack(localDeviceId, kind).finally(() => {\n        setIsCreatingTrack(false);\n      });\n    }\n  }, [enabled, localTrack, deviceError, isCreatingTrack]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!localTrack) {\n      return;\n    }\n    if (!enabled) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(`muting ${kind} track`);\n      localTrack.mute().then(() => _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(localTrack.mediaStreamTrack));\n    } else if ((selectedDevice == null ? void 0 : selectedDevice.deviceId) && prevDeviceId.current !== (selectedDevice == null ? void 0 : selectedDevice.deviceId)) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(`switching ${kind} device from`, prevDeviceId.current, selectedDevice.deviceId);\n      switchDevice(localTrack, selectedDevice.deviceId);\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(`unmuting local ${kind} track`);\n      localTrack.unmute();\n    }\n  }, [localTrack, selectedDevice, enabled, kind]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    return () => {\n      if (localTrack) {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(`stopping local ${kind} track`);\n        localTrack.stop();\n        localTrack.mute();\n      }\n    };\n  }, []);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setSelectedDevice(devices.find((dev) => dev.deviceId === localDeviceId));\n  }, [localDeviceId, devices]);\n  return {\n    selectedDevice,\n    localTrack,\n    deviceError\n  };\n}\nfunction PreJoin(_a) {\n  var _b = _a, {\n    defaults = {},\n    onValidate,\n    onSubmit,\n    onError,\n    debug,\n    joinLabel = \"Join Room\",\n    micLabel = \"Microphone\",\n    camLabel = \"Camera\",\n    userLabel = \"Username\",\n    showE2EEOptions = false,\n    persistUserChoices = true\n  } = _b, htmlProps = __objRest(_b, [\n    \"defaults\",\n    \"onValidate\",\n    \"onSubmit\",\n    \"onError\",\n    \"debug\",\n    \"joinLabel\",\n    \"micLabel\",\n    \"camLabel\",\n    \"userLabel\",\n    \"showE2EEOptions\",\n    \"persistUserChoices\"\n  ]);\n  var _a2, _b2;\n  const [userChoices, setUserChoices] = react__WEBPACK_IMPORTED_MODULE_0__.useState(DEFAULT_USER_CHOICES);\n  const partialDefaults = __spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues({}, defaults.audioDeviceId !== void 0 && { audioDeviceId: defaults.audioDeviceId }), defaults.videoDeviceId !== void 0 && { videoDeviceId: defaults.videoDeviceId }), defaults.audioEnabled !== void 0 && { audioEnabled: defaults.audioEnabled }), defaults.videoEnabled !== void 0 && { videoEnabled: defaults.videoEnabled }), defaults.username !== void 0 && { username: defaults.username });\n  const {\n    userChoices: initialUserChoices,\n    saveAudioInputDeviceId,\n    saveAudioInputEnabled,\n    saveVideoInputDeviceId,\n    saveVideoInputEnabled,\n    saveUsername\n  } = usePersistentUserChoices({\n    defaults: partialDefaults,\n    preventSave: !persistUserChoices,\n    preventLoad: !persistUserChoices\n  });\n  const [audioEnabled, setAudioEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialUserChoices.audioEnabled);\n  const [videoEnabled, setVideoEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialUserChoices.videoEnabled);\n  const [audioDeviceId, setAudioDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    initialUserChoices.audioDeviceId\n  );\n  const [videoDeviceId, setVideoDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    initialUserChoices.videoDeviceId\n  );\n  const [username, setUsername] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialUserChoices.username);\n  const [e2ee, setE2ee] = react__WEBPACK_IMPORTED_MODULE_0__.useState((_a2 = defaults.e2ee) != null ? _a2 : DEFAULT_USER_CHOICES.e2ee);\n  const [sharedPassphrase, setSharedPassphrase] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (_b2 = defaults.sharedPassphrase) != null ? _b2 : DEFAULT_USER_CHOICES.sharedPassphrase\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveAudioInputEnabled(audioEnabled);\n  }, [audioEnabled, saveAudioInputEnabled]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveVideoInputEnabled(videoEnabled);\n  }, [videoEnabled, saveVideoInputEnabled]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveAudioInputDeviceId(audioDeviceId);\n  }, [audioDeviceId, saveAudioInputDeviceId]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveVideoInputDeviceId(videoDeviceId);\n  }, [videoDeviceId, saveVideoInputDeviceId]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveUsername(username);\n  }, [username, saveUsername]);\n  const tracks = usePreviewTracks(\n    {\n      audio: audioEnabled ? { deviceId: initialUserChoices.audioDeviceId } : false,\n      video: videoEnabled ? { deviceId: initialUserChoices.videoDeviceId } : false\n    },\n    onError\n  );\n  const videoEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const videoTrack = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => tracks == null ? void 0 : tracks.filter((track) => track.kind === livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Kind.Video)[0],\n    [tracks]\n  );\n  const facingMode = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (videoTrack) {\n      const { facingMode: facingMode2 } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_4__.facingModeFromLocalTrack)(videoTrack);\n      return facingMode2;\n    } else {\n      return \"undefined\";\n    }\n  }, [videoTrack]);\n  const audioTrack = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => tracks == null ? void 0 : tracks.filter((track) => track.kind === livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Kind.Audio)[0],\n    [tracks]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (videoEl.current && videoTrack) {\n      videoTrack.unmute();\n      videoTrack.attach(videoEl.current);\n    }\n    return () => {\n      videoTrack == null ? void 0 : videoTrack.detach();\n    };\n  }, [videoTrack]);\n  const [isValid, setIsValid] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  const handleValidation = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (values) => {\n      if (typeof onValidate === \"function\") {\n        return onValidate(values);\n      } else {\n        return values.username !== \"\";\n      }\n    },\n    [onValidate]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const newUserChoices = {\n      username,\n      videoEnabled,\n      videoDeviceId,\n      audioEnabled,\n      audioDeviceId,\n      e2ee,\n      sharedPassphrase\n    };\n    setUserChoices(newUserChoices);\n    setIsValid(handleValidation(newUserChoices));\n  }, [\n    username,\n    videoEnabled,\n    handleValidation,\n    audioEnabled,\n    audioDeviceId,\n    videoDeviceId,\n    sharedPassphrase,\n    e2ee\n  ]);\n  function handleSubmit(event) {\n    event.preventDefault();\n    if (handleValidation(userChoices)) {\n      if (typeof onSubmit === \"function\") {\n        onSubmit(userChoices);\n      }\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.warn(\"Validation failed with: \", userChoices);\n    }\n  }\n  useWarnAboutMissingStyles();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ className: \"lk-prejoin\" }, htmlProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-video-container\" }, videoTrack && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", { ref: videoEl, width: \"1280\", height: \"720\", \"data-lk-facing-mode\": facingMode }), (!videoTrack || !videoEnabled) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-camera-off-note\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantPlaceholder_default, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-container\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group audio\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      initialState: audioEnabled,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone,\n      onChange: (enabled) => setAudioEnabled(enabled)\n    },\n    micLabel\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      initialSelection: audioDeviceId,\n      kind: \"audioinput\",\n      disabled: !audioTrack,\n      tracks: { audioinput: audioTrack },\n      onActiveDeviceChange: (_, id) => setAudioDeviceId(id)\n    }\n  ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group video\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      initialState: videoEnabled,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera,\n      onChange: (enabled) => setVideoEnabled(enabled)\n    },\n    camLabel\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      initialSelection: videoDeviceId,\n      kind: \"videoinput\",\n      disabled: !videoTrack,\n      tracks: { videoinput: videoTrack },\n      onActiveDeviceChange: (_, id) => setVideoDeviceId(id)\n    }\n  )))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", { className: \"lk-username-container\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      className: \"lk-form-control\",\n      id: \"username\",\n      name: \"username\",\n      type: \"text\",\n      defaultValue: username,\n      placeholder: userLabel,\n      onChange: (inputEl) => setUsername(inputEl.target.value),\n      autoComplete: \"off\"\n    }\n  ), showE2EEOptions && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"flex\", flexDirection: \"column\", gap: \"1rem\" } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"flex\", flexDirection: \"row\", gap: \"1rem\" } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      id: \"use-e2ee\",\n      type: \"checkbox\",\n      checked: e2ee,\n      onChange: (ev) => setE2ee(ev.target.checked)\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"label\", { htmlFor: \"use-e2ee\" }, \"Enable end-to-end encryption\")), e2ee && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"flex\", flexDirection: \"row\", gap: \"1rem\" } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"label\", { htmlFor: \"passphrase\" }, \"Passphrase\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      id: \"passphrase\",\n      type: \"password\",\n      value: sharedPassphrase,\n      onChange: (ev) => setSharedPassphrase(ev.target.value)\n    }\n  ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"button\",\n    {\n      className: \"lk-button lk-join-button\",\n      type: \"submit\",\n      onClick: handleSubmit,\n      disabled: !isValid\n    },\n    joinLabel\n  )), debug && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", null, \"User Choices:\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { className: \"lk-list\", style: { overflow: \"hidden\", maxWidth: \"15rem\" } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Username: \", `${userChoices.username}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Video Enabled: \", `${userChoices.videoEnabled}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Audio Enabled: \", `${userChoices.audioEnabled}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Video Device: \", `${userChoices.videoDeviceId}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Audio Device: \", `${userChoices.audioDeviceId}`))));\n}\n\n// src/prefabs/VideoConference.tsx\n\n\n\n\n// src/prefabs/ControlBar.tsx\n\n\n\n\n// src/components/controls/StartMediaButton.tsx\n\nfunction StartMediaButton(_a) {\n  var _b = _a, { label } = _b, props = __objRest(_b, [\"label\"]);\n  const room = useRoomContext();\n  const { mergedProps: audioProps, canPlayAudio } = useStartAudio({ room, props });\n  const { mergedProps, canPlayVideo } = useStartVideo({ room, props: audioProps });\n  const _a2 = mergedProps, { style } = _a2, restProps = __objRest(_a2, [\"style\"]);\n  style.display = canPlayAudio && canPlayVideo ? \"none\" : \"block\";\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ style }, restProps), label != null ? label : `Start ${!canPlayAudio ? \"Audio\" : \"Video\"}`);\n}\n\n// src/prefabs/ControlBar.tsx\nfunction ControlBar(_a) {\n  var _b = _a, {\n    variation,\n    controls,\n    saveUserChoices: saveUserChoices2 = true\n  } = _b, props = __objRest(_b, [\n    \"variation\",\n    \"controls\",\n    \"saveUserChoices\"\n  ]);\n  var _a2, _b2, _c, _d, _e;\n  const [isChatOpen, setIsChatOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const layoutContext = useMaybeLayoutContext();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a3, _b3;\n    if (((_a3 = layoutContext == null ? void 0 : layoutContext.widget.state) == null ? void 0 : _a3.showChat) !== void 0) {\n      setIsChatOpen((_b3 = layoutContext == null ? void 0 : layoutContext.widget.state) == null ? void 0 : _b3.showChat);\n    }\n  }, [(_a2 = layoutContext == null ? void 0 : layoutContext.widget.state) == null ? void 0 : _a2.showChat]);\n  const isTooLittleSpace = useMediaQuery(`(max-width: ${isChatOpen ? 1e3 : 760}px)`);\n  const defaultVariation = isTooLittleSpace ? \"minimal\" : \"verbose\";\n  variation != null ? variation : variation = defaultVariation;\n  const visibleControls = __spreadValues({ leave: true }, controls);\n  const localPermissions = useLocalParticipantPermissions();\n  if (!localPermissions) {\n    visibleControls.camera = false;\n    visibleControls.chat = false;\n    visibleControls.microphone = false;\n    visibleControls.screenShare = false;\n  } else {\n    (_b2 = visibleControls.camera) != null ? _b2 : visibleControls.camera = localPermissions.canPublish;\n    (_c = visibleControls.microphone) != null ? _c : visibleControls.microphone = localPermissions.canPublish;\n    (_d = visibleControls.screenShare) != null ? _d : visibleControls.screenShare = localPermissions.canPublish;\n    (_e = visibleControls.chat) != null ? _e : visibleControls.chat = localPermissions.canPublishData && (controls == null ? void 0 : controls.chat);\n  }\n  const showIcon = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => variation === \"minimal\" || variation === \"verbose\",\n    [variation]\n  );\n  const showText = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => variation === \"textOnly\" || variation === \"verbose\",\n    [variation]\n  );\n  const browserSupportsScreenSharing = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.supportsScreenSharing)();\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const onScreenShareChange = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (enabled) => {\n      setIsScreenShareEnabled(enabled);\n    },\n    [setIsScreenShareEnabled]\n  );\n  const htmlProps = mergeProps2({ className: \"lk-control-bar\" }, props);\n  const {\n    saveAudioInputEnabled,\n    saveVideoInputEnabled,\n    saveAudioInputDeviceId,\n    saveVideoInputDeviceId\n  } = usePersistentUserChoices({ preventSave: !saveUserChoices2 });\n  const microphoneOnChange = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (enabled, isUserInitiated) => isUserInitiated ? saveAudioInputEnabled(enabled) : null,\n    [saveAudioInputEnabled]\n  );\n  const cameraOnChange = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (enabled, isUserInitiated) => isUserInitiated ? saveVideoInputEnabled(enabled) : null,\n    [saveVideoInputEnabled]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, htmlProps), visibleControls.microphone && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone,\n      showIcon,\n      onChange: microphoneOnChange\n    },\n    showText && \"Microphone\"\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      kind: \"audioinput\",\n      onActiveDeviceChange: (_kind, deviceId) => saveAudioInputDeviceId(deviceId != null ? deviceId : \"\")\n    }\n  ))), visibleControls.camera && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackToggle, { source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera, showIcon, onChange: cameraOnChange }, showText && \"Camera\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      kind: \"videoinput\",\n      onActiveDeviceChange: (_kind, deviceId) => saveVideoInputDeviceId(deviceId != null ? deviceId : \"\")\n    }\n  ))), visibleControls.screenShare && browserSupportsScreenSharing && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShare,\n      captureOptions: { audio: true, selfBrowserSurface: \"include\" },\n      showIcon,\n      onChange: onScreenShareChange\n    },\n    showText && (isScreenShareEnabled ? \"Stop screen share\" : \"Share screen\")\n  ), visibleControls.chat && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatToggle, null, showIcon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatIcon_default, null), showText && \"Chat\"), visibleControls.leave && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(DisconnectButton, null, showIcon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LeaveIcon_default, null), showText && \"Leave\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(StartMediaButton, null));\n}\n\n// src/prefabs/VideoConference.tsx\nfunction VideoConference(_a) {\n  var _b = _a, {\n    chatMessageFormatter,\n    chatMessageDecoder,\n    chatMessageEncoder\n  } = _b, props = __objRest(_b, [\n    \"chatMessageFormatter\",\n    \"chatMessageDecoder\",\n    \"chatMessageEncoder\"\n  ]);\n  var _a2, _b2;\n  const [widgetState, setWidgetState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    showChat: false,\n    unreadMessages: 0\n  });\n  const lastAutoFocusedScreenShareTrack = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const tracks = useTracks(\n    [\n      { source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Camera, withPlaceholder: true },\n      { source: livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShare, withPlaceholder: false }\n    ],\n    { updateOnlyOn: [livekit_client__WEBPACK_IMPORTED_MODULE_4__.RoomEvent.ActiveSpeakersChanged], onlySubscribed: false }\n  );\n  const widgetUpdate = (state) => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"updating widget state\", state);\n    setWidgetState(state);\n  };\n  const layoutContext = useCreateLayoutContext();\n  const screenShareTracks = tracks.filter(_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isTrackReference).filter((track) => track.publication.source === livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.ScreenShare);\n  const focusTrack = (_a2 = usePinnedTracks(layoutContext)) == null ? void 0 : _a2[0];\n  const carouselTracks = tracks.filter((track) => !(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isEqualTrackRef)(track, focusTrack));\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a3, _b3, _c, _d;\n    if (screenShareTracks.some((track) => track.publication.isSubscribed) && lastAutoFocusedScreenShareTrack.current === null) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"Auto set screen share focus:\", { newScreenShareTrack: screenShareTracks[0] });\n      (_b3 = (_a3 = layoutContext.pin).dispatch) == null ? void 0 : _b3.call(_a3, { msg: \"set_pin\", trackReference: screenShareTracks[0] });\n      lastAutoFocusedScreenShareTrack.current = screenShareTracks[0];\n    } else if (lastAutoFocusedScreenShareTrack.current && !screenShareTracks.some(\n      (track) => {\n        var _a4, _b4;\n        return track.publication.trackSid === ((_b4 = (_a4 = lastAutoFocusedScreenShareTrack.current) == null ? void 0 : _a4.publication) == null ? void 0 : _b4.trackSid);\n      }\n    )) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.log.debug(\"Auto clearing screen share focus.\");\n      (_d = (_c = layoutContext.pin).dispatch) == null ? void 0 : _d.call(_c, { msg: \"clear_pin\" });\n      lastAutoFocusedScreenShareTrack.current = null;\n    }\n  }, [\n    screenShareTracks.map((ref) => `${ref.publication.trackSid}_${ref.publication.isSubscribed}`).join(),\n    (_b2 = focusTrack == null ? void 0 : focusTrack.publication) == null ? void 0 : _b2.trackSid\n  ]);\n  useWarnAboutMissingStyles();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ className: \"lk-video-conference\" }, props), (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_2__.isWeb)() && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    LayoutContextProvider,\n    {\n      value: layoutContext,\n      onWidgetChange: widgetUpdate\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-video-conference-inner\" }, !focusTrack ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-grid-layout-wrapper\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GridLayout, { tracks }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantTile, null))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-focus-layout-wrapper\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusLayoutContainer, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CarouselLayout, { tracks: carouselTracks }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantTile, null)), focusTrack && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusLayout, { trackRef: focusTrack }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ControlBar, { controls: { chat: true } })),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      Chat,\n      {\n        style: { display: widgetState.showChat ? \"grid\" : \"none\" },\n        messageFormatter: chatMessageFormatter,\n        messageEncoder: chatMessageEncoder,\n        messageDecoder: chatMessageDecoder\n      }\n    )\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(RoomAudioRenderer, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConnectionStateToast, null));\n}\n\n// src/prefabs/AudioConference.tsx\n\n\nfunction AudioConference(_a) {\n  var props = __objRest(_a, []);\n  const [widgetState, setWidgetState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    showChat: false,\n    unreadMessages: 0\n  });\n  const audioTracks = useTracks([livekit_client__WEBPACK_IMPORTED_MODULE_4__.Track.Source.Microphone]);\n  useWarnAboutMissingStyles();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LayoutContextProvider, { onWidgetChange: setWidgetState }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ className: \"lk-audio-conference\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-audio-conference-stage\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackLoop, { tracks: audioTracks }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantAudioTile, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    ControlBar,\n    {\n      controls: { microphone: true, screenShare: false, camera: false, chat: true }\n    }\n  ), widgetState.showChat && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Chat, null)));\n}\n\n// src/index.ts\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNpQzs7QUFFakM7QUFDZ0M7O0FBRWhDO0FBQytCO0FBQ1k7QUFDM0M7QUFDQTtBQUNBLHlCQUF5Qiw4REFBUztBQUNsQyxFQUFFLGtEQUFxQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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ZW50cy1yZWFjdC9kaXN0L2luZGV4Lm1qcz9hNTA1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO1xudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fb2JqUmVzdCA9IChzb3VyY2UsIGV4Y2x1ZGUpID0+IHtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoc291cmNlLCBwcm9wKSAmJiBleGNsdWRlLmluZGV4T2YocHJvcCkgPCAwKVxuICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICBpZiAoc291cmNlICE9IG51bGwgJiYgX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoc291cmNlKSkge1xuICAgICAgaWYgKGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDAgJiYgX19wcm9wSXNFbnVtLmNhbGwoc291cmNlLCBwcm9wKSlcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgIH1cbiAgcmV0dXJuIHRhcmdldDtcbn07XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9DbGVhclBpbkJ1dHRvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NDkgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9ob29rcy91c2VBdWRpb1BsYXliYWNrLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDkgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9ob29rcy9pbnRlcm5hbC91c2VSZXNpemVPYnNlcnZlci50c1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdXNlTGF0ZXN0IGZyb20gXCJAcmVhY3QtaG9vay9sYXRlc3RcIjtcbmZ1bmN0aW9uIHVzZVJlc2l6ZU9ic2VydmVyKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBnZXRSZXNpemVPYnNlcnZlcigpO1xuICBjb25zdCBzdG9yZWRDYWxsYmFjayA9IHVzZUxhdGVzdChjYWxsYmFjayk7XG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGRpZFVuc3Vic2NyaWJlID0gZmFsc2U7XG4gICAgY29uc3QgdGFyZ2V0RWwgPSB0YXJnZXQuY3VycmVudDtcbiAgICBpZiAoIXRhcmdldEVsKVxuICAgICAgcmV0dXJuO1xuICAgIGZ1bmN0aW9uIGNiKGVudHJ5LCBvYnNlcnZlcikge1xuICAgICAgaWYgKGRpZFVuc3Vic2NyaWJlKVxuICAgICAgICByZXR1cm47XG4gICAgICBzdG9yZWRDYWxsYmFjay5jdXJyZW50KGVudHJ5LCBvYnNlcnZlcik7XG4gICAgfVxuICAgIHJlc2l6ZU9ic2VydmVyID09IG51bGwgPyB2b2lkIDAgOiByZXNpemVPYnNlcnZlci5zdWJzY3JpYmUodGFyZ2V0RWwsIGNiKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGlkVW5zdWJzY3JpYmUgPSB0cnVlO1xuICAgICAgcmVzaXplT2JzZXJ2ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc2l6ZU9ic2VydmVyLnVuc3Vic2NyaWJlKHRhcmdldEVsLCBjYik7XG4gICAgfTtcbiAgfSwgW3RhcmdldC5jdXJyZW50LCByZXNpemVPYnNlcnZlciwgc3RvcmVkQ2FsbGJhY2tdKTtcbiAgcmV0dXJuIHJlc2l6ZU9ic2VydmVyID09IG51bGwgPyB2b2lkIDAgOiByZXNpemVPYnNlcnZlci5vYnNlcnZlcjtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlc2l6ZU9ic2VydmVyKCkge1xuICBsZXQgdGlja2luZyA9IGZhbHNlO1xuICBsZXQgYWxsRW50cmllcyA9IFtdO1xuICBjb25zdCBjYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzKSA9PiB7XG4gICAgYWxsRW50cmllcyA9IGFsbEVudHJpZXMuY29uY2F0KGVudHJpZXMpO1xuICAgIGlmICghdGlja2luZykge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyaWdnZXJlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsRW50cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh0cmlnZ2VyZWQuaGFzKGFsbEVudHJpZXNbaV0udGFyZ2V0KSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIHRyaWdnZXJlZC5hZGQoYWxsRW50cmllc1tpXS50YXJnZXQpO1xuICAgICAgICAgIGNvbnN0IGNicyA9IGNhbGxiYWNrcy5nZXQoYWxsRW50cmllc1tpXS50YXJnZXQpO1xuICAgICAgICAgIGNicyA9PSBudWxsID8gdm9pZCAwIDogY2JzLmZvckVhY2goKGNiKSA9PiBjYihhbGxFbnRyaWVzW2ldLCBvYnMpKTtcbiAgICAgICAgfVxuICAgICAgICBhbGxFbnRyaWVzID0gW107XG4gICAgICAgIHRpY2tpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aWNraW5nID0gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgb2JzZXJ2ZXIsXG4gICAgc3Vic2NyaWJlKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfYTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KTtcbiAgICAgIGNvbnN0IGNicyA9IChfYSA9IGNhbGxiYWNrcy5nZXQodGFyZ2V0KSkgIT0gbnVsbCA/IF9hIDogW107XG4gICAgICBjYnMucHVzaChjYWxsYmFjayk7XG4gICAgICBjYWxsYmFja3Muc2V0KHRhcmdldCwgY2JzKTtcbiAgICB9LFxuICAgIHVuc3Vic2NyaWJlKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IGNicyA9IChfYSA9IGNhbGxiYWNrcy5nZXQodGFyZ2V0KSkgIT0gbnVsbCA/IF9hIDogW107XG4gICAgICBpZiAoY2JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBvYnNlcnZlci51bm9ic2VydmUodGFyZ2V0KTtcbiAgICAgICAgY2FsbGJhY2tzLmRlbGV0ZSh0YXJnZXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjYkluZGV4ID0gY2JzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgaWYgKGNiSW5kZXggIT09IC0xKVxuICAgICAgICBjYnMuc3BsaWNlKGNiSW5kZXgsIDEpO1xuICAgICAgY2FsbGJhY2tzLnNldCh0YXJnZXQsIGNicyk7XG4gICAgfVxuICB9O1xufVxudmFyIF9yZXNpemVPYnNlcnZlcjtcbnZhciBnZXRSZXNpemVPYnNlcnZlciA9ICgpID0+ICFfcmVzaXplT2JzZXJ2ZXIgPyBfcmVzaXplT2JzZXJ2ZXIgPSBjcmVhdGVSZXNpemVPYnNlcnZlcigpIDogX3Jlc2l6ZU9ic2VydmVyO1xudmFyIHVzZVNpemUgPSAodGFyZ2V0KSA9PiB7XG4gIGNvbnN0IFtzaXplLCBzZXRTaXplXSA9IFJlYWN0LnVzZVN0YXRlKHsgd2lkdGg6IDAsIGhlaWdodDogMCB9KTtcbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAodGFyZ2V0LmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGFyZ2V0LmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBzZXRTaXplKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICB9XG4gIH0sIFt0YXJnZXQuY3VycmVudF0pO1xuICBjb25zdCByZXNpemVDYWxsYmFjayA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChlbnRyeSkgPT4gc2V0U2l6ZShlbnRyeS5jb250ZW50UmVjdCksXG4gICAgW11cbiAgKTtcbiAgdXNlUmVzaXplT2JzZXJ2ZXIodGFyZ2V0LCByZXNpemVDYWxsYmFjayk7XG4gIHJldHVybiBzaXplO1xufTtcblxuLy8gc3JjL2hvb2tzL2ludGVybmFsL3VzZU9ic2VydmFibGVTdGF0ZS50c1xuaW1wb3J0ICogYXMgUmVhY3QyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlT2JzZXJ2YWJsZVN0YXRlKG9ic2VydmFibGUsIHN0YXJ0V2l0aCkge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0Mi51c2VTdGF0ZShzdGFydFdpdGgpO1xuICBSZWFjdDIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhb2JzZXJ2YWJsZSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZShzZXRTdGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9LCBbb2JzZXJ2YWJsZV0pO1xuICByZXR1cm4gc3RhdGU7XG59XG5cbi8vIHNyYy9ob29rcy9pbnRlcm5hbC91c2VNZWRpYVF1ZXJ5LnRzXG5pbXBvcnQgKiBhcyBSZWFjdDMgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VNZWRpYVF1ZXJ5KHF1ZXJ5KSB7XG4gIGNvbnN0IGdldE1hdGNoZXMgPSAocXVlcnkyKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYShxdWVyeTIpLm1hdGNoZXM7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgY29uc3QgW21hdGNoZXMsIHNldE1hdGNoZXNdID0gUmVhY3QzLnVzZVN0YXRlKGdldE1hdGNoZXMocXVlcnkpKTtcbiAgZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKCkge1xuICAgIHNldE1hdGNoZXMoZ2V0TWF0Y2hlcyhxdWVyeSkpO1xuICB9XG4gIFJlYWN0My51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG1hdGNoTWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYShxdWVyeSk7XG4gICAgaGFuZGxlQ2hhbmdlKCk7XG4gICAgaWYgKG1hdGNoTWVkaWEuYWRkTGlzdGVuZXIpIHtcbiAgICAgIG1hdGNoTWVkaWEuYWRkTGlzdGVuZXIoaGFuZGxlQ2hhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWF0Y2hNZWRpYS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZUNoYW5nZSk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAobWF0Y2hNZWRpYS5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICBtYXRjaE1lZGlhLnJlbW92ZUxpc3RlbmVyKGhhbmRsZUNoYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRjaE1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlQ2hhbmdlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbcXVlcnldKTtcbiAgcmV0dXJuIG1hdGNoZXM7XG59XG5cbi8vIHNyYy9ob29rcy91c2VBdWRpb1BsYXliYWNrLnRzXG5pbXBvcnQgeyByb29tQXVkaW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuXG4vLyBzcmMvY29udGV4dC9sYXlvdXQtY29udGV4dC50c1xuaW1wb3J0IHsgUElOX0RFRkFVTFRfU1RBVEUsIFdJREdFVF9ERUZBVUxUX1NUQVRFIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q0IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvY29udGV4dC9jaGF0LWNvbnRleHQudHNcbmZ1bmN0aW9uIGNoYXRSZWR1Y2VyKHN0YXRlLCBhY3Rpb24pIHtcbiAgaWYgKGFjdGlvbi5tc2cgPT09IFwic2hvd19jaGF0XCIpIHtcbiAgICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpLCB7IHNob3dDaGF0OiB0cnVlLCB1bnJlYWRNZXNzYWdlczogMCB9KTtcbiAgfSBlbHNlIGlmIChhY3Rpb24ubXNnID09PSBcImhpZGVfY2hhdFwiKSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwgeyBzaG93Q2hhdDogZmFsc2UgfSk7XG4gIH0gZWxzZSBpZiAoYWN0aW9uLm1zZyA9PT0gXCJ0b2dnbGVfY2hhdFwiKSB7XG4gICAgY29uc3QgbmV3U3RhdGUgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSksIHsgc2hvd0NoYXQ6ICFzdGF0ZS5zaG93Q2hhdCB9KTtcbiAgICBpZiAobmV3U3RhdGUuc2hvd0NoYXQgPT09IHRydWUpIHtcbiAgICAgIG5ld1N0YXRlLnVucmVhZE1lc3NhZ2VzID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1N0YXRlO1xuICB9IGVsc2UgaWYgKGFjdGlvbi5tc2cgPT09IFwidW5yZWFkX21zZ1wiKSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwgeyB1bnJlYWRNZXNzYWdlczogYWN0aW9uLmNvdW50IH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpO1xuICB9XG59XG5cbi8vIHNyYy9jb250ZXh0L3Bpbi1jb250ZXh0LnRzXG5mdW5jdGlvbiBwaW5SZWR1Y2VyKHN0YXRlLCBhY3Rpb24pIHtcbiAgaWYgKGFjdGlvbi5tc2cgPT09IFwic2V0X3BpblwiKSB7XG4gICAgcmV0dXJuIFthY3Rpb24udHJhY2tSZWZlcmVuY2VdO1xuICB9IGVsc2UgaWYgKGFjdGlvbi5tc2cgPT09IFwiY2xlYXJfcGluXCIpIHtcbiAgICByZXR1cm4gW107XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSk7XG4gIH1cbn1cblxuLy8gc3JjL2NvbnRleHQvbGF5b3V0LWNvbnRleHQudHNcbnZhciBMYXlvdXRDb250ZXh0ID0gUmVhY3Q0LmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIHVzZUxheW91dENvbnRleHQoKSB7XG4gIGNvbnN0IGxheW91dENvbnRleHQgPSBSZWFjdDQudXNlQ29udGV4dChMYXlvdXRDb250ZXh0KTtcbiAgaWYgKCFsYXlvdXRDb250ZXh0KSB7XG4gICAgdGhyb3cgRXJyb3IoXCJUcmllZCB0byBhY2Nlc3MgTGF5b3V0Q29udGV4dCBjb250ZXh0IG91dHNpZGUgYSBMYXlvdXRDb250ZXh0UHJvdmlkZXIgcHJvdmlkZXIuXCIpO1xuICB9XG4gIHJldHVybiBsYXlvdXRDb250ZXh0O1xufVxuZnVuY3Rpb24gdXNlRW5zdXJlTGF5b3V0Q29udGV4dChsYXlvdXRDb250ZXh0KSB7XG4gIGNvbnN0IGxheW91dCA9IHVzZU1heWJlTGF5b3V0Q29udGV4dCgpO1xuICBsYXlvdXRDb250ZXh0ICE9IG51bGwgPyBsYXlvdXRDb250ZXh0IDogbGF5b3V0Q29udGV4dCA9IGxheW91dDtcbiAgaWYgKCFsYXlvdXRDb250ZXh0KSB7XG4gICAgdGhyb3cgRXJyb3IoXCJUcmllZCB0byBhY2Nlc3MgTGF5b3V0Q29udGV4dCBjb250ZXh0IG91dHNpZGUgYSBMYXlvdXRDb250ZXh0UHJvdmlkZXIgcHJvdmlkZXIuXCIpO1xuICB9XG4gIHJldHVybiBsYXlvdXRDb250ZXh0O1xufVxuZnVuY3Rpb24gdXNlQ3JlYXRlTGF5b3V0Q29udGV4dCgpIHtcbiAgY29uc3QgW3BpblN0YXRlLCBwaW5EaXNwYXRjaF0gPSBSZWFjdDQudXNlUmVkdWNlcihwaW5SZWR1Y2VyLCBQSU5fREVGQVVMVF9TVEFURSk7XG4gIGNvbnN0IFt3aWRnZXRTdGF0ZSwgd2lkZ2V0RGlzcGF0Y2hdID0gUmVhY3Q0LnVzZVJlZHVjZXIoY2hhdFJlZHVjZXIsIFdJREdFVF9ERUZBVUxUX1NUQVRFKTtcbiAgcmV0dXJuIHtcbiAgICBwaW46IHsgZGlzcGF0Y2g6IHBpbkRpc3BhdGNoLCBzdGF0ZTogcGluU3RhdGUgfSxcbiAgICB3aWRnZXQ6IHsgZGlzcGF0Y2g6IHdpZGdldERpc3BhdGNoLCBzdGF0ZTogd2lkZ2V0U3RhdGUgfVxuICB9O1xufVxuZnVuY3Rpb24gdXNlRW5zdXJlQ3JlYXRlTGF5b3V0Q29udGV4dChsYXlvdXRDb250ZXh0KSB7XG4gIGNvbnN0IFtwaW5TdGF0ZSwgcGluRGlzcGF0Y2hdID0gUmVhY3Q0LnVzZVJlZHVjZXIocGluUmVkdWNlciwgUElOX0RFRkFVTFRfU1RBVEUpO1xuICBjb25zdCBbd2lkZ2V0U3RhdGUsIHdpZGdldERpc3BhdGNoXSA9IFJlYWN0NC51c2VSZWR1Y2VyKGNoYXRSZWR1Y2VyLCBXSURHRVRfREVGQVVMVF9TVEFURSk7XG4gIHJldHVybiBsYXlvdXRDb250ZXh0ICE9IG51bGwgPyBsYXlvdXRDb250ZXh0IDoge1xuICAgIHBpbjogeyBkaXNwYXRjaDogcGluRGlzcGF0Y2gsIHN0YXRlOiBwaW5TdGF0ZSB9LFxuICAgIHdpZGdldDogeyBkaXNwYXRjaDogd2lkZ2V0RGlzcGF0Y2gsIHN0YXRlOiB3aWRnZXRTdGF0ZSB9XG4gIH07XG59XG5mdW5jdGlvbiB1c2VNYXliZUxheW91dENvbnRleHQoKSB7XG4gIHJldHVybiBSZWFjdDQudXNlQ29udGV4dChMYXlvdXRDb250ZXh0KTtcbn1cblxuLy8gc3JjL2NvbnRleHQvcGFydGljaXBhbnQtY29udGV4dC50c1xuaW1wb3J0ICogYXMgUmVhY3Q2IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvY29udGV4dC90cmFjay1yZWZlcmVuY2UtY29udGV4dC50c1xuaW1wb3J0ICogYXMgUmVhY3Q1IGZyb20gXCJyZWFjdFwiO1xudmFyIFRyYWNrUmVmQ29udGV4dCA9IFJlYWN0NS5jcmVhdGVDb250ZXh0KFxuICB2b2lkIDBcbik7XG52YXIgVHJhY2tDb250ZXh0ID0gVHJhY2tSZWZDb250ZXh0O1xuZnVuY3Rpb24gdXNlVHJhY2tDb250ZXh0KCkge1xuICByZXR1cm4gdXNlVHJhY2tSZWZDb250ZXh0KCk7XG59XG5mdW5jdGlvbiB1c2VUcmFja1JlZkNvbnRleHQoKSB7XG4gIGNvbnN0IHRyYWNrUmVmZXJlbmNlID0gUmVhY3Q1LnVzZUNvbnRleHQoVHJhY2tSZWZDb250ZXh0KTtcbiAgaWYgKCF0cmFja1JlZmVyZW5jZSkge1xuICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIHRyYWNrIGNvbnRleHQgb3V0c2lkZSBvZiB0cmFjayBjb250ZXh0IHByb3ZpZGVyXCIpO1xuICB9XG4gIHJldHVybiB0cmFja1JlZmVyZW5jZTtcbn1cbmZ1bmN0aW9uIHVzZU1heWJlVHJhY2tDb250ZXh0KCkge1xuICByZXR1cm4gdXNlTWF5YmVUcmFja1JlZkNvbnRleHQoKTtcbn1cbmZ1bmN0aW9uIHVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCkge1xuICByZXR1cm4gUmVhY3Q1LnVzZUNvbnRleHQoVHJhY2tSZWZDb250ZXh0KTtcbn1cbmZ1bmN0aW9uIHVzZUVuc3VyZVRyYWNrUmVmZXJlbmNlKHRyYWNrKSB7XG4gIHJldHVybiB1c2VFbnN1cmVUcmFja1JlZih0cmFjayk7XG59XG5mdW5jdGlvbiB1c2VFbnN1cmVUcmFja1JlZih0cmFja1JlZikge1xuICBjb25zdCBjb250ZXh0ID0gdXNlTWF5YmVUcmFja1JlZkNvbnRleHQoKTtcbiAgY29uc3QgcmVmID0gdHJhY2tSZWYgIT0gbnVsbCA/IHRyYWNrUmVmIDogY29udGV4dDtcbiAgaWYgKCFyZWYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIFRyYWNrUmVmLCBtYWtlIHN1cmUgeW91IGFyZSBpbnNpZGUgYSBUcmFja1JlZkNvbnRleHQgb3IgcGFzcyB0aGUgVHJhY2tSZWYgZXhwbGljaXRseVwiXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcmVmO1xufVxuXG4vLyBzcmMvY29udGV4dC9wYXJ0aWNpcGFudC1jb250ZXh0LnRzXG52YXIgUGFydGljaXBhbnRDb250ZXh0ID0gUmVhY3Q2LmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIHVzZVBhcnRpY2lwYW50Q29udGV4dCgpIHtcbiAgY29uc3QgcGFydGljaXBhbnQgPSBSZWFjdDYudXNlQ29udGV4dChQYXJ0aWNpcGFudENvbnRleHQpO1xuICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgcGFydGljaXBhbnQgY29udGV4dCBvdXRzaWRlIG9mIHBhcnRpY2lwYW50IGNvbnRleHQgcHJvdmlkZXJcIik7XG4gIH1cbiAgcmV0dXJuIHBhcnRpY2lwYW50O1xufVxuZnVuY3Rpb24gdXNlTWF5YmVQYXJ0aWNpcGFudENvbnRleHQoKSB7XG4gIHJldHVybiBSZWFjdDYudXNlQ29udGV4dChQYXJ0aWNpcGFudENvbnRleHQpO1xufVxuZnVuY3Rpb24gdXNlRW5zdXJlUGFydGljaXBhbnQocGFydGljaXBhbnQpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBjb250ZXh0ID0gdXNlTWF5YmVQYXJ0aWNpcGFudENvbnRleHQoKTtcbiAgY29uc3QgdHJhY2tDb250ZXh0ID0gdXNlTWF5YmVUcmFja1JlZkNvbnRleHQoKTtcbiAgY29uc3QgcCA9IChfYSA9IHBhcnRpY2lwYW50ICE9IG51bGwgPyBwYXJ0aWNpcGFudCA6IGNvbnRleHQpICE9IG51bGwgPyBfYSA6IHRyYWNrQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tDb250ZXh0LnBhcnRpY2lwYW50O1xuICBpZiAoIXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIHBhcnRpY2lwYW50IHByb3ZpZGVkLCBtYWtlIHN1cmUgeW91IGFyZSBpbnNpZGUgYSBwYXJ0aWNpcGFudCBjb250ZXh0IG9yIHBhc3MgdGhlIHBhcnRpY2lwYW50IGV4cGxpY2l0bHlcIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHA7XG59XG5cbi8vIHNyYy9jb250ZXh0L3Jvb20tY29udGV4dC50c1xuaW1wb3J0ICogYXMgUmVhY3Q3IGZyb20gXCJyZWFjdFwiO1xudmFyIFJvb21Db250ZXh0ID0gUmVhY3Q3LmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIHVzZVJvb21Db250ZXh0KCkge1xuICBjb25zdCBjdHggPSBSZWFjdDcudXNlQ29udGV4dChSb29tQ29udGV4dCk7XG4gIGlmICghY3R4KSB7XG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3Mgcm9vbSBjb250ZXh0IG91dHNpZGUgb2YgbGl2ZWtpdCByb29tIGNvbXBvbmVudFwiKTtcbiAgfVxuICByZXR1cm4gY3R4O1xufVxuZnVuY3Rpb24gdXNlTWF5YmVSb29tQ29udGV4dCgpIHtcbiAgcmV0dXJuIFJlYWN0Ny51c2VDb250ZXh0KFJvb21Db250ZXh0KTtcbn1cbmZ1bmN0aW9uIHVzZUVuc3VyZVJvb20ocm9vbSkge1xuICBjb25zdCBjb250ZXh0ID0gdXNlTWF5YmVSb29tQ29udGV4dCgpO1xuICBjb25zdCByID0gcm9vbSAhPSBudWxsID8gcm9vbSA6IGNvbnRleHQ7XG4gIGlmICghcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTm8gcm9vbSBwcm92aWRlZCwgbWFrZSBzdXJlIHlvdSBhcmUgaW5zaWRlIGEgUm9vbSBjb250ZXh0IG9yIHBhc3MgdGhlIHJvb20gZXhwbGljaXRseVwiXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcjtcbn1cblxuLy8gc3JjL2NvbnRleHQvZmVhdHVyZS1jb250ZXh0LnRzXG5pbXBvcnQgKiBhcyBSZWFjdDggZnJvbSBcInJlYWN0XCI7XG52YXIgTEtGZWF0dXJlQ29udGV4dCA9IFJlYWN0OC5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiB1c2VGZWF0dXJlQ29udGV4dChyZXF1aXJlMikge1xuICBjb25zdCBjdHggPSBSZWFjdDgudXNlQ29udGV4dChMS0ZlYXR1cmVDb250ZXh0KTtcbiAgaWYgKHJlcXVpcmUyID09PSB0cnVlKSB7XG4gICAgaWYgKGN0eCkge1xuICAgICAgcmV0dXJuIGN0eDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgZmVhdHVyZSBjb250ZXh0LCBidXQgbm9uZSBpcyBwcmVzZW50XCIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY3R4O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlQXVkaW9QbGF5YmFjay50c1xuZnVuY3Rpb24gdXNlQXVkaW9QbGF5YmFjayhyb29tKSB7XG4gIGNvbnN0IHJvb21FbnN1cmVkID0gdXNlRW5zdXJlUm9vbShyb29tKTtcbiAgY29uc3Qgc3RhcnRBdWRpbyA9IFJlYWN0OS51c2VDYWxsYmFjaygoKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgeWllbGQgcm9vbUVuc3VyZWQuc3RhcnRBdWRpbygpO1xuICB9KSwgW3Jvb21FbnN1cmVkXSk7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBSZWFjdDkudXNlTWVtbyhcbiAgICAoKSA9PiByb29tQXVkaW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlKHJvb21FbnN1cmVkKSxcbiAgICBbcm9vbUVuc3VyZWRdXG4gICk7XG4gIGNvbnN0IHsgY2FuUGxheUF1ZGlvIH0gPSB1c2VPYnNlcnZhYmxlU3RhdGUob2JzZXJ2YWJsZSwge1xuICAgIGNhblBsYXlBdWRpbzogcm9vbUVuc3VyZWQuY2FuUGxheWJhY2tBdWRpb1xuICB9KTtcbiAgcmV0dXJuIHsgY2FuUGxheUF1ZGlvLCBzdGFydEF1ZGlvIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VDbGVhclBpbkJ1dHRvbi50c1xuaW1wb3J0IHsgc2V0dXBDbGVhclBpbkJ1dHRvbiB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTAgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9tZXJnZVByb3BzLnRzXG5pbXBvcnQgY2xzeCBmcm9tIFwiY2xzeFwiO1xuZnVuY3Rpb24gY2hhaW4oLi4uY2FsbGJhY2tzKSB7XG4gIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gbWVyZ2VQcm9wcyguLi5hcmdzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IF9fc3ByZWFkVmFsdWVzKHt9LCBhcmdzWzBdKTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcHJvcHMgPSBhcmdzW2ldO1xuICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICBjb25zdCBhID0gcmVzdWx0W2tleV07XG4gICAgICBjb25zdCBiID0gcHJvcHNba2V5XTtcbiAgICAgIGlmICh0eXBlb2YgYSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBiID09PSBcImZ1bmN0aW9uXCIgJiYgLy8gVGhpcyBpcyBhIGxvdCBmYXN0ZXIgdGhhbiBhIHJlZ2V4LlxuICAgICAga2V5WzBdID09PSBcIm9cIiAmJiBrZXlbMV0gPT09IFwiblwiICYmIGtleS5jaGFyQ29kZUF0KDIpID49IC8qICdBJyAqL1xuICAgICAgNjUgJiYga2V5LmNoYXJDb2RlQXQoMikgPD0gLyogJ1onICovXG4gICAgICA5MCkge1xuICAgICAgICByZXN1bHRba2V5XSA9IGNoYWluKGEsIGIpO1xuICAgICAgfSBlbHNlIGlmICgoa2V5ID09PSBcImNsYXNzTmFtZVwiIHx8IGtleSA9PT0gXCJVTlNBRkVfY2xhc3NOYW1lXCIpICYmIHR5cGVvZiBhID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBiID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gY2xzeChhLCBiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gYiAhPT0gdm9pZCAwID8gYiA6IGE7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHNyYy9ob29rcy91c2VDbGVhclBpbkJ1dHRvbi50c1xuZnVuY3Rpb24gdXNlQ2xlYXJQaW5CdXR0b24ocHJvcHMpIHtcbiAgY29uc3QgeyBzdGF0ZSwgZGlzcGF0Y2ggfSA9IHVzZUxheW91dENvbnRleHQoKS5waW47XG4gIGNvbnN0IGJ1dHRvblByb3BzID0gUmVhY3QxMC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSB9ID0gc2V0dXBDbGVhclBpbkJ1dHRvbigpO1xuICAgIGNvbnN0IG1lcmdlZFByb3BzID0gbWVyZ2VQcm9wcyhwcm9wcywge1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgZGlzYWJsZWQ6ICEoc3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0YXRlLmxlbmd0aCksXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICBkaXNwYXRjaCh7IG1zZzogXCJjbGVhcl9waW5cIiB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkUHJvcHM7XG4gIH0sIFtwcm9wcywgZGlzcGF0Y2gsIHN0YXRlXSk7XG4gIHJldHVybiB7IGJ1dHRvblByb3BzIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvci50c1xuaW1wb3J0IHsgc2V0dXBDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvciB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25RdWFsaXR5IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDExIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlQ29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3Iob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChvcHRpb25zLnBhcnRpY2lwYW50KTtcbiAgY29uc3QgeyBjbGFzc05hbWUsIGNvbm5lY3Rpb25RdWFsaXR5T2JzZXJ2ZXIgfSA9IFJlYWN0MTEudXNlTWVtbyhcbiAgICAoKSA9PiBzZXR1cENvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yKHApLFxuICAgIFtwXVxuICApO1xuICBjb25zdCBxdWFsaXR5ID0gdXNlT2JzZXJ2YWJsZVN0YXRlKGNvbm5lY3Rpb25RdWFsaXR5T2JzZXJ2ZXIsIENvbm5lY3Rpb25RdWFsaXR5LlVua25vd24pO1xuICByZXR1cm4geyBjbGFzc05hbWUsIHF1YWxpdHkgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUNvbm5lY3Rpb25TdGF0dXMudHNcbmltcG9ydCB7IGNvbm5lY3Rpb25TdGF0ZU9ic2VydmVyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QxMiBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUNvbm5lY3Rpb25TdGF0ZShyb29tKSB7XG4gIGNvbnN0IHIgPSB1c2VFbnN1cmVSb29tKHJvb20pO1xuICBjb25zdCBvYnNlcnZhYmxlID0gUmVhY3QxMi51c2VNZW1vKCgpID0+IGNvbm5lY3Rpb25TdGF0ZU9ic2VydmVyKHIpLCBbcl0pO1xuICBjb25zdCBjb25uZWN0aW9uU3RhdGUgPSB1c2VPYnNlcnZhYmxlU3RhdGUob2JzZXJ2YWJsZSwgci5zdGF0ZSk7XG4gIHJldHVybiBjb25uZWN0aW9uU3RhdGU7XG59XG5cbi8vIHNyYy9ob29rcy91c2VEYXRhQ2hhbm5lbC50c1xuaW1wb3J0IHsgc2V0dXBEYXRhTWVzc2FnZUhhbmRsZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDEzIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlRGF0YUNoYW5uZWwodG9waWNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICBjb25zdCBvbk1lc3NhZ2UgPSB0eXBlb2YgdG9waWNPckNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIgPyB0b3BpY09yQ2FsbGJhY2sgOiBjYWxsYmFjaztcbiAgY29uc3QgdG9waWMgPSB0eXBlb2YgdG9waWNPckNhbGxiYWNrID09PSBcInN0cmluZ1wiID8gdG9waWNPckNhbGxiYWNrIDogdm9pZCAwO1xuICBjb25zdCByb29tID0gdXNlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgeyBzZW5kLCBtZXNzYWdlT2JzZXJ2YWJsZSwgaXNTZW5kaW5nT2JzZXJ2YWJsZSB9ID0gUmVhY3QxMy51c2VNZW1vKFxuICAgICgpID0+IHNldHVwRGF0YU1lc3NhZ2VIYW5kbGVyKHJvb20sIHRvcGljLCBvbk1lc3NhZ2UpLFxuICAgIFtyb29tLCB0b3BpYywgb25NZXNzYWdlXVxuICApO1xuICBjb25zdCBtZXNzYWdlID0gdXNlT2JzZXJ2YWJsZVN0YXRlKG1lc3NhZ2VPYnNlcnZhYmxlLCB2b2lkIDApO1xuICBjb25zdCBpc1NlbmRpbmcgPSB1c2VPYnNlcnZhYmxlU3RhdGUoaXNTZW5kaW5nT2JzZXJ2YWJsZSwgZmFsc2UpO1xuICByZXR1cm4ge1xuICAgIG1lc3NhZ2UsXG4gICAgc2VuZCxcbiAgICBpc1NlbmRpbmdcbiAgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZURpc2Nvbm5lY3RCdXR0b24udHNcbmltcG9ydCB7IHNldHVwRGlzY29ubmVjdEJ1dHRvbiB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25TdGF0ZSB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUmVhY3QxNCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZURpc2Nvbm5lY3RCdXR0b24ocHJvcHMpIHtcbiAgY29uc3Qgcm9vbSA9IHVzZVJvb21Db250ZXh0KCk7XG4gIGNvbnN0IGNvbm5lY3Rpb25TdGF0ZSA9IHVzZUNvbm5lY3Rpb25TdGF0ZShyb29tKTtcbiAgY29uc3QgYnV0dG9uUHJvcHMgPSBSZWFjdDE0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lLCBkaXNjb25uZWN0IH0gPSBzZXR1cERpc2Nvbm5lY3RCdXR0b24ocm9vbSk7XG4gICAgY29uc3QgbWVyZ2VkUHJvcHMgPSBtZXJnZVByb3BzKHByb3BzLCB7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIGRpc2Nvbm5lY3QoKF9hID0gcHJvcHMuc3RvcFRyYWNrcykgIT0gbnVsbCA/IF9hIDogdHJ1ZSk7XG4gICAgICB9LFxuICAgICAgZGlzYWJsZWQ6IGNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZFxuICAgIH0pO1xuICAgIHJldHVybiBtZXJnZWRQcm9wcztcbiAgfSwgW3Jvb20sIHByb3BzLCBjb25uZWN0aW9uU3RhdGVdKTtcbiAgcmV0dXJuIHsgYnV0dG9uUHJvcHMgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUZhY2luZ01vZGUudHNcbmltcG9ydCB7IExvY2FsVHJhY2tQdWJsaWNhdGlvbiwgZmFjaW5nTW9kZUZyb21Mb2NhbFRyYWNrIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5mdW5jdGlvbiB1c2VGYWNpbmdNb2RlKHRyYWNrUmVmZXJlbmNlKSB7XG4gIGlmICh0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbiBpbnN0YW5jZW9mIExvY2FsVHJhY2tQdWJsaWNhdGlvbikge1xuICAgIGNvbnN0IGxvY2FsVHJhY2sgPSB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi50cmFjaztcbiAgICBpZiAobG9jYWxUcmFjaykge1xuICAgICAgY29uc3QgeyBmYWNpbmdNb2RlIH0gPSBmYWNpbmdNb2RlRnJvbUxvY2FsVHJhY2sobG9jYWxUcmFjayk7XG4gICAgICByZXR1cm4gZmFjaW5nTW9kZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG59XG5cbi8vIHNyYy9ob29rcy91c2VGb2N1c1RvZ2dsZS50c1xuaW1wb3J0IHsgc2V0dXBGb2N1c1RvZ2dsZSwgaXNUcmFja1JlZmVyZW5jZVBpbm5lZCB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTUgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VGb2N1c1RvZ2dsZSh7IHRyYWNrUmVmLCB0cmFja1NvdXJjZSwgcGFydGljaXBhbnQsIHByb3BzIH0pIHtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50KTtcbiAgaWYgKCF0cmFja1JlZiAmJiAhdHJhY2tTb3VyY2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cmFja1JlZiBvciB0cmFja1NvdXJjZSBtdXN0IGJlIGRlZmluZWQuXCIpO1xuICB9XG4gIGNvbnN0IGxheW91dENvbnRleHQgPSB1c2VNYXliZUxheW91dENvbnRleHQoKTtcbiAgY29uc3QgeyBjbGFzc05hbWUgfSA9IFJlYWN0MTUudXNlTWVtbygoKSA9PiBzZXR1cEZvY3VzVG9nZ2xlKCksIFtdKTtcbiAgY29uc3QgaW5Gb2N1cyA9IFJlYWN0MTUudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHRyYWNrUmVmKSB7XG4gICAgICByZXR1cm4gaXNUcmFja1JlZmVyZW5jZVBpbm5lZCh0cmFja1JlZiwgbGF5b3V0Q29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogbGF5b3V0Q29udGV4dC5waW4uc3RhdGUpO1xuICAgIH0gZWxzZSBpZiAodHJhY2tTb3VyY2UpIHtcbiAgICAgIGNvbnN0IHRyYWNrID0gcC5nZXRUcmFjayh0cmFja1NvdXJjZSk7XG4gICAgICBpZiAoKGxheW91dENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dENvbnRleHQucGluLnN0YXRlKSAmJiB0cmFjaykge1xuICAgICAgICByZXR1cm4gaXNUcmFja1JlZmVyZW5jZVBpbm5lZChcbiAgICAgICAgICB7IHBhcnRpY2lwYW50OiBwLCBzb3VyY2U6IHRyYWNrU291cmNlLCBwdWJsaWNhdGlvbjogdHJhY2sgfSxcbiAgICAgICAgICBsYXlvdXRDb250ZXh0LnBpbi5zdGF0ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cmFja1JlZiBvciB0cmFja1NvdXJjZSBhbmQgcGFydGljaXBhbnQgbXVzdCBiZSBkZWZpbmVkLlwiKTtcbiAgICB9XG4gIH0sIFt0cmFja1JlZiwgbGF5b3V0Q29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogbGF5b3V0Q29udGV4dC5waW4uc3RhdGUsIHAsIHRyYWNrU291cmNlXSk7XG4gIGNvbnN0IG1lcmdlZFByb3BzID0gUmVhY3QxNS51c2VNZW1vKFxuICAgICgpID0+IG1lcmdlUHJvcHMocHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG9uQ2xpY2s6IChldmVudCkgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICAoX2EgPSBwcm9wcy5vbkNsaWNrKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChwcm9wcywgZXZlbnQpO1xuICAgICAgICBpZiAodHJhY2tSZWYpIHtcbiAgICAgICAgICBpZiAoaW5Gb2N1cykge1xuICAgICAgICAgICAgKF9jID0gbGF5b3V0Q29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogKF9iID0gbGF5b3V0Q29udGV4dC5waW4pLmRpc3BhdGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2MuY2FsbChfYiwge1xuICAgICAgICAgICAgICBtc2c6IFwiY2xlYXJfcGluXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAoX2UgPSBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiAoX2QgPSBsYXlvdXRDb250ZXh0LnBpbikuZGlzcGF0Y2gpID09IG51bGwgPyB2b2lkIDAgOiBfZS5jYWxsKF9kLCB7XG4gICAgICAgICAgICAgIG1zZzogXCJzZXRfcGluXCIsXG4gICAgICAgICAgICAgIHRyYWNrUmVmZXJlbmNlOiB0cmFja1JlZlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRyYWNrU291cmNlKSB7XG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBwLmdldFRyYWNrKHRyYWNrU291cmNlKTtcbiAgICAgICAgICBpZiAoKGxheW91dENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dENvbnRleHQucGluLmRpc3BhdGNoKSAmJiB0cmFjaykge1xuICAgICAgICAgICAgaWYgKGluRm9jdXMpIHtcbiAgICAgICAgICAgICAgbGF5b3V0Q29udGV4dC5waW4uZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIG1zZzogXCJjbGVhcl9waW5cIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxheW91dENvbnRleHQucGluLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBtc2c6IFwic2V0X3BpblwiLFxuICAgICAgICAgICAgICAgIHRyYWNrUmVmZXJlbmNlOiB7XG4gICAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudDogcCxcbiAgICAgICAgICAgICAgICAgIHB1YmxpY2F0aW9uOiB0cmFjayxcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogdHJhY2suc291cmNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbiAgICBbcHJvcHMsIGNsYXNzTmFtZSwgdHJhY2tSZWYsIHRyYWNrU291cmNlLCBpbkZvY3VzLCBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiBsYXlvdXRDb250ZXh0LnBpbiwgcF1cbiAgKTtcbiAgcmV0dXJuIHsgbWVyZ2VkUHJvcHMsIGluRm9jdXMgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUdyaWRMYXlvdXQudHNcbmltcG9ydCB7IEdSSURfTEFZT1VUUywgc2VsZWN0R3JpZExheW91dCB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTYgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VHcmlkTGF5b3V0KGdyaWRFbGVtZW50LCB0cmFja0NvdW50KSB7XG4gIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdXNlU2l6ZShncmlkRWxlbWVudCk7XG4gIGNvbnN0IGxheW91dCA9IHdpZHRoID4gMCAmJiBoZWlnaHQgPiAwID8gc2VsZWN0R3JpZExheW91dChHUklEX0xBWU9VVFMsIHRyYWNrQ291bnQsIHdpZHRoLCBoZWlnaHQpIDogR1JJRF9MQVlPVVRTWzBdO1xuICBSZWFjdDE2LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdyaWRFbGVtZW50LmN1cnJlbnQgJiYgbGF5b3V0KSB7XG4gICAgICBncmlkRWxlbWVudC5jdXJyZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1say1jb2wtY291bnRcIiwgbGF5b3V0ID09IG51bGwgPyB2b2lkIDAgOiBsYXlvdXQuY29sdW1ucy50b1N0cmluZygpKTtcbiAgICAgIGdyaWRFbGVtZW50LmN1cnJlbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWxrLXJvdy1jb3VudFwiLCBsYXlvdXQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dC5yb3dzLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfSwgW2dyaWRFbGVtZW50LCBsYXlvdXRdKTtcbiAgcmV0dXJuIHtcbiAgICBsYXlvdXRcbiAgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUlzTXV0ZWQudHNcbmltcG9ydCB7XG4gIGdldFRyYWNrUmVmZXJlbmNlSWQsXG4gIG11dGVkT2JzZXJ2ZXJcbn0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QxNyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUlzTXV0ZWQoc291cmNlT3JUcmFja1JlZiwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHBhc3NlZFBhcnRpY2lwYW50ID0gdHlwZW9mIHNvdXJjZU9yVHJhY2tSZWYgPT09IFwic3RyaW5nXCIgPyBvcHRpb25zLnBhcnRpY2lwYW50IDogc291cmNlT3JUcmFja1JlZi5wYXJ0aWNpcGFudDtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KHBhc3NlZFBhcnRpY2lwYW50KTtcbiAgY29uc3QgcmVmID0gdHlwZW9mIHNvdXJjZU9yVHJhY2tSZWYgPT09IFwic3RyaW5nXCIgPyB7IHBhcnRpY2lwYW50OiBwLCBzb3VyY2U6IHNvdXJjZU9yVHJhY2tSZWYgfSA6IHNvdXJjZU9yVHJhY2tSZWY7XG4gIGNvbnN0IFtpc011dGVkLCBzZXRJc011dGVkXSA9IFJlYWN0MTcudXNlU3RhdGUoXG4gICAgISEoKChfYSA9IHJlZi5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmlzTXV0ZWQpIHx8ICgoX2IgPSBwLmdldFRyYWNrKHJlZi5zb3VyY2UpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaXNNdXRlZCkpXG4gICk7XG4gIFJlYWN0MTcudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IG11dGVkT2JzZXJ2ZXIocmVmKS5zdWJzY3JpYmUoc2V0SXNNdXRlZCk7XG4gICAgcmV0dXJuICgpID0+IGxpc3RlbmVyLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtnZXRUcmFja1JlZmVyZW5jZUlkKHJlZildKTtcbiAgcmV0dXJuIGlzTXV0ZWQ7XG59XG5cbi8vIHNyYy9ob29rcy91c2VJc1NwZWFraW5nLnRzXG5pbXBvcnQgeyBjcmVhdGVJc1NwZWFraW5nT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDE4IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlSXNTcGVha2luZyhwYXJ0aWNpcGFudCkge1xuICBjb25zdCBwID0gdXNlRW5zdXJlUGFydGljaXBhbnQocGFydGljaXBhbnQpO1xuICBjb25zdCBvYnNlcnZhYmxlID0gUmVhY3QxOC51c2VNZW1vKCgpID0+IGNyZWF0ZUlzU3BlYWtpbmdPYnNlcnZlcihwKSwgW3BdKTtcbiAgY29uc3QgaXNTcGVha2luZyA9IHVzZU9ic2VydmFibGVTdGF0ZShvYnNlcnZhYmxlLCBwLmlzU3BlYWtpbmcpO1xuICByZXR1cm4gaXNTcGVha2luZztcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUxpdmVLaXRSb29tLnRzXG5pbXBvcnQgeyBsb2csIHNldHVwTGl2ZUtpdFJvb20gfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgeyBSb29tLCBNZWRpYURldmljZUZhaWx1cmUsIFJvb21FdmVudCwgQ29ubmVjdGlvblN0YXRlIGFzIENvbm5lY3Rpb25TdGF0ZTIgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTkgZnJvbSBcInJlYWN0XCI7XG52YXIgZGVmYXVsdFJvb21Qcm9wcyA9IHtcbiAgY29ubmVjdDogdHJ1ZSxcbiAgYXVkaW86IGZhbHNlLFxuICB2aWRlbzogZmFsc2Vcbn07XG5mdW5jdGlvbiB1c2VMaXZlS2l0Um9vbShwcm9wcykge1xuICBjb25zdCBfYSA9IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBkZWZhdWx0Um9vbVByb3BzKSwgcHJvcHMpLCB7XG4gICAgdG9rZW4sXG4gICAgc2VydmVyVXJsLFxuICAgIG9wdGlvbnMsXG4gICAgcm9vbTogcGFzc2VkUm9vbSxcbiAgICBjb25uZWN0T3B0aW9ucyxcbiAgICBjb25uZWN0LFxuICAgIGF1ZGlvLFxuICAgIHZpZGVvLFxuICAgIHNjcmVlbixcbiAgICBvbkNvbm5lY3RlZCxcbiAgICBvbkRpc2Nvbm5lY3RlZCxcbiAgICBvbkVycm9yLFxuICAgIG9uTWVkaWFEZXZpY2VGYWlsdXJlLFxuICAgIG9uRW5jcnlwdGlvbkVycm9yLFxuICAgIHNpbXVsYXRlUGFydGljaXBhbnRzXG4gIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1xuICAgIFwidG9rZW5cIixcbiAgICBcInNlcnZlclVybFwiLFxuICAgIFwib3B0aW9uc1wiLFxuICAgIFwicm9vbVwiLFxuICAgIFwiY29ubmVjdE9wdGlvbnNcIixcbiAgICBcImNvbm5lY3RcIixcbiAgICBcImF1ZGlvXCIsXG4gICAgXCJ2aWRlb1wiLFxuICAgIFwic2NyZWVuXCIsXG4gICAgXCJvbkNvbm5lY3RlZFwiLFxuICAgIFwib25EaXNjb25uZWN0ZWRcIixcbiAgICBcIm9uRXJyb3JcIixcbiAgICBcIm9uTWVkaWFEZXZpY2VGYWlsdXJlXCIsXG4gICAgXCJvbkVuY3J5cHRpb25FcnJvclwiLFxuICAgIFwic2ltdWxhdGVQYXJ0aWNpcGFudHNcIlxuICBdKTtcbiAgaWYgKG9wdGlvbnMgJiYgcGFzc2VkUm9vbSkge1xuICAgIGxvZy53YXJuKFxuICAgICAgXCJ3aGVuIHVzaW5nIGEgbWFudWFsbHkgY3JlYXRlZCByb29tLCB0aGUgb3B0aW9ucyBvYmplY3Qgd2lsbCBiZSBpZ25vcmVkLiBzZXQgdGhlIGRlc2lyZWQgb3B0aW9ucyBkaXJlY3RseSB3aGVuIGNyZWF0aW5nIHRoZSByb29tIGluc3RlYWQuXCJcbiAgICApO1xuICB9XG4gIGNvbnN0IFtyb29tLCBzZXRSb29tXSA9IFJlYWN0MTkudXNlU3RhdGUoKTtcbiAgUmVhY3QxOS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFJvb20ocGFzc2VkUm9vbSAhPSBudWxsID8gcGFzc2VkUm9vbSA6IG5ldyBSb29tKG9wdGlvbnMpKTtcbiAgfSwgW3Bhc3NlZFJvb21dKTtcbiAgY29uc3QgaHRtbFByb3BzID0gUmVhY3QxOS51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSB9ID0gc2V0dXBMaXZlS2l0Um9vbSgpO1xuICAgIHJldHVybiBtZXJnZVByb3BzKHJlc3QsIHsgY2xhc3NOYW1lIH0pO1xuICB9LCBbcmVzdF0pO1xuICBSZWFjdDE5LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFyb29tKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IG9uU2lnbmFsQ29ubmVjdGVkID0gKCkgPT4ge1xuICAgICAgY29uc3QgbG9jYWxQID0gcm9vbS5sb2NhbFBhcnRpY2lwYW50O1xuICAgICAgbG9nLmRlYnVnKFwidHJ5aW5nIHRvIHB1Ymxpc2ggbG9jYWwgdHJhY2tzXCIpO1xuICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICBsb2NhbFAuc2V0TWljcm9waG9uZUVuYWJsZWQoISFhdWRpbywgdHlwZW9mIGF1ZGlvICE9PSBcImJvb2xlYW5cIiA/IGF1ZGlvIDogdm9pZCAwKSxcbiAgICAgICAgbG9jYWxQLnNldENhbWVyYUVuYWJsZWQoISF2aWRlbywgdHlwZW9mIHZpZGVvICE9PSBcImJvb2xlYW5cIiA/IHZpZGVvIDogdm9pZCAwKSxcbiAgICAgICAgbG9jYWxQLnNldFNjcmVlblNoYXJlRW5hYmxlZCghIXNjcmVlbiwgdHlwZW9mIHNjcmVlbiAhPT0gXCJib29sZWFuXCIgPyBzY3JlZW4gOiB2b2lkIDApXG4gICAgICBdKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBsb2cud2FybihlKTtcbiAgICAgICAgb25FcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25FcnJvcihlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlTWVkaWFEZXZpY2VFcnJvciA9IChlKSA9PiB7XG4gICAgICBjb25zdCBtZWRpYURldmljZUZhaWx1cmUgPSBNZWRpYURldmljZUZhaWx1cmUuZ2V0RmFpbHVyZShlKTtcbiAgICAgIG9uTWVkaWFEZXZpY2VGYWlsdXJlID09IG51bGwgPyB2b2lkIDAgOiBvbk1lZGlhRGV2aWNlRmFpbHVyZShtZWRpYURldmljZUZhaWx1cmUpO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlRW5jcnlwdGlvbkVycm9yID0gKGUpID0+IHtcbiAgICAgIG9uRW5jcnlwdGlvbkVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkVuY3J5cHRpb25FcnJvcihlKTtcbiAgICB9O1xuICAgIHJvb20ub24oUm9vbUV2ZW50LlNpZ25hbENvbm5lY3RlZCwgb25TaWduYWxDb25uZWN0ZWQpLm9uKFJvb21FdmVudC5NZWRpYURldmljZXNFcnJvciwgaGFuZGxlTWVkaWFEZXZpY2VFcnJvcikub24oUm9vbUV2ZW50LkVuY3J5cHRpb25FcnJvciwgaGFuZGxlRW5jcnlwdGlvbkVycm9yKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcm9vbS5vZmYoUm9vbUV2ZW50LlNpZ25hbENvbm5lY3RlZCwgb25TaWduYWxDb25uZWN0ZWQpLm9mZihSb29tRXZlbnQuTWVkaWFEZXZpY2VzRXJyb3IsIGhhbmRsZU1lZGlhRGV2aWNlRXJyb3IpLm9mZihSb29tRXZlbnQuRW5jcnlwdGlvbkVycm9yLCBoYW5kbGVFbmNyeXB0aW9uRXJyb3IpO1xuICAgIH07XG4gIH0sIFtyb29tLCBhdWRpbywgdmlkZW8sIHNjcmVlbiwgb25FcnJvciwgb25FbmNyeXB0aW9uRXJyb3IsIG9uTWVkaWFEZXZpY2VGYWlsdXJlXSk7XG4gIFJlYWN0MTkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXJvb20pXG4gICAgICByZXR1cm47XG4gICAgaWYgKHNpbXVsYXRlUGFydGljaXBhbnRzKSB7XG4gICAgICByb29tLnNpbXVsYXRlUGFydGljaXBhbnRzKHtcbiAgICAgICAgcGFydGljaXBhbnRzOiB7XG4gICAgICAgICAgY291bnQ6IHNpbXVsYXRlUGFydGljaXBhbnRzXG4gICAgICAgIH0sXG4gICAgICAgIHB1Ymxpc2g6IHtcbiAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICB1c2VSZWFsVHJhY2tzOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICBsb2cuZGVidWcoXCJubyB0b2tlbiB5ZXRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghc2VydmVyVXJsKSB7XG4gICAgICBsb2cud2FybihcIm5vIGxpdmVraXQgdXJsIHByb3ZpZGVkXCIpO1xuICAgICAgb25FcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25FcnJvcihFcnJvcihcIm5vIGxpdmVraXQgdXJsIHByb3ZpZGVkXCIpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNvbm5lY3QpIHtcbiAgICAgIGxvZy5kZWJ1ZyhcImNvbm5lY3RpbmdcIik7XG4gICAgICByb29tLmNvbm5lY3Qoc2VydmVyVXJsLCB0b2tlbiwgY29ubmVjdE9wdGlvbnMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGxvZy53YXJuKGUpO1xuICAgICAgICBvbkVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkVycm9yKGUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZy5kZWJ1ZyhcImRpc2Nvbm5lY3RpbmcgYmVjYXVzZSBjb25uZWN0IGlzIGZhbHNlXCIpO1xuICAgICAgcm9vbS5kaXNjb25uZWN0KCk7XG4gICAgfVxuICB9LCBbXG4gICAgY29ubmVjdCxcbiAgICB0b2tlbixcbiAgICBKU09OLnN0cmluZ2lmeShjb25uZWN0T3B0aW9ucyksXG4gICAgcm9vbSxcbiAgICBvbkVycm9yLFxuICAgIHNlcnZlclVybCxcbiAgICBzaW11bGF0ZVBhcnRpY2lwYW50c1xuICBdKTtcbiAgUmVhY3QxOS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcm9vbSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBjb25uZWN0aW9uU3RhdGVDaGFuZ2VMaXN0ZW5lciA9IChzdGF0ZSkgPT4ge1xuICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICBjYXNlIENvbm5lY3Rpb25TdGF0ZTIuRGlzY29ubmVjdGVkOlxuICAgICAgICAgIGlmIChvbkRpc2Nvbm5lY3RlZClcbiAgICAgICAgICAgIG9uRGlzY29ubmVjdGVkKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ29ubmVjdGlvblN0YXRlMi5Db25uZWN0ZWQ6XG4gICAgICAgICAgaWYgKG9uQ29ubmVjdGVkKVxuICAgICAgICAgICAgb25Db25uZWN0ZWQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9O1xuICAgIHJvb20ub24oUm9vbUV2ZW50LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQsIGNvbm5lY3Rpb25TdGF0ZUNoYW5nZUxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcm9vbS5vZmYoUm9vbUV2ZW50LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQsIGNvbm5lY3Rpb25TdGF0ZUNoYW5nZUxpc3RlbmVyKTtcbiAgICB9O1xuICB9LCBbdG9rZW4sIG9uQ29ubmVjdGVkLCBvbkRpc2Nvbm5lY3RlZCwgcm9vbV0pO1xuICBSZWFjdDE5LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFyb29tKVxuICAgICAgcmV0dXJuO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsb2cuaW5mbyhcImRpc2Nvbm5lY3Rpbmcgb24gb25tb3VudFwiKTtcbiAgICAgIHJvb20uZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH0sIFtyb29tXSk7XG4gIHJldHVybiB7IHJvb20sIGh0bWxQcm9wcyB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlTG9jYWxQYXJ0aWNpcGFudC50c1xuaW1wb3J0IHsgb2JzZXJ2ZVBhcnRpY2lwYW50TWVkaWEgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDIwIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlTG9jYWxQYXJ0aWNpcGFudChvcHRpb25zID0ge30pIHtcbiAgY29uc3Qgcm9vbSA9IHVzZUVuc3VyZVJvb20ob3B0aW9ucy5yb29tKTtcbiAgY29uc3QgW2xvY2FsUGFydGljaXBhbnQsIHNldExvY2FsUGFydGljaXBhbnRdID0gUmVhY3QyMC51c2VTdGF0ZShyb29tLmxvY2FsUGFydGljaXBhbnQpO1xuICBjb25zdCBbaXNNaWNyb3Bob25lRW5hYmxlZCwgc2V0SXNNaWNyb3Bob25lRW5hYmxlZF0gPSBSZWFjdDIwLnVzZVN0YXRlKFxuICAgIGxvY2FsUGFydGljaXBhbnQuaXNNaWNyb3Bob25lRW5hYmxlZFxuICApO1xuICBjb25zdCBbaXNDYW1lcmFFbmFibGVkLCBzZXRJc0NhbWVyYUVuYWJsZWRdID0gUmVhY3QyMC51c2VTdGF0ZShcbiAgICBsb2NhbFBhcnRpY2lwYW50LmlzTWljcm9waG9uZUVuYWJsZWRcbiAgKTtcbiAgY29uc3QgW2xhc3RNaWNyb3Bob25lRXJyb3IsIHNldExhc3RNaWNyb3Bob25lRXJyb3JdID0gUmVhY3QyMC51c2VTdGF0ZShcbiAgICBsb2NhbFBhcnRpY2lwYW50Lmxhc3RNaWNyb3Bob25lRXJyb3JcbiAgKTtcbiAgY29uc3QgW2xhc3RDYW1lcmFFcnJvciwgc2V0TGFzdENhbWVyYUVycm9yXSA9IFJlYWN0MjAudXNlU3RhdGUobG9jYWxQYXJ0aWNpcGFudC5sYXN0Q2FtZXJhRXJyb3IpO1xuICBjb25zdCBbaXNTY3JlZW5TaGFyZUVuYWJsZWQsIHNldElzU2NyZWVuU2hhcmVFbmFibGVkXSA9IFJlYWN0MjAudXNlU3RhdGUoXG4gICAgbG9jYWxQYXJ0aWNpcGFudC5pc01pY3JvcGhvbmVFbmFibGVkXG4gICk7XG4gIGNvbnN0IFttaWNyb3Bob25lVHJhY2ssIHNldE1pY3JvcGhvbmVUcmFja10gPSBSZWFjdDIwLnVzZVN0YXRlKFxuICAgIHZvaWQgMFxuICApO1xuICBjb25zdCBbY2FtZXJhVHJhY2ssIHNldENhbWVyYVRyYWNrXSA9IFJlYWN0MjAudXNlU3RhdGUodm9pZCAwKTtcbiAgY29uc3QgaGFuZGxlVXBkYXRlID0gKG1lZGlhKSA9PiB7XG4gICAgc2V0SXNDYW1lcmFFbmFibGVkKG1lZGlhLmlzQ2FtZXJhRW5hYmxlZCk7XG4gICAgc2V0SXNNaWNyb3Bob25lRW5hYmxlZChtZWRpYS5pc01pY3JvcGhvbmVFbmFibGVkKTtcbiAgICBzZXRJc1NjcmVlblNoYXJlRW5hYmxlZChtZWRpYS5pc1NjcmVlblNoYXJlRW5hYmxlZCk7XG4gICAgc2V0Q2FtZXJhVHJhY2sobWVkaWEuY2FtZXJhVHJhY2spO1xuICAgIHNldE1pY3JvcGhvbmVUcmFjayhtZWRpYS5taWNyb3Bob25lVHJhY2spO1xuICAgIHNldExhc3RNaWNyb3Bob25lRXJyb3IobWVkaWEucGFydGljaXBhbnQubGFzdE1pY3JvcGhvbmVFcnJvcik7XG4gICAgc2V0TGFzdENhbWVyYUVycm9yKG1lZGlhLnBhcnRpY2lwYW50Lmxhc3RDYW1lcmFFcnJvcik7XG4gICAgc2V0TG9jYWxQYXJ0aWNpcGFudChtZWRpYS5wYXJ0aWNpcGFudCk7XG4gIH07XG4gIFJlYWN0MjAudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhKHJvb20ubG9jYWxQYXJ0aWNpcGFudCkuc3Vic2NyaWJlKGhhbmRsZVVwZGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IGxpc3RlbmVyLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtyb29tXSk7XG4gIHJldHVybiB7XG4gICAgaXNNaWNyb3Bob25lRW5hYmxlZCxcbiAgICBpc1NjcmVlblNoYXJlRW5hYmxlZCxcbiAgICBpc0NhbWVyYUVuYWJsZWQsXG4gICAgbWljcm9waG9uZVRyYWNrLFxuICAgIGNhbWVyYVRyYWNrLFxuICAgIGxhc3RNaWNyb3Bob25lRXJyb3IsXG4gICAgbGFzdENhbWVyYUVycm9yLFxuICAgIGxvY2FsUGFydGljaXBhbnRcbiAgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUxvY2FsUGFydGljaXBhbnRQZXJtaXNzaW9ucy50c1xuaW1wb3J0IHsgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDIxIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlTG9jYWxQYXJ0aWNpcGFudFBlcm1pc3Npb25zKCkge1xuICBjb25zdCByb29tID0gdXNlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgcGVybWlzc2lvbk9ic2VydmVyID0gUmVhY3QyMS51c2VNZW1vKFxuICAgICgpID0+IHBhcnRpY2lwYW50UGVybWlzc2lvbk9ic2VydmVyKHJvb20ubG9jYWxQYXJ0aWNpcGFudCksXG4gICAgW3Jvb21dXG4gICk7XG4gIGNvbnN0IHBlcm1pc3Npb25zID0gdXNlT2JzZXJ2YWJsZVN0YXRlKHBlcm1pc3Npb25PYnNlcnZlciwgcm9vbS5sb2NhbFBhcnRpY2lwYW50LnBlcm1pc3Npb25zKTtcbiAgcmV0dXJuIHBlcm1pc3Npb25zO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlTWVkaWFEZXZpY2VTZWxlY3QudHNcbmltcG9ydCB7IGNyZWF0ZU1lZGlhRGV2aWNlT2JzZXJ2ZXIsIHNldHVwRGV2aWNlU2VsZWN0b3IsIGxvZyBhcyBsb2cyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QyMiBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZU1lZGlhRGV2aWNlU2VsZWN0KHtcbiAga2luZCxcbiAgcm9vbSxcbiAgdHJhY2ssXG4gIHJlcXVlc3RQZXJtaXNzaW9ucyxcbiAgb25FcnJvclxufSkge1xuICBjb25zdCByb29tQ29udGV4dCA9IHVzZU1heWJlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgZGV2aWNlT2JzZXJ2ZXIgPSBSZWFjdDIyLnVzZU1lbW8oXG4gICAgKCkgPT4gY3JlYXRlTWVkaWFEZXZpY2VPYnNlcnZlcihraW5kLCBvbkVycm9yLCByZXF1ZXN0UGVybWlzc2lvbnMpLFxuICAgIFtraW5kLCByZXF1ZXN0UGVybWlzc2lvbnMsIG9uRXJyb3JdXG4gICk7XG4gIGNvbnN0IGRldmljZXMgPSB1c2VPYnNlcnZhYmxlU3RhdGUoZGV2aWNlT2JzZXJ2ZXIsIFtdKTtcbiAgY29uc3QgW2N1cnJlbnREZXZpY2VJZCwgc2V0Q3VycmVudERldmljZUlkXSA9IFJlYWN0MjIudXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCBhY3RpdmVEZXZpY2VPYnNlcnZhYmxlLCBzZXRBY3RpdmVNZWRpYURldmljZSB9ID0gUmVhY3QyMi51c2VNZW1vKFxuICAgICgpID0+IHNldHVwRGV2aWNlU2VsZWN0b3Ioa2luZCwgcm9vbSAhPSBudWxsID8gcm9vbSA6IHJvb21Db250ZXh0LCB0cmFjayksXG4gICAgW2tpbmQsIHJvb20sIHJvb21Db250ZXh0LCB0cmFja11cbiAgKTtcbiAgUmVhY3QyMi51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxpc3RlbmVyID0gYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZS5zdWJzY3JpYmUoKGRldmljZUlkKSA9PiB7XG4gICAgICBsb2cyLmluZm8oXCJzZXRDdXJyZW50RGV2aWNlSWRcIiwgZGV2aWNlSWQpO1xuICAgICAgaWYgKGRldmljZUlkKVxuICAgICAgICBzZXRDdXJyZW50RGV2aWNlSWQoZGV2aWNlSWQpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lciA9PSBudWxsID8gdm9pZCAwIDogbGlzdGVuZXIudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZV0pO1xuICByZXR1cm4geyBkZXZpY2VzLCBjbGFzc05hbWUsIGFjdGl2ZURldmljZUlkOiBjdXJyZW50RGV2aWNlSWQsIHNldEFjdGl2ZU1lZGlhRGV2aWNlIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VNZWRpYURldmljZXMudHNcbmltcG9ydCAqIGFzIFJlYWN0MjMgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjcmVhdGVNZWRpYURldmljZU9ic2VydmVyIGFzIGNyZWF0ZU1lZGlhRGV2aWNlT2JzZXJ2ZXIyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gdXNlTWVkaWFEZXZpY2VzKHsga2luZCB9KSB7XG4gIGNvbnN0IGRldmljZU9ic2VydmVyID0gUmVhY3QyMy51c2VNZW1vKCgpID0+IGNyZWF0ZU1lZGlhRGV2aWNlT2JzZXJ2ZXIyKGtpbmQpLCBba2luZF0pO1xuICBjb25zdCBkZXZpY2VzID0gdXNlT2JzZXJ2YWJsZVN0YXRlKGRldmljZU9ic2VydmVyLCBbXSk7XG4gIHJldHVybiBkZXZpY2VzO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlTWVkaWFUcmFja0J5U291cmNlT3JOYW1lLnRzXG5pbXBvcnQgeyBpc1RyYWNrUmVmZXJlbmNlIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0IHsgc2V0dXBNZWRpYVRyYWNrLCBsb2cgYXMgbG9nNCwgaXNMb2NhbCwgZ2V0VHJhY2tCeUlkZW50aWZpZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDI1IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvdXRpbHMudHNcbmltcG9ydCAqIGFzIFJlYWN0MjQgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBsb2cgYXMgbG9nMyB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmZ1bmN0aW9uIGlzUHJvcChwcm9wKSB7XG4gIHJldHVybiBwcm9wICE9PSB2b2lkIDA7XG59XG5mdW5jdGlvbiBtZXJnZVByb3BzMiguLi5wcm9wcykge1xuICByZXR1cm4gbWVyZ2VQcm9wcyguLi5wcm9wcy5maWx0ZXIoaXNQcm9wKSk7XG59XG5mdW5jdGlvbiBjbG9uZVNpbmdsZUNoaWxkKGNoaWxkcmVuLCBwcm9wcywga2V5KSB7XG4gIHJldHVybiBSZWFjdDI0LkNoaWxkcmVuLm1hcChjaGlsZHJlbiwgKGNoaWxkKSA9PiB7XG4gICAgaWYgKFJlYWN0MjQuaXNWYWxpZEVsZW1lbnQoY2hpbGQpICYmIFJlYWN0MjQuQ2hpbGRyZW4ub25seShjaGlsZHJlbikpIHtcbiAgICAgIHJldHVybiBSZWFjdDI0LmNsb25lRWxlbWVudChjaGlsZCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpLCB7IGtleSB9KSk7XG4gICAgfVxuICAgIHJldHVybiBjaGlsZDtcbiAgfSk7XG59XG5mdW5jdGlvbiB3YXJuQWJvdXRNaXNzaW5nU3R5bGVzKGVsKSB7XG4gIHZhciBfYSwgX2I7XG4gIGlmIChcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdHVyYm8vbm8tdW5kZWNsYXJlZC1lbnYtdmFyc1xuICAgICgoKF9hID0gcHJvY2VzcyA9PSBudWxsID8gdm9pZCAwIDogcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBfYS5OT0RFX0VOVikgPT09IFwiZGV2XCIgfHwgKChfYiA9IHByb2Nlc3MgPT0gbnVsbCA/IHZvaWQgMCA6IHByb2Nlc3MuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2IuTk9ERV9FTlYpID09PSBcImRldmVsb3BtZW50XCIpICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCJcbiAgKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZWwgIT0gbnVsbCA/IGVsIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5say1yb29tLWNvbnRhaW5lclwiKTtcbiAgICBpZiAodGFyZ2V0ICYmICFnZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tbGstaGFzLWltcG9ydGVkLXN0eWxlc1wiKSkge1xuICAgICAgbG9nMy53YXJuKFxuICAgICAgICBcIkl0IGxvb2tzIGxpa2UgeW91J3JlIG5vdCB1c2luZyB0aGUgYEBsaXZla2l0L2NvbXBvbmVudHMtc3R5bGVzIHBhY2thZ2VgLiBUbyByZW5kZXIgdGhlIFVJIHdpdGggdGhlIGRlZmF1bHQgc3R5bGluZywgcGxlYXNlIGltcG9ydCBpdCBpbiB5b3VyIGxheW91dCBvciBwYWdlLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG4vLyBzcmMvaG9va3MvdXNlTWVkaWFUcmFja0J5U291cmNlT3JOYW1lLnRzXG5mdW5jdGlvbiB1c2VNZWRpYVRyYWNrQnlTb3VyY2VPck5hbWUob2JzZXJ2ZXJPcHRpb25zLCBvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hO1xuICBjb25zdCBbcHVibGljYXRpb24sIHNldFB1YmxpY2F0aW9uXSA9IFJlYWN0MjUudXNlU3RhdGUoZ2V0VHJhY2tCeUlkZW50aWZpZXIob2JzZXJ2ZXJPcHRpb25zKSk7XG4gIGNvbnN0IFtpc011dGVkLCBzZXRNdXRlZF0gPSBSZWFjdDI1LnVzZVN0YXRlKHB1YmxpY2F0aW9uID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbi5pc011dGVkKTtcbiAgY29uc3QgW2lzU3Vic2NyaWJlZCwgc2V0U3Vic2NyaWJlZF0gPSBSZWFjdDI1LnVzZVN0YXRlKHB1YmxpY2F0aW9uID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbi5pc1N1YnNjcmliZWQpO1xuICBjb25zdCBbdHJhY2ssIHNldFRyYWNrXSA9IFJlYWN0MjUudXNlU3RhdGUocHVibGljYXRpb24gPT0gbnVsbCA/IHZvaWQgMCA6IHB1YmxpY2F0aW9uLnRyYWNrKTtcbiAgY29uc3QgW29yaWVudGF0aW9uLCBzZXRPcmllbnRhdGlvbl0gPSBSZWFjdDI1LnVzZVN0YXRlKFwibGFuZHNjYXBlXCIpO1xuICBjb25zdCBwcmV2aW91c0VsZW1lbnQgPSBSZWFjdDI1LnVzZVJlZigpO1xuICBjb25zdCB7IGNsYXNzTmFtZSwgdHJhY2tPYnNlcnZlciB9ID0gUmVhY3QyNS51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc2V0dXBNZWRpYVRyYWNrKG9ic2VydmVyT3B0aW9ucyk7XG4gIH0sIFtcbiAgICAoX2EgPSBvYnNlcnZlck9wdGlvbnMucGFydGljaXBhbnQuc2lkKSAhPSBudWxsID8gX2EgOiBvYnNlcnZlck9wdGlvbnMucGFydGljaXBhbnQuaWRlbnRpdHksXG4gICAgb2JzZXJ2ZXJPcHRpb25zLnNvdXJjZSxcbiAgICBpc1RyYWNrUmVmZXJlbmNlKG9ic2VydmVyT3B0aW9ucykgJiYgb2JzZXJ2ZXJPcHRpb25zLnB1YmxpY2F0aW9uLnRyYWNrU2lkXG4gIF0pO1xuICBSZWFjdDI1LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdHJhY2tPYnNlcnZlci5zdWJzY3JpYmUoKHB1YmxpY2F0aW9uMikgPT4ge1xuICAgICAgbG9nNC5kZWJ1ZyhcInVwZGF0ZSB0cmFja1wiLCBwdWJsaWNhdGlvbjIpO1xuICAgICAgc2V0UHVibGljYXRpb24ocHVibGljYXRpb24yKTtcbiAgICAgIHNldE11dGVkKHB1YmxpY2F0aW9uMiA9PSBudWxsID8gdm9pZCAwIDogcHVibGljYXRpb24yLmlzTXV0ZWQpO1xuICAgICAgc2V0U3Vic2NyaWJlZChwdWJsaWNhdGlvbjIgPT0gbnVsbCA/IHZvaWQgMCA6IHB1YmxpY2F0aW9uMi5pc1N1YnNjcmliZWQpO1xuICAgICAgc2V0VHJhY2socHVibGljYXRpb24yID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbjIudHJhY2spO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24gPT0gbnVsbCA/IHZvaWQgMCA6IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9LCBbdHJhY2tPYnNlcnZlcl0pO1xuICBSZWFjdDI1LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hMiwgX2I7XG4gICAgaWYgKHRyYWNrKSB7XG4gICAgICBpZiAocHJldmlvdXNFbGVtZW50LmN1cnJlbnQpIHtcbiAgICAgICAgdHJhY2suZGV0YWNoKHByZXZpb3VzRWxlbWVudC5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIGlmICgoKF9hMiA9IG9wdGlvbnMuZWxlbWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5jdXJyZW50KSAmJiAhKGlzTG9jYWwob2JzZXJ2ZXJPcHRpb25zLnBhcnRpY2lwYW50KSAmJiAodHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrLmtpbmQpID09PSBcImF1ZGlvXCIpKSB7XG4gICAgICAgIHRyYWNrLmF0dGFjaChvcHRpb25zLmVsZW1lbnQuY3VycmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHByZXZpb3VzRWxlbWVudC5jdXJyZW50ID0gKF9iID0gb3B0aW9ucy5lbGVtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2IuY3VycmVudDtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHByZXZpb3VzRWxlbWVudC5jdXJyZW50KSB7XG4gICAgICAgIHRyYWNrID09IG51bGwgPyB2b2lkIDAgOiB0cmFjay5kZXRhY2gocHJldmlvdXNFbGVtZW50LmN1cnJlbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFt0cmFjaywgb3B0aW9ucy5lbGVtZW50XSk7XG4gIFJlYWN0MjUudXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgX2EyLCBfYjtcbiAgICBpZiAodHlwZW9mICgoX2EyID0gcHVibGljYXRpb24gPT0gbnVsbCA/IHZvaWQgMCA6IHB1YmxpY2F0aW9uLmRpbWVuc2lvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIud2lkdGgpID09PSBcIm51bWJlclwiICYmIHR5cGVvZiAoKF9iID0gcHVibGljYXRpb24gPT0gbnVsbCA/IHZvaWQgMCA6IHB1YmxpY2F0aW9uLmRpbWVuc2lvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5oZWlnaHQpID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBvcmllbnRhdGlvbl8gPSBwdWJsaWNhdGlvbi5kaW1lbnNpb25zLndpZHRoID4gcHVibGljYXRpb24uZGltZW5zaW9ucy5oZWlnaHQgPyBcImxhbmRzY2FwZVwiIDogXCJwb3J0cmFpdFwiO1xuICAgICAgc2V0T3JpZW50YXRpb24ob3JpZW50YXRpb25fKTtcbiAgICB9XG4gIH0sIFtwdWJsaWNhdGlvbl0pO1xuICByZXR1cm4ge1xuICAgIHB1YmxpY2F0aW9uLFxuICAgIGlzTXV0ZWQsXG4gICAgaXNTdWJzY3JpYmVkLFxuICAgIHRyYWNrLFxuICAgIGVsZW1lbnRQcm9wczogbWVyZ2VQcm9wczIob3B0aW9ucy5wcm9wcywgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgXCJkYXRhLWxrLWxvY2FsLXBhcnRpY2lwYW50XCI6IG9ic2VydmVyT3B0aW9ucy5wYXJ0aWNpcGFudC5pc0xvY2FsLFxuICAgICAgXCJkYXRhLWxrLXNvdXJjZVwiOiBwdWJsaWNhdGlvbiA9PSBudWxsID8gdm9pZCAwIDogcHVibGljYXRpb24uc291cmNlXG4gICAgfSwgKHB1YmxpY2F0aW9uID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbi5raW5kKSA9PT0gXCJ2aWRlb1wiICYmIHsgXCJkYXRhLWxrLW9yaWVudGF0aW9uXCI6IG9yaWVudGF0aW9uIH0pKVxuICB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlTWVkaWFUcmFjay50c1xuZnVuY3Rpb24gdXNlTWVkaWFUcmFjayhzb3VyY2UsIHBhcnRpY2lwYW50LCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50KTtcbiAgcmV0dXJuIHVzZU1lZGlhVHJhY2tCeVNvdXJjZU9yTmFtZSh7IHNvdXJjZSwgcGFydGljaXBhbnQ6IHAgfSwgb3B0aW9ucyk7XG59XG5cbi8vIHNyYy9ob29rcy91c2VNZWRpYVRyYWNrQnlOYW1lLnRzXG5mdW5jdGlvbiB1c2VNZWRpYVRyYWNrQnlOYW1lKG5hbWUsIHBhcnRpY2lwYW50LCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50KTtcbiAgcmV0dXJuIHVzZU1lZGlhVHJhY2tCeVNvdXJjZU9yTmFtZSh7IG5hbWUsIHBhcnRpY2lwYW50OiBwIH0sIG9wdGlvbnMpO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlUGFnaW5hdGlvbi50c1xuaW1wb3J0ICogYXMgUmVhY3QyNyBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2hvb2tzL3VzZVZpc3VhbFN0YWJsZVVwZGF0ZS50c1xuaW1wb3J0IHsgbG9nIGFzIGxvZzUsIHNvcnRUcmFja1JlZmVyZW5jZXMsIHVwZGF0ZVBhZ2VzIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QyNiBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVZpc3VhbFN0YWJsZVVwZGF0ZSh0cmFja1JlZmVyZW5jZXMsIG1heEl0ZW1zT25QYWdlLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgbGFzdFRyYWNrUmVmcyA9IFJlYWN0MjYudXNlUmVmKFtdKTtcbiAgY29uc3QgbGFzdE1heEl0ZW1zT25QYWdlID0gUmVhY3QyNi51c2VSZWYoLTEpO1xuICBjb25zdCBsYXlvdXRDaGFuZ2VkID0gbWF4SXRlbXNPblBhZ2UgIT09IGxhc3RNYXhJdGVtc09uUGFnZS5jdXJyZW50O1xuICBjb25zdCBzb3J0ZWRUcmFja1JlZnMgPSB0eXBlb2Ygb3B0aW9ucy5jdXN0b21Tb3J0RnVuY3Rpb24gPT09IFwiZnVuY3Rpb25cIiA/IG9wdGlvbnMuY3VzdG9tU29ydEZ1bmN0aW9uKHRyYWNrUmVmZXJlbmNlcykgOiBzb3J0VHJhY2tSZWZlcmVuY2VzKHRyYWNrUmVmZXJlbmNlcyk7XG4gIGxldCB1cGRhdGVkVHJhY2tSZWZzID0gWy4uLnNvcnRlZFRyYWNrUmVmc107XG4gIGlmIChsYXlvdXRDaGFuZ2VkID09PSBmYWxzZSkge1xuICAgIHRyeSB7XG4gICAgICB1cGRhdGVkVHJhY2tSZWZzID0gdXBkYXRlUGFnZXMobGFzdFRyYWNrUmVmcy5jdXJyZW50LCBzb3J0ZWRUcmFja1JlZnMsIG1heEl0ZW1zT25QYWdlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nNS5lcnJvcihcIkVycm9yIHdoaWxlIHJ1bm5pbmcgdXBkYXRlUGFnZXMoKTogXCIsIGVycm9yKTtcbiAgICB9XG4gIH1cbiAgaWYgKGxheW91dENoYW5nZWQpIHtcbiAgICBsYXN0VHJhY2tSZWZzLmN1cnJlbnQgPSBzb3J0ZWRUcmFja1JlZnM7XG4gIH0gZWxzZSB7XG4gICAgbGFzdFRyYWNrUmVmcy5jdXJyZW50ID0gdXBkYXRlZFRyYWNrUmVmcztcbiAgfVxuICBsYXN0TWF4SXRlbXNPblBhZ2UuY3VycmVudCA9IG1heEl0ZW1zT25QYWdlO1xuICByZXR1cm4gdXBkYXRlZFRyYWNrUmVmcztcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVBhZ2luYXRpb24udHNcbmZ1bmN0aW9uIHVzZVBhZ2luYXRpb24oaXRlbVBlclBhZ2UsIHRyYWNrUmVmZXJlbmNlcykge1xuICBjb25zdCBbY3VycmVudFBhZ2UsIHNldEN1cnJlbnRQYWdlXSA9IFJlYWN0MjcudXNlU3RhdGUoMSk7XG4gIGNvbnN0IHRvdGFsUGFnZUNvdW50ID0gTWF0aC5tYXgoTWF0aC5jZWlsKHRyYWNrUmVmZXJlbmNlcy5sZW5ndGggLyBpdGVtUGVyUGFnZSksIDEpO1xuICBpZiAoY3VycmVudFBhZ2UgPiB0b3RhbFBhZ2VDb3VudCkge1xuICAgIHNldEN1cnJlbnRQYWdlKHRvdGFsUGFnZUNvdW50KTtcbiAgfVxuICBjb25zdCBsYXN0SXRlbUluZGV4ID0gY3VycmVudFBhZ2UgKiBpdGVtUGVyUGFnZTtcbiAgY29uc3QgZmlyc3RJdGVtSW5kZXggPSBsYXN0SXRlbUluZGV4IC0gaXRlbVBlclBhZ2U7XG4gIGNvbnN0IGNoYW5nZVBhZ2UgPSAoZGlyZWN0aW9uKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UoKHN0YXRlKSA9PiB7XG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcIm5leHRcIikge1xuICAgICAgICBpZiAoc3RhdGUgPT09IHRvdGFsUGFnZUNvdW50KSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZSArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3RhdGUgPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlIC0gMTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgZ29Ub1BhZ2UgPSAobnVtKSA9PiB7XG4gICAgaWYgKG51bSA+IHRvdGFsUGFnZUNvdW50KSB7XG4gICAgICBzZXRDdXJyZW50UGFnZSh0b3RhbFBhZ2VDb3VudCk7XG4gICAgfSBlbHNlIGlmIChudW0gPCAxKSB7XG4gICAgICBzZXRDdXJyZW50UGFnZSgxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q3VycmVudFBhZ2UobnVtKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVwZGF0ZWRUcmFja1JlZmVyZW5jZXMgPSB1c2VWaXN1YWxTdGFibGVVcGRhdGUodHJhY2tSZWZlcmVuY2VzLCBpdGVtUGVyUGFnZSk7XG4gIGNvbnN0IHRyYWNrc09uUGFnZSA9IHVwZGF0ZWRUcmFja1JlZmVyZW5jZXMuc2xpY2UoZmlyc3RJdGVtSW5kZXgsIGxhc3RJdGVtSW5kZXgpO1xuICByZXR1cm4ge1xuICAgIHRvdGFsUGFnZUNvdW50LFxuICAgIG5leHRQYWdlOiAoKSA9PiBjaGFuZ2VQYWdlKFwibmV4dFwiKSxcbiAgICBwcmV2UGFnZTogKCkgPT4gY2hhbmdlUGFnZShcInByZXZpb3VzXCIpLFxuICAgIHNldFBhZ2U6IGdvVG9QYWdlLFxuICAgIGZpcnN0SXRlbUluZGV4LFxuICAgIGxhc3RJdGVtSW5kZXgsXG4gICAgdHJhY2tzOiB0cmFja3NPblBhZ2UsXG4gICAgY3VycmVudFBhZ2VcbiAgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVBhcnRpY2lwYW50SW5mby50c1xuaW1wb3J0IHsgcGFydGljaXBhbnRJbmZvT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDI4IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUGFydGljaXBhbnRJbmZvKHByb3BzID0ge30pIHtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KHByb3BzLnBhcnRpY2lwYW50KTtcbiAgY29uc3QgaW5mb09ic2VydmVyID0gUmVhY3QyOC51c2VNZW1vKCgpID0+IHBhcnRpY2lwYW50SW5mb09ic2VydmVyKHApLCBbcF0pO1xuICBjb25zdCB7IGlkZW50aXR5LCBuYW1lLCBtZXRhZGF0YSB9ID0gdXNlT2JzZXJ2YWJsZVN0YXRlKGluZm9PYnNlcnZlciwge1xuICAgIG5hbWU6IHAubmFtZSxcbiAgICBpZGVudGl0eTogcC5pZGVudGl0eSxcbiAgICBtZXRhZGF0YTogcC5tZXRhZGF0YVxuICB9KTtcbiAgcmV0dXJuIHsgaWRlbnRpdHksIG5hbWUsIG1ldGFkYXRhIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VQYXJ0aWNpcGFudFBlcm1pc3Npb25zLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDI5IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIgYXMgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gdXNlUGFydGljaXBhbnRQZXJtaXNzaW9ucyhvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KG9wdGlvbnMucGFydGljaXBhbnQpO1xuICBjb25zdCBwZXJtaXNzaW9uT2JzZXJ2ZXIgPSBSZWFjdDI5LnVzZU1lbW8oKCkgPT4gcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIyKHApLCBbcF0pO1xuICBjb25zdCBwZXJtaXNzaW9ucyA9IHVzZU9ic2VydmFibGVTdGF0ZShwZXJtaXNzaW9uT2JzZXJ2ZXIsIHAucGVybWlzc2lvbnMpO1xuICByZXR1cm4gcGVybWlzc2lvbnM7XG59XG5cbi8vIHNyYy9ob29rcy91c2VQYXJ0aWNpcGFudFRpbGUudHNcbmltcG9ydCB7IHNldHVwUGFydGljaXBhbnRUaWxlIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0IHsgVHJhY2sgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0MzAgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VQYXJ0aWNpcGFudFRpbGUoe1xuICB0cmFja1JlZixcbiAgcGFydGljaXBhbnQsXG4gIHNvdXJjZSxcbiAgcHVibGljYXRpb24sXG4gIG9uUGFydGljaXBhbnRDbGljayxcbiAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yLFxuICBodG1sUHJvcHNcbn0pIHtcbiAgY29uc3QgbWF5YmVUcmFja1JlZiA9IHVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCk7XG4gIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCk7XG4gIGNvbnN0IHRyYWNrUmVmZXJlbmNlID0gUmVhY3QzMC51c2VNZW1vKCgpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICBjb25zdCBfc291cmNlID0gKF9iID0gKF9hID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnNvdXJjZSkgIT0gbnVsbCA/IF9hIDogbWF5YmVUcmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogbWF5YmVUcmFja1JlZi5zb3VyY2UpICE9IG51bGwgPyBfYiA6IHNvdXJjZTtcbiAgICBpZiAoX3NvdXJjZSA9PT0gdm9pZCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiTWlzc2luZyB0cmFjayBgc291cmNlYCwgcHJvdmlkZWQgaXQgdmlhIGB0cmFja1JlZmAsIGBzb3VyY2VgIHByb3BlcnR5IG9yIHZpYSBgVHJhY2tSZWZDb250ZXh0YC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcnRpY2lwYW50OiAoX2QgPSAoX2MgPSB0cmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tSZWYucGFydGljaXBhbnQpICE9IG51bGwgPyBfYyA6IG1heWJlVHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IG1heWJlVHJhY2tSZWYucGFydGljaXBhbnQpICE9IG51bGwgPyBfZCA6IHAsXG4gICAgICBwdWJsaWNhdGlvbjogKF9mID0gKF9lID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2UgOiBtYXliZVRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiBtYXliZVRyYWNrUmVmLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2YgOiBwdWJsaWNhdGlvbixcbiAgICAgIHNvdXJjZTogX3NvdXJjZVxuICAgIH07XG4gIH0sIFtcbiAgICB0cmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tSZWYucGFydGljaXBhbnQsXG4gICAgdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnNvdXJjZSxcbiAgICB0cmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tSZWYucHVibGljYXRpb24sXG4gICAgbWF5YmVUcmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogbWF5YmVUcmFja1JlZi5wYXJ0aWNpcGFudCxcbiAgICBtYXliZVRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiBtYXliZVRyYWNrUmVmLnNvdXJjZSxcbiAgICBtYXliZVRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiBtYXliZVRyYWNrUmVmLnB1YmxpY2F0aW9uLFxuICAgIHAsXG4gICAgc291cmNlLFxuICAgIHB1YmxpY2F0aW9uXG4gIF0pO1xuICBjb25zdCBtZXJnZWRQcm9wcyA9IFJlYWN0MzAudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUgfSA9IHNldHVwUGFydGljaXBhbnRUaWxlKCk7XG4gICAgcmV0dXJuIG1lcmdlUHJvcHMoaHRtbFByb3BzLCB7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBvbkNsaWNrOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgKF9hID0gaHRtbFByb3BzLm9uQ2xpY2spID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKGh0bWxQcm9wcywgZXZlbnQpO1xuICAgICAgICBpZiAodHlwZW9mIG9uUGFydGljaXBhbnRDbGljayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc3QgdHJhY2sgPSAoX2IgPSB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbikgIT0gbnVsbCA/IF9iIDogdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQuZ2V0VHJhY2sodHJhY2tSZWZlcmVuY2Uuc291cmNlKTtcbiAgICAgICAgICBvblBhcnRpY2lwYW50Q2xpY2soeyBwYXJ0aWNpcGFudDogdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQsIHRyYWNrIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtcbiAgICBodG1sUHJvcHMsXG4gICAgb25QYXJ0aWNpcGFudENsaWNrLFxuICAgIHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uLFxuICAgIHRyYWNrUmVmZXJlbmNlLnNvdXJjZSxcbiAgICB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudFxuICBdKTtcbiAgY29uc3QgaXNWaWRlb011dGVkID0gdXNlSXNNdXRlZChUcmFjay5Tb3VyY2UuQ2FtZXJhLCB7IHBhcnRpY2lwYW50OiB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudCB9KTtcbiAgY29uc3QgaXNBdWRpb011dGVkID0gdXNlSXNNdXRlZChUcmFjay5Tb3VyY2UuTWljcm9waG9uZSwge1xuICAgIHBhcnRpY2lwYW50OiB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudFxuICB9KTtcbiAgY29uc3QgaXNTcGVha2luZyA9IHVzZUlzU3BlYWtpbmcodHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQpO1xuICBjb25zdCBmYWNpbmdNb2RlID0gdXNlRmFjaW5nTW9kZSh0cmFja1JlZmVyZW5jZSk7XG4gIHJldHVybiB7XG4gICAgZWxlbWVudFByb3BzOiBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBcImRhdGEtbGstYXVkaW8tbXV0ZWRcIjogaXNBdWRpb011dGVkLFxuICAgICAgXCJkYXRhLWxrLXZpZGVvLW11dGVkXCI6IGlzVmlkZW9NdXRlZCxcbiAgICAgIFwiZGF0YS1say1zcGVha2luZ1wiOiBkaXNhYmxlU3BlYWtpbmdJbmRpY2F0b3IgPT09IHRydWUgPyBmYWxzZSA6IGlzU3BlYWtpbmcsXG4gICAgICBcImRhdGEtbGstbG9jYWwtcGFydGljaXBhbnRcIjogdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQuaXNMb2NhbCxcbiAgICAgIFwiZGF0YS1say1zb3VyY2VcIjogdHJhY2tSZWZlcmVuY2Uuc291cmNlLFxuICAgICAgXCJkYXRhLWxrLWZhY2luZy1tb2RlXCI6IGZhY2luZ01vZGVcbiAgICB9LCBtZXJnZWRQcm9wcylcbiAgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVJlbW90ZVBhcnRpY2lwYW50cy50c1xuaW1wb3J0IHsgY29ubmVjdGVkUGFydGljaXBhbnRzT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDMxIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUmVtb3RlUGFydGljaXBhbnRzKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCByb29tID0gdXNlRW5zdXJlUm9vbShvcHRpb25zLnJvb20pO1xuICBjb25zdCBbcGFydGljaXBhbnRzLCBzZXRQYXJ0aWNpcGFudHNdID0gUmVhY3QzMS51c2VTdGF0ZShbXSk7XG4gIFJlYWN0MzEudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IGNvbm5lY3RlZFBhcnRpY2lwYW50c09ic2VydmVyKHJvb20sIHtcbiAgICAgIGFkZGl0aW9uYWxSb29tRXZlbnRzOiBvcHRpb25zLnVwZGF0ZU9ubHlPblxuICAgIH0pLnN1YnNjcmliZShzZXRQYXJ0aWNpcGFudHMpO1xuICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lci51bnN1YnNjcmliZSgpO1xuICB9LCBbcm9vbSwgSlNPTi5zdHJpbmdpZnkob3B0aW9ucy51cGRhdGVPbmx5T24pXSk7XG4gIHJldHVybiBwYXJ0aWNpcGFudHM7XG59XG5cbi8vIHNyYy9ob29rcy91c2VQYXJ0aWNpcGFudHMudHNcbmZ1bmN0aW9uIHVzZVBhcnRpY2lwYW50cyhvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcmVtb3RlUGFydGljaXBhbnRzID0gdXNlUmVtb3RlUGFydGljaXBhbnRzKG9wdGlvbnMpO1xuICBjb25zdCB7IGxvY2FsUGFydGljaXBhbnQgfSA9IHVzZUxvY2FsUGFydGljaXBhbnQob3B0aW9ucyk7XG4gIHJldHVybiBbbG9jYWxQYXJ0aWNpcGFudCwgLi4ucmVtb3RlUGFydGljaXBhbnRzXTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVBpbm5lZFRyYWNrcy50c1xuaW1wb3J0ICogYXMgUmVhY3QzMiBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVBpbm5lZFRyYWNrcyhsYXlvdXRDb250ZXh0KSB7XG4gIGxheW91dENvbnRleHQgPSB1c2VFbnN1cmVMYXlvdXRDb250ZXh0KGxheW91dENvbnRleHQpO1xuICByZXR1cm4gUmVhY3QzMi51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoKGxheW91dENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dENvbnRleHQucGluLnN0YXRlKSAhPT0gdm9pZCAwICYmIGxheW91dENvbnRleHQucGluLnN0YXRlLmxlbmd0aCA+PSAxKSB7XG4gICAgICByZXR1cm4gbGF5b3V0Q29udGV4dC5waW4uc3RhdGU7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfSwgW2xheW91dENvbnRleHQucGluLnN0YXRlXSk7XG59XG5cbi8vIHNyYy9ob29rcy91c2VSZW1vdGVQYXJ0aWNpcGFudC50c1xuaW1wb3J0IHsgY29ubmVjdGVkUGFydGljaXBhbnRPYnNlcnZlciB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MzMgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VSZW1vdGVQYXJ0aWNpcGFudChpZGVudGl0eSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHJvb20gPSB1c2VSb29tQ29udGV4dCgpO1xuICBjb25zdCBbdXBkYXRlT25seU9uXSA9IFJlYWN0MzMudXNlU3RhdGUob3B0aW9ucy51cGRhdGVPbmx5T24pO1xuICBjb25zdCBvYnNlcnZhYmxlID0gUmVhY3QzMy51c2VNZW1vKFxuICAgICgpID0+IGNvbm5lY3RlZFBhcnRpY2lwYW50T2JzZXJ2ZXIocm9vbSwgaWRlbnRpdHksIHsgYWRkaXRpb25hbEV2ZW50czogdXBkYXRlT25seU9uIH0pLFxuICAgIFtyb29tLCBpZGVudGl0eSwgdXBkYXRlT25seU9uXVxuICApO1xuICBjb25zdCBwYXJ0aWNpcGFudCA9IHVzZU9ic2VydmFibGVTdGF0ZShcbiAgICBvYnNlcnZhYmxlLFxuICAgIHJvb20uZ2V0UGFydGljaXBhbnRCeUlkZW50aXR5KGlkZW50aXR5KVxuICApO1xuICByZXR1cm4gcGFydGljaXBhbnQ7XG59XG5cbi8vIHNyYy9ob29rcy91c2VSb29tSW5mby50c1xuaW1wb3J0IHsgcm9vbUluZm9PYnNlcnZlciB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MzQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VSb29tSW5mbyhvcHRpb25zID0ge30pIHtcbiAgY29uc3Qgcm9vbSA9IHVzZUVuc3VyZVJvb20ob3B0aW9ucy5yb29tKTtcbiAgY29uc3QgaW5mb09ic2VydmVyID0gUmVhY3QzNC51c2VNZW1vKCgpID0+IHJvb21JbmZvT2JzZXJ2ZXIocm9vbSksIFtyb29tXSk7XG4gIGNvbnN0IHsgbmFtZSwgbWV0YWRhdGEgfSA9IHVzZU9ic2VydmFibGVTdGF0ZShpbmZvT2JzZXJ2ZXIsIHtcbiAgICBuYW1lOiByb29tLm5hbWUsXG4gICAgbWV0YWRhdGE6IHJvb20ubWV0YWRhdGFcbiAgfSk7XG4gIHJldHVybiB7IG5hbWUsIG1ldGFkYXRhIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VTb3J0ZWRQYXJ0aWNpcGFudHMudHNcbmltcG9ydCB7IHNvcnRQYXJ0aWNpcGFudHMgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDM2IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvaG9va3MvdXNlU3BlYWtpbmdQYXJ0aWNpcGFudHMudHNcbmltcG9ydCB7IGFjdGl2ZVNwZWFrZXJPYnNlcnZlciB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MzUgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VTcGVha2luZ1BhcnRpY2lwYW50cygpIHtcbiAgY29uc3Qgcm9vbSA9IHVzZVJvb21Db250ZXh0KCk7XG4gIGNvbnN0IHNwZWFrZXJPYnNlcnZlciA9IFJlYWN0MzUudXNlTWVtbygoKSA9PiBhY3RpdmVTcGVha2VyT2JzZXJ2ZXIocm9vbSksIFtyb29tXSk7XG4gIGNvbnN0IGFjdGl2ZVNwZWFrZXJzID0gdXNlT2JzZXJ2YWJsZVN0YXRlKHNwZWFrZXJPYnNlcnZlciwgcm9vbS5hY3RpdmVTcGVha2Vycyk7XG4gIHJldHVybiBhY3RpdmVTcGVha2Vycztcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVNvcnRlZFBhcnRpY2lwYW50cy50c1xuZnVuY3Rpb24gdXNlU29ydGVkUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cykge1xuICBjb25zdCBbc29ydGVkUGFydGljaXBhbnRzLCBzZXRTb3J0ZWRQYXJ0aWNpcGFudHNdID0gUmVhY3QzNi51c2VTdGF0ZShcbiAgICBzb3J0UGFydGljaXBhbnRzKHBhcnRpY2lwYW50cylcbiAgKTtcbiAgY29uc3QgYWN0aXZlU3BlYWtlcnMgPSB1c2VTcGVha2luZ1BhcnRpY2lwYW50cygpO1xuICBSZWFjdDM2LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0U29ydGVkUGFydGljaXBhbnRzKHNvcnRQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKSk7XG4gIH0sIFthY3RpdmVTcGVha2VycywgcGFydGljaXBhbnRzXSk7XG4gIHJldHVybiBzb3J0ZWRQYXJ0aWNpcGFudHM7XG59XG5cbi8vIHNyYy9ob29rcy91c2VTdGFydEF1ZGlvLnRzXG5pbXBvcnQgeyBzZXR1cFN0YXJ0QXVkaW8gfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDM3IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlU3RhcnRBdWRpbyh7IHJvb20sIHByb3BzIH0pIHtcbiAgY29uc3Qgcm9vbUVuc3VyZWQgPSB1c2VFbnN1cmVSb29tKHJvb20pO1xuICBjb25zdCB7IGNsYXNzTmFtZSwgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZTogcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZTIsIGhhbmRsZVN0YXJ0QXVkaW9QbGF5YmFjayB9ID0gUmVhY3QzNy51c2VNZW1vKFxuICAgICgpID0+IHNldHVwU3RhcnRBdWRpbygpLFxuICAgIFtdXG4gICk7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBSZWFjdDM3LnVzZU1lbW8oXG4gICAgKCkgPT4gcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZTIocm9vbUVuc3VyZWQpLFxuICAgIFtyb29tRW5zdXJlZCwgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZTJdXG4gICk7XG4gIGNvbnN0IHsgY2FuUGxheUF1ZGlvIH0gPSB1c2VPYnNlcnZhYmxlU3RhdGUob2JzZXJ2YWJsZSwge1xuICAgIGNhblBsYXlBdWRpbzogcm9vbUVuc3VyZWQuY2FuUGxheWJhY2tBdWRpb1xuICB9KTtcbiAgY29uc3QgbWVyZ2VkUHJvcHMgPSBSZWFjdDM3LnVzZU1lbW8oXG4gICAgKCkgPT4gbWVyZ2VQcm9wcyhwcm9wcywge1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBoYW5kbGVTdGFydEF1ZGlvUGxheWJhY2socm9vbUVuc3VyZWQpO1xuICAgICAgfSxcbiAgICAgIHN0eWxlOiB7IGRpc3BsYXk6IGNhblBsYXlBdWRpbyA/IFwibm9uZVwiIDogXCJibG9ja1wiIH1cbiAgICB9KSxcbiAgICBbcHJvcHMsIGNsYXNzTmFtZSwgY2FuUGxheUF1ZGlvLCBoYW5kbGVTdGFydEF1ZGlvUGxheWJhY2ssIHJvb21FbnN1cmVkXVxuICApO1xuICByZXR1cm4geyBtZXJnZWRQcm9wcywgY2FuUGxheUF1ZGlvIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VTdGFydFZpZGVvLnRzXG5pbXBvcnQgeyBzZXR1cFN0YXJ0VmlkZW8gfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDM4IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlU3RhcnRWaWRlbyh7IHJvb20sIHByb3BzIH0pIHtcbiAgY29uc3Qgcm9vbUVuc3VyZWQgPSB1c2VFbnN1cmVSb29tKHJvb20pO1xuICBjb25zdCB7IGNsYXNzTmFtZSwgcm9vbVZpZGVvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZSwgaGFuZGxlU3RhcnRWaWRlb1BsYXliYWNrIH0gPSBSZWFjdDM4LnVzZU1lbW8oXG4gICAgKCkgPT4gc2V0dXBTdGFydFZpZGVvKCksXG4gICAgW11cbiAgKTtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IFJlYWN0MzgudXNlTWVtbyhcbiAgICAoKSA9PiByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlKHJvb21FbnN1cmVkKSxcbiAgICBbcm9vbUVuc3VyZWQsIHJvb21WaWRlb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGVdXG4gICk7XG4gIGNvbnN0IHsgY2FuUGxheVZpZGVvIH0gPSB1c2VPYnNlcnZhYmxlU3RhdGUob2JzZXJ2YWJsZSwge1xuICAgIGNhblBsYXlWaWRlbzogcm9vbUVuc3VyZWQuY2FuUGxheWJhY2tWaWRlb1xuICB9KTtcbiAgY29uc3QgbWVyZ2VkUHJvcHMgPSBSZWFjdDM4LnVzZU1lbW8oXG4gICAgKCkgPT4gbWVyZ2VQcm9wcyhwcm9wcywge1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBoYW5kbGVTdGFydFZpZGVvUGxheWJhY2socm9vbUVuc3VyZWQpO1xuICAgICAgfSxcbiAgICAgIHN0eWxlOiB7IGRpc3BsYXk6IGNhblBsYXlWaWRlbyA/IFwibm9uZVwiIDogXCJibG9ja1wiIH1cbiAgICB9KSxcbiAgICBbcHJvcHMsIGNsYXNzTmFtZSwgY2FuUGxheVZpZGVvLCBoYW5kbGVTdGFydFZpZGVvUGxheWJhY2ssIHJvb21FbnN1cmVkXVxuICApO1xuICByZXR1cm4geyBtZXJnZWRQcm9wcywgY2FuUGxheVZpZGVvIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VTd2lwZS50c1xuaW1wb3J0ICogYXMgUmVhY3QzOSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVN3aXBlKGVsZW1lbnQsIG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IHRvdWNoU3RhcnQgPSBSZWFjdDM5LnVzZVJlZihudWxsKTtcbiAgY29uc3QgdG91Y2hFbmQgPSBSZWFjdDM5LnVzZVJlZihudWxsKTtcbiAgY29uc3QgbWluU3dpcGVEaXN0YW5jZSA9IChfYSA9IG9wdGlvbnMubWluU3dpcGVEaXN0YW5jZSkgIT0gbnVsbCA/IF9hIDogNTA7XG4gIGNvbnN0IG9uVG91Y2hTdGFydCA9IChldmVudCkgPT4ge1xuICAgIHRvdWNoRW5kLmN1cnJlbnQgPSBudWxsO1xuICAgIHRvdWNoU3RhcnQuY3VycmVudCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgfTtcbiAgY29uc3Qgb25Ub3VjaE1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICB0b3VjaEVuZC5jdXJyZW50ID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYO1xuICB9O1xuICBjb25zdCBvblRvdWNoRW5kID0gUmVhY3QzOS51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCF0b3VjaFN0YXJ0LmN1cnJlbnQgfHwgIXRvdWNoRW5kLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGlzdGFuY2UgPSB0b3VjaFN0YXJ0LmN1cnJlbnQgLSB0b3VjaEVuZC5jdXJyZW50O1xuICAgIGNvbnN0IGlzTGVmdFN3aXBlID0gZGlzdGFuY2UgPiBtaW5Td2lwZURpc3RhbmNlO1xuICAgIGNvbnN0IGlzUmlnaHRTd2lwZSA9IGRpc3RhbmNlIDwgLW1pblN3aXBlRGlzdGFuY2U7XG4gICAgaWYgKGlzTGVmdFN3aXBlICYmIG9wdGlvbnMub25MZWZ0U3dpcGUpXG4gICAgICBvcHRpb25zLm9uTGVmdFN3aXBlKCk7XG4gICAgaWYgKGlzUmlnaHRTd2lwZSAmJiBvcHRpb25zLm9uUmlnaHRTd2lwZSlcbiAgICAgIG9wdGlvbnMub25SaWdodFN3aXBlKCk7XG4gIH0sIFttaW5Td2lwZURpc3RhbmNlLCBvcHRpb25zXSk7XG4gIFJlYWN0MzkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbGVtZW50Q29weSA9IGVsZW1lbnQuY3VycmVudDtcbiAgICBpZiAoZWxlbWVudENvcHkpIHtcbiAgICAgIGVsZW1lbnRDb3B5LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIG9uVG91Y2hTdGFydCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgZWxlbWVudENvcHkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvblRvdWNoTW92ZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgZWxlbWVudENvcHkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIG9uVG91Y2hFbmQsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChlbGVtZW50Q29weSkge1xuICAgICAgICBlbGVtZW50Q29weS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBvblRvdWNoU3RhcnQpO1xuICAgICAgICBlbGVtZW50Q29weS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG9uVG91Y2hNb3ZlKTtcbiAgICAgICAgZWxlbWVudENvcHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIG9uVG91Y2hFbmQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtlbGVtZW50LCBvblRvdWNoRW5kXSk7XG59XG5cbi8vIHNyYy9ob29rcy91c2VDaGF0VG9nZ2xlLnRzXG5pbXBvcnQgeyBzZXR1cENoYXRUb2dnbGUgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDQwIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlQ2hhdFRvZ2dsZSh7IHByb3BzIH0pIHtcbiAgY29uc3QgeyBkaXNwYXRjaCwgc3RhdGUgfSA9IHVzZUxheW91dENvbnRleHQoKS53aWRnZXQ7XG4gIGNvbnN0IHsgY2xhc3NOYW1lIH0gPSBSZWFjdDQwLnVzZU1lbW8oKCkgPT4gc2V0dXBDaGF0VG9nZ2xlKCksIFtdKTtcbiAgY29uc3QgbWVyZ2VkUHJvcHMgPSBSZWFjdDQwLnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBtZXJnZVByb3BzKHByb3BzLCB7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICBkaXNwYXRjaCh7IG1zZzogXCJ0b2dnbGVfY2hhdFwiIH0pO1xuICAgICAgfSxcbiAgICAgIFwiYXJpYS1wcmVzc2VkXCI6IChzdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogc3RhdGUuc2hvd0NoYXQpID8gXCJ0cnVlXCIgOiBcImZhbHNlXCIsXG4gICAgICBcImRhdGEtbGstdW5yZWFkLW1zZ3NcIjogc3RhdGUgPyBzdGF0ZS51bnJlYWRNZXNzYWdlcyA8IDEwID8gc3RhdGUudW5yZWFkTWVzc2FnZXMudG9GaXhlZCgwKSA6IFwiOStcIiA6IFwiMFwiXG4gICAgfSk7XG4gIH0sIFtwcm9wcywgY2xhc3NOYW1lLCBkaXNwYXRjaCwgc3RhdGVdKTtcbiAgcmV0dXJuIHsgbWVyZ2VkUHJvcHMgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVRva2VuLnRzXG5pbXBvcnQgeyBsb2cgYXMgbG9nNiB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NDEgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VUb2tlbih0b2tlbkVuZHBvaW50LCByb29tTmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IFt0b2tlbiwgc2V0VG9rZW5dID0gUmVhY3Q0MS51c2VTdGF0ZSh2b2lkIDApO1xuICBSZWFjdDQxLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGlmICh0b2tlbkVuZHBvaW50ID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93IEVycm9yKFwidG9rZW4gZW5kcG9pbnQgbmVlZHMgdG8gYmUgZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgaWYgKCgoX2EgPSBvcHRpb25zLnVzZXJJbmZvKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaWRlbnRpdHkpID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9rZW5GZXRjaGVyID0gKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgbG9nNi5kZWJ1ZyhcImZldGNoaW5nIHRva2VuXCIpO1xuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zLnVzZXJJbmZvKSwgeyByb29tTmFtZSB9KSk7XG4gICAgICBjb25zdCByZXMgPSB5aWVsZCBmZXRjaChgJHt0b2tlbkVuZHBvaW50fT8ke3BhcmFtcy50b1N0cmluZygpfWApO1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgbG9nNi5lcnJvcihcbiAgICAgICAgICBgQ291bGQgbm90IGZldGNoIHRva2VuLiBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7cmVzLnN0YXR1c306ICR7cmVzLnN0YXR1c1RleHR9YFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGFjY2Vzc1Rva2VuIH0gPSB5aWVsZCByZXMuanNvbigpO1xuICAgICAgc2V0VG9rZW4oYWNjZXNzVG9rZW4pO1xuICAgIH0pO1xuICAgIHRva2VuRmV0Y2hlcigpO1xuICB9LCBbdG9rZW5FbmRwb2ludCwgcm9vbU5hbWUsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXSk7XG4gIHJldHVybiB0b2tlbjtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVRyYWNrTXV0ZWRJbmRpY2F0b3IudHNcbmltcG9ydCB7XG4gIHNldHVwVHJhY2tNdXRlZEluZGljYXRvcixcbiAgZ2V0VHJhY2tSZWZlcmVuY2VJZCBhcyBnZXRUcmFja1JlZmVyZW5jZUlkMlxufSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDQyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlVHJhY2tNdXRlZEluZGljYXRvcih0cmFja1JlZk9yU291cmNlLCBvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICBsZXQgcmVmID0gdXNlTWF5YmVUcmFja1JlZkNvbnRleHQoKTtcbiAgY29uc3QgcCA9IChfYiA9IChfYSA9IHVzZU1heWJlUGFydGljaXBhbnRDb250ZXh0KCkpICE9IG51bGwgPyBfYSA6IG9wdGlvbnMucGFydGljaXBhbnQpICE9IG51bGwgPyBfYiA6IHJlZiA9PSBudWxsID8gdm9pZCAwIDogcmVmLnBhcnRpY2lwYW50O1xuICBpZiAodHlwZW9mIHRyYWNrUmVmT3JTb3VyY2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoIXApIHtcbiAgICAgIHRocm93IEVycm9yKGBQYXJ0aWNpcGFudCBtaXNzaW5nLCBlaXRoZXIgcHJvdmlkZSBpdCB2aWEgY29udGV4dCBvciBwYXNzIGl0IGluIGRpcmVjdGx5YCk7XG4gICAgfVxuICAgIHJlZiA9IHsgcGFydGljaXBhbnQ6IHAsIHNvdXJjZTogdHJhY2tSZWZPclNvdXJjZSB9O1xuICB9IGVsc2UgaWYgKHRyYWNrUmVmT3JTb3VyY2UpIHtcbiAgICByZWYgPSB0cmFja1JlZk9yU291cmNlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IEVycm9yKGBObyB0cmFjayByZWZlcmVuY2UgZm91bmQsIGVpdGhlciBwcm92aWRlIGl0IHZpYSBjb250ZXh0IG9yIHBhc3MgaXQgaW4gZGlyZWN0bHlgKTtcbiAgfVxuICBjb25zdCB7IGNsYXNzTmFtZSwgbWVkaWFNdXRlZE9ic2VydmVyIH0gPSBSZWFjdDQyLnVzZU1lbW8oXG4gICAgKCkgPT4gc2V0dXBUcmFja011dGVkSW5kaWNhdG9yKHJlZiksXG4gICAgW2dldFRyYWNrUmVmZXJlbmNlSWQyKHJlZildXG4gICk7XG4gIGNvbnN0IGlzTXV0ZWQgPSB1c2VPYnNlcnZhYmxlU3RhdGUoXG4gICAgbWVkaWFNdXRlZE9ic2VydmVyLFxuICAgICEhKCgoX2MgPSByZWYucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYy5pc011dGVkKSB8fCAoKF9kID0gcmVmLnBhcnRpY2lwYW50LmdldFRyYWNrKHJlZi5zb3VyY2UpKSA9PSBudWxsID8gdm9pZCAwIDogX2QuaXNNdXRlZCkpXG4gICk7XG4gIHJldHVybiB7IGlzTXV0ZWQsIGNsYXNzTmFtZSB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlVHJhY2tUb2dnbGUudHNcbmltcG9ydCB7IHNldHVwTWVkaWFUb2dnbGUsIHNldHVwTWFudWFsVG9nZ2xlLCBsb2cgYXMgbG9nNyB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NDMgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VUcmFja1RvZ2dsZShfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHNvdXJjZSxcbiAgICBvbkNoYW5nZSxcbiAgICBpbml0aWFsU3RhdGUsXG4gICAgY2FwdHVyZU9wdGlvbnNcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJzb3VyY2VcIixcbiAgICBcIm9uQ2hhbmdlXCIsXG4gICAgXCJpbml0aWFsU3RhdGVcIixcbiAgICBcImNhcHR1cmVPcHRpb25zXCJcbiAgXSk7XG4gIHZhciBfYTI7XG4gIGNvbnN0IHJvb20gPSB1c2VNYXliZVJvb21Db250ZXh0KCk7XG4gIGNvbnN0IHRyYWNrID0gKF9hMiA9IHJvb20gPT0gbnVsbCA/IHZvaWQgMCA6IHJvb20ubG9jYWxQYXJ0aWNpcGFudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5nZXRUcmFjayhzb3VyY2UpO1xuICBjb25zdCB1c2VySW50ZXJhY3Rpb25SZWYgPSBSZWFjdDQzLnVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IHsgdG9nZ2xlLCBjbGFzc05hbWUsIHBlbmRpbmdPYnNlcnZlciwgZW5hYmxlZE9ic2VydmVyIH0gPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gcm9vbSA/IHNldHVwTWVkaWFUb2dnbGUoc291cmNlLCByb29tLCBjYXB0dXJlT3B0aW9ucykgOiBzZXR1cE1hbnVhbFRvZ2dsZSgpLFxuICAgIFtyb29tLCBzb3VyY2UsIEpTT04uc3RyaW5naWZ5KGNhcHR1cmVPcHRpb25zKV1cbiAgKTtcbiAgY29uc3QgcGVuZGluZyA9IHVzZU9ic2VydmFibGVTdGF0ZShwZW5kaW5nT2JzZXJ2ZXIsIGZhbHNlKTtcbiAgY29uc3QgZW5hYmxlZCA9IHVzZU9ic2VydmFibGVTdGF0ZShlbmFibGVkT2JzZXJ2ZXIsIGluaXRpYWxTdGF0ZSAhPSBudWxsID8gaW5pdGlhbFN0YXRlIDogISEodHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrLmlzRW5hYmxlZCkpO1xuICBSZWFjdDQzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgb25DaGFuZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG9uQ2hhbmdlKGVuYWJsZWQsIHVzZXJJbnRlcmFjdGlvblJlZi5jdXJyZW50KTtcbiAgICB1c2VySW50ZXJhY3Rpb25SZWYuY3VycmVudCA9IGZhbHNlO1xuICB9LCBbZW5hYmxlZCwgb25DaGFuZ2VdKTtcbiAgUmVhY3Q0My51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpbml0aWFsU3RhdGUgIT09IHZvaWQgMCkge1xuICAgICAgbG9nNy5kZWJ1ZyhcImZvcmNpbmcgaW5pdGlhbCB0b2dnbGUgc3RhdGVcIiwgc291cmNlLCBpbml0aWFsU3RhdGUpO1xuICAgICAgdG9nZ2xlKGluaXRpYWxTdGF0ZSk7XG4gICAgfVxuICB9LCBbXSk7XG4gIGNvbnN0IG5ld1Byb3BzID0gUmVhY3Q0My51c2VNZW1vKCgpID0+IG1lcmdlUHJvcHMocmVzdCwgeyBjbGFzc05hbWUgfSksIFtyZXN0LCBjbGFzc05hbWVdKTtcbiAgY29uc3QgY2xpY2tIYW5kbGVyID0gUmVhY3Q0My51c2VDYWxsYmFjayhcbiAgICAoZXZ0KSA9PiB7XG4gICAgICB2YXIgX2EzO1xuICAgICAgdXNlckludGVyYWN0aW9uUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgdG9nZ2xlKCkuZmluYWxseSgoKSA9PiB1c2VySW50ZXJhY3Rpb25SZWYuY3VycmVudCA9IGZhbHNlKTtcbiAgICAgIChfYTMgPSByZXN0Lm9uQ2xpY2spID09IG51bGwgPyB2b2lkIDAgOiBfYTMuY2FsbChyZXN0LCBldnQpO1xuICAgIH0sXG4gICAgW3Jlc3QsIHRvZ2dsZV1cbiAgKTtcbiAgcmV0dXJuIHtcbiAgICB0b2dnbGUsXG4gICAgZW5hYmxlZCxcbiAgICBwZW5kaW5nLFxuICAgIHRyYWNrLFxuICAgIGJ1dHRvblByb3BzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBuZXdQcm9wcyksIHtcbiAgICAgIFwiYXJpYS1wcmVzc2VkXCI6IGVuYWJsZWQsXG4gICAgICBcImRhdGEtbGstc291cmNlXCI6IHNvdXJjZSxcbiAgICAgIFwiZGF0YS1say1lbmFibGVkXCI6IGVuYWJsZWQsXG4gICAgICBkaXNhYmxlZDogcGVuZGluZyxcbiAgICAgIG9uQ2xpY2s6IGNsaWNrSGFuZGxlclxuICAgIH0pXG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VUcmFja3MudHNcbmltcG9ydCB7XG4gIGlzU291cmNlc1dpdGhPcHRpb25zLFxuICBpc1NvdXJjZVdpdE9wdGlvbnMsXG4gIGxvZyBhcyBsb2c4LFxuICB0cmFja1JlZmVyZW5jZXNPYnNlcnZhYmxlXG59IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCB7IFRyYWNrIGFzIFRyYWNrMiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUmVhY3Q0NCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVRyYWNrcyhzb3VyY2VzID0gW1xuICBUcmFjazIuU291cmNlLkNhbWVyYSxcbiAgVHJhY2syLlNvdXJjZS5NaWNyb3Bob25lLFxuICBUcmFjazIuU291cmNlLlNjcmVlblNoYXJlLFxuICBUcmFjazIuU291cmNlLlNjcmVlblNoYXJlQXVkaW8sXG4gIFRyYWNrMi5Tb3VyY2UuVW5rbm93blxuXSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHJvb20gPSB1c2VFbnN1cmVSb29tKG9wdGlvbnMucm9vbSk7XG4gIGNvbnN0IFt0cmFja1JlZmVyZW5jZXMsIHNldFRyYWNrUmVmZXJlbmNlc10gPSBSZWFjdDQ0LnVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BhcnRpY2lwYW50cywgc2V0UGFydGljaXBhbnRzXSA9IFJlYWN0NDQudXNlU3RhdGUoW10pO1xuICBjb25zdCBzb3VyY2VzXyA9IFJlYWN0NDQudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNvdXJjZXMubWFwKChzKSA9PiBpc1NvdXJjZVdpdE9wdGlvbnMocykgPyBzLnNvdXJjZSA6IHMpO1xuICB9LCBbSlNPTi5zdHJpbmdpZnkoc291cmNlcyldKTtcbiAgUmVhY3Q0NC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRyYWNrUmVmZXJlbmNlc09ic2VydmFibGUocm9vbSwgc291cmNlc18sIHtcbiAgICAgIGFkZGl0aW9uYWxSb29tRXZlbnRzOiBvcHRpb25zLnVwZGF0ZU9ubHlPbixcbiAgICAgIG9ubHlTdWJzY3JpYmVkOiBvcHRpb25zLm9ubHlTdWJzY3JpYmVkXG4gICAgfSkuc3Vic2NyaWJlKCh7IHRyYWNrUmVmZXJlbmNlczogdHJhY2tSZWZlcmVuY2VzMiwgcGFydGljaXBhbnRzOiBwYXJ0aWNpcGFudHMyIH0pID0+IHtcbiAgICAgIGxvZzguZGVidWcoXCJzZXR0aW5nIHRyYWNrIGJ1bmRsZXNcIiwgdHJhY2tSZWZlcmVuY2VzMiwgcGFydGljaXBhbnRzMik7XG4gICAgICBzZXRUcmFja1JlZmVyZW5jZXModHJhY2tSZWZlcmVuY2VzMik7XG4gICAgICBzZXRQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzMik7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9LCBbcm9vbSwgSlNPTi5zdHJpbmdpZnkob3B0aW9ucy51cGRhdGVPbmx5T24pLCBKU09OLnN0cmluZ2lmeShzb3VyY2VzKV0pO1xuICBjb25zdCBtYXliZVRyYWNrUmVmZXJlbmNlcyA9IFJlYWN0NDQudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGlzU291cmNlc1dpdGhPcHRpb25zKHNvdXJjZXMpKSB7XG4gICAgICBjb25zdCByZXF1aXJlUGxhY2Vob2xkZXIgPSByZXF1aXJlZFBsYWNlaG9sZGVycyhzb3VyY2VzLCBwYXJ0aWNpcGFudHMpO1xuICAgICAgY29uc3QgdHJhY2tSZWZlcmVuY2VzV2l0aFBsYWNlaG9sZGVycyA9IEFycmF5LmZyb20odHJhY2tSZWZlcmVuY2VzKTtcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChyZXF1aXJlUGxhY2Vob2xkZXIuaGFzKHBhcnRpY2lwYW50LmlkZW50aXR5KSkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZXNUb0FkZFBsYWNlaG9sZGVyID0gKF9hID0gcmVxdWlyZVBsYWNlaG9sZGVyLmdldChwYXJ0aWNpcGFudC5pZGVudGl0eSkpICE9IG51bGwgPyBfYSA6IFtdO1xuICAgICAgICAgIHNvdXJjZXNUb0FkZFBsYWNlaG9sZGVyLmZvckVhY2goKHBsYWNlaG9sZGVyU291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAodHJhY2tSZWZlcmVuY2VzLmZpbmQoXG4gICAgICAgICAgICAgICh7IHBhcnRpY2lwYW50OiBwLCBwdWJsaWNhdGlvbiB9KSA9PiBwYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gcC5pZGVudGl0eSAmJiBwdWJsaWNhdGlvbi5zb3VyY2UgPT09IHBsYWNlaG9sZGVyU291cmNlXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZzguZGVidWcoXG4gICAgICAgICAgICAgIGBBZGQgJHtwbGFjZWhvbGRlclNvdXJjZX0gcGxhY2Vob2xkZXIgZm9yIHBhcnRpY2lwYW50ICR7cGFydGljaXBhbnQuaWRlbnRpdHl9LmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHtcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQsXG4gICAgICAgICAgICAgIHNvdXJjZTogcGxhY2Vob2xkZXJTb3VyY2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cmFja1JlZmVyZW5jZXNXaXRoUGxhY2Vob2xkZXJzLnB1c2gocGxhY2Vob2xkZXIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cmFja1JlZmVyZW5jZXNXaXRoUGxhY2Vob2xkZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJhY2tSZWZlcmVuY2VzO1xuICAgIH1cbiAgfSwgW3RyYWNrUmVmZXJlbmNlcywgcGFydGljaXBhbnRzLCBzb3VyY2VzXSk7XG4gIHJldHVybiBtYXliZVRyYWNrUmVmZXJlbmNlcztcbn1cbmZ1bmN0aW9uIGRpZmZlcmVuY2Uoc2V0QSwgc2V0Qikge1xuICBjb25zdCBfZGlmZmVyZW5jZSA9IG5ldyBTZXQoc2V0QSk7XG4gIGZvciAoY29uc3QgZWxlbSBvZiBzZXRCKSB7XG4gICAgX2RpZmZlcmVuY2UuZGVsZXRlKGVsZW0pO1xuICB9XG4gIHJldHVybiBfZGlmZmVyZW5jZTtcbn1cbmZ1bmN0aW9uIHJlcXVpcmVkUGxhY2Vob2xkZXJzKHNvdXJjZXMsIHBhcnRpY2lwYW50cykge1xuICBjb25zdCBwbGFjZWhvbGRlck1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGlmIChpc1NvdXJjZXNXaXRoT3B0aW9ucyhzb3VyY2VzKSkge1xuICAgIGNvbnN0IHNvdXJjZXNUaGF0TmVlZFBsYWNlaG9sZGVyID0gc291cmNlcy5maWx0ZXIoKHNvdXJjZVdpdGhPcHRpb24pID0+IHNvdXJjZVdpdGhPcHRpb24ud2l0aFBsYWNlaG9sZGVyKS5tYXAoKHNvdXJjZVdpdGhPcHRpb24pID0+IHNvdXJjZVdpdGhPcHRpb24uc291cmNlKTtcbiAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaCgocGFydGljaXBhbnQpID0+IHtcbiAgICAgIGNvbnN0IHNvdXJjZXNPZlN1YnNjcmliZWRUcmFja3MgPSBwYXJ0aWNpcGFudC5nZXRUcmFja3MoKS5tYXAoKHB1YikgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSBwdWIudHJhY2spID09IG51bGwgPyB2b2lkIDAgOiBfYS5zb3VyY2U7XG4gICAgICB9KS5maWx0ZXIoKHRyYWNrU291cmNlKSA9PiB0cmFja1NvdXJjZSAhPT0gdm9pZCAwKTtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyTmVlZGVkRm9yVGhpc1BhcnRpY2lwYW50ID0gQXJyYXkuZnJvbShcbiAgICAgICAgZGlmZmVyZW5jZShuZXcgU2V0KHNvdXJjZXNUaGF0TmVlZFBsYWNlaG9sZGVyKSwgbmV3IFNldChzb3VyY2VzT2ZTdWJzY3JpYmVkVHJhY2tzKSlcbiAgICAgICk7XG4gICAgICBpZiAocGxhY2Vob2xkZXJOZWVkZWRGb3JUaGlzUGFydGljaXBhbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBwbGFjZWhvbGRlck1hcC5zZXQocGFydGljaXBhbnQuaWRlbnRpdHksIHBsYWNlaG9sZGVyTmVlZGVkRm9yVGhpc1BhcnRpY2lwYW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcGxhY2Vob2xkZXJNYXA7XG59XG5cbi8vIHNyYy9ob29rcy91c2VUcmFjay50c1xuZnVuY3Rpb24gdXNlVHJhY2sodHJhY2tSZWYsIG9wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gdXNlTWVkaWFUcmFja0J5U291cmNlT3JOYW1lKHRyYWNrUmVmLCBvcHRpb25zKTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVRyYWNrQnlOYW1lLnRzXG5mdW5jdGlvbiB1c2VUcmFja0J5TmFtZSh0cmFja1JlZiwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHJlZiA9IHVzZUVuc3VyZVRyYWNrUmVmKHRyYWNrUmVmKTtcbiAgcmV0dXJuIHVzZU1lZGlhVHJhY2tCeVNvdXJjZU9yTmFtZShyZWYsIG9wdGlvbnMpO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlQ2hhdC50c1xuaW1wb3J0IHsgc2V0dXBDaGF0IH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q0NSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUNoYXQob3B0aW9ucykge1xuICBjb25zdCByb29tID0gdXNlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgW3NldHVwLCBzZXRTZXR1cF0gPSBSZWFjdDQ1LnVzZVN0YXRlKCk7XG4gIGNvbnN0IGlzU2VuZGluZyA9IHVzZU9ic2VydmFibGVTdGF0ZShzZXR1cCA9PSBudWxsID8gdm9pZCAwIDogc2V0dXAuaXNTZW5kaW5nT2JzZXJ2YWJsZSwgZmFsc2UpO1xuICBjb25zdCBjaGF0TWVzc2FnZXMgPSB1c2VPYnNlcnZhYmxlU3RhdGUoc2V0dXAgPT0gbnVsbCA/IHZvaWQgMCA6IHNldHVwLm1lc3NhZ2VPYnNlcnZhYmxlLCBbXSk7XG4gIFJlYWN0NDUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzZXR1cENoYXRSZXR1cm4gPSBzZXR1cENoYXQocm9vbSwgb3B0aW9ucyk7XG4gICAgc2V0U2V0dXAoc2V0dXBDaGF0UmV0dXJuKTtcbiAgfSwgW3Jvb20sIG9wdGlvbnNdKTtcbiAgcmV0dXJuIHsgc2VuZDogc2V0dXAgPT0gbnVsbCA/IHZvaWQgMCA6IHNldHVwLnNlbmQsIHVwZGF0ZTogc2V0dXAgPT0gbnVsbCA/IHZvaWQgMCA6IHNldHVwLnVwZGF0ZSwgY2hhdE1lc3NhZ2VzLCBpc1NlbmRpbmcgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVBlcnNpc3RlbnRVc2VyQ2hvaWNlcy50c1xuaW1wb3J0IHsgbG9hZFVzZXJDaG9pY2VzLCBzYXZlVXNlckNob2ljZXMgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDQ2IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUGVyc2lzdGVudFVzZXJDaG9pY2VzKG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IFt1c2VyQ2hvaWNlcywgc2V0U2V0dGluZ3NdID0gUmVhY3Q0Ni51c2VTdGF0ZShcbiAgICBsb2FkVXNlckNob2ljZXMob3B0aW9ucy5kZWZhdWx0cywgKF9hID0gb3B0aW9ucy5wcmV2ZW50TG9hZCkgIT0gbnVsbCA/IF9hIDogZmFsc2UpXG4gICk7XG4gIGNvbnN0IHNhdmVBdWRpb0lucHV0RW5hYmxlZCA9IFJlYWN0NDYudXNlQ2FsbGJhY2soKGlzRW5hYmxlZCkgPT4ge1xuICAgIHNldFNldHRpbmdzKChwcmV2KSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcmV2KSwgeyBhdWRpb0VuYWJsZWQ6IGlzRW5hYmxlZCB9KSk7XG4gIH0sIFtdKTtcbiAgY29uc3Qgc2F2ZVZpZGVvSW5wdXRFbmFibGVkID0gUmVhY3Q0Ni51c2VDYWxsYmFjaygoaXNFbmFibGVkKSA9PiB7XG4gICAgc2V0U2V0dGluZ3MoKHByZXYpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByZXYpLCB7IHZpZGVvRW5hYmxlZDogaXNFbmFibGVkIH0pKTtcbiAgfSwgW10pO1xuICBjb25zdCBzYXZlQXVkaW9JbnB1dERldmljZUlkID0gUmVhY3Q0Ni51c2VDYWxsYmFjaygoZGV2aWNlSWQpID0+IHtcbiAgICBzZXRTZXR0aW5ncygocHJldikgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJldiksIHsgYXVkaW9EZXZpY2VJZDogZGV2aWNlSWQgfSkpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHNhdmVWaWRlb0lucHV0RGV2aWNlSWQgPSBSZWFjdDQ2LnVzZUNhbGxiYWNrKChkZXZpY2VJZCkgPT4ge1xuICAgIHNldFNldHRpbmdzKChwcmV2KSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcmV2KSwgeyB2aWRlb0RldmljZUlkOiBkZXZpY2VJZCB9KSk7XG4gIH0sIFtdKTtcbiAgY29uc3Qgc2F2ZVVzZXJuYW1lID0gUmVhY3Q0Ni51c2VDYWxsYmFjaygodXNlcm5hbWUpID0+IHtcbiAgICBzZXRTZXR0aW5ncygocHJldikgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJldiksIHsgdXNlcm5hbWUgfSkpO1xuICB9LCBbXSk7XG4gIFJlYWN0NDYudXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgX2EyO1xuICAgIHNhdmVVc2VyQ2hvaWNlcyh1c2VyQ2hvaWNlcywgKF9hMiA9IG9wdGlvbnMucHJldmVudFNhdmUpICE9IG51bGwgPyBfYTIgOiBmYWxzZSk7XG4gIH0sIFt1c2VyQ2hvaWNlcywgb3B0aW9ucy5wcmV2ZW50U2F2ZV0pO1xuICByZXR1cm4ge1xuICAgIHVzZXJDaG9pY2VzLFxuICAgIHNhdmVBdWRpb0lucHV0RW5hYmxlZCxcbiAgICBzYXZlVmlkZW9JbnB1dEVuYWJsZWQsXG4gICAgc2F2ZUF1ZGlvSW5wdXREZXZpY2VJZCxcbiAgICBzYXZlVmlkZW9JbnB1dERldmljZUlkLFxuICAgIHNhdmVVc2VybmFtZVxuICB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlSXNFbmNyeXB0ZWQudHNcbmltcG9ydCAqIGFzIFJlYWN0NDcgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMb2NhbFBhcnRpY2lwYW50IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBlbmNyeXB0aW9uU3RhdHVzT2JzZXJ2YWJsZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmZ1bmN0aW9uIHVzZUlzRW5jcnlwdGVkKHBhcnRpY2lwYW50KSB7XG4gIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCk7XG4gIGNvbnN0IHJvb20gPSB1c2VFbnN1cmVSb29tKCk7XG4gIGNvbnN0IG9ic2VydmVyID0gUmVhY3Q0Ny51c2VNZW1vKCgpID0+IGVuY3J5cHRpb25TdGF0dXNPYnNlcnZhYmxlKHJvb20sIHApLCBbcm9vbSwgcF0pO1xuICBjb25zdCBpc0VuY3J5cHRlZCA9IHVzZU9ic2VydmFibGVTdGF0ZShcbiAgICBvYnNlcnZlcixcbiAgICBwIGluc3RhbmNlb2YgTG9jYWxQYXJ0aWNpcGFudCA/IHAuaXNFMkVFRW5hYmxlZCA6IHAuaXNFbmNyeXB0ZWRcbiAgKTtcbiAgcmV0dXJuIGlzRW5jcnlwdGVkO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlVHJhY2tWb2x1bWUudHNcbmltcG9ydCAqIGFzIFJlYWN0NDggZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazMsIGNyZWF0ZUF1ZGlvQW5hbHlzZXIgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCB7XG4gIGlzVHJhY2tSZWZlcmVuY2UgYXMgaXNUcmFja1JlZmVyZW5jZTJcbn0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xudmFyIHVzZVRyYWNrVm9sdW1lID0gKHRyYWNrT3JUcmFja1JlZmVyZW5jZSwgb3B0aW9ucyA9IHsgZmZ0U2l6ZTogMzIsIHNtb290aGluZ1RpbWVDb25zdGFudDogMCB9KSA9PiB7XG4gIGNvbnN0IHRyYWNrID0gaXNUcmFja1JlZmVyZW5jZTIodHJhY2tPclRyYWNrUmVmZXJlbmNlKSA/IHRyYWNrT3JUcmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi50cmFjayA6IHRyYWNrT3JUcmFja1JlZmVyZW5jZTtcbiAgY29uc3QgW3ZvbHVtZSwgc2V0Vm9sdW1lXSA9IFJlYWN0NDgudXNlU3RhdGUoMCk7XG4gIFJlYWN0NDgudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXRyYWNrIHx8ICF0cmFjay5tZWRpYVN0cmVhbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGNsZWFudXAsIGFuYWx5c2VyIH0gPSBjcmVhdGVBdWRpb0FuYWx5c2VyKHRyYWNrLCBvcHRpb25zKTtcbiAgICBjb25zdCBidWZmZXJMZW5ndGggPSBhbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudDtcbiAgICBjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJMZW5ndGgpO1xuICAgIGNvbnN0IHVwZGF0ZVZvbHVtZSA9ICgpID0+IHtcbiAgICAgIGFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKGRhdGFBcnJheSk7XG4gICAgICBsZXQgc3VtID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGEgPSBkYXRhQXJyYXlbaV07XG4gICAgICAgIHN1bSArPSBhICogYTtcbiAgICAgIH1cbiAgICAgIHNldFZvbHVtZShNYXRoLnNxcnQoc3VtIC8gZGF0YUFycmF5Lmxlbmd0aCkgLyAyNTUpO1xuICAgIH07XG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVWb2x1bWUsIDFlMyAvIDMwKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYW51cCgpO1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfTtcbiAgfSwgW3RyYWNrLCB0cmFjayA9PSBudWxsID8gdm9pZCAwIDogdHJhY2subWVkaWFTdHJlYW0sIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXSk7XG4gIHJldHVybiB2b2x1bWU7XG59O1xudmFyIG5vcm1hbGl6ZUZyZXF1ZW5jaWVzID0gKGZyZXF1ZW5jaWVzKSA9PiB7XG4gIGNvbnN0IG5vcm1hbGl6ZURiID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgbWluRGIgPSAtMTAwO1xuICAgIGNvbnN0IG1heERiID0gLTEwO1xuICAgIGxldCBkYiA9IDEgLSBNYXRoLm1heChtaW5EYiwgTWF0aC5taW4obWF4RGIsIHZhbHVlKSkgKiAtMSAvIDEwMDtcbiAgICBkYiA9IE1hdGguc3FydChkYik7XG4gICAgcmV0dXJuIGRiO1xuICB9O1xuICByZXR1cm4gZnJlcXVlbmNpZXMubWFwKCh2YWx1ZSkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gLUluZmluaXR5KSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZURiKHZhbHVlKTtcbiAgfSk7XG59O1xudmFyIG11bHRpYmFuZERlZmF1bHRzID0ge1xuICBiYW5kczogNSxcbiAgbG9QYXNzOiAxMDAsXG4gIGhpUGFzczogNjAwLFxuICB1cGRhdGVJbnRlcnZhbDogMTAsXG4gIGFuYWx5c2VyT3B0aW9uczogeyBmZnRTaXplOiAyMDQ4IH1cbn07XG52YXIgdXNlTXVsdGliYW5kVHJhY2tWb2x1bWUgPSAodHJhY2tPclRyYWNrUmVmZXJlbmNlLCBvcHRpb25zID0ge30pID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCB0cmFjayA9IHRyYWNrT3JUcmFja1JlZmVyZW5jZSBpbnN0YW5jZW9mIFRyYWNrMyA/IHRyYWNrT3JUcmFja1JlZmVyZW5jZSA6IChfYSA9IHRyYWNrT3JUcmFja1JlZmVyZW5jZSA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tPclRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2EudHJhY2s7XG4gIGNvbnN0IFtmcmVxdWVuY3lCYW5kcywgc2V0RnJlcXVlbmN5QmFuZHNdID0gUmVhY3Q0OC51c2VTdGF0ZShbXSk7XG4gIGNvbnN0IG9wdHMgPSBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgbXVsdGliYW5kRGVmYXVsdHMpLCBvcHRpb25zKTtcbiAgUmVhY3Q0OC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdHJhY2sgfHwgISh0cmFjayA9PSBudWxsID8gdm9pZCAwIDogdHJhY2subWVkaWFTdHJlYW0pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgYW5hbHlzZXIsIGNsZWFudXAgfSA9IGNyZWF0ZUF1ZGlvQW5hbHlzZXIodHJhY2ssIG9wdHMuYW5hbHlzZXJPcHRpb25zKTtcbiAgICBjb25zdCBidWZmZXJMZW5ndGggPSBhbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudDtcbiAgICBjb25zdCBkYXRhQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlckxlbmd0aCk7XG4gICAgY29uc3QgdXBkYXRlVm9sdW1lID0gKCkgPT4ge1xuICAgICAgYW5hbHlzZXIuZ2V0RmxvYXRGcmVxdWVuY3lEYXRhKGRhdGFBcnJheSk7XG4gICAgICBsZXQgZnJlcXVlbmNpZXMgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGFBcnJheS5sZW5ndGgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZnJlcXVlbmNpZXNbaV0gPSBkYXRhQXJyYXlbaV07XG4gICAgICB9XG4gICAgICBmcmVxdWVuY2llcyA9IGZyZXF1ZW5jaWVzLnNsaWNlKG9wdGlvbnMubG9QYXNzLCBvcHRpb25zLmhpUGFzcyk7XG4gICAgICBjb25zdCBub3JtYWxpemVkRnJlcXVlbmNpZXMgPSBub3JtYWxpemVGcmVxdWVuY2llcyhmcmVxdWVuY2llcyk7XG4gICAgICBjb25zdCBjaHVua1NpemUgPSBNYXRoLmNlaWwobm9ybWFsaXplZEZyZXF1ZW5jaWVzLmxlbmd0aCAvIG9wdHMuYmFuZHMpO1xuICAgICAgY29uc3QgY2h1bmtzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdHMuYmFuZHM7IGkrKykge1xuICAgICAgICBjb25zdCBzdW1tZWRWb2x1bWVzID0gbm9ybWFsaXplZEZyZXF1ZW5jaWVzLnNsaWNlKGkgKiBjaHVua1NpemUsIChpICsgMSkgKiBjaHVua1NpemUpLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArPSB2YWwsIDApO1xuICAgICAgICBjaHVua3MucHVzaChzdW1tZWRWb2x1bWVzIC8gY2h1bmtTaXplKTtcbiAgICAgIH1cbiAgICAgIHNldEZyZXF1ZW5jeUJhbmRzKGNodW5rcyk7XG4gICAgfTtcbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVZvbHVtZSwgb3B0cy51cGRhdGVJbnRlcnZhbCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgIH07XG4gIH0sIFt0cmFjaywgdHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrLm1lZGlhU3RyZWFtLCBKU09OLnN0cmluZ2lmeShvcHRpb25zKV0pO1xuICByZXR1cm4gZnJlcXVlbmN5QmFuZHM7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9DbGVhclBpbkJ1dHRvbi50c3hcbmZ1bmN0aW9uIENsZWFyUGluQnV0dG9uKHByb3BzKSB7XG4gIGNvbnN0IHsgYnV0dG9uUHJvcHMgfSA9IHVzZUNsZWFyUGluQnV0dG9uKHByb3BzKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ5LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgX19zcHJlYWRWYWx1ZXMoe30sIGJ1dHRvblByb3BzKSwgcHJvcHMuY2hpbGRyZW4pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9Db25uZWN0aW9uU3RhdGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDUwIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gQ29ubmVjdGlvblN0YXRlMyhfYSkge1xuICB2YXIgX2IgPSBfYSwgeyByb29tIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcInJvb21cIl0pO1xuICBjb25zdCBjb25uZWN0aW9uU3RhdGUgPSB1c2VDb25uZWN0aW9uU3RhdGUocm9vbSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIGNvbm5lY3Rpb25TdGF0ZSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL0NoYXRUb2dnbGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDUxIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gQ2hhdFRvZ2dsZShwcm9wcykge1xuICBjb25zdCB7IG1lcmdlZFByb3BzIH0gPSB1c2VDaGF0VG9nZ2xlKHsgcHJvcHMgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBtZXJnZWRQcm9wcyksIHByb3BzLmNoaWxkcmVuKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvRGlzY29ubmVjdEJ1dHRvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NTIgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBEaXNjb25uZWN0QnV0dG9uKHByb3BzKSB7XG4gIGNvbnN0IHsgYnV0dG9uUHJvcHMgfSA9IHVzZURpc2Nvbm5lY3RCdXR0b24ocHJvcHMpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NTIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgYnV0dG9uUHJvcHMpLCBwcm9wcy5jaGlsZHJlbik7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL0ZvY3VzVG9nZ2xlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3MiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9DYW1lcmFEaXNhYmxlZEljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDUzIGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z0NhbWVyYURpc2FibGVkSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NTMuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUzLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMS4zNTQuNjQ2YS41LjUgMCAxIDAtLjcwOC43MDhsMTQgMTRhLjUuNSAwIDAgMCAuNzA4LS43MDhMMTEgMTAuMjkzVjQuNUExLjUgMS41IDAgMCAwIDkuNSAzSDMuNzA3ek0wIDQuNWExLjUgMS41IDAgMCAxIC45NDMtMS4zOTNsOS41MzIgOS41MzNjLS4yNjIuMjI0LS42MDMuMzYtLjk3NS4zNmgtOEExLjUgMS41IDAgMCAxIDAgMTEuNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTMuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIm0xNS4yIDMuNi0yLjggMi4xYTEgMSAwIDAgMC0uNC44djNhMSAxIDAgMCAwIC40LjhsMi44IDIuMWEuNS41IDAgMCAwIC44LS40VjRhLjUuNSAwIDAgMC0uOC0uNHpcIiB9KSk7XG52YXIgQ2FtZXJhRGlzYWJsZWRJY29uX2RlZmF1bHQgPSBTdmdDYW1lcmFEaXNhYmxlZEljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvQ2FtZXJhSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NTQgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnQ2FtZXJhSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NTQuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDU0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCA0LjVBMS41IDEuNSAwIDAgMSAxLjUgM2g4QTEuNSAxLjUgMCAwIDEgMTEgNC41djdBMS41IDEuNSAwIDAgMSA5LjUgMTNoLThBMS41IDEuNSAwIDAgMSAwIDExLjV6TTE1LjIgMy42bC0yLjggMi4xYTEgMSAwIDAgMC0uNC44djNhMSAxIDAgMCAwIC40LjhsMi44IDIuMWEuNS41IDAgMCAwIC44LS40VjRhLjUuNSAwIDAgMC0uOC0uNHpcIiB9KSk7XG52YXIgQ2FtZXJhSWNvbl9kZWZhdWx0ID0gU3ZnQ2FtZXJhSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9DaGF0Q2xvc2VJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q1NSBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdDaGF0Q2xvc2VJY29uID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1NS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcIiNGRkZcIixcbiAgICBkOiBcIk00Ljk5IDMuOTlhMSAxIDAgMCAwLS42OTcgMS43MTdMMTAuNTg2IDEybC02LjI5MyA2LjI5M2ExIDEgMCAxIDAgMS40MTQgMS40MTRMMTIgMTMuNDE0bDYuMjkzIDYuMjkzYTEgMSAwIDEgMCAxLjQxNC0xLjQxNEwxMy40MTQgMTJsNi4yOTMtNi4yOTNhMSAxIDAgMCAwLS43MjctMS43MTcgMSAxIDAgMCAwLS42ODcuMzAzTDEyIDEwLjU4NiA1LjcwNyA0LjI5M2ExIDEgMCAwIDAtLjcxNy0uMzAzelwiXG4gIH1cbikpO1xudmFyIENoYXRDbG9zZUljb25fZGVmYXVsdCA9IFN2Z0NoYXRDbG9zZUljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvQ2hhdEljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDU2IGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z0NoYXRJY29uID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1Ni5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE4LCBmaWxsOiBcIm5vbmVcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDU2LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMCAyLjc1QTIuNzUgMi43NSAwIDAgMSAyLjc1IDBoMTAuNUEyLjc1IDIuNzUgMCAwIDEgMTYgMi43NXYxMy41OTRhLjc1Ljc1IDAgMCAxLTEuMjM0LjU3MmwtMy42OTEtMy4xMmExLjI1IDEuMjUgMCAwIDAtLjgwNy0uMjk2SDIuNzVBMi43NSAyLjc1IDAgMCAxIDAgMTAuNzV2LThaTTIuNzUgMS41Yy0uNjkgMC0xLjI1LjU2LTEuMjUgMS4yNXY4YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDcuNTE4Yy42NSAwIDEuMjc5LjIzIDEuNzc1LjY1bDIuNDU3IDIuMDc3VjIuNzVjMC0uNjktLjU2LTEuMjUtMS4yNS0xLjI1SDIuNzVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDU2LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMyA0LjVhLjUuNSAwIDAgMSAuNS0uNWg5YS41LjUgMCAwIDEgMCAxaC05YS41LjUgMCAwIDEtLjUtLjVabTAgMmEuNS41IDAgMCAxIC41LS41aDlhLjUuNSAwIDAgMSAwIDFoLTlhLjUuNSAwIDAgMS0uNS0uNVptMCAyYS41LjUgMCAwIDEgLjUtLjVoNWEuNS41IDAgMCAxIDAgMWgtNWEuNS41IDAgMCAxLS41LS41WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBDaGF0SWNvbl9kZWZhdWx0ID0gU3ZnQ2hhdEljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvQ2hldnJvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NTcgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnQ2hldnJvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NTcuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1Ny5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTUuMjkzIDIuMjkzYTEgMSAwIDAgMSAxLjQxNCAwbDQuODIzIDQuODIzYTEuMjUgMS4yNSAwIDAgMSAwIDEuNzY4bC00LjgyMyA0LjgyM2ExIDEgMCAwIDEtMS40MTQtMS40MTRMOS41ODYgOCA1LjI5MyAzLjcwN2ExIDEgMCAwIDEgMC0xLjQxNHpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSk7XG52YXIgQ2hldnJvbl9kZWZhdWx0ID0gU3ZnQ2hldnJvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9Gb2N1c1RvZ2dsZUljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDU4IGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z0ZvY3VzVG9nZ2xlSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NTguY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1OC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiLCBzdHJva2VXaWR0aDogMS41IH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDU4LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMTAgMS43NWg0LjI1bTAgMFY2bTAtNC4yNUw5IDdNNiAxNC4yNUgxLjc1bTAgMFYxMG0wIDQuMjVMNyA5XCIgfSkpKTtcbnZhciBGb2N1c1RvZ2dsZUljb25fZGVmYXVsdCA9IFN2Z0ZvY3VzVG9nZ2xlSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9HZWFySWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NTkgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnR2Vhckljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDU5LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTkuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0yIDIuNzVBMi43NSAyLjc1IDAgMCAxIDQuNzUgMGg2LjVBMi43NSAyLjc1IDAgMCAxIDE0IDIuNzV2MTAuNUEyLjc1IDIuNzUgMCAwIDEgMTEuMjUgMTZoLTYuNUEyLjc1IDIuNzUgMCAwIDEgMiAxMy4yNXYtLjVhLjc1Ljc1IDAgMCAxIDEuNSAwdi41YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDYuNWMuNjkgMCAxLjI1LS41NiAxLjI1LTEuMjVWMi43NWMwLS42OS0uNTYtMS4yNS0xLjI1LTEuMjVoLTYuNWMtLjY5IDAtMS4yNS41Ni0xLjI1IDEuMjV2LjVhLjc1Ljc1IDAgMCAxLTEuNSAwdi0uNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTkuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk04Ljc4IDcuNDdhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtMi4yNSAyLjI1YS43NS43NSAwIDEgMS0xLjA2LTEuMDZsLjk3LS45N0gxLjc1YS43NS43NSAwIDAgMSAwLTEuNWg0LjY5bC0uOTctLjk3YS43NS43NSAwIDAgMSAxLjA2LTEuMDZsMi4yNSAyLjI1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBHZWFySWNvbl9kZWZhdWx0ID0gU3ZnR2Vhckljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvTGVhdmVJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2MCBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdMZWF2ZUljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYwLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0yIDIuNzVBMi43NSAyLjc1IDAgMCAxIDQuNzUgMGg2LjVBMi43NSAyLjc1IDAgMCAxIDE0IDIuNzV2MTAuNUEyLjc1IDIuNzUgMCAwIDEgMTEuMjUgMTZoLTYuNUEyLjc1IDIuNzUgMCAwIDEgMiAxMy4yNXYtLjVhLjc1Ljc1IDAgMCAxIDEuNSAwdi41YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDYuNWMuNjkgMCAxLjI1LS41NiAxLjI1LTEuMjVWMi43NWMwLS42OS0uNTYtMS4yNS0xLjI1LTEuMjVoLTYuNWMtLjY5IDAtMS4yNS41Ni0xLjI1IDEuMjV2LjVhLjc1Ljc1IDAgMCAxLTEuNSAwdi0uNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk04Ljc4IDcuNDdhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtMi4yNSAyLjI1YS43NS43NSAwIDEgMS0xLjA2LTEuMDZsLjk3LS45N0gxLjc1YS43NS43NSAwIDAgMSAwLTEuNWg0LjY5bC0uOTctLjk3YS43NS43NSAwIDAgMSAxLjA2LTEuMDZsMi4yNSAyLjI1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBMZWF2ZUljb25fZGVmYXVsdCA9IFN2Z0xlYXZlSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9Mb2NrTG9ja2VkSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NjEgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnTG9ja0xvY2tlZEljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYxLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjEuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRjb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00IDYuMTA0VjRhNCA0IDAgMSAxIDggMHYyLjEwNGMxLjE1NC4zMjYgMiAxLjM4NyAyIDIuNjQ2djQuNUEyLjc1IDIuNzUgMCAwIDEgMTEuMjUgMTZoLTYuNUEyLjc1IDIuNzUgMCAwIDEgMiAxMy4yNXYtNC41YzAtMS4yNTkuODQ2LTIuMzIgMi0yLjY0NlpNNS41IDRhMi41IDIuNSAwIDAgMSA1IDB2MmgtNVY0WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBMb2NrTG9ja2VkSWNvbl9kZWZhdWx0ID0gU3ZnTG9ja0xvY2tlZEljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvTWljRGlzYWJsZWRJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2MiBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdNaWNEaXNhYmxlZEljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYyLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2Mi5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEyLjIyNyAxMS41MmE1LjQ3NyA1LjQ3NyAwIDAgMCAxLjI0Ni0yLjk3LjUuNSAwIDAgMC0uOTk1LS4xIDQuNDc4IDQuNDc4IDAgMCAxLS45NjIgMi4zNTlsLTEuMDctMS4wN0MxMC43OTQgOS4yNDcgMTEgOC42NDcgMTEgOFYzYTMgMyAwIDAgMC02IDB2MS4yOTNMMS4zNTQuNjQ2YS41LjUgMCAxIDAtLjcwOC43MDhsMTQgMTRhLjUuNSAwIDAgMCAuNzA4LS43MDh6TTggMTIuNWMuNjgzIDAgMS4zMy0uMTUyIDEuOTExLS40MjVsLjc0My43NDNjLS42NDkuMzU5LTEuMzc4LjU5LTIuMTU0LjY2VjE1aDJhLjUuNSAwIDAgMSAwIDFoLTVhLjUuNSAwIDAgMSAwLTFoMnYtMS41MjJhNS41MDIgNS41MDIgMCAwIDEtNC45NzMtNC45MjkuNS41IDAgMCAxIC45OTUtLjA5OEE0LjUgNC41IDAgMCAwIDggMTIuNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjIuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk04Ljc0MyAxMC45MDcgNSA3LjE2NFY4YTMgMyAwIDAgMCAzLjc0MyAyLjkwN3pcIiB9KSk7XG52YXIgTWljRGlzYWJsZWRJY29uX2RlZmF1bHQgPSBTdmdNaWNEaXNhYmxlZEljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvTWljSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NjMgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnTWljSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NjMuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYzLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuOTc1IDguMDAyYS41LjUgMCAwIDEgLjU0Ny40NDkgNC41IDQuNSAwIDAgMCA4Ljk1NiAwIC41LjUgMCAxIDEgLjk5NS4wOThBNS41MDIgNS41MDIgMCAwIDEgOC41IDEzLjQ3OFYxNWgyYS41LjUgMCAwIDEgMCAxaC01YS41LjUgMCAwIDEgMC0xaDJ2LTEuNTIyYTUuNTAyIDUuNTAyIDAgMCAxLTQuOTczLTQuOTI5LjUuNSAwIDAgMSAuNDQ4LS41NDd6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYzLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNNSAzYTMgMyAwIDEgMSA2IDB2NWEzIDMgMCAwIDEtNiAwelwiIH0pKTtcbnZhciBNaWNJY29uX2RlZmF1bHQgPSBTdmdNaWNJY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL1F1YWxpdHlFeGNlbGxlbnRJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2NCBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdRdWFsaXR5RXhjZWxsZW50SWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NjQuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi02YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi02YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSkpO1xudmFyIFF1YWxpdHlFeGNlbGxlbnRJY29uX2RlZmF1bHQgPSBTdmdRdWFsaXR5RXhjZWxsZW50SWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9RdWFsaXR5R29vZEljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDY1IGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z1F1YWxpdHlHb29kSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NjUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY1LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2NS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMiAuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2NS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEyIC41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSkpKTtcbnZhciBRdWFsaXR5R29vZEljb25fZGVmYXVsdCA9IFN2Z1F1YWxpdHlHb29kSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9RdWFsaXR5UG9vckljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDY2IGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z1F1YWxpdHlQb29ySWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NjYuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY2LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjYuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2Ni5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjYuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk02IDYuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY2LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNNiA2LjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjYuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMiAuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pKSk7XG52YXIgUXVhbGl0eVBvb3JJY29uX2RlZmF1bHQgPSBTdmdRdWFsaXR5UG9vckljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvUXVhbGl0eVVua25vd25JY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2NyBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdRdWFsaXR5VW5rbm93bkljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY3LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2Ny5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjcuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjcuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSkpO1xudmFyIFF1YWxpdHlVbmtub3duSWNvbl9kZWZhdWx0ID0gU3ZnUXVhbGl0eVVua25vd25JY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL1NjcmVlblNoYXJlSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NjggZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnU2NyZWVuU2hhcmVJY29uID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q2OC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDIwLCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY4LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMCAyLjc1QTIuNzUgMi43NSAwIDAgMSAyLjc1IDBoMTQuNUEyLjc1IDIuNzUgMCAwIDEgMjAgMi43NXYxMC41QTIuNzUgMi43NSAwIDAgMSAxNy4yNSAxNkgyLjc1QTIuNzUgMi43NSAwIDAgMSAwIDEzLjI1VjIuNzVaTTIuNzUgMS41Yy0uNjkgMC0xLjI1LjU2LTEuMjUgMS4yNXYxMC41YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDE0LjVjLjY5IDAgMS4yNS0uNTYgMS4yNS0xLjI1VjIuNzVjMC0uNjktLjU2LTEuMjUtMS4yNS0xLjI1SDIuNzVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY4LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOS40NyA0LjIyYS43NS43NSAwIDAgMSAxLjA2IDBsMi4yNSAyLjI1YS43NS43NSAwIDAgMS0xLjA2IDEuMDZsLS45Ny0uOTd2NC42OWEuNzUuNzUgMCAwIDEtMS41IDBWNi41NmwtLjk3Ljk3YS43NS43NSAwIDAgMS0xLjA2LTEuMDZsMi4yNS0yLjI1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBTY3JlZW5TaGFyZUljb25fZGVmYXVsdCA9IFN2Z1NjcmVlblNoYXJlSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9TY3JlZW5TaGFyZVN0b3BJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2OSBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdTY3JlZW5TaGFyZVN0b3BJY29uID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q2OS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDIwLCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY5LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2OS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTcuMjggNC4yMmEuNzUuNzUgMCAwIDAtMS4wNiAxLjA2TDguOTQgOGwtMi43MiAyLjcyYS43NS43NSAwIDEgMCAxLjA2IDEuMDZMMTAgOS4wNmwyLjcyIDIuNzJhLjc1Ljc1IDAgMSAwIDEuMDYtMS4wNkwxMS4wNiA4bDIuNzItMi43MmEuNzUuNzUgMCAwIDAtMS4wNi0xLjA2TDEwIDYuOTR6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY5LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuNzUgMEEyLjc1IDIuNzUgMCAwIDAgMCAyLjc1djEwLjVBMi43NSAyLjc1IDAgMCAwIDIuNzUgMTZoMTQuNUEyLjc1IDIuNzUgMCAwIDAgMjAgMTMuMjVWMi43NUEyLjc1IDIuNzUgMCAwIDAgMTcuMjUgMHpNMS41IDIuNzVjMC0uNjkuNTYtMS4yNSAxLjI1LTEuMjVoMTQuNWMuNjkgMCAxLjI1LjU2IDEuMjUgMS4yNXYxMC41YzAgLjY5LS41NiAxLjI1LTEuMjUgMS4yNUgyLjc1Yy0uNjkgMC0xLjI1LS41Ni0xLjI1LTEuMjV6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpKTtcbnZhciBTY3JlZW5TaGFyZVN0b3BJY29uX2RlZmF1bHQgPSBTdmdTY3JlZW5TaGFyZVN0b3BJY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL1NwaW5uZXJJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3MCBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdTcGlubmVySWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3MC5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTggMGEuNzUuNzUgMCAwIDEgLjc1Ljc1djIuNWEuNzUuNzUgMCAwIDEtMS41IDBWLjc1QS43NS43NSAwIDAgMSA4IDBaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcwLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOCAxMmEuNzUuNzUgMCAwIDEgLjc1Ljc1djIuNWEuNzUuNzUgMCAwIDEtMS41IDB2LTIuNUEuNzUuNzUgMCAwIDEgOCAxMlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC43XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcwLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTIgMS4wNzJhLjc1Ljc1IDAgMCAxIC4yNzQgMS4wMjRsLTEuMjUgMi4xNjVhLjc1Ljc1IDAgMCAxLTEuMjk5LS43NWwxLjI1LTIuMTY1QS43NS43NSAwIDAgMSAxMiAxLjA3MlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk02IDExLjQ2NGEuNzUuNzUgMCAwIDEgLjI3NCAxLjAyNWwtMS4yNSAyLjE2NWEuNzUuNzUgMCAwIDEtMS4yOTktLjc1bDEuMjUtMi4xNjVBLjc1Ljc1IDAgMCAxIDYgMTEuNDY0WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjZcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xNC45MjggNGEuNzUuNzUgMCAwIDEtLjI3NCAxLjAyNWwtMi4xNjUgMS4yNWEuNzUuNzUgMCAxIDEtLjc1LTEuM2wyLjE2NS0xLjI1QS43NS43NSAwIDAgMSAxNC45MjggNFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00LjUzNiAxMGEuNzUuNzUgMCAwIDEtLjI3NSAxLjAyNGwtMi4xNjUgMS4yNWEuNzUuNzUgMCAwIDEtLjc1LTEuMjk4bDIuMTY1LTEuMjVBLjc1Ljc1IDAgMCAxIDQuNTM2IDEwWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjVcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xNiA4YS43NS43NSAwIDAgMS0uNzUuNzVoLTIuNWEuNzUuNzUgMCAwIDEgMC0xLjVoMi41QS43NS43NSAwIDAgMSAxNiA4WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3MC5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTQgOGEuNzUuNzUgMCAwIDEtLjc1Ljc1SC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoMi41QS43NS43NSAwIDAgMSA0IDhaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuNFxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3MC5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTE0LjkyOCAxMmEuNzUuNzUgMCAwIDEtMS4wMjQuMjc0bC0yLjE2NS0xLjI1YS43NS43NSAwIDAgMSAuNzUtMS4yOTlsMi4xNjUgMS4yNUEuNzUuNzUgMCAwIDEgMTQuOTI4IDEyWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjlcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00LjUzNiA2YS43NS43NSAwIDAgMS0xLjAyNS4yNzVsLTIuMTY1LTEuMjVhLjc1Ljc1IDAgMSAxIC43NS0xLjNsMi4xNjUgMS4yNUEuNzUuNzUgMCAwIDEgNC41MzYgNlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC4zXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcwLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTIgMTQuOTI4YS43NS43NSAwIDAgMS0xLjAyNC0uMjc0bC0xLjI1LTIuMTY1YS43NS43NSAwIDAgMSAxLjI5OC0uNzVsMS4yNSAyLjE2NUEuNzUuNzUgMCAwIDEgMTIgMTQuOTI4WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjhcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk02IDQuNTM2YS43NS43NSAwIDAgMS0xLjAyNC0uMjc1bC0xLjI1LTIuMTY1YS43NS43NSAwIDEgMSAxLjI5OS0uNzVsMS4yNSAyLjE2NUEuNzUuNzUgMCAwIDEgNiA0LjUzNlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC4yXG4gIH1cbikpO1xudmFyIFNwaW5uZXJJY29uX2RlZmF1bHQgPSBTdmdTcGlubmVySWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9VbmZvY3VzVG9nZ2xlSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzEgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnVW5mb2N1c1RvZ2dsZUljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcxLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzEuY3JlYXRlRWxlbWVudChcImdcIiwgeyBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiwgc3Ryb2tlV2lkdGg6IDEuNSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3MS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEzLjI1IDdIOW0wIDBWMi43NU05IDdsNS4yNS01LjI1TTIuNzUgOUg3bTAgMHY0LjI1TTcgOWwtNS4yNSA1LjI1XCIgfSkpKTtcbnZhciBVbmZvY3VzVG9nZ2xlSWNvbl9kZWZhdWx0ID0gU3ZnVW5mb2N1c1RvZ2dsZUljb247XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL0ZvY3VzVG9nZ2xlLnRzeFxuZnVuY3Rpb24gRm9jdXNUb2dnbGUoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHsgdHJhY2tSZWYsIHRyYWNrU291cmNlLCBwYXJ0aWNpcGFudCB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJ0cmFja1JlZlwiLCBcInRyYWNrU291cmNlXCIsIFwicGFydGljaXBhbnRcIl0pO1xuICBjb25zdCB0cmFja1JlZkZyb21Db250ZXh0ID0gdXNlTWF5YmVUcmFja1JlZkNvbnRleHQoKTtcbiAgY29uc3QgeyBtZXJnZWRQcm9wcywgaW5Gb2N1cyB9ID0gdXNlRm9jdXNUb2dnbGUoe1xuICAgIHRyYWNrUmVmOiB0cmFja1JlZiAhPSBudWxsID8gdHJhY2tSZWYgOiB0cmFja1JlZkZyb21Db250ZXh0LFxuICAgIHRyYWNrU291cmNlLFxuICAgIHBhcnRpY2lwYW50LFxuICAgIHByb3BzXG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NzIuY3JlYXRlRWxlbWVudChMYXlvdXRDb250ZXh0LkNvbnN1bWVyLCBudWxsLCAobGF5b3V0Q29udGV4dCkgPT4gbGF5b3V0Q29udGV4dCAhPT0gdm9pZCAwICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgX19zcHJlYWRWYWx1ZXMoe30sIG1lcmdlZFByb3BzKSwgcHJvcHMuY2hpbGRyZW4gPyBwcm9wcy5jaGlsZHJlbiA6IGluRm9jdXMgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Mi5jcmVhdGVFbGVtZW50KFVuZm9jdXNUb2dnbGVJY29uX2RlZmF1bHQsIG51bGwpIDogLyogQF9fUFVSRV9fICovIFJlYWN0NzIuY3JlYXRlRWxlbWVudChGb2N1c1RvZ2dsZUljb25fZGVmYXVsdCwgbnVsbCkpKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvTWVkaWFEZXZpY2VTZWxlY3QudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDczIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUm9vbUV2ZW50IGFzIFJvb21FdmVudDIgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIE1lZGlhRGV2aWNlU2VsZWN0KF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAga2luZCxcbiAgICBpbml0aWFsU2VsZWN0aW9uLFxuICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlLFxuICAgIG9uRGV2aWNlTGlzdENoYW5nZSxcbiAgICBvbkRldmljZVNlbGVjdEVycm9yLFxuICAgIGV4YWN0TWF0Y2gsXG4gICAgdHJhY2ssXG4gICAgcmVxdWVzdFBlcm1pc3Npb25zLFxuICAgIG9uRXJyb3JcbiAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwia2luZFwiLFxuICAgIFwiaW5pdGlhbFNlbGVjdGlvblwiLFxuICAgIFwib25BY3RpdmVEZXZpY2VDaGFuZ2VcIixcbiAgICBcIm9uRGV2aWNlTGlzdENoYW5nZVwiLFxuICAgIFwib25EZXZpY2VTZWxlY3RFcnJvclwiLFxuICAgIFwiZXhhY3RNYXRjaFwiLFxuICAgIFwidHJhY2tcIixcbiAgICBcInJlcXVlc3RQZXJtaXNzaW9uc1wiLFxuICAgIFwib25FcnJvclwiXG4gIF0pO1xuICBjb25zdCByb29tID0gdXNlTWF5YmVSb29tQ29udGV4dCgpO1xuICBjb25zdCBoYW5kbGVFcnJvciA9IFJlYWN0NzMudXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGlmIChyb29tKSB7XG4gICAgICAgIHJvb20uZW1pdChSb29tRXZlbnQyLk1lZGlhRGV2aWNlc0Vycm9yLCBlKTtcbiAgICAgIH1cbiAgICAgIG9uRXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRXJyb3IoZSk7XG4gICAgfSxcbiAgICBbcm9vbSwgb25FcnJvcl1cbiAgKTtcbiAgY29uc3QgeyBkZXZpY2VzLCBhY3RpdmVEZXZpY2VJZCwgc2V0QWN0aXZlTWVkaWFEZXZpY2UsIGNsYXNzTmFtZSB9ID0gdXNlTWVkaWFEZXZpY2VTZWxlY3Qoe1xuICAgIGtpbmQsXG4gICAgcm9vbSxcbiAgICB0cmFjayxcbiAgICByZXF1ZXN0UGVybWlzc2lvbnMsXG4gICAgb25FcnJvcjogaGFuZGxlRXJyb3JcbiAgfSk7XG4gIFJlYWN0NzMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaW5pdGlhbFNlbGVjdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgICBzZXRBY3RpdmVNZWRpYURldmljZShpbml0aWFsU2VsZWN0aW9uKTtcbiAgICB9XG4gIH0sIFtzZXRBY3RpdmVNZWRpYURldmljZV0pO1xuICBSZWFjdDczLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbkRldmljZUxpc3RDaGFuZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgb25EZXZpY2VMaXN0Q2hhbmdlKGRldmljZXMpO1xuICAgIH1cbiAgfSwgW29uRGV2aWNlTGlzdENoYW5nZSwgZGV2aWNlc10pO1xuICBSZWFjdDczLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZURldmljZUlkICYmIGFjdGl2ZURldmljZUlkICE9PSBcIlwiKSB7XG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZSA9PSBudWxsID8gdm9pZCAwIDogb25BY3RpdmVEZXZpY2VDaGFuZ2UoYWN0aXZlRGV2aWNlSWQpO1xuICAgIH1cbiAgfSwgW2FjdGl2ZURldmljZUlkXSk7XG4gIGNvbnN0IGhhbmRsZUFjdGl2ZURldmljZUNoYW5nZSA9IChkZXZpY2VJZCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICB5aWVsZCBzZXRBY3RpdmVNZWRpYURldmljZShkZXZpY2VJZCwgeyBleGFjdDogZXhhY3RNYXRjaCB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG9uRGV2aWNlU2VsZWN0RXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRGV2aWNlU2VsZWN0RXJyb3IoZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGNvbnN0IG1lcmdlZFByb3BzID0gUmVhY3Q3My51c2VNZW1vKFxuICAgICgpID0+IG1lcmdlUHJvcHMyKHByb3BzLCB7IGNsYXNzTmFtZSB9LCB7IGNsYXNzTmFtZTogXCJsay1saXN0XCIgfSksXG4gICAgW2NsYXNzTmFtZSwgcHJvcHNdXG4gICk7XG4gIGZ1bmN0aW9uIGlzQWN0aXZlKGRldmljZUlkLCBhY3RpdmVEZXZpY2VJZDIsIGluZGV4KSB7XG4gICAgcmV0dXJuIGRldmljZUlkID09PSBhY3RpdmVEZXZpY2VJZDIgfHwgaW5kZXggPT09IDAgJiYgYWN0aXZlRGV2aWNlSWQyID09PSBcImRlZmF1bHRcIjtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NzMuY3JlYXRlRWxlbWVudChcInVsXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBtZXJnZWRQcm9wcyksIGRldmljZXMubWFwKChkZXZpY2UsIGluZGV4KSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3My5jcmVhdGVFbGVtZW50KFxuICAgIFwibGlcIixcbiAgICB7XG4gICAgICBrZXk6IGRldmljZS5kZXZpY2VJZCxcbiAgICAgIGlkOiBkZXZpY2UuZGV2aWNlSWQsXG4gICAgICBcImRhdGEtbGstYWN0aXZlXCI6IGlzQWN0aXZlKGRldmljZS5kZXZpY2VJZCwgYWN0aXZlRGV2aWNlSWQsIGluZGV4KSxcbiAgICAgIFwiYXJpYS1zZWxlY3RlZFwiOiBpc0FjdGl2ZShkZXZpY2UuZGV2aWNlSWQsIGFjdGl2ZURldmljZUlkLCBpbmRleCksXG4gICAgICByb2xlOiBcIm9wdGlvblwiXG4gICAgfSxcbiAgICAvKiBAX19QVVJFX18gKi8gUmVhY3Q3My5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvblwiLCBvbkNsaWNrOiAoKSA9PiBoYW5kbGVBY3RpdmVEZXZpY2VDaGFuZ2UoZGV2aWNlLmRldmljZUlkKSB9LCBkZXZpY2UubGFiZWwpXG4gICkpKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvU3RhcnRBdWRpby50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdGFydEF1ZGlvKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IGxhYmVsID0gXCJBbGxvdyBBdWRpb1wiIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcImxhYmVsXCJdKTtcbiAgY29uc3Qgcm9vbSA9IHVzZVJvb21Db250ZXh0KCk7XG4gIGNvbnN0IHsgbWVyZ2VkUHJvcHMgfSA9IHVzZVN0YXJ0QXVkaW8oeyByb29tLCBwcm9wcyB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgX19zcHJlYWRWYWx1ZXMoe30sIG1lcmdlZFByb3BzKSwgbGFiZWwpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9UcmFja1RvZ2dsZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzYgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvdXRpbC50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzUgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uUXVhbGl0eSBhcyBDb25uZWN0aW9uUXVhbGl0eTIsIFRyYWNrIGFzIFRyYWNrNCB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gZ2V0U291cmNlSWNvbihzb3VyY2UsIGVuYWJsZWQpIHtcbiAgc3dpdGNoIChzb3VyY2UpIHtcbiAgICBjYXNlIFRyYWNrNC5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgIHJldHVybiBlbmFibGVkID8gLyogQF9fUFVSRV9fICovIFJlYWN0NzUuY3JlYXRlRWxlbWVudChNaWNJY29uX2RlZmF1bHQsIG51bGwpIDogLyogQF9fUFVSRV9fICovIFJlYWN0NzUuY3JlYXRlRWxlbWVudChNaWNEaXNhYmxlZEljb25fZGVmYXVsdCwgbnVsbCk7XG4gICAgY2FzZSBUcmFjazQuU291cmNlLkNhbWVyYTpcbiAgICAgIHJldHVybiBlbmFibGVkID8gLyogQF9fUFVSRV9fICovIFJlYWN0NzUuY3JlYXRlRWxlbWVudChDYW1lcmFJY29uX2RlZmF1bHQsIG51bGwpIDogLyogQF9fUFVSRV9fICovIFJlYWN0NzUuY3JlYXRlRWxlbWVudChDYW1lcmFEaXNhYmxlZEljb25fZGVmYXVsdCwgbnVsbCk7XG4gICAgY2FzZSBUcmFjazQuU291cmNlLlNjcmVlblNoYXJlOlxuICAgICAgcmV0dXJuIGVuYWJsZWQgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q3NS5jcmVhdGVFbGVtZW50KFNjcmVlblNoYXJlU3RvcEljb25fZGVmYXVsdCwgbnVsbCkgOiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3NS5jcmVhdGVFbGVtZW50KFNjcmVlblNoYXJlSWNvbl9kZWZhdWx0LCBudWxsKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0Q29ubmVjdGlvblF1YWxpdHlJY29uKHF1YWxpdHkpIHtcbiAgc3dpdGNoIChxdWFsaXR5KSB7XG4gICAgY2FzZSBDb25uZWN0aW9uUXVhbGl0eTIuRXhjZWxsZW50OlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc1LmNyZWF0ZUVsZW1lbnQoUXVhbGl0eUV4Y2VsbGVudEljb25fZGVmYXVsdCwgbnVsbCk7XG4gICAgY2FzZSBDb25uZWN0aW9uUXVhbGl0eTIuR29vZDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3NS5jcmVhdGVFbGVtZW50KFF1YWxpdHlHb29kSWNvbl9kZWZhdWx0LCBudWxsKTtcbiAgICBjYXNlIENvbm5lY3Rpb25RdWFsaXR5Mi5Qb29yOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc1LmNyZWF0ZUVsZW1lbnQoUXVhbGl0eVBvb3JJY29uX2RlZmF1bHQsIG51bGwpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NzUuY3JlYXRlRWxlbWVudChRdWFsaXR5VW5rbm93bkljb25fZGVmYXVsdCwgbnVsbCk7XG4gIH1cbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvVHJhY2tUb2dnbGUudHN4XG5mdW5jdGlvbiBUcmFja1RvZ2dsZShfYSkge1xuICB2YXIgX2IgPSBfYSwgeyBzaG93SWNvbiB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJzaG93SWNvblwiXSk7XG4gIGNvbnN0IHsgYnV0dG9uUHJvcHMsIGVuYWJsZWQgfSA9IHVzZVRyYWNrVG9nZ2xlKHByb3BzKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc2LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgX19zcHJlYWRWYWx1ZXMoe30sIGJ1dHRvblByb3BzKSwgKHNob3dJY29uICE9IG51bGwgPyBzaG93SWNvbiA6IHRydWUpICYmIGdldFNvdXJjZUljb24ocHJvcHMuc291cmNlLCBlbmFibGVkKSwgcHJvcHMuY2hpbGRyZW4pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9sYXlvdXQvRm9jdXNMYXlvdXQudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDg0IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9QYXJ0aWNpcGFudFRpbGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDgzIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgVHJhY2sgYXMgVHJhY2s1IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBpc1RyYWNrUmVmZXJlbmNlIGFzIGlzVHJhY2tSZWZlcmVuY2UzLCBpc1RyYWNrUmVmZXJlbmNlUGlubmVkIGFzIGlzVHJhY2tSZWZlcmVuY2VQaW5uZWQyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9Db25uZWN0aW9uUXVhbGl0eUluZGljYXRvci50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzcgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvcihwcm9wcykge1xuICB2YXIgX2E7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCBxdWFsaXR5IH0gPSB1c2VDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvcihwcm9wcyk7XG4gIGNvbnN0IGVsZW1lbnRQcm9wcyA9IFJlYWN0NzcudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG1lcmdlUHJvcHMyKHByb3BzLCB7IGNsYXNzTmFtZSB9KSksIHsgXCJkYXRhLWxrLXF1YWxpdHlcIjogcXVhbGl0eSB9KTtcbiAgfSwgW3F1YWxpdHksIHByb3BzLCBjbGFzc05hbWVdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoe30sIGVsZW1lbnRQcm9wcyksIChfYSA9IHByb3BzLmNoaWxkcmVuKSAhPSBudWxsID8gX2EgOiBnZXRDb25uZWN0aW9uUXVhbGl0eUljb24ocXVhbGl0eSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9QYXJ0aWNpcGFudE5hbWUudHN4XG5pbXBvcnQgeyBzZXR1cFBhcnRpY2lwYW50TmFtZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NzggZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBQYXJ0aWNpcGFudE5hbWUoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHsgcGFydGljaXBhbnQgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1wicGFydGljaXBhbnRcIl0pO1xuICBjb25zdCBwID0gdXNlRW5zdXJlUGFydGljaXBhbnQocGFydGljaXBhbnQpO1xuICBjb25zdCB7IGNsYXNzTmFtZSwgaW5mb09ic2VydmVyIH0gPSBSZWFjdDc4LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBzZXR1cFBhcnRpY2lwYW50TmFtZShwKTtcbiAgfSwgW3BdKTtcbiAgY29uc3QgeyBpZGVudGl0eSwgbmFtZSB9ID0gdXNlT2JzZXJ2YWJsZVN0YXRlKGluZm9PYnNlcnZlciwge1xuICAgIG5hbWU6IHAubmFtZSxcbiAgICBpZGVudGl0eTogcC5pZGVudGl0eSxcbiAgICBtZXRhZGF0YTogcC5tZXRhZGF0YVxuICB9KTtcbiAgY29uc3QgbWVyZ2VkUHJvcHMgPSBSZWFjdDc4LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBtZXJnZVByb3BzMihwcm9wcywgeyBjbGFzc05hbWUsIFwiZGF0YS1say1wYXJ0aWNpcGFudC1uYW1lXCI6IG5hbWUgfSk7XG4gIH0sIFtwcm9wcywgY2xhc3NOYW1lLCBuYW1lXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3OC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgbWVyZ2VkUHJvcHMpLCBuYW1lICE9PSBcIlwiID8gbmFtZSA6IGlkZW50aXR5LCBwcm9wcy5jaGlsZHJlbik7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50L1RyYWNrTXV0ZWRJbmRpY2F0b3IudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDc5IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gVHJhY2tNdXRlZEluZGljYXRvcihfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHNvdXJjZSxcbiAgICBwYXJ0aWNpcGFudCxcbiAgICB0cmFja1JlZixcbiAgICBzaG93ID0gXCJhbHdheXNcIlxuICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJzb3VyY2VcIixcbiAgICBcInBhcnRpY2lwYW50XCIsXG4gICAgXCJ0cmFja1JlZlwiLFxuICAgIFwic2hvd1wiXG4gIF0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCBpc011dGVkIH0gPSB1c2VUcmFja011dGVkSW5kaWNhdG9yKHRyYWNrUmVmICE9IG51bGwgPyB0cmFja1JlZiA6IHNvdXJjZSwgeyBwYXJ0aWNpcGFudCB9KTtcbiAgY29uc3Qgc2hvd0luZGljYXRvciA9IHNob3cgPT09IFwiYWx3YXlzXCIgfHwgc2hvdyA9PT0gXCJtdXRlZFwiICYmIGlzTXV0ZWQgfHwgc2hvdyA9PT0gXCJ1bm11dGVkXCIgJiYgIWlzTXV0ZWQ7XG4gIGNvbnN0IGh0bWxQcm9wcyA9IFJlYWN0NzkudXNlTWVtbyhcbiAgICAoKSA9PiBtZXJnZVByb3BzMihwcm9wcywge1xuICAgICAgY2xhc3NOYW1lXG4gICAgfSksXG4gICAgW2NsYXNzTmFtZSwgcHJvcHNdXG4gICk7XG4gIGlmICghc2hvd0luZGljYXRvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3OS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGh0bWxQcm9wcyksIHsgXCJkYXRhLWxrLW11dGVkXCI6IGlzTXV0ZWQgfSksIChfYjIgPSBwcm9wcy5jaGlsZHJlbikgIT0gbnVsbCA/IF9iMiA6IGdldFNvdXJjZUljb24oKF9hMiA9IHRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1JlZi5zb3VyY2UpICE9IG51bGwgPyBfYTIgOiBzb3VyY2UsICFpc011dGVkKSk7XG59XG5cbi8vIHNyYy9hc3NldHMvaW1hZ2VzL1BhcnRpY2lwYW50UGxhY2Vob2xkZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDgwIGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z1BhcnRpY2lwYW50UGxhY2Vob2xkZXIgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgwLmNyZWF0ZUVsZW1lbnQoXG4gIFwic3ZnXCIsXG4gIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB3aWR0aDogMzIwLFxuICAgIGhlaWdodDogMzIwLFxuICAgIHZpZXdCb3g6IFwiMCAwIDMyMCAzMjBcIixcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiBcInhNaWRZTWlkIG1lZXRcIixcbiAgICBmaWxsOiBcIm5vbmVcIixcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH0sIHByb3BzKSxcbiAgLyogQF9fUFVSRV9fICovIFJlYWN0ODAuY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk0xNjAgMTgwQzIwNC4xODIgMTgwIDI0MCAxNDQuMTgzIDI0MCAxMDBDMjQwIDU1LjgxNzIgMjA0LjE4MiAyMCAxNjAgMjBDMTE1LjgxNyAyMCA3OS45OTk3IDU1LjgxNzIgNzkuOTk5NyAxMDBDNzkuOTk5NyAxNDQuMTgzIDExNS44MTcgMTgwIDE2MCAxODBaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKSxcbiAgLyogQF9fUFVSRV9fICovIFJlYWN0ODAuY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk05Ny42NTQyIDE5NC42MTRDMTAzLjI2NyAxOTEuODE4IDEwOS44NDEgMTkyLjQ4MSAxMTUuNTE5IDE5NS4xNDFDMTI5LjAyNSAyMDEuNDY2IDE0NC4xIDIwNSAxNTkuOTk5IDIwNUMxNzUuODk5IDIwNSAxOTAuOTczIDIwMS40NjYgMjA0LjQ4IDE5NS4xNDFDMjEwLjE1OCAxOTIuNDgxIDIxNi43MzIgMTkxLjgxOCAyMjIuMzQ1IDE5NC42MTRDMjYyLjcwMyAyMTQuNzE5IDI5MS45ODUgMjUzLjczNiAyOTguNTkxIDMwMC4wNjJDMzAwLjE1IDMxMC45OTcgMjkxLjA0NSAzMjAgMjgwIDMyMEgzOS45OTk3QzI4Ljk1NCAzMjAgMTkuODQ5NSAzMTAuOTk3IDIxLjQwODcgMzAwLjA2MkMyOC4wMTQgMjUzLjczNiA1Ny4yOTY2IDIxNC43MiA5Ny42NTQyIDE5NC42MTRaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKVxuKTtcbnZhciBQYXJ0aWNpcGFudFBsYWNlaG9sZGVyX2RlZmF1bHQgPSBTdmdQYXJ0aWNpcGFudFBsYWNlaG9sZGVyO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9WaWRlb1RyYWNrLnRzeFxuaW1wb3J0IHtcbiAgUmVtb3RlVHJhY2tQdWJsaWNhdGlvblxufSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0ODEgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyB1c2VIb29rcyBmcm9tIFwidXNlaG9va3MtdHNcIjtcbmZ1bmN0aW9uIFZpZGVvVHJhY2soX2EpIHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBvblRyYWNrQ2xpY2ssXG4gICAgb25DbGljayxcbiAgICBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQsXG4gICAgdHJhY2tSZWYsXG4gICAgbmFtZSxcbiAgICBwdWJsaWNhdGlvbixcbiAgICBzb3VyY2UsXG4gICAgcGFydGljaXBhbnQ6IHAsXG4gICAgbWFuYWdlU3Vic2NyaXB0aW9uXG4gIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcIm9uVHJhY2tDbGlja1wiLFxuICAgIFwib25DbGlja1wiLFxuICAgIFwib25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXCIsXG4gICAgXCJ0cmFja1JlZlwiLFxuICAgIFwibmFtZVwiLFxuICAgIFwicHVibGljYXRpb25cIixcbiAgICBcInNvdXJjZVwiLFxuICAgIFwicGFydGljaXBhbnRcIixcbiAgICBcIm1hbmFnZVN1YnNjcmlwdGlvblwiXG4gIF0pO1xuICB2YXIgX2EyLCBfYjIsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfajtcbiAgY29uc3QgbWF5YmVUcmFja1JlZiA9IHVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCk7XG4gIGNvbnN0IF9uYW1lID0gKF9kID0gKF9jID0gKF9hMiA9IHRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1JlZi5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi50cmFja05hbWUpICE9IG51bGwgPyBfYyA6IChfYjIgPSBtYXliZVRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiBtYXliZVRyYWNrUmVmLnB1YmxpY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLnRyYWNrTmFtZSkgIT0gbnVsbCA/IF9kIDogbmFtZTtcbiAgY29uc3QgX3NvdXJjZSA9IChfZiA9IChfZSA9IHRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1JlZi5zb3VyY2UpICE9IG51bGwgPyBfZSA6IG1heWJlVHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IG1heWJlVHJhY2tSZWYuc291cmNlKSAhPSBudWxsID8gX2YgOiBzb3VyY2U7XG4gIGNvbnN0IF9wdWJsaWNhdGlvbiA9IChfaCA9IChfZyA9IHRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1JlZi5wdWJsaWNhdGlvbikgIT0gbnVsbCA/IF9nIDogbWF5YmVUcmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogbWF5YmVUcmFja1JlZi5wdWJsaWNhdGlvbikgIT0gbnVsbCA/IF9oIDogcHVibGljYXRpb247XG4gIGNvbnN0IF9wYXJ0aWNpcGFudCA9IChfaiA9IChfaSA9IHRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1JlZi5wYXJ0aWNpcGFudCkgIT0gbnVsbCA/IF9pIDogbWF5YmVUcmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogbWF5YmVUcmFja1JlZi5wYXJ0aWNpcGFudCkgIT0gbnVsbCA/IF9qIDogcDtcbiAgaWYgKF9zb3VyY2UgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlZpZGVvVHJhY2s6IFlvdSBtdXN0IHByb3ZpZGUgYSB0cmFja1JlZiBvciBzb3VyY2UgcHJvcGVydHkuXCIpO1xuICB9XG4gIGNvbnN0IHBhcnRpY2lwYW50ID0gdXNlRW5zdXJlUGFydGljaXBhbnQoX3BhcnRpY2lwYW50KTtcbiAgY29uc3QgbWVkaWFFbCA9IFJlYWN0ODEudXNlUmVmKG51bGwpO1xuICBjb25zdCBpbnRlcnNlY3Rpb25FbnRyeSA9IHVzZUhvb2tzLnVzZUludGVyc2VjdGlvbk9ic2VydmVyKG1lZGlhRWwsIHt9KTtcbiAgY29uc3QgZGVib3VuY2VkSW50ZXJzZWN0aW9uRW50cnkgPSB1c2VIb29rcy51c2VEZWJvdW5jZShpbnRlcnNlY3Rpb25FbnRyeSwgM2UzKTtcbiAgUmVhY3Q4MS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtYW5hZ2VTdWJzY3JpcHRpb24gJiYgX3B1YmxpY2F0aW9uIGluc3RhbmNlb2YgUmVtb3RlVHJhY2tQdWJsaWNhdGlvbiAmJiAoZGVib3VuY2VkSW50ZXJzZWN0aW9uRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IGRlYm91bmNlZEludGVyc2VjdGlvbkVudHJ5LmlzSW50ZXJzZWN0aW5nKSA9PT0gZmFsc2UgJiYgKGludGVyc2VjdGlvbkVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBpbnRlcnNlY3Rpb25FbnRyeS5pc0ludGVyc2VjdGluZykgPT09IGZhbHNlKSB7XG4gICAgICBfcHVibGljYXRpb24uc2V0U3Vic2NyaWJlZChmYWxzZSk7XG4gICAgfVxuICB9LCBbZGVib3VuY2VkSW50ZXJzZWN0aW9uRW50cnksIF9wdWJsaWNhdGlvbiwgbWFuYWdlU3Vic2NyaXB0aW9uXSk7XG4gIFJlYWN0ODEudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWFuYWdlU3Vic2NyaXB0aW9uICYmIF9wdWJsaWNhdGlvbiBpbnN0YW5jZW9mIFJlbW90ZVRyYWNrUHVibGljYXRpb24gJiYgKGludGVyc2VjdGlvbkVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBpbnRlcnNlY3Rpb25FbnRyeS5pc0ludGVyc2VjdGluZykgPT09IHRydWUpIHtcbiAgICAgIF9wdWJsaWNhdGlvbi5zZXRTdWJzY3JpYmVkKHRydWUpO1xuICAgIH1cbiAgfSwgW2ludGVyc2VjdGlvbkVudHJ5LCBfcHVibGljYXRpb24sIG1hbmFnZVN1YnNjcmlwdGlvbl0pO1xuICBjb25zdCB7XG4gICAgZWxlbWVudFByb3BzLFxuICAgIHB1YmxpY2F0aW9uOiBwdWIsXG4gICAgaXNTdWJzY3JpYmVkXG4gIH0gPSB1c2VNZWRpYVRyYWNrQnlTb3VyY2VPck5hbWUoXG4gICAgeyBwYXJ0aWNpcGFudCwgbmFtZTogX25hbWUsIHNvdXJjZTogX3NvdXJjZSwgcHVibGljYXRpb246IF9wdWJsaWNhdGlvbiB9LFxuICAgIHtcbiAgICAgIGVsZW1lbnQ6IG1lZGlhRWwsXG4gICAgICBwcm9wc1xuICAgIH1cbiAgKTtcbiAgUmVhY3Q4MS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZCA9PSBudWxsID8gdm9pZCAwIDogb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkKCEhaXNTdWJzY3JpYmVkKTtcbiAgfSwgW2lzU3Vic2NyaWJlZCwgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXSk7XG4gIGNvbnN0IGNsaWNrSGFuZGxlciA9IChldnQpID0+IHtcbiAgICBvbkNsaWNrID09IG51bGwgPyB2b2lkIDAgOiBvbkNsaWNrKGV2dCk7XG4gICAgb25UcmFja0NsaWNrID09IG51bGwgPyB2b2lkIDAgOiBvblRyYWNrQ2xpY2soeyBwYXJ0aWNpcGFudCwgdHJhY2s6IHB1YiB9KTtcbiAgfTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgxLmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHsgcmVmOiBtZWRpYUVsIH0sIGVsZW1lbnRQcm9wcyksIHsgbXV0ZWQ6IHRydWUsIG9uQ2xpY2s6IGNsaWNrSGFuZGxlciB9KSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50L0F1ZGlvVHJhY2sudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDgyIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbG9nIGFzIGxvZzkgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgeyBSZW1vdGVBdWRpb1RyYWNrLCBSZW1vdGVUcmFja1B1YmxpY2F0aW9uIGFzIFJlbW90ZVRyYWNrUHVibGljYXRpb24yIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5mdW5jdGlvbiBBdWRpb1RyYWNrKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgdHJhY2tSZWYsXG4gICAgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkLFxuICAgIHZvbHVtZSxcbiAgICBzb3VyY2UsXG4gICAgbmFtZSxcbiAgICBwdWJsaWNhdGlvbixcbiAgICBwYXJ0aWNpcGFudDogcFxuICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJ0cmFja1JlZlwiLFxuICAgIFwib25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXCIsXG4gICAgXCJ2b2x1bWVcIixcbiAgICBcInNvdXJjZVwiLFxuICAgIFwibmFtZVwiLFxuICAgIFwicHVibGljYXRpb25cIixcbiAgICBcInBhcnRpY2lwYW50XCJcbiAgXSk7XG4gIHZhciBfYTIsIF9iMiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qO1xuICBjb25zdCBtYXliZVRyYWNrUmVmID0gdXNlTWF5YmVUcmFja1JlZkNvbnRleHQoKTtcbiAgY29uc3QgX25hbWUgPSAoX2QgPSAoX2MgPSAoX2EyID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnB1YmxpY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnRyYWNrTmFtZSkgIT0gbnVsbCA/IF9jIDogKF9iMiA9IG1heWJlVHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IG1heWJlVHJhY2tSZWYucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYjIudHJhY2tOYW1lKSAhPSBudWxsID8gX2QgOiBuYW1lO1xuICBjb25zdCBfc291cmNlID0gKF9mID0gKF9lID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnNvdXJjZSkgIT0gbnVsbCA/IF9lIDogbWF5YmVUcmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogbWF5YmVUcmFja1JlZi5zb3VyY2UpICE9IG51bGwgPyBfZiA6IHNvdXJjZTtcbiAgY29uc3QgX3B1YmxpY2F0aW9uID0gKF9oID0gKF9nID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2cgOiBtYXliZVRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiBtYXliZVRyYWNrUmVmLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2ggOiBwdWJsaWNhdGlvbjtcbiAgY29uc3QgX3BhcnRpY2lwYW50ID0gKF9qID0gKF9pID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnBhcnRpY2lwYW50KSAhPSBudWxsID8gX2kgOiBtYXliZVRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiBtYXliZVRyYWNrUmVmLnBhcnRpY2lwYW50KSAhPSBudWxsID8gX2ogOiBwO1xuICBpZiAoX3NvdXJjZSA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIEF1ZGlvVHJhY2sgY29tcG9uZW50IGV4cGVjdHMgYSB0cmFja1JlZiBvciBzb3VyY2UgcHJvcGVydHkuXCIpO1xuICB9XG4gIGNvbnN0IG1lZGlhRWwgPSBSZWFjdDgyLnVzZVJlZihudWxsKTtcbiAgY29uc3QgcGFydGljaXBhbnQgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChfcGFydGljaXBhbnQpO1xuICBjb25zdCB7XG4gICAgZWxlbWVudFByb3BzLFxuICAgIGlzU3Vic2NyaWJlZCxcbiAgICB0cmFjayxcbiAgICBwdWJsaWNhdGlvbjogcHViXG4gIH0gPSB1c2VNZWRpYVRyYWNrQnlTb3VyY2VPck5hbWUoXG4gICAgeyBzb3VyY2U6IF9zb3VyY2UsIG5hbWU6IF9uYW1lLCBwYXJ0aWNpcGFudCwgcHVibGljYXRpb246IF9wdWJsaWNhdGlvbiB9LFxuICAgIHtcbiAgICAgIGVsZW1lbnQ6IG1lZGlhRWwsXG4gICAgICBwcm9wc1xuICAgIH1cbiAgKTtcbiAgUmVhY3Q4Mi51c2VFZmZlY3QoKCkgPT4ge1xuICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZCA9PSBudWxsID8gdm9pZCAwIDogb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkKCEhaXNTdWJzY3JpYmVkKTtcbiAgfSwgW2lzU3Vic2NyaWJlZCwgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXSk7XG4gIFJlYWN0ODIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHJhY2sgPT09IHZvaWQgMCB8fCB2b2x1bWUgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHJhY2sgaW5zdGFuY2VvZiBSZW1vdGVBdWRpb1RyYWNrKSB7XG4gICAgICB0cmFjay5zZXRWb2x1bWUodm9sdW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nOS53YXJuKFwiVm9sdW1lIGNhbiBvbmx5IGJlIHNldCBvbiByZW1vdGUgYXVkaW8gdHJhY2tzLlwiKTtcbiAgICB9XG4gIH0sIFt2b2x1bWUsIHRyYWNrXSk7XG4gIFJlYWN0ODIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHViID09PSB2b2lkIDAgfHwgcHJvcHMubXV0ZWQgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocHViIGluc3RhbmNlb2YgUmVtb3RlVHJhY2tQdWJsaWNhdGlvbjIpIHtcbiAgICAgIHB1Yi5zZXRFbmFibGVkKCFwcm9wcy5tdXRlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZzkud2FybihcIkNhbiBvbmx5IGNhbGwgc2V0RW5hYmxlZCBvbiByZW1vdGUgdHJhY2sgcHVibGljYXRpb25zLlwiKTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZCwgcHViLCB0cmFja10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0ODIuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmOiBtZWRpYUVsIH0sIGVsZW1lbnRQcm9wcykpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9QYXJ0aWNpcGFudFRpbGUudHN4XG5mdW5jdGlvbiBQYXJ0aWNpcGFudENvbnRleHRJZk5lZWRlZChwcm9wcykge1xuICBjb25zdCBoYXNDb250ZXh0ID0gISF1c2VNYXliZVBhcnRpY2lwYW50Q29udGV4dCgpO1xuICByZXR1cm4gcHJvcHMucGFydGljaXBhbnQgJiYgIWhhc0NvbnRleHQgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogcHJvcHMucGFydGljaXBhbnQgfSwgcHJvcHMuY2hpbGRyZW4pIDogLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChSZWFjdDgzLkZyYWdtZW50LCBudWxsLCBwcm9wcy5jaGlsZHJlbik7XG59XG5mdW5jdGlvbiBUcmFja1JlZkNvbnRleHRJZk5lZWRlZChwcm9wcykge1xuICBjb25zdCBoYXNDb250ZXh0ID0gISF1c2VNYXliZVRyYWNrUmVmQ29udGV4dCgpO1xuICByZXR1cm4gcHJvcHMudHJhY2tSZWYgJiYgIWhhc0NvbnRleHQgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFRyYWNrUmVmQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogcHJvcHMudHJhY2tSZWYgfSwgcHJvcHMuY2hpbGRyZW4pIDogLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChSZWFjdDgzLkZyYWdtZW50LCBudWxsLCBwcm9wcy5jaGlsZHJlbik7XG59XG5mdW5jdGlvbiBQYXJ0aWNpcGFudFRpbGUoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICB0cmFja1JlZixcbiAgICBwYXJ0aWNpcGFudCxcbiAgICBjaGlsZHJlbixcbiAgICBzb3VyY2UgPSBUcmFjazUuU291cmNlLkNhbWVyYSxcbiAgICBvblBhcnRpY2lwYW50Q2xpY2ssXG4gICAgcHVibGljYXRpb24sXG4gICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yXG4gIH0gPSBfYiwgaHRtbFByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJ0cmFja1JlZlwiLFxuICAgIFwicGFydGljaXBhbnRcIixcbiAgICBcImNoaWxkcmVuXCIsXG4gICAgXCJzb3VyY2VcIixcbiAgICBcIm9uUGFydGljaXBhbnRDbGlja1wiLFxuICAgIFwicHVibGljYXRpb25cIixcbiAgICBcImRpc2FibGVTcGVha2luZ0luZGljYXRvclwiXG4gIF0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IG1heWJlVHJhY2tSZWYgPSB1c2VNYXliZVRyYWNrUmVmQ29udGV4dCgpO1xuICBjb25zdCBwID0gdXNlRW5zdXJlUGFydGljaXBhbnQocGFydGljaXBhbnQpO1xuICBjb25zdCB0cmFja1JlZmVyZW5jZSA9IFJlYWN0ODMudXNlTWVtbygoKSA9PiB7XG4gICAgdmFyIF9hMywgX2IzLCBfYywgX2QsIF9lLCBfZjtcbiAgICByZXR1cm4ge1xuICAgICAgcGFydGljaXBhbnQ6IChfYjMgPSAoX2EzID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnBhcnRpY2lwYW50KSAhPSBudWxsID8gX2EzIDogbWF5YmVUcmFja1JlZiA9PSBudWxsID8gdm9pZCAwIDogbWF5YmVUcmFja1JlZi5wYXJ0aWNpcGFudCkgIT0gbnVsbCA/IF9iMyA6IHAsXG4gICAgICBzb3VyY2U6IChfZCA9IChfYyA9IHRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1JlZi5zb3VyY2UpICE9IG51bGwgPyBfYyA6IG1heWJlVHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IG1heWJlVHJhY2tSZWYuc291cmNlKSAhPSBudWxsID8gX2QgOiBzb3VyY2UsXG4gICAgICBwdWJsaWNhdGlvbjogKF9mID0gKF9lID0gdHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2UgOiBtYXliZVRyYWNrUmVmID09IG51bGwgPyB2b2lkIDAgOiBtYXliZVRyYWNrUmVmLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2YgOiBwdWJsaWNhdGlvblxuICAgIH07XG4gIH0sIFttYXliZVRyYWNrUmVmLCBwLCBwdWJsaWNhdGlvbiwgc291cmNlLCB0cmFja1JlZl0pO1xuICBjb25zdCB7IGVsZW1lbnRQcm9wcyB9ID0gdXNlUGFydGljaXBhbnRUaWxlKHtcbiAgICBwYXJ0aWNpcGFudDogdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQsXG4gICAgaHRtbFByb3BzLFxuICAgIHNvdXJjZTogdHJhY2tSZWZlcmVuY2Uuc291cmNlLFxuICAgIHB1YmxpY2F0aW9uOiB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbixcbiAgICBkaXNhYmxlU3BlYWtpbmdJbmRpY2F0b3IsXG4gICAgb25QYXJ0aWNpcGFudENsaWNrXG4gIH0pO1xuICBjb25zdCBpc0VuY3J5cHRlZCA9IHVzZUlzRW5jcnlwdGVkKHApO1xuICBjb25zdCBsYXlvdXRDb250ZXh0ID0gdXNlTWF5YmVMYXlvdXRDb250ZXh0KCk7XG4gIGNvbnN0IGF1dG9NYW5hZ2VTdWJzY3JpcHRpb24gPSAoX2EyID0gdXNlRmVhdHVyZUNvbnRleHQoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5hdXRvU3Vic2NyaXB0aW9uO1xuICBjb25zdCBoYW5kbGVTdWJzY3JpYmUgPSBSZWFjdDgzLnVzZUNhbGxiYWNrKFxuICAgIChzdWJzY3JpYmVkKSA9PiB7XG4gICAgICBpZiAodHJhY2tSZWZlcmVuY2Uuc291cmNlICYmICFzdWJzY3JpYmVkICYmIGxheW91dENvbnRleHQgJiYgbGF5b3V0Q29udGV4dC5waW4uZGlzcGF0Y2ggJiYgaXNUcmFja1JlZmVyZW5jZVBpbm5lZDIodHJhY2tSZWZlcmVuY2UsIGxheW91dENvbnRleHQucGluLnN0YXRlKSkge1xuICAgICAgICBsYXlvdXRDb250ZXh0LnBpbi5kaXNwYXRjaCh7IG1zZzogXCJjbGVhcl9waW5cIiB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFt0cmFja1JlZmVyZW5jZSwgbGF5b3V0Q29udGV4dF1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoeyBzdHlsZTogeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiIH0gfSwgZWxlbWVudFByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChUcmFja1JlZkNvbnRleHRJZk5lZWRlZCwgeyB0cmFja1JlZjogdHJhY2tSZWZlcmVuY2UgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudENvbnRleHRJZk5lZWRlZCwgeyBwYXJ0aWNpcGFudDogdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQgfSwgY2hpbGRyZW4gIT0gbnVsbCA/IGNoaWxkcmVuIDogLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChSZWFjdDgzLkZyYWdtZW50LCBudWxsLCBpc1RyYWNrUmVmZXJlbmNlMyh0cmFja1JlZmVyZW5jZSkgJiYgKCgoX2IyID0gdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYjIua2luZCkgPT09IFwidmlkZW9cIiB8fCB0cmFja1JlZmVyZW5jZS5zb3VyY2UgPT09IFRyYWNrNS5Tb3VyY2UuQ2FtZXJhIHx8IHRyYWNrUmVmZXJlbmNlLnNvdXJjZSA9PT0gVHJhY2s1LlNvdXJjZS5TY3JlZW5TaGFyZSkgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFxuICAgIFZpZGVvVHJhY2ssXG4gICAge1xuICAgICAgdHJhY2tSZWY6IHRyYWNrUmVmZXJlbmNlLFxuICAgICAgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkOiBoYW5kbGVTdWJzY3JpYmUsXG4gICAgICBtYW5hZ2VTdWJzY3JpcHRpb246IGF1dG9NYW5hZ2VTdWJzY3JpcHRpb25cbiAgICB9XG4gICkgOiBpc1RyYWNrUmVmZXJlbmNlMyh0cmFja1JlZmVyZW5jZSkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChcbiAgICBBdWRpb1RyYWNrLFxuICAgIHtcbiAgICAgIHRyYWNrUmVmOiB0cmFja1JlZmVyZW5jZSxcbiAgICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZDogaGFuZGxlU3Vic2NyaWJlXG4gICAgfVxuICApLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LXBsYWNlaG9sZGVyXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudFBsYWNlaG9sZGVyX2RlZmF1bHQsIG51bGwpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0sIHRyYWNrUmVmZXJlbmNlLnNvdXJjZSA9PT0gVHJhY2s1LlNvdXJjZS5DYW1lcmEgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFJlYWN0ODMuRnJhZ21lbnQsIG51bGwsIGlzRW5jcnlwdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgzLmNyZWF0ZUVsZW1lbnQoTG9ja0xvY2tlZEljb25fZGVmYXVsdCwgeyBzdHlsZTogeyBtYXJnaW5SaWdodDogXCIwLjI1cmVtXCIgfSB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChcbiAgICBUcmFja011dGVkSW5kaWNhdG9yLFxuICAgIHtcbiAgICAgIHNvdXJjZTogVHJhY2s1LlNvdXJjZS5NaWNyb3Bob25lLFxuICAgICAgc2hvdzogXCJtdXRlZFwiXG4gICAgfVxuICApLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50TmFtZSwgbnVsbCkpIDogLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChSZWFjdDgzLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFNjcmVlblNoYXJlSWNvbl9kZWZhdWx0LCB7IHN0eWxlOiB7IG1hcmdpblJpZ2h0OiBcIjAuMjVyZW1cIiB9IH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50TmFtZSwgbnVsbCwgXCIncyBzY3JlZW5cIikpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvciwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0pKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgzLmNyZWF0ZUVsZW1lbnQoRm9jdXNUb2dnbGUsIHsgdHJhY2tSZWY6IHRyYWNrUmVmZXJlbmNlIH0pKSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9sYXlvdXQvRm9jdXNMYXlvdXQudHN4XG5mdW5jdGlvbiBGb2N1c0xheW91dENvbnRhaW5lcihwcm9wcykge1xuICBjb25zdCBlbGVtZW50UHJvcHMgPSBtZXJnZVByb3BzMihwcm9wcywgeyBjbGFzc05hbWU6IFwibGstZm9jdXMtbGF5b3V0XCIgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4NC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBlbGVtZW50UHJvcHMpLCBwcm9wcy5jaGlsZHJlbik7XG59XG5mdW5jdGlvbiBGb2N1c0xheW91dChfYSkge1xuICB2YXIgX2IgPSBfYSwgeyB0cmFja1JlZiwgdHJhY2sgfSA9IF9iLCBodG1sUHJvcHMgPSBfX29ialJlc3QoX2IsIFtcInRyYWNrUmVmXCIsIFwidHJhY2tcIl0pO1xuICBjb25zdCB0cmFja1JlZmVyZW5jZSA9IHRyYWNrUmVmICE9IG51bGwgPyB0cmFja1JlZiA6IHRyYWNrO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0ODQuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudFRpbGUsIF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCB0cmFja1JlZmVyZW5jZSksIGh0bWxQcm9wcykpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9sYXlvdXQvR3JpZExheW91dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0ODggZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL1RyYWNrTG9vcC50c3hcbmltcG9ydCAqIGFzIFJlYWN0ODUgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRUcmFja1JlZmVyZW5jZUlkIGFzIGdldFRyYWNrUmVmZXJlbmNlSWQzIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gVHJhY2tMb29wKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IHRyYWNrcyB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJ0cmFja3NcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0ODUuY3JlYXRlRWxlbWVudChSZWFjdDg1LkZyYWdtZW50LCBudWxsLCB0cmFja3MubWFwKCh0cmFja1JlZmVyZW5jZSkgPT4ge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4NS5jcmVhdGVFbGVtZW50KFxuICAgICAgVHJhY2tSZWZDb250ZXh0LlByb3ZpZGVyLFxuICAgICAge1xuICAgICAgICB2YWx1ZTogdHJhY2tSZWZlcmVuY2UsXG4gICAgICAgIGtleTogZ2V0VHJhY2tSZWZlcmVuY2VJZDModHJhY2tSZWZlcmVuY2UpXG4gICAgICB9LFxuICAgICAgY2xvbmVTaW5nbGVDaGlsZChwcm9wcy5jaGlsZHJlbilcbiAgICApO1xuICB9KSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL1BhZ2luYXRpb25Db250cm9sLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q4NiBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNyZWF0ZUludGVyYWN0aW5nT2JzZXJ2YWJsZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmZ1bmN0aW9uIFBhZ2luYXRpb25Db250cm9sKHtcbiAgdG90YWxQYWdlQ291bnQsXG4gIG5leHRQYWdlLFxuICBwcmV2UGFnZSxcbiAgY3VycmVudFBhZ2UsXG4gIHBhZ2VzQ29udGFpbmVyOiBjb25uZWN0ZWRFbGVtZW50XG59KSB7XG4gIGNvbnN0IFtpbnRlcmFjdGl2ZSwgc2V0SW50ZXJhY3RpdmVdID0gUmVhY3Q4Ni51c2VTdGF0ZShmYWxzZSk7XG4gIFJlYWN0ODYudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgc3Vic2NyaXB0aW9uO1xuICAgIGlmIChjb25uZWN0ZWRFbGVtZW50KSB7XG4gICAgICBzdWJzY3JpcHRpb24gPSBjcmVhdGVJbnRlcmFjdGluZ09ic2VydmFibGUoY29ubmVjdGVkRWxlbWVudC5jdXJyZW50LCAyZTMpLnN1YnNjcmliZShcbiAgICAgICAgc2V0SW50ZXJhY3RpdmVcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtjb25uZWN0ZWRFbGVtZW50XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4Ni5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhZ2luYXRpb24tY29udHJvbFwiLCBcImRhdGEtbGstdXNlci1pbnRlcmFjdGlvblwiOiBpbnRlcmFjdGl2ZSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4Ni5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvblwiLCBvbkNsaWNrOiBwcmV2UGFnZSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4Ni5jcmVhdGVFbGVtZW50KENoZXZyb25fZGVmYXVsdCwgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4Ni5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay1wYWdpbmF0aW9uLWNvdW50XCIgfSwgYCR7Y3VycmVudFBhZ2V9IG9mICR7dG90YWxQYWdlQ291bnR9YCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg2LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uXCIsIG9uQ2xpY2s6IG5leHRQYWdlIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg2LmNyZWF0ZUVsZW1lbnQoQ2hldnJvbl9kZWZhdWx0LCBudWxsKSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9QYWdpbmF0aW9uSW5kaWNhdG9yLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q4NyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFBhZ2luYXRpb25JbmRpY2F0b3IoeyB0b3RhbFBhZ2VDb3VudCwgY3VycmVudFBhZ2UgfSkge1xuICBjb25zdCBidWJibGVzID0gbmV3IEFycmF5KHRvdGFsUGFnZUNvdW50KS5maWxsKFwiXCIpLm1hcCgoXywgaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggKyAxID09PSBjdXJyZW50UGFnZSkge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg3LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgXCJkYXRhLWxrLWFjdGl2ZVwiOiB0cnVlLCBrZXk6IGluZGV4IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0ODcuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBrZXk6IGluZGV4IH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4Ny5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhZ2luYXRpb24taW5kaWNhdG9yXCIgfSwgYnViYmxlcyk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2xheW91dC9HcmlkTGF5b3V0LnRzeFxuZnVuY3Rpb24gR3JpZExheW91dChfYSkge1xuICB2YXIgX2IgPSBfYSwgeyB0cmFja3MgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1widHJhY2tzXCJdKTtcbiAgY29uc3QgZ3JpZEVsID0gUmVhY3Q4OC5jcmVhdGVSZWYoKTtcbiAgY29uc3QgZWxlbWVudFByb3BzID0gUmVhY3Q4OC51c2VNZW1vKFxuICAgICgpID0+IG1lcmdlUHJvcHMyKHByb3BzLCB7IGNsYXNzTmFtZTogXCJsay1ncmlkLWxheW91dFwiIH0pLFxuICAgIFtwcm9wc11cbiAgKTtcbiAgY29uc3QgeyBsYXlvdXQgfSA9IHVzZUdyaWRMYXlvdXQoZ3JpZEVsLCB0cmFja3MubGVuZ3RoKTtcbiAgY29uc3QgcGFnaW5hdGlvbiA9IHVzZVBhZ2luYXRpb24obGF5b3V0Lm1heFRpbGVzLCB0cmFja3MpO1xuICB1c2VTd2lwZShncmlkRWwsIHtcbiAgICBvbkxlZnRTd2lwZTogcGFnaW5hdGlvbi5uZXh0UGFnZSxcbiAgICBvblJpZ2h0U3dpcGU6IHBhZ2luYXRpb24ucHJldlBhZ2VcbiAgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4OC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmOiBncmlkRWwsIFwiZGF0YS1say1wYWdpbmF0aW9uXCI6IHBhZ2luYXRpb24udG90YWxQYWdlQ291bnQgPiAxIH0sIGVsZW1lbnRQcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg4LmNyZWF0ZUVsZW1lbnQoVHJhY2tMb29wLCB7IHRyYWNrczogcGFnaW5hdGlvbi50cmFja3MgfSwgcHJvcHMuY2hpbGRyZW4pLCB0cmFja3MubGVuZ3RoID4gbGF5b3V0Lm1heFRpbGVzICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg4LmNyZWF0ZUVsZW1lbnQoUmVhY3Q4OC5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0ODguY3JlYXRlRWxlbWVudChcbiAgICBQYWdpbmF0aW9uSW5kaWNhdG9yLFxuICAgIHtcbiAgICAgIHRvdGFsUGFnZUNvdW50OiBwYWdpbmF0aW9uLnRvdGFsUGFnZUNvdW50LFxuICAgICAgY3VycmVudFBhZ2U6IHBhZ2luYXRpb24uY3VycmVudFBhZ2VcbiAgICB9XG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg4LmNyZWF0ZUVsZW1lbnQoUGFnaW5hdGlvbkNvbnRyb2wsIF9fc3ByZWFkVmFsdWVzKHsgcGFnZXNDb250YWluZXI6IGdyaWRFbCB9LCBwYWdpbmF0aW9uKSkpKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvbGF5b3V0L0Nhcm91c2VsTGF5b3V0LnRzeFxuaW1wb3J0IHsgZ2V0U2Nyb2xsQmFyV2lkdGggfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDg5IGZyb20gXCJyZWFjdFwiO1xudmFyIE1JTl9IRUlHSFQgPSAxMzA7XG52YXIgTUlOX1dJRFRIID0gMTQwO1xudmFyIE1JTl9WSVNJQkxFX1RJTEVTID0gMTtcbnZhciBBU1BFQ1RfUkFUSU8gPSAxNiAvIDEwO1xudmFyIEFTUEVDVF9SQVRJT19JTlZFUlQgPSAoMSAtIEFTUEVDVF9SQVRJTykgKiAtMTtcbnZhciBDYXJvdXNlbFZpZXcgPSBDYXJvdXNlbExheW91dDtcbmZ1bmN0aW9uIENhcm91c2VsTGF5b3V0KF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IHRyYWNrcywgb3JpZW50YXRpb24gfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1widHJhY2tzXCIsIFwib3JpZW50YXRpb25cIl0pO1xuICBjb25zdCBhc2lkZUVsID0gUmVhY3Q4OS51c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtwcmV2VGlsZXMsIHNldFByZXZUaWxlc10gPSBSZWFjdDg5LnVzZVN0YXRlKDApO1xuICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHVzZVNpemUoYXNpZGVFbCk7XG4gIGNvbnN0IGNhcm91c2VsT3JpZW50YXRpb24gPSBvcmllbnRhdGlvbiA/IG9yaWVudGF0aW9uIDogaGVpZ2h0ID49IHdpZHRoID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCI7XG4gIGNvbnN0IHRpbGVTcGFuID0gY2Fyb3VzZWxPcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiID8gTWF0aC5tYXgod2lkdGggKiBBU1BFQ1RfUkFUSU9fSU5WRVJULCBNSU5fSEVJR0hUKSA6IE1hdGgubWF4KGhlaWdodCAqIEFTUEVDVF9SQVRJTywgTUlOX1dJRFRIKTtcbiAgY29uc3Qgc2Nyb2xsQmFyV2lkdGggPSBnZXRTY3JvbGxCYXJXaWR0aCgpO1xuICBjb25zdCB0aWxlc1RoYXRGaXQgPSBjYXJvdXNlbE9yaWVudGF0aW9uID09PSBcInZlcnRpY2FsXCIgPyBNYXRoLm1heCgoaGVpZ2h0IC0gc2Nyb2xsQmFyV2lkdGgpIC8gdGlsZVNwYW4sIE1JTl9WSVNJQkxFX1RJTEVTKSA6IE1hdGgubWF4KCh3aWR0aCAtIHNjcm9sbEJhcldpZHRoKSAvIHRpbGVTcGFuLCBNSU5fVklTSUJMRV9USUxFUyk7XG4gIGxldCBtYXhWaXNpYmxlVGlsZXMgPSBNYXRoLnJvdW5kKHRpbGVzVGhhdEZpdCk7XG4gIGlmIChNYXRoLmFicyh0aWxlc1RoYXRGaXQgLSBwcmV2VGlsZXMpIDwgMC41KSB7XG4gICAgbWF4VmlzaWJsZVRpbGVzID0gTWF0aC5yb3VuZChwcmV2VGlsZXMpO1xuICB9IGVsc2UgaWYgKHByZXZUaWxlcyAhPT0gdGlsZXNUaGF0Rml0KSB7XG4gICAgc2V0UHJldlRpbGVzKHRpbGVzVGhhdEZpdCk7XG4gIH1cbiAgY29uc3Qgc29ydGVkVGlsZXMgPSB1c2VWaXN1YWxTdGFibGVVcGRhdGUodHJhY2tzLCBtYXhWaXNpYmxlVGlsZXMpO1xuICBSZWFjdDg5LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFzaWRlRWwuY3VycmVudCkge1xuICAgICAgYXNpZGVFbC5jdXJyZW50LmRhdGFzZXQubGtPcmllbnRhdGlvbiA9IGNhcm91c2VsT3JpZW50YXRpb247XG4gICAgICBhc2lkZUVsLmN1cnJlbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWxrLW1heC12aXNpYmxlLXRpbGVzXCIsIG1heFZpc2libGVUaWxlcy50b1N0cmluZygpKTtcbiAgICB9XG4gIH0sIFttYXhWaXNpYmxlVGlsZXMsIGNhcm91c2VsT3JpZW50YXRpb25dKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg5LmNyZWF0ZUVsZW1lbnQoXCJhc2lkZVwiLCBfX3NwcmVhZFZhbHVlcyh7IGtleTogY2Fyb3VzZWxPcmllbnRhdGlvbiwgY2xhc3NOYW1lOiBcImxrLWNhcm91c2VsXCIsIHJlZjogYXNpZGVFbCB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg5LmNyZWF0ZUVsZW1lbnQoVHJhY2tMb29wLCB7IHRyYWNrczogc29ydGVkVGlsZXMgfSwgcHJvcHMuY2hpbGRyZW4pKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvbGF5b3V0L0xheW91dENvbnRleHRQcm92aWRlci50c3hcbmltcG9ydCB7IGxvZyBhcyBsb2cxMCB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0OTAgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBMYXlvdXRDb250ZXh0UHJvdmlkZXIoe1xuICB2YWx1ZSxcbiAgb25QaW5DaGFuZ2UsXG4gIG9uV2lkZ2V0Q2hhbmdlLFxuICBjaGlsZHJlblxufSkge1xuICBjb25zdCBsYXlvdXRDb250ZXh0VmFsdWUgPSB1c2VFbnN1cmVDcmVhdGVMYXlvdXRDb250ZXh0KHZhbHVlKTtcbiAgUmVhY3Q5MC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvZzEwLmRlYnVnKFwiUGluU3RhdGUgVXBkYXRlZFwiLCB7IHN0YXRlOiBsYXlvdXRDb250ZXh0VmFsdWUucGluLnN0YXRlIH0pO1xuICAgIGlmIChvblBpbkNoYW5nZSAmJiBsYXlvdXRDb250ZXh0VmFsdWUucGluLnN0YXRlKVxuICAgICAgb25QaW5DaGFuZ2UobGF5b3V0Q29udGV4dFZhbHVlLnBpbi5zdGF0ZSk7XG4gIH0sIFtsYXlvdXRDb250ZXh0VmFsdWUucGluLnN0YXRlLCBvblBpbkNoYW5nZV0pO1xuICBSZWFjdDkwLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9nMTAuZGVidWcoXCJXaWRnZXQgVXBkYXRlZFwiLCB7IHdpZGdldFN0YXRlOiBsYXlvdXRDb250ZXh0VmFsdWUud2lkZ2V0LnN0YXRlIH0pO1xuICAgIGlmIChvbldpZGdldENoYW5nZSAmJiBsYXlvdXRDb250ZXh0VmFsdWUud2lkZ2V0LnN0YXRlKSB7XG4gICAgICBvbldpZGdldENoYW5nZShsYXlvdXRDb250ZXh0VmFsdWUud2lkZ2V0LnN0YXRlKTtcbiAgICB9XG4gIH0sIFtvbldpZGdldENoYW5nZSwgbGF5b3V0Q29udGV4dFZhbHVlLndpZGdldC5zdGF0ZV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTAuY3JlYXRlRWxlbWVudChMYXlvdXRDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBsYXlvdXRDb250ZXh0VmFsdWUgfSwgY2hpbGRyZW4pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9MaXZlS2l0Um9vbS50c3hcbmltcG9ydCAqIGFzIFJlYWN0OTEgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBMaXZlS2l0Um9vbShwcm9wcykge1xuICBjb25zdCB7IHJvb20sIGh0bWxQcm9wcyB9ID0gdXNlTGl2ZUtpdFJvb20ocHJvcHMpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgaHRtbFByb3BzKSwgcm9vbSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5MS5jcmVhdGVFbGVtZW50KFJvb21Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiByb29tIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkxLmNyZWF0ZUVsZW1lbnQoTEtGZWF0dXJlQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogcHJvcHMuZmVhdHVyZUZsYWdzIH0sIHByb3BzLmNoaWxkcmVuKSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9BdWRpb1Zpc3VhbGl6ZXIudHN4XG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazYgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0OTIgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBBdWRpb1Zpc3VhbGl6ZXIoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHsgcGFydGljaXBhbnQsIHRyYWNrUmVmIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcInBhcnRpY2lwYW50XCIsIFwidHJhY2tSZWZcIl0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IHN2Z1dpZHRoID0gMjAwO1xuICBjb25zdCBzdmdIZWlnaHQgPSA5MDtcbiAgY29uc3QgYmFyV2lkdGggPSA2O1xuICBjb25zdCBiYXJTcGFjaW5nID0gNDtcbiAgY29uc3Qgdm9sTXVsdGlwbGllciA9IDUwO1xuICBjb25zdCBiYXJDb3VudCA9IDc7XG4gIGNvbnN0IHAgPSAoX2EyID0gdXNlTWF5YmVQYXJ0aWNpcGFudENvbnRleHQoKSkgIT0gbnVsbCA/IF9hMiA6IHBhcnRpY2lwYW50O1xuICBsZXQgcmVmID0gKF9iMiA9IHVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCkpICE9IG51bGwgPyBfYjIgOiB0cmFja1JlZjtcbiAgaWYgKCFyZWYpIHtcbiAgICBpZiAoIXApIHtcbiAgICAgIHRocm93IEVycm9yKGBQYXJ0aWNpcGFudCBtaXNzaW5nLCBwcm92aWRlIGl0IGRpcmVjdGx5IG9yIHdpdGhpbiBhIGNvbnRleHRgKTtcbiAgICB9XG4gICAgcmVmID0geyBwYXJ0aWNpcGFudDogcCwgc291cmNlOiBUcmFjazYuU291cmNlLk1pY3JvcGhvbmUgfTtcbiAgfVxuICBjb25zdCB2b2x1bWVzID0gdXNlTXVsdGliYW5kVHJhY2tWb2x1bWUocmVmLCB7IGJhbmRzOiA3LCBsb1Bhc3M6IDMwMCB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJzdmdcIixcbiAgICBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICB2aWV3Qm94OiBgMCAwICR7c3ZnV2lkdGh9ICR7c3ZnSGVpZ2h0fWBcbiAgICB9LCBwcm9wcyksIHtcbiAgICAgIGNsYXNzTmFtZTogXCJsay1hdWRpby12aXN1YWxpemVyXCJcbiAgICB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7IHg6IFwiMFwiLCB5OiBcIjBcIiwgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImdcIixcbiAgICAgIHtcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHsoc3ZnV2lkdGggLSBiYXJDb3VudCAqIChiYXJXaWR0aCArIGJhclNwYWNpbmcpKSAvIDJ9cHgsIDApYFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdm9sdW1lcy5tYXAoKHZvbCwgaWR4KSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcInJlY3RcIixcbiAgICAgICAge1xuICAgICAgICAgIGtleTogaWR4LFxuICAgICAgICAgIHg6IGlkeCAqIChiYXJXaWR0aCArIGJhclNwYWNpbmcpLFxuICAgICAgICAgIHk6IHN2Z0hlaWdodCAvIDIgLSB2b2wgKiB2b2xNdWx0aXBsaWVyIC8gMixcbiAgICAgICAgICB3aWR0aDogYmFyV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiB2b2wgKiB2b2xNdWx0aXBsaWVyXG4gICAgICAgIH1cbiAgICAgICkpXG4gICAgKVxuICApO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9QYXJ0aWNpcGFudExvb3AudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDkzIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gUGFydGljaXBhbnRMb29wKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IHBhcnRpY2lwYW50cyB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJwYXJ0aWNpcGFudHNcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTMuY3JlYXRlRWxlbWVudChSZWFjdDkzLkZyYWdtZW50LCBudWxsLCBwYXJ0aWNpcGFudHMubWFwKChwYXJ0aWNpcGFudCkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0OTMuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHBhcnRpY2lwYW50LCBrZXk6IHBhcnRpY2lwYW50LmlkZW50aXR5IH0sIGNsb25lU2luZ2xlQ2hpbGQocHJvcHMuY2hpbGRyZW4pKSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9Sb29tQXVkaW9SZW5kZXJlci50c3hcbmltcG9ydCB7IGdldFRyYWNrUmVmZXJlbmNlSWQgYXMgZ2V0VHJhY2tSZWZlcmVuY2VJZDQsIGlzTG9jYWwgYXMgaXNMb2NhbDIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazcgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0OTQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBSb29tQXVkaW9SZW5kZXJlcih7IHZvbHVtZSwgbXV0ZWQgfSkge1xuICBjb25zdCB0cmFja3MgPSB1c2VUcmFja3MoXG4gICAgW1RyYWNrNy5Tb3VyY2UuTWljcm9waG9uZSwgVHJhY2s3LlNvdXJjZS5TY3JlZW5TaGFyZUF1ZGlvLCBUcmFjazcuU291cmNlLlVua25vd25dLFxuICAgIHtcbiAgICAgIHVwZGF0ZU9ubHlPbjogW10sXG4gICAgICBvbmx5U3Vic2NyaWJlZDogZmFsc2VcbiAgICB9XG4gICkuZmlsdGVyKChyZWYpID0+ICFpc0xvY2FsMihyZWYucGFydGljaXBhbnQpICYmIHJlZi5wdWJsaWNhdGlvbi5raW5kID09PSBUcmFjazcuS2luZC5BdWRpbyk7XG4gIFJlYWN0OTQudXNlRWZmZWN0KCgpID0+IHtcbiAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHRyYWNrcykge1xuICAgICAgdHJhY2sucHVibGljYXRpb24uc2V0U3Vic2NyaWJlZCh0cnVlKTtcbiAgICB9XG4gIH0sIFt0cmFja3NdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZTogeyBkaXNwbGF5OiBcIm5vbmVcIiB9IH0sIHRyYWNrcy5tYXAoKHRyYWNrUmVmKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5NC5jcmVhdGVFbGVtZW50KFxuICAgIEF1ZGlvVHJhY2ssXG4gICAge1xuICAgICAga2V5OiBnZXRUcmFja1JlZmVyZW5jZUlkNCh0cmFja1JlZiksXG4gICAgICB0cmFja1JlZixcbiAgICAgIHZvbHVtZSxcbiAgICAgIG11dGVkXG4gICAgfVxuICApKSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL1Jvb21OYW1lLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q5NSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFJvb21OYW1lKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgY2hpbGRyZW5Qb3NpdGlvbiA9IFwiYmVmb3JlXCIsXG4gICAgY2hpbGRyZW5cbiAgfSA9IF9iLCBodG1sQXR0cmlidXRlcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiY2hpbGRyZW5Qb3NpdGlvblwiLFxuICAgIFwiY2hpbGRyZW5cIlxuICBdKTtcbiAgY29uc3QgeyBuYW1lIH0gPSB1c2VSb29tSW5mbygpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgX19zcHJlYWRWYWx1ZXMoe30sIGh0bWxBdHRyaWJ1dGVzKSwgY2hpbGRyZW5Qb3NpdGlvbiA9PT0gXCJiZWZvcmVcIiAmJiBjaGlsZHJlbiwgbmFtZSwgY2hpbGRyZW5Qb3NpdGlvbiA9PT0gXCJhZnRlclwiICYmIGNoaWxkcmVuKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvVG9hc3QudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDk2IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gVG9hc3QocHJvcHMpIHtcbiAgY29uc3QgaHRtbFByb3BzID0gUmVhY3Q5Ni51c2VNZW1vKCgpID0+IG1lcmdlUHJvcHMyKHByb3BzLCB7IGNsYXNzTmFtZTogXCJsay10b2FzdFwiIH0pLCBbcHJvcHNdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoe30sIGh0bWxQcm9wcyksIHByb3BzLmNoaWxkcmVuKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvcGFydGljaXBhbnQvUGFydGljaXBhbnRBdWRpb1RpbGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDk3IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgVHJhY2sgYXMgVHJhY2s4IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5mdW5jdGlvbiBQYXJ0aWNpcGFudEF1ZGlvVGlsZShfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHBhcnRpY2lwYW50LFxuICAgIGNoaWxkcmVuLFxuICAgIHNvdXJjZSxcbiAgICBwdWJsaWNhdGlvbixcbiAgICBkaXNhYmxlU3BlYWtpbmdJbmRpY2F0b3IsXG4gICAgb25QYXJ0aWNpcGFudENsaWNrXG4gIH0gPSBfYiwgaHRtbFByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJwYXJ0aWNpcGFudFwiLFxuICAgIFwiY2hpbGRyZW5cIixcbiAgICBcInNvdXJjZVwiLFxuICAgIFwicHVibGljYXRpb25cIixcbiAgICBcImRpc2FibGVTcGVha2luZ0luZGljYXRvclwiLFxuICAgIFwib25QYXJ0aWNpcGFudENsaWNrXCJcbiAgXSk7XG4gIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCk7XG4gIGNvbnN0IHsgZWxlbWVudFByb3BzIH0gPSB1c2VQYXJ0aWNpcGFudFRpbGUoe1xuICAgIHBhcnRpY2lwYW50OiBwLFxuICAgIGh0bWxQcm9wcyxcbiAgICBkaXNhYmxlU3BlYWtpbmdJbmRpY2F0b3IsXG4gICAgc291cmNlOiBUcmFjazguU291cmNlLk1pY3JvcGhvbmUsXG4gICAgcHVibGljYXRpb24sXG4gICAgb25QYXJ0aWNpcGFudENsaWNrXG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7IHN0eWxlOiB7IHBvc2l0aW9uOiBcInJlbGF0aXZlXCIgfSB9LCBlbGVtZW50UHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Ny5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50Q29udGV4dElmTmVlZGVkLCB7IHBhcnRpY2lwYW50OiBwIH0sIGNoaWxkcmVuICE9IG51bGwgPyBjaGlsZHJlbiA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk3LmNyZWF0ZUVsZW1lbnQoUmVhY3Q5Ny5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChBdWRpb1RyYWNrLCB7IHNvdXJjZTogc291cmNlICE9IG51bGwgPyBzb3VyY2UgOiBUcmFjazguU291cmNlLk1pY3JvcGhvbmUgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk3LmNyZWF0ZUVsZW1lbnQoQXVkaW9WaXN1YWxpemVyLCBudWxsKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk3LmNyZWF0ZUVsZW1lbnQoVHJhY2tNdXRlZEluZGljYXRvciwgeyBzb3VyY2U6IFRyYWNrOC5Tb3VyY2UuTWljcm9waG9uZSB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudE5hbWUsIG51bGwpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvciwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0pKSkpKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvQ29ubmVjdGlvblN0YXRlVG9hc3QudHN4XG5pbXBvcnQgeyBDb25uZWN0aW9uU3RhdGUgYXMgQ29ubmVjdGlvblN0YXRlNCB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUmVhY3Q5OCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIENvbm5lY3Rpb25TdGF0ZVRvYXN0KHByb3BzKSB7XG4gIGNvbnN0IFtub3RpZmljYXRpb24sIHNldE5vdGlmaWNhdGlvbl0gPSBSZWFjdDk4LnVzZVN0YXRlKHZvaWQgMCk7XG4gIGNvbnN0IHN0YXRlID0gdXNlQ29ubmVjdGlvblN0YXRlKHByb3BzLnJvb20pO1xuICBSZWFjdDk4LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSBDb25uZWN0aW9uU3RhdGU0LlJlY29ubmVjdGluZzpcbiAgICAgICAgc2V0Tm90aWZpY2F0aW9uKFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk4LmNyZWF0ZUVsZW1lbnQoUmVhY3Q5OC5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0OTguY3JlYXRlRWxlbWVudChTcGlubmVySWNvbl9kZWZhdWx0LCB7IGNsYXNzTmFtZTogXCJsay1zcGlubmVyXCIgfSksIFwiIFJlY29ubmVjdGluZ1wiKVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29ubmVjdGlvblN0YXRlNC5Db25uZWN0aW5nOlxuICAgICAgICBzZXROb3RpZmljYXRpb24oXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIFJlYWN0OTguY3JlYXRlRWxlbWVudChSZWFjdDk4LkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5OC5jcmVhdGVFbGVtZW50KFNwaW5uZXJJY29uX2RlZmF1bHQsIHsgY2xhc3NOYW1lOiBcImxrLXNwaW5uZXJcIiB9KSwgXCIgQ29ubmVjdGluZ1wiKVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29ubmVjdGlvblN0YXRlNC5EaXNjb25uZWN0ZWQ6XG4gICAgICAgIHNldE5vdGlmaWNhdGlvbigvKiBAX19QVVJFX18gKi8gUmVhY3Q5OC5jcmVhdGVFbGVtZW50KFJlYWN0OTguRnJhZ21lbnQsIG51bGwsIFwiRGlzY29ubmVjdGVkXCIpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZXROb3RpZmljYXRpb24odm9pZCAwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LCBbc3RhdGVdKTtcbiAgcmV0dXJuIG5vdGlmaWNhdGlvbiA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk4LmNyZWF0ZUVsZW1lbnQoVG9hc3QsIHsgY2xhc3NOYW1lOiBcImxrLXRvYXN0LWNvbm5lY3Rpb24tc3RhdGVcIiB9LCBub3RpZmljYXRpb24pIDogLyogQF9fUFVSRV9fICovIFJlYWN0OTguY3JlYXRlRWxlbWVudChSZWFjdDk4LkZyYWdtZW50LCBudWxsKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvQ2hhdEVudHJ5LnRzeFxuaW1wb3J0IHsgdG9rZW5pemUsIGNyZWF0ZURlZmF1bHRHcmFtbWFyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q5OSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIENoYXRFbnRyeShfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIGVudHJ5LFxuICAgIGhpZGVOYW1lID0gZmFsc2UsXG4gICAgaGlkZVRpbWVzdGFtcCA9IGZhbHNlLFxuICAgIG1lc3NhZ2VGb3JtYXR0ZXJcbiAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiZW50cnlcIixcbiAgICBcImhpZGVOYW1lXCIsXG4gICAgXCJoaWRlVGltZXN0YW1wXCIsXG4gICAgXCJtZXNzYWdlRm9ybWF0dGVyXCJcbiAgXSk7XG4gIHZhciBfYTIsIF9iMiwgX2MsIF9kO1xuICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gUmVhY3Q5OS51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gbWVzc2FnZUZvcm1hdHRlciA/IG1lc3NhZ2VGb3JtYXR0ZXIoZW50cnkubWVzc2FnZSkgOiBlbnRyeS5tZXNzYWdlO1xuICB9LCBbZW50cnkubWVzc2FnZSwgbWVzc2FnZUZvcm1hdHRlcl0pO1xuICBjb25zdCBoYXNCZWVuRWRpdGVkID0gISFlbnRyeS5lZGl0VGltZXN0YW1wO1xuICBjb25zdCB0aW1lID0gbmV3IERhdGUoZW50cnkudGltZXN0YW1wKTtcbiAgY29uc3QgbG9jYWxlID0gbmF2aWdhdG9yID8gbmF2aWdhdG9yLmxhbmd1YWdlIDogXCJlbi1VU1wiO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTkuY3JlYXRlRWxlbWVudChcbiAgICBcImxpXCIsXG4gICAgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWNoYXQtZW50cnlcIixcbiAgICAgIHRpdGxlOiB0aW1lLnRvTG9jYWxlVGltZVN0cmluZyhsb2NhbGUsIHsgdGltZVN0eWxlOiBcImZ1bGxcIiB9KSxcbiAgICAgIFwiZGF0YS1say1tZXNzYWdlLW9yaWdpblwiOiAoKF9hMiA9IGVudHJ5LmZyb20pID09IG51bGwgPyB2b2lkIDAgOiBfYTIuaXNMb2NhbCkgPyBcImxvY2FsXCIgOiBcInJlbW90ZVwiXG4gICAgfSwgcHJvcHMpLFxuICAgICghaGlkZVRpbWVzdGFtcCB8fCAhaGlkZU5hbWUgfHwgaGFzQmVlbkVkaXRlZCkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0OTkuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibGstbWV0YS1kYXRhXCIgfSwgIWhpZGVOYW1lICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk5LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbmFtZVwiIH0sIChfZCA9IChfYjIgPSBlbnRyeS5mcm9tKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLm5hbWUpICE9IG51bGwgPyBfZCA6IChfYyA9IGVudHJ5LmZyb20pID09IG51bGwgPyB2b2lkIDAgOiBfYy5pZGVudGl0eSksICghaGlkZVRpbWVzdGFtcCB8fCBoYXNCZWVuRWRpdGVkKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5OS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay10aW1lc3RhbXBcIiB9LCBoYXNCZWVuRWRpdGVkICYmIFwiZWRpdGVkIFwiLCB0aW1lLnRvTG9jYWxlVGltZVN0cmluZyhsb2NhbGUsIHsgdGltZVN0eWxlOiBcInNob3J0XCIgfSkpKSxcbiAgICAvKiBAX19QVVJFX18gKi8gUmVhY3Q5OS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay1tZXNzYWdlLWJvZHlcIiB9LCBmb3JtYXR0ZWRNZXNzYWdlKVxuICApO1xufVxuZnVuY3Rpb24gZm9ybWF0Q2hhdE1lc3NhZ2VMaW5rcyhtZXNzYWdlKSB7XG4gIHJldHVybiB0b2tlbml6ZShtZXNzYWdlLCBjcmVhdGVEZWZhdWx0R3JhbW1hcigpKS5tYXAoKHRvaywgaSkgPT4ge1xuICAgIGlmICh0eXBlb2YgdG9rID09PSBgc3RyaW5nYCkge1xuICAgICAgcmV0dXJuIHRvaztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY29udGVudCA9IHRvay5jb250ZW50LnRvU3RyaW5nKCk7XG4gICAgICBjb25zdCBocmVmID0gdG9rLnR5cGUgPT09IGB1cmxgID8gL15odHRwKHM/KTpcXC9cXC8vLnRlc3QoY29udGVudCkgPyBjb250ZW50IDogYGh0dHBzOi8vJHtjb250ZW50fWAgOiBgbWFpbHRvOiR7Y29udGVudH1gO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk5LmNyZWF0ZUVsZW1lbnQoXCJhXCIsIHsgY2xhc3NOYW1lOiBcImxrLWNoYXQtbGlua1wiLCBrZXk6IGksIGhyZWYsIHRhcmdldDogXCJfYmxhbmtcIiwgcmVsOiBcIm5vcmVmZXJyZXJcIiB9LCBjb250ZW50KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBzcmMvcHJlZmFicy9DaGF0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMDAgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBDaGF0KF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgbWVzc2FnZUZvcm1hdHRlcixcbiAgICBtZXNzYWdlRGVjb2RlcixcbiAgICBtZXNzYWdlRW5jb2RlcixcbiAgICBjaGFubmVsVG9waWNcbiAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwibWVzc2FnZUZvcm1hdHRlclwiLFxuICAgIFwibWVzc2FnZURlY29kZXJcIixcbiAgICBcIm1lc3NhZ2VFbmNvZGVyXCIsXG4gICAgXCJjaGFubmVsVG9waWNcIlxuICBdKTtcbiAgY29uc3QgaW5wdXRSZWYgPSBSZWFjdDEwMC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHVsUmVmID0gUmVhY3QxMDAudXNlUmVmKG51bGwpO1xuICBjb25zdCBjaGF0T3B0aW9ucyA9IFJlYWN0MTAwLnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7IG1lc3NhZ2VEZWNvZGVyLCBtZXNzYWdlRW5jb2RlciwgY2hhbm5lbFRvcGljIH07XG4gIH0sIFttZXNzYWdlRGVjb2RlciwgbWVzc2FnZUVuY29kZXIsIGNoYW5uZWxUb3BpY10pO1xuICBjb25zdCB7IHNlbmQsIGNoYXRNZXNzYWdlcywgaXNTZW5kaW5nIH0gPSB1c2VDaGF0KGNoYXRPcHRpb25zKTtcbiAgY29uc3QgbGF5b3V0Q29udGV4dCA9IHVzZU1heWJlTGF5b3V0Q29udGV4dCgpO1xuICBjb25zdCBsYXN0UmVhZE1zZ0F0ID0gUmVhY3QxMDAudXNlUmVmKDApO1xuICBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcbiAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChpbnB1dFJlZi5jdXJyZW50ICYmIGlucHV0UmVmLmN1cnJlbnQudmFsdWUudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgIGlmIChzZW5kKSB7XG4gICAgICAgICAgeWllbGQgc2VuZChpbnB1dFJlZi5jdXJyZW50LnZhbHVlKTtcbiAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBSZWFjdDEwMC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgaWYgKHVsUmVmKSB7XG4gICAgICAoX2EyID0gdWxSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5zY3JvbGxUbyh7IHRvcDogdWxSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQgfSk7XG4gICAgfVxuICB9LCBbdWxSZWYsIGNoYXRNZXNzYWdlc10pO1xuICBSZWFjdDEwMC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfYTIsIF9iMiwgX2MsIF9kLCBfZTtcbiAgICBpZiAoIWxheW91dENvbnRleHQgfHwgY2hhdE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoKChfYTIgPSBsYXlvdXRDb250ZXh0LndpZGdldC5zdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5zaG93Q2hhdCkgJiYgY2hhdE1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgbGFzdFJlYWRNc2dBdC5jdXJyZW50ICE9PSAoKF9iMiA9IGNoYXRNZXNzYWdlc1tjaGF0TWVzc2FnZXMubGVuZ3RoIC0gMV0pID09IG51bGwgPyB2b2lkIDAgOiBfYjIudGltZXN0YW1wKSkge1xuICAgICAgbGFzdFJlYWRNc2dBdC5jdXJyZW50ID0gKF9jID0gY2hhdE1lc3NhZ2VzW2NoYXRNZXNzYWdlcy5sZW5ndGggLSAxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnRpbWVzdGFtcDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdW5yZWFkTWVzc2FnZUNvdW50ID0gY2hhdE1lc3NhZ2VzLmZpbHRlcihcbiAgICAgIChtc2cpID0+ICFsYXN0UmVhZE1zZ0F0LmN1cnJlbnQgfHwgbXNnLnRpbWVzdGFtcCA+IGxhc3RSZWFkTXNnQXQuY3VycmVudFxuICAgICkubGVuZ3RoO1xuICAgIGNvbnN0IHsgd2lkZ2V0IH0gPSBsYXlvdXRDb250ZXh0O1xuICAgIGlmICh1bnJlYWRNZXNzYWdlQ291bnQgPiAwICYmICgoX2QgPSB3aWRnZXQuc3RhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfZC51bnJlYWRNZXNzYWdlcykgIT09IHVucmVhZE1lc3NhZ2VDb3VudCkge1xuICAgICAgKF9lID0gd2lkZ2V0LmRpc3BhdGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2UuY2FsbCh3aWRnZXQsIHsgbXNnOiBcInVucmVhZF9tc2dcIiwgY291bnQ6IHVucmVhZE1lc3NhZ2VDb3VudCB9KTtcbiAgICB9XG4gIH0sIFtjaGF0TWVzc2FnZXMsIGxheW91dENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dENvbnRleHQud2lkZ2V0XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDAuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHsgY2xhc3NOYW1lOiBcImxrLWNoYXRcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstY2hhdC1oZWFkZXJcIiB9LCBcIk1lc3NhZ2VzXCIsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMC5jcmVhdGVFbGVtZW50KENoYXRUb2dnbGUsIHsgY2xhc3NOYW1lOiBcImxrLWNsb3NlLWJ1dHRvblwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMC5jcmVhdGVFbGVtZW50KENoYXRDbG9zZUljb25fZGVmYXVsdCwgbnVsbCkpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAwLmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCB7IGNsYXNzTmFtZTogXCJsay1saXN0IGxrLWNoYXQtbWVzc2FnZXNcIiwgcmVmOiB1bFJlZiB9LCBwcm9wcy5jaGlsZHJlbiA/IGNoYXRNZXNzYWdlcy5tYXAoXG4gICAgKG1zZywgaWR4KSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgcmV0dXJuIGNsb25lU2luZ2xlQ2hpbGQocHJvcHMuY2hpbGRyZW4sIHtcbiAgICAgICAgZW50cnk6IG1zZyxcbiAgICAgICAga2V5OiAoX2EyID0gbXNnLmlkKSAhPSBudWxsID8gX2EyIDogaWR4LFxuICAgICAgICBtZXNzYWdlRm9ybWF0dGVyXG4gICAgICB9KTtcbiAgICB9XG4gICkgOiBjaGF0TWVzc2FnZXMubWFwKChtc2csIGlkeCwgYWxsTXNnKSA9PiB7XG4gICAgdmFyIF9hMjtcbiAgICBjb25zdCBoaWRlTmFtZSA9IGlkeCA+PSAxICYmIGFsbE1zZ1tpZHggLSAxXS5mcm9tID09PSBtc2cuZnJvbTtcbiAgICBjb25zdCBoaWRlVGltZXN0YW1wID0gaWR4ID49IDEgJiYgbXNnLnRpbWVzdGFtcCAtIGFsbE1zZ1tpZHggLSAxXS50aW1lc3RhbXAgPCA2ZTQ7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMC5jcmVhdGVFbGVtZW50KFxuICAgICAgQ2hhdEVudHJ5LFxuICAgICAge1xuICAgICAgICBrZXk6IChfYTIgPSBtc2cuaWQpICE9IG51bGwgPyBfYTIgOiBpZHgsXG4gICAgICAgIGhpZGVOYW1lLFxuICAgICAgICBoaWRlVGltZXN0YW1wOiBoaWRlTmFtZSA9PT0gZmFsc2UgPyBmYWxzZSA6IGhpZGVUaW1lc3RhbXAsXG4gICAgICAgIGVudHJ5OiBtc2csXG4gICAgICAgIG1lc3NhZ2VGb3JtYXR0ZXJcbiAgICAgIH1cbiAgICApO1xuICB9KSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCB7IGNsYXNzTmFtZTogXCJsay1jaGF0LWZvcm1cIiwgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDAuY3JlYXRlRWxlbWVudChcbiAgICBcImlucHV0XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWZvcm0tY29udHJvbCBsay1jaGF0LWZvcm0taW5wdXRcIixcbiAgICAgIGRpc2FibGVkOiBpc1NlbmRpbmcsXG4gICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBwbGFjZWhvbGRlcjogXCJFbnRlciBhIG1lc3NhZ2UuLi5cIlxuICAgIH1cbiAgKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAwLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcInN1Ym1pdFwiLCBjbGFzc05hbWU6IFwibGstYnV0dG9uIGxrLWNoYXQtZm9ybS1idXR0b25cIiwgZGlzYWJsZWQ6IGlzU2VuZGluZyB9LCBcIlNlbmRcIikpKTtcbn1cblxuLy8gc3JjL3ByZWZhYnMvUHJlSm9pbi50c3hcbmltcG9ydCB7XG4gIGNyZWF0ZUxvY2FsQXVkaW9UcmFjayxcbiAgY3JlYXRlTG9jYWxUcmFja3MsXG4gIGNyZWF0ZUxvY2FsVmlkZW9UcmFjayxcbiAgZmFjaW5nTW9kZUZyb21Mb2NhbFRyYWNrIGFzIGZhY2luZ01vZGVGcm9tTG9jYWxUcmFjazIsXG4gIFRyYWNrIGFzIFRyYWNrOSxcbiAgVmlkZW9QcmVzZXRzXG59IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUmVhY3QxMDMgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9wcmVmYWJzL01lZGlhRGV2aWNlTWVudS50c3hcbmltcG9ydCB7IGNvbXB1dGVNZW51UG9zaXRpb24sIHdhc0NsaWNrT3V0c2lkZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTAxIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbG9nIGFzIGxvZzExIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gTWVkaWFEZXZpY2VNZW51KF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAga2luZCxcbiAgICBpbml0aWFsU2VsZWN0aW9uLFxuICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlLFxuICAgIHRyYWNrcyxcbiAgICByZXF1ZXN0UGVybWlzc2lvbnMgPSBmYWxzZVxuICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJraW5kXCIsXG4gICAgXCJpbml0aWFsU2VsZWN0aW9uXCIsXG4gICAgXCJvbkFjdGl2ZURldmljZUNoYW5nZVwiLFxuICAgIFwidHJhY2tzXCIsXG4gICAgXCJyZXF1ZXN0UGVybWlzc2lvbnNcIlxuICBdKTtcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IFJlYWN0MTAxLnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2RldmljZXMsIHNldERldmljZXNdID0gUmVhY3QxMDEudXNlU3RhdGUoW10pO1xuICBjb25zdCBbdXBkYXRlUmVxdWlyZWQsIHNldFVwZGF0ZVJlcXVpcmVkXSA9IFJlYWN0MTAxLnVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBoYW5kbGVBY3RpdmVEZXZpY2VDaGFuZ2UgPSAoa2luZDIsIGRldmljZUlkKSA9PiB7XG4gICAgbG9nMTEuZGVidWcoXCJoYW5kbGUgZGV2aWNlIGNoYW5nZVwiKTtcbiAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlID09IG51bGwgPyB2b2lkIDAgOiBvbkFjdGl2ZURldmljZUNoYW5nZShraW5kMiwgZGV2aWNlSWQpO1xuICB9O1xuICBjb25zdCBidXR0b24gPSBSZWFjdDEwMS51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHRvb2x0aXAgPSBSZWFjdDEwMS51c2VSZWYobnVsbCk7XG4gIFJlYWN0MTAxLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGJ1dHRvbi5jdXJyZW50ICYmIHRvb2x0aXAuY3VycmVudCAmJiAoZGV2aWNlcyB8fCB1cGRhdGVSZXF1aXJlZCkpIHtcbiAgICAgIGNvbXB1dGVNZW51UG9zaXRpb24oYnV0dG9uLmN1cnJlbnQsIHRvb2x0aXAuY3VycmVudCkudGhlbigoeyB4LCB5IH0pID0+IHtcbiAgICAgICAgaWYgKHRvb2x0aXAuY3VycmVudCkge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24odG9vbHRpcC5jdXJyZW50LnN0eWxlLCB7IGxlZnQ6IGAke3h9cHhgLCB0b3A6IGAke3l9cHhgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0VXBkYXRlUmVxdWlyZWQoZmFsc2UpO1xuICB9LCBbYnV0dG9uLCB0b29sdGlwLCBkZXZpY2VzLCB1cGRhdGVSZXF1aXJlZF0pO1xuICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSBSZWFjdDEwMS51c2VDYWxsYmFjayhcbiAgICAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghdG9vbHRpcC5jdXJyZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGJ1dHRvbi5jdXJyZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChpc09wZW4gJiYgd2FzQ2xpY2tPdXRzaWRlKHRvb2x0aXAuY3VycmVudCwgZXZlbnQpKSB7XG4gICAgICAgIHNldElzT3BlbihmYWxzZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbaXNPcGVuLCB0b29sdGlwLCBidXR0b25dXG4gICk7XG4gIFJlYWN0MTAxLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4gc2V0VXBkYXRlUmVxdWlyZWQodHJ1ZSkpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHNldFVwZGF0ZVJlcXVpcmVkKHRydWUpKTtcbiAgICB9O1xuICB9LCBbaGFuZGxlQ2xpY2tPdXRzaWRlLCBzZXRVcGRhdGVSZXF1aXJlZF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTAxLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMDEuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMS5jcmVhdGVFbGVtZW50KFxuICAgIFwiYnV0dG9uXCIsXG4gICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWU6IFwibGstYnV0dG9uIGxrLWJ1dHRvbi1tZW51XCIsXG4gICAgICBcImFyaWEtcHJlc3NlZFwiOiBpc09wZW5cbiAgICB9LCBwcm9wcyksIHtcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHNldElzT3BlbighaXNPcGVuKSxcbiAgICAgIHJlZjogYnV0dG9uXG4gICAgfSksXG4gICAgcHJvcHMuY2hpbGRyZW5cbiAgKSwgIXByb3BzLmRpc2FibGVkICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMS5jcmVhdGVFbGVtZW50KFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWRldmljZS1tZW51XCIsXG4gICAgICByZWY6IHRvb2x0aXAsXG4gICAgICBzdHlsZTogeyB2aXNpYmlsaXR5OiBpc09wZW4gPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCIgfVxuICAgIH0sXG4gICAga2luZCA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMS5jcmVhdGVFbGVtZW50KFxuICAgICAgTWVkaWFEZXZpY2VTZWxlY3QsXG4gICAgICB7XG4gICAgICAgIGluaXRpYWxTZWxlY3Rpb24sXG4gICAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlOiAoZGV2aWNlSWQpID0+IGhhbmRsZUFjdGl2ZURldmljZUNoYW5nZShraW5kLCBkZXZpY2VJZCksXG4gICAgICAgIG9uRGV2aWNlTGlzdENoYW5nZTogc2V0RGV2aWNlcyxcbiAgICAgICAga2luZCxcbiAgICAgICAgdHJhY2s6IHRyYWNrcyA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tzW2tpbmRdLFxuICAgICAgICByZXF1ZXN0UGVybWlzc2lvbnNcbiAgICAgIH1cbiAgICApIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTAxLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMDEuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWRldmljZS1tZW51LWhlYWRpbmdcIiB9LCBcIkF1ZGlvIGlucHV0c1wiKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAxLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBNZWRpYURldmljZVNlbGVjdCxcbiAgICAgIHtcbiAgICAgICAga2luZDogXCJhdWRpb2lucHV0XCIsXG4gICAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlOiAoZGV2aWNlSWQpID0+IGhhbmRsZUFjdGl2ZURldmljZUNoYW5nZShcImF1ZGlvaW5wdXRcIiwgZGV2aWNlSWQpLFxuICAgICAgICBvbkRldmljZUxpc3RDaGFuZ2U6IHNldERldmljZXMsXG4gICAgICAgIHRyYWNrOiB0cmFja3MgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrcy5hdWRpb2lucHV0LFxuICAgICAgICByZXF1ZXN0UGVybWlzc2lvbnNcbiAgICAgIH1cbiAgICApLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1kZXZpY2UtbWVudS1oZWFkaW5nXCIgfSwgXCJWaWRlbyBpbnB1dHNcIiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMS5jcmVhdGVFbGVtZW50KFxuICAgICAgTWVkaWFEZXZpY2VTZWxlY3QsXG4gICAgICB7XG4gICAgICAgIGtpbmQ6IFwidmlkZW9pbnB1dFwiLFxuICAgICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKGRldmljZUlkKSA9PiBoYW5kbGVBY3RpdmVEZXZpY2VDaGFuZ2UoXCJ2aWRlb2lucHV0XCIsIGRldmljZUlkKSxcbiAgICAgICAgb25EZXZpY2VMaXN0Q2hhbmdlOiBzZXREZXZpY2VzLFxuICAgICAgICB0cmFjazogdHJhY2tzID09IG51bGwgPyB2b2lkIDAgOiB0cmFja3MudmlkZW9pbnB1dCxcbiAgICAgICAgcmVxdWVzdFBlcm1pc3Npb25zXG4gICAgICB9XG4gICAgKSlcbiAgKSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL1ByZUpvaW4udHN4XG5pbXBvcnQgeyBsb2cgYXMgbG9nMTIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5cbi8vIHNyYy9ob29rcy91c2VXYXJuQWJvdXRNaXNzaW5nU3R5bGVzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDEwMiBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVdhcm5BYm91dE1pc3NpbmdTdHlsZXMoKSB7XG4gIFJlYWN0MTAyLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgd2FybkFib3V0TWlzc2luZ1N0eWxlcygpO1xuICB9LCBbXSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL1ByZUpvaW4udHN4XG52YXIgREVGQVVMVF9VU0VSX0NIT0lDRVMgPSB7XG4gIHVzZXJuYW1lOiBcIlwiLFxuICB2aWRlb0VuYWJsZWQ6IHRydWUsXG4gIGF1ZGlvRW5hYmxlZDogdHJ1ZSxcbiAgdmlkZW9EZXZpY2VJZDogXCJkZWZhdWx0XCIsXG4gIGF1ZGlvRGV2aWNlSWQ6IFwiZGVmYXVsdFwiLFxuICBlMmVlOiBmYWxzZSxcbiAgc2hhcmVkUGFzc3BocmFzZTogXCJcIlxufTtcbmZ1bmN0aW9uIHVzZVByZXZpZXdUcmFja3Mob3B0aW9ucywgb25FcnJvcikge1xuICBjb25zdCBbdHJhY2tzLCBzZXRUcmFja3NdID0gUmVhY3QxMDMudXNlU3RhdGUoKTtcbiAgUmVhY3QxMDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgdHJhY2tQcm9taXNlID0gdm9pZCAwO1xuICAgIGxldCBuZWVkc0NsZWFudXAgPSBmYWxzZTtcbiAgICBpZiAob3B0aW9ucy5hdWRpbyB8fCBvcHRpb25zLnZpZGVvKSB7XG4gICAgICB0cmFja1Byb21pc2UgPSBjcmVhdGVMb2NhbFRyYWNrcyhvcHRpb25zKTtcbiAgICAgIHRyYWNrUHJvbWlzZS50aGVuKCh0cmFja3MyKSA9PiB7XG4gICAgICAgIGlmIChuZWVkc0NsZWFudXApIHtcbiAgICAgICAgICB0cmFja3MyLmZvckVhY2goKHRyKSA9PiB0ci5zdG9wKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRyYWNrcyh0cmFja3MyKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2gob25FcnJvcik7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBuZWVkc0NsZWFudXAgPSB0cnVlO1xuICAgICAgdHJhY2tQcm9taXNlID09IG51bGwgPyB2b2lkIDAgOiB0cmFja1Byb21pc2UudGhlbihcbiAgICAgICAgKHRyYWNrczIpID0+IHRyYWNrczIuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH07XG4gIH0sIFtKU09OLnN0cmluZ2lmeShvcHRpb25zKV0pO1xuICByZXR1cm4gdHJhY2tzO1xufVxuZnVuY3Rpb24gdXNlUHJldmlld0RldmljZShlbmFibGVkLCBkZXZpY2VJZCwga2luZCkge1xuICBjb25zdCBbZGV2aWNlRXJyb3IsIHNldERldmljZUVycm9yXSA9IFJlYWN0MTAzLnVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNDcmVhdGluZ1RyYWNrLCBzZXRJc0NyZWF0aW5nVHJhY2tdID0gUmVhY3QxMDMudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBkZXZpY2VzID0gdXNlTWVkaWFEZXZpY2VzKHsga2luZCB9KTtcbiAgY29uc3QgW3NlbGVjdGVkRGV2aWNlLCBzZXRTZWxlY3RlZERldmljZV0gPSBSZWFjdDEwMy51c2VTdGF0ZShcbiAgICB2b2lkIDBcbiAgKTtcbiAgY29uc3QgW2xvY2FsVHJhY2ssIHNldExvY2FsVHJhY2tdID0gUmVhY3QxMDMudXNlU3RhdGUoKTtcbiAgY29uc3QgW2xvY2FsRGV2aWNlSWQsIHNldExvY2FsRGV2aWNlSWRdID0gUmVhY3QxMDMudXNlU3RhdGUoZGV2aWNlSWQpO1xuICBSZWFjdDEwMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldExvY2FsRGV2aWNlSWQoZGV2aWNlSWQpO1xuICB9LCBbZGV2aWNlSWRdKTtcbiAgY29uc3QgY3JlYXRlVHJhY2sgPSAoZGV2aWNlSWQyLCBraW5kMikgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0cmFjayA9IGtpbmQyID09PSBcInZpZGVvaW5wdXRcIiA/IHlpZWxkIGNyZWF0ZUxvY2FsVmlkZW9UcmFjayh7XG4gICAgICAgIGRldmljZUlkOiBkZXZpY2VJZDIsXG4gICAgICAgIHJlc29sdXRpb246IFZpZGVvUHJlc2V0cy5oNzIwLnJlc29sdXRpb25cbiAgICAgIH0pIDogeWllbGQgY3JlYXRlTG9jYWxBdWRpb1RyYWNrKHsgZGV2aWNlSWQ6IGRldmljZUlkMiB9KTtcbiAgICAgIGNvbnN0IG5ld0RldmljZUlkID0geWllbGQgdHJhY2suZ2V0RGV2aWNlSWQoKTtcbiAgICAgIGlmIChuZXdEZXZpY2VJZCAmJiBkZXZpY2VJZDIgIT09IG5ld0RldmljZUlkKSB7XG4gICAgICAgIHByZXZEZXZpY2VJZC5jdXJyZW50ID0gbmV3RGV2aWNlSWQ7XG4gICAgICAgIHNldExvY2FsRGV2aWNlSWQobmV3RGV2aWNlSWQpO1xuICAgICAgfVxuICAgICAgc2V0TG9jYWxUcmFjayh0cmFjayk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBzZXREZXZpY2VFcnJvcihlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBjb25zdCBzd2l0Y2hEZXZpY2UgPSAodHJhY2ssIGlkKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgeWllbGQgdHJhY2suc2V0RGV2aWNlSWQoaWQpO1xuICAgIHByZXZEZXZpY2VJZC5jdXJyZW50ID0gaWQ7XG4gIH0pO1xuICBjb25zdCBwcmV2RGV2aWNlSWQgPSBSZWFjdDEwMy51c2VSZWYobG9jYWxEZXZpY2VJZCk7XG4gIFJlYWN0MTAzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVuYWJsZWQgJiYgIWxvY2FsVHJhY2sgJiYgIWRldmljZUVycm9yICYmICFpc0NyZWF0aW5nVHJhY2spIHtcbiAgICAgIGxvZzEyLmRlYnVnKFwiY3JlYXRpbmcgdHJhY2tcIiwga2luZCk7XG4gICAgICBzZXRJc0NyZWF0aW5nVHJhY2sodHJ1ZSk7XG4gICAgICBjcmVhdGVUcmFjayhsb2NhbERldmljZUlkLCBraW5kKS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgc2V0SXNDcmVhdGluZ1RyYWNrKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2VuYWJsZWQsIGxvY2FsVHJhY2ssIGRldmljZUVycm9yLCBpc0NyZWF0aW5nVHJhY2tdKTtcbiAgUmVhY3QxMDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWxvY2FsVHJhY2spIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFlbmFibGVkKSB7XG4gICAgICBsb2cxMi5kZWJ1ZyhgbXV0aW5nICR7a2luZH0gdHJhY2tgKTtcbiAgICAgIGxvY2FsVHJhY2subXV0ZSgpLnRoZW4oKCkgPT4gbG9nMTIuZGVidWcobG9jYWxUcmFjay5tZWRpYVN0cmVhbVRyYWNrKSk7XG4gICAgfSBlbHNlIGlmICgoc2VsZWN0ZWREZXZpY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHNlbGVjdGVkRGV2aWNlLmRldmljZUlkKSAmJiBwcmV2RGV2aWNlSWQuY3VycmVudCAhPT0gKHNlbGVjdGVkRGV2aWNlID09IG51bGwgPyB2b2lkIDAgOiBzZWxlY3RlZERldmljZS5kZXZpY2VJZCkpIHtcbiAgICAgIGxvZzEyLmRlYnVnKGBzd2l0Y2hpbmcgJHtraW5kfSBkZXZpY2UgZnJvbWAsIHByZXZEZXZpY2VJZC5jdXJyZW50LCBzZWxlY3RlZERldmljZS5kZXZpY2VJZCk7XG4gICAgICBzd2l0Y2hEZXZpY2UobG9jYWxUcmFjaywgc2VsZWN0ZWREZXZpY2UuZGV2aWNlSWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2cxMi5kZWJ1ZyhgdW5tdXRpbmcgbG9jYWwgJHtraW5kfSB0cmFja2ApO1xuICAgICAgbG9jYWxUcmFjay51bm11dGUoKTtcbiAgICB9XG4gIH0sIFtsb2NhbFRyYWNrLCBzZWxlY3RlZERldmljZSwgZW5hYmxlZCwga2luZF0pO1xuICBSZWFjdDEwMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAobG9jYWxUcmFjaykge1xuICAgICAgICBsb2cxMi5kZWJ1Zyhgc3RvcHBpbmcgbG9jYWwgJHtraW5kfSB0cmFja2ApO1xuICAgICAgICBsb2NhbFRyYWNrLnN0b3AoKTtcbiAgICAgICAgbG9jYWxUcmFjay5tdXRlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuICBSZWFjdDEwMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFNlbGVjdGVkRGV2aWNlKGRldmljZXMuZmluZCgoZGV2KSA9PiBkZXYuZGV2aWNlSWQgPT09IGxvY2FsRGV2aWNlSWQpKTtcbiAgfSwgW2xvY2FsRGV2aWNlSWQsIGRldmljZXNdKTtcbiAgcmV0dXJuIHtcbiAgICBzZWxlY3RlZERldmljZSxcbiAgICBsb2NhbFRyYWNrLFxuICAgIGRldmljZUVycm9yXG4gIH07XG59XG5mdW5jdGlvbiBQcmVKb2luKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgZGVmYXVsdHMgPSB7fSxcbiAgICBvblZhbGlkYXRlLFxuICAgIG9uU3VibWl0LFxuICAgIG9uRXJyb3IsXG4gICAgZGVidWcsXG4gICAgam9pbkxhYmVsID0gXCJKb2luIFJvb21cIixcbiAgICBtaWNMYWJlbCA9IFwiTWljcm9waG9uZVwiLFxuICAgIGNhbUxhYmVsID0gXCJDYW1lcmFcIixcbiAgICB1c2VyTGFiZWwgPSBcIlVzZXJuYW1lXCIsXG4gICAgc2hvd0UyRUVPcHRpb25zID0gZmFsc2UsXG4gICAgcGVyc2lzdFVzZXJDaG9pY2VzID0gdHJ1ZVxuICB9ID0gX2IsIGh0bWxQcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiZGVmYXVsdHNcIixcbiAgICBcIm9uVmFsaWRhdGVcIixcbiAgICBcIm9uU3VibWl0XCIsXG4gICAgXCJvbkVycm9yXCIsXG4gICAgXCJkZWJ1Z1wiLFxuICAgIFwiam9pbkxhYmVsXCIsXG4gICAgXCJtaWNMYWJlbFwiLFxuICAgIFwiY2FtTGFiZWxcIixcbiAgICBcInVzZXJMYWJlbFwiLFxuICAgIFwic2hvd0UyRUVPcHRpb25zXCIsXG4gICAgXCJwZXJzaXN0VXNlckNob2ljZXNcIlxuICBdKTtcbiAgdmFyIF9hMiwgX2IyO1xuICBjb25zdCBbdXNlckNob2ljZXMsIHNldFVzZXJDaG9pY2VzXSA9IFJlYWN0MTAzLnVzZVN0YXRlKERFRkFVTFRfVVNFUl9DSE9JQ0VTKTtcbiAgY29uc3QgcGFydGlhbERlZmF1bHRzID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGRlZmF1bHRzLmF1ZGlvRGV2aWNlSWQgIT09IHZvaWQgMCAmJiB7IGF1ZGlvRGV2aWNlSWQ6IGRlZmF1bHRzLmF1ZGlvRGV2aWNlSWQgfSksIGRlZmF1bHRzLnZpZGVvRGV2aWNlSWQgIT09IHZvaWQgMCAmJiB7IHZpZGVvRGV2aWNlSWQ6IGRlZmF1bHRzLnZpZGVvRGV2aWNlSWQgfSksIGRlZmF1bHRzLmF1ZGlvRW5hYmxlZCAhPT0gdm9pZCAwICYmIHsgYXVkaW9FbmFibGVkOiBkZWZhdWx0cy5hdWRpb0VuYWJsZWQgfSksIGRlZmF1bHRzLnZpZGVvRW5hYmxlZCAhPT0gdm9pZCAwICYmIHsgdmlkZW9FbmFibGVkOiBkZWZhdWx0cy52aWRlb0VuYWJsZWQgfSksIGRlZmF1bHRzLnVzZXJuYW1lICE9PSB2b2lkIDAgJiYgeyB1c2VybmFtZTogZGVmYXVsdHMudXNlcm5hbWUgfSk7XG4gIGNvbnN0IHtcbiAgICB1c2VyQ2hvaWNlczogaW5pdGlhbFVzZXJDaG9pY2VzLFxuICAgIHNhdmVBdWRpb0lucHV0RGV2aWNlSWQsXG4gICAgc2F2ZUF1ZGlvSW5wdXRFbmFibGVkLFxuICAgIHNhdmVWaWRlb0lucHV0RGV2aWNlSWQsXG4gICAgc2F2ZVZpZGVvSW5wdXRFbmFibGVkLFxuICAgIHNhdmVVc2VybmFtZVxuICB9ID0gdXNlUGVyc2lzdGVudFVzZXJDaG9pY2VzKHtcbiAgICBkZWZhdWx0czogcGFydGlhbERlZmF1bHRzLFxuICAgIHByZXZlbnRTYXZlOiAhcGVyc2lzdFVzZXJDaG9pY2VzLFxuICAgIHByZXZlbnRMb2FkOiAhcGVyc2lzdFVzZXJDaG9pY2VzXG4gIH0pO1xuICBjb25zdCBbYXVkaW9FbmFibGVkLCBzZXRBdWRpb0VuYWJsZWRdID0gUmVhY3QxMDMudXNlU3RhdGUoaW5pdGlhbFVzZXJDaG9pY2VzLmF1ZGlvRW5hYmxlZCk7XG4gIGNvbnN0IFt2aWRlb0VuYWJsZWQsIHNldFZpZGVvRW5hYmxlZF0gPSBSZWFjdDEwMy51c2VTdGF0ZShpbml0aWFsVXNlckNob2ljZXMudmlkZW9FbmFibGVkKTtcbiAgY29uc3QgW2F1ZGlvRGV2aWNlSWQsIHNldEF1ZGlvRGV2aWNlSWRdID0gUmVhY3QxMDMudXNlU3RhdGUoXG4gICAgaW5pdGlhbFVzZXJDaG9pY2VzLmF1ZGlvRGV2aWNlSWRcbiAgKTtcbiAgY29uc3QgW3ZpZGVvRGV2aWNlSWQsIHNldFZpZGVvRGV2aWNlSWRdID0gUmVhY3QxMDMudXNlU3RhdGUoXG4gICAgaW5pdGlhbFVzZXJDaG9pY2VzLnZpZGVvRGV2aWNlSWRcbiAgKTtcbiAgY29uc3QgW3VzZXJuYW1lLCBzZXRVc2VybmFtZV0gPSBSZWFjdDEwMy51c2VTdGF0ZShpbml0aWFsVXNlckNob2ljZXMudXNlcm5hbWUpO1xuICBjb25zdCBbZTJlZSwgc2V0RTJlZV0gPSBSZWFjdDEwMy51c2VTdGF0ZSgoX2EyID0gZGVmYXVsdHMuZTJlZSkgIT0gbnVsbCA/IF9hMiA6IERFRkFVTFRfVVNFUl9DSE9JQ0VTLmUyZWUpO1xuICBjb25zdCBbc2hhcmVkUGFzc3BocmFzZSwgc2V0U2hhcmVkUGFzc3BocmFzZV0gPSBSZWFjdDEwMy51c2VTdGF0ZShcbiAgICAoX2IyID0gZGVmYXVsdHMuc2hhcmVkUGFzc3BocmFzZSkgIT0gbnVsbCA/IF9iMiA6IERFRkFVTFRfVVNFUl9DSE9JQ0VTLnNoYXJlZFBhc3NwaHJhc2VcbiAgKTtcbiAgUmVhY3QxMDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzYXZlQXVkaW9JbnB1dEVuYWJsZWQoYXVkaW9FbmFibGVkKTtcbiAgfSwgW2F1ZGlvRW5hYmxlZCwgc2F2ZUF1ZGlvSW5wdXRFbmFibGVkXSk7XG4gIFJlYWN0MTAzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2F2ZVZpZGVvSW5wdXRFbmFibGVkKHZpZGVvRW5hYmxlZCk7XG4gIH0sIFt2aWRlb0VuYWJsZWQsIHNhdmVWaWRlb0lucHV0RW5hYmxlZF0pO1xuICBSZWFjdDEwMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNhdmVBdWRpb0lucHV0RGV2aWNlSWQoYXVkaW9EZXZpY2VJZCk7XG4gIH0sIFthdWRpb0RldmljZUlkLCBzYXZlQXVkaW9JbnB1dERldmljZUlkXSk7XG4gIFJlYWN0MTAzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2F2ZVZpZGVvSW5wdXREZXZpY2VJZCh2aWRlb0RldmljZUlkKTtcbiAgfSwgW3ZpZGVvRGV2aWNlSWQsIHNhdmVWaWRlb0lucHV0RGV2aWNlSWRdKTtcbiAgUmVhY3QxMDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzYXZlVXNlcm5hbWUodXNlcm5hbWUpO1xuICB9LCBbdXNlcm5hbWUsIHNhdmVVc2VybmFtZV0pO1xuICBjb25zdCB0cmFja3MgPSB1c2VQcmV2aWV3VHJhY2tzKFxuICAgIHtcbiAgICAgIGF1ZGlvOiBhdWRpb0VuYWJsZWQgPyB7IGRldmljZUlkOiBpbml0aWFsVXNlckNob2ljZXMuYXVkaW9EZXZpY2VJZCB9IDogZmFsc2UsXG4gICAgICB2aWRlbzogdmlkZW9FbmFibGVkID8geyBkZXZpY2VJZDogaW5pdGlhbFVzZXJDaG9pY2VzLnZpZGVvRGV2aWNlSWQgfSA6IGZhbHNlXG4gICAgfSxcbiAgICBvbkVycm9yXG4gICk7XG4gIGNvbnN0IHZpZGVvRWwgPSBSZWFjdDEwMy51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHZpZGVvVHJhY2sgPSBSZWFjdDEwMy51c2VNZW1vKFxuICAgICgpID0+IHRyYWNrcyA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tzLmZpbHRlcigodHJhY2spID0+IHRyYWNrLmtpbmQgPT09IFRyYWNrOS5LaW5kLlZpZGVvKVswXSxcbiAgICBbdHJhY2tzXVxuICApO1xuICBjb25zdCBmYWNpbmdNb2RlID0gUmVhY3QxMDMudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHZpZGVvVHJhY2spIHtcbiAgICAgIGNvbnN0IHsgZmFjaW5nTW9kZTogZmFjaW5nTW9kZTIgfSA9IGZhY2luZ01vZGVGcm9tTG9jYWxUcmFjazIodmlkZW9UcmFjayk7XG4gICAgICByZXR1cm4gZmFjaW5nTW9kZTI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIH1cbiAgfSwgW3ZpZGVvVHJhY2tdKTtcbiAgY29uc3QgYXVkaW9UcmFjayA9IFJlYWN0MTAzLnVzZU1lbW8oXG4gICAgKCkgPT4gdHJhY2tzID09IG51bGwgPyB2b2lkIDAgOiB0cmFja3MuZmlsdGVyKCh0cmFjaykgPT4gdHJhY2sua2luZCA9PT0gVHJhY2s5LktpbmQuQXVkaW8pWzBdLFxuICAgIFt0cmFja3NdXG4gICk7XG4gIFJlYWN0MTAzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHZpZGVvRWwuY3VycmVudCAmJiB2aWRlb1RyYWNrKSB7XG4gICAgICB2aWRlb1RyYWNrLnVubXV0ZSgpO1xuICAgICAgdmlkZW9UcmFjay5hdHRhY2godmlkZW9FbC5jdXJyZW50KTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHZpZGVvVHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHZpZGVvVHJhY2suZGV0YWNoKCk7XG4gICAgfTtcbiAgfSwgW3ZpZGVvVHJhY2tdKTtcbiAgY29uc3QgW2lzVmFsaWQsIHNldElzVmFsaWRdID0gUmVhY3QxMDMudXNlU3RhdGUoKTtcbiAgY29uc3QgaGFuZGxlVmFsaWRhdGlvbiA9IFJlYWN0MTAzLnVzZUNhbGxiYWNrKFxuICAgICh2YWx1ZXMpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygb25WYWxpZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBvblZhbGlkYXRlKHZhbHVlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWVzLnVzZXJuYW1lICE9PSBcIlwiO1xuICAgICAgfVxuICAgIH0sXG4gICAgW29uVmFsaWRhdGVdXG4gICk7XG4gIFJlYWN0MTAzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbmV3VXNlckNob2ljZXMgPSB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIHZpZGVvRW5hYmxlZCxcbiAgICAgIHZpZGVvRGV2aWNlSWQsXG4gICAgICBhdWRpb0VuYWJsZWQsXG4gICAgICBhdWRpb0RldmljZUlkLFxuICAgICAgZTJlZSxcbiAgICAgIHNoYXJlZFBhc3NwaHJhc2VcbiAgICB9O1xuICAgIHNldFVzZXJDaG9pY2VzKG5ld1VzZXJDaG9pY2VzKTtcbiAgICBzZXRJc1ZhbGlkKGhhbmRsZVZhbGlkYXRpb24obmV3VXNlckNob2ljZXMpKTtcbiAgfSwgW1xuICAgIHVzZXJuYW1lLFxuICAgIHZpZGVvRW5hYmxlZCxcbiAgICBoYW5kbGVWYWxpZGF0aW9uLFxuICAgIGF1ZGlvRW5hYmxlZCxcbiAgICBhdWRpb0RldmljZUlkLFxuICAgIHZpZGVvRGV2aWNlSWQsXG4gICAgc2hhcmVkUGFzc3BocmFzZSxcbiAgICBlMmVlXG4gIF0pO1xuICBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChoYW5kbGVWYWxpZGF0aW9uKHVzZXJDaG9pY2VzKSkge1xuICAgICAgaWYgKHR5cGVvZiBvblN1Ym1pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG9uU3VibWl0KHVzZXJDaG9pY2VzKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9nMTIud2FybihcIlZhbGlkYXRpb24gZmFpbGVkIHdpdGg6IFwiLCB1c2VyQ2hvaWNlcyk7XG4gICAgfVxuICB9XG4gIHVzZVdhcm5BYm91dE1pc3NpbmdTdHlsZXMoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHsgY2xhc3NOYW1lOiBcImxrLXByZWpvaW5cIiB9LCBodG1sUHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay12aWRlby1jb250YWluZXJcIiB9LCB2aWRlb1RyYWNrICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwidmlkZW9cIiwgeyByZWY6IHZpZGVvRWwsIHdpZHRoOiBcIjEyODBcIiwgaGVpZ2h0OiBcIjcyMFwiLCBcImRhdGEtbGstZmFjaW5nLW1vZGVcIjogZmFjaW5nTW9kZSB9KSwgKCF2aWRlb1RyYWNrIHx8ICF2aWRlb0VuYWJsZWQpICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWNhbWVyYS1vZmYtbm90ZVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50UGxhY2Vob2xkZXJfZGVmYXVsdCwgbnVsbCkpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLWNvbnRhaW5lclwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cCBhdWRpb1wiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFxuICAgIFRyYWNrVG9nZ2xlLFxuICAgIHtcbiAgICAgIGluaXRpYWxTdGF0ZTogYXVkaW9FbmFibGVkLFxuICAgICAgc291cmNlOiBUcmFjazkuU291cmNlLk1pY3JvcGhvbmUsXG4gICAgICBvbkNoYW5nZTogKGVuYWJsZWQpID0+IHNldEF1ZGlvRW5hYmxlZChlbmFibGVkKVxuICAgIH0sXG4gICAgbWljTGFiZWxcbiAgKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLW1lbnVcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcbiAgICBNZWRpYURldmljZU1lbnUsXG4gICAge1xuICAgICAgaW5pdGlhbFNlbGVjdGlvbjogYXVkaW9EZXZpY2VJZCxcbiAgICAgIGtpbmQ6IFwiYXVkaW9pbnB1dFwiLFxuICAgICAgZGlzYWJsZWQ6ICFhdWRpb1RyYWNrLFxuICAgICAgdHJhY2tzOiB7IGF1ZGlvaW5wdXQ6IGF1ZGlvVHJhY2sgfSxcbiAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlOiAoXywgaWQpID0+IHNldEF1ZGlvRGV2aWNlSWQoaWQpXG4gICAgfVxuICApKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cCB2aWRlb1wiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFxuICAgIFRyYWNrVG9nZ2xlLFxuICAgIHtcbiAgICAgIGluaXRpYWxTdGF0ZTogdmlkZW9FbmFibGVkLFxuICAgICAgc291cmNlOiBUcmFjazkuU291cmNlLkNhbWVyYSxcbiAgICAgIG9uQ2hhbmdlOiAoZW5hYmxlZCkgPT4gc2V0VmlkZW9FbmFibGVkKGVuYWJsZWQpXG4gICAgfSxcbiAgICBjYW1MYWJlbFxuICApLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXAtbWVudVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFxuICAgIE1lZGlhRGV2aWNlTWVudSxcbiAgICB7XG4gICAgICBpbml0aWFsU2VsZWN0aW9uOiB2aWRlb0RldmljZUlkLFxuICAgICAga2luZDogXCJ2aWRlb2lucHV0XCIsXG4gICAgICBkaXNhYmxlZDogIXZpZGVvVHJhY2ssXG4gICAgICB0cmFja3M6IHsgdmlkZW9pbnB1dDogdmlkZW9UcmFjayB9LFxuICAgICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IChfLCBpZCkgPT4gc2V0VmlkZW9EZXZpY2VJZChpZClcbiAgICB9XG4gICkpKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCB7IGNsYXNzTmFtZTogXCJsay11c2VybmFtZS1jb250YWluZXJcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcbiAgICBcImlucHV0XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWZvcm0tY29udHJvbFwiLFxuICAgICAgaWQ6IFwidXNlcm5hbWVcIixcbiAgICAgIG5hbWU6IFwidXNlcm5hbWVcIixcbiAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgZGVmYXVsdFZhbHVlOiB1c2VybmFtZSxcbiAgICAgIHBsYWNlaG9sZGVyOiB1c2VyTGFiZWwsXG4gICAgICBvbkNoYW5nZTogKGlucHV0RWwpID0+IHNldFVzZXJuYW1lKGlucHV0RWwudGFyZ2V0LnZhbHVlKSxcbiAgICAgIGF1dG9Db21wbGV0ZTogXCJvZmZcIlxuICAgIH1cbiAgKSwgc2hvd0UyRUVPcHRpb25zICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgZGlzcGxheTogXCJmbGV4XCIsIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsIGdhcDogXCIxcmVtXCIgfSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IGRpc3BsYXk6IFwiZmxleFwiLCBmbGV4RGlyZWN0aW9uOiBcInJvd1wiLCBnYXA6IFwiMXJlbVwiIH0gfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJpbnB1dFwiLFxuICAgIHtcbiAgICAgIGlkOiBcInVzZS1lMmVlXCIsXG4gICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICBjaGVja2VkOiBlMmVlLFxuICAgICAgb25DaGFuZ2U6IChldikgPT4gc2V0RTJlZShldi50YXJnZXQuY2hlY2tlZClcbiAgICB9XG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgeyBodG1sRm9yOiBcInVzZS1lMmVlXCIgfSwgXCJFbmFibGUgZW5kLXRvLWVuZCBlbmNyeXB0aW9uXCIpKSwgZTJlZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IGRpc3BsYXk6IFwiZmxleFwiLCBmbGV4RGlyZWN0aW9uOiBcInJvd1wiLCBnYXA6IFwiMXJlbVwiIH0gfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7IGh0bWxGb3I6IFwicGFzc3BocmFzZVwiIH0sIFwiUGFzc3BocmFzZVwiKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJpbnB1dFwiLFxuICAgIHtcbiAgICAgIGlkOiBcInBhc3NwaHJhc2VcIixcbiAgICAgIHR5cGU6IFwicGFzc3dvcmRcIixcbiAgICAgIHZhbHVlOiBzaGFyZWRQYXNzcGhyYXNlLFxuICAgICAgb25DaGFuZ2U6IChldikgPT4gc2V0U2hhcmVkUGFzc3BocmFzZShldi50YXJnZXQudmFsdWUpXG4gICAgfVxuICApKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFxuICAgIFwiYnV0dG9uXCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbiBsay1qb2luLWJ1dHRvblwiLFxuICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgIG9uQ2xpY2s6IGhhbmRsZVN1Ym1pdCxcbiAgICAgIGRpc2FibGVkOiAhaXNWYWxpZFxuICAgIH0sXG4gICAgam9pbkxhYmVsXG4gICkpLCBkZWJ1ZyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChSZWFjdDEwMy5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIiwgbnVsbCwgXCJVc2VyIENob2ljZXM6XCIpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcInVsXCIsIHsgY2xhc3NOYW1lOiBcImxrLWxpc3RcIiwgc3R5bGU6IHsgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsIG1heFdpZHRoOiBcIjE1cmVtXCIgfSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIFwiVXNlcm5hbWU6IFwiLCBgJHt1c2VyQ2hvaWNlcy51c2VybmFtZX1gKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBudWxsLCBcIlZpZGVvIEVuYWJsZWQ6IFwiLCBgJHt1c2VyQ2hvaWNlcy52aWRlb0VuYWJsZWR9YCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFwibGlcIiwgbnVsbCwgXCJBdWRpbyBFbmFibGVkOiBcIiwgYCR7dXNlckNob2ljZXMuYXVkaW9FbmFibGVkfWApLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIFwiVmlkZW8gRGV2aWNlOiBcIiwgYCR7dXNlckNob2ljZXMudmlkZW9EZXZpY2VJZH1gKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAzLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBudWxsLCBcIkF1ZGlvIERldmljZTogXCIsIGAke3VzZXJDaG9pY2VzLmF1ZGlvRGV2aWNlSWR9YCkpKSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL1ZpZGVvQ29uZmVyZW5jZS50c3hcbmltcG9ydCB7IGlzRXF1YWxUcmFja1JlZiwgaXNUcmFja1JlZmVyZW5jZSBhcyBpc1RyYWNrUmVmZXJlbmNlNCwgaXNXZWIsIGxvZyBhcyBsb2cxMyB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCB7IFJvb21FdmVudCBhcyBSb29tRXZlbnQzLCBUcmFjayBhcyBUcmFjazExIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDEwNiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3ByZWZhYnMvQ29udHJvbEJhci50c3hcbmltcG9ydCB7IFRyYWNrIGFzIFRyYWNrMTAgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTA1IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgc3VwcG9ydHNTY3JlZW5TaGFyaW5nIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9TdGFydE1lZGlhQnV0dG9uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMDQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdGFydE1lZGlhQnV0dG9uKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IGxhYmVsIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcImxhYmVsXCJdKTtcbiAgY29uc3Qgcm9vbSA9IHVzZVJvb21Db250ZXh0KCk7XG4gIGNvbnN0IHsgbWVyZ2VkUHJvcHM6IGF1ZGlvUHJvcHMsIGNhblBsYXlBdWRpbyB9ID0gdXNlU3RhcnRBdWRpbyh7IHJvb20sIHByb3BzIH0pO1xuICBjb25zdCB7IG1lcmdlZFByb3BzLCBjYW5QbGF5VmlkZW8gfSA9IHVzZVN0YXJ0VmlkZW8oeyByb29tLCBwcm9wczogYXVkaW9Qcm9wcyB9KTtcbiAgY29uc3QgX2EyID0gbWVyZ2VkUHJvcHMsIHsgc3R5bGUgfSA9IF9hMiwgcmVzdFByb3BzID0gX19vYmpSZXN0KF9hMiwgW1wic3R5bGVcIl0pO1xuICBzdHlsZS5kaXNwbGF5ID0gY2FuUGxheUF1ZGlvICYmIGNhblBsYXlWaWRlbyA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTA0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgX19zcHJlYWRWYWx1ZXMoeyBzdHlsZSB9LCByZXN0UHJvcHMpLCBsYWJlbCAhPSBudWxsID8gbGFiZWwgOiBgU3RhcnQgJHshY2FuUGxheUF1ZGlvID8gXCJBdWRpb1wiIDogXCJWaWRlb1wifWApO1xufVxuXG4vLyBzcmMvcHJlZmFicy9Db250cm9sQmFyLnRzeFxuZnVuY3Rpb24gQ29udHJvbEJhcihfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHZhcmlhdGlvbixcbiAgICBjb250cm9scyxcbiAgICBzYXZlVXNlckNob2ljZXM6IHNhdmVVc2VyQ2hvaWNlczIgPSB0cnVlXG4gIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcInZhcmlhdGlvblwiLFxuICAgIFwiY29udHJvbHNcIixcbiAgICBcInNhdmVVc2VyQ2hvaWNlc1wiXG4gIF0pO1xuICB2YXIgX2EyLCBfYjIsIF9jLCBfZCwgX2U7XG4gIGNvbnN0IFtpc0NoYXRPcGVuLCBzZXRJc0NoYXRPcGVuXSA9IFJlYWN0MTA1LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgbGF5b3V0Q29udGV4dCA9IHVzZU1heWJlTGF5b3V0Q29udGV4dCgpO1xuICBSZWFjdDEwNS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfYTMsIF9iMztcbiAgICBpZiAoKChfYTMgPSBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiBsYXlvdXRDb250ZXh0LndpZGdldC5zdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMy5zaG93Q2hhdCkgIT09IHZvaWQgMCkge1xuICAgICAgc2V0SXNDaGF0T3BlbigoX2IzID0gbGF5b3V0Q29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogbGF5b3V0Q29udGV4dC53aWRnZXQuc3RhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjMuc2hvd0NoYXQpO1xuICAgIH1cbiAgfSwgWyhfYTIgPSBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiBsYXlvdXRDb250ZXh0LndpZGdldC5zdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5zaG93Q2hhdF0pO1xuICBjb25zdCBpc1Rvb0xpdHRsZVNwYWNlID0gdXNlTWVkaWFRdWVyeShgKG1heC13aWR0aDogJHtpc0NoYXRPcGVuID8gMWUzIDogNzYwfXB4KWApO1xuICBjb25zdCBkZWZhdWx0VmFyaWF0aW9uID0gaXNUb29MaXR0bGVTcGFjZSA/IFwibWluaW1hbFwiIDogXCJ2ZXJib3NlXCI7XG4gIHZhcmlhdGlvbiAhPSBudWxsID8gdmFyaWF0aW9uIDogdmFyaWF0aW9uID0gZGVmYXVsdFZhcmlhdGlvbjtcbiAgY29uc3QgdmlzaWJsZUNvbnRyb2xzID0gX19zcHJlYWRWYWx1ZXMoeyBsZWF2ZTogdHJ1ZSB9LCBjb250cm9scyk7XG4gIGNvbnN0IGxvY2FsUGVybWlzc2lvbnMgPSB1c2VMb2NhbFBhcnRpY2lwYW50UGVybWlzc2lvbnMoKTtcbiAgaWYgKCFsb2NhbFBlcm1pc3Npb25zKSB7XG4gICAgdmlzaWJsZUNvbnRyb2xzLmNhbWVyYSA9IGZhbHNlO1xuICAgIHZpc2libGVDb250cm9scy5jaGF0ID0gZmFsc2U7XG4gICAgdmlzaWJsZUNvbnRyb2xzLm1pY3JvcGhvbmUgPSBmYWxzZTtcbiAgICB2aXNpYmxlQ29udHJvbHMuc2NyZWVuU2hhcmUgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICAoX2IyID0gdmlzaWJsZUNvbnRyb2xzLmNhbWVyYSkgIT0gbnVsbCA/IF9iMiA6IHZpc2libGVDb250cm9scy5jYW1lcmEgPSBsb2NhbFBlcm1pc3Npb25zLmNhblB1Ymxpc2g7XG4gICAgKF9jID0gdmlzaWJsZUNvbnRyb2xzLm1pY3JvcGhvbmUpICE9IG51bGwgPyBfYyA6IHZpc2libGVDb250cm9scy5taWNyb3Bob25lID0gbG9jYWxQZXJtaXNzaW9ucy5jYW5QdWJsaXNoO1xuICAgIChfZCA9IHZpc2libGVDb250cm9scy5zY3JlZW5TaGFyZSkgIT0gbnVsbCA/IF9kIDogdmlzaWJsZUNvbnRyb2xzLnNjcmVlblNoYXJlID0gbG9jYWxQZXJtaXNzaW9ucy5jYW5QdWJsaXNoO1xuICAgIChfZSA9IHZpc2libGVDb250cm9scy5jaGF0KSAhPSBudWxsID8gX2UgOiB2aXNpYmxlQ29udHJvbHMuY2hhdCA9IGxvY2FsUGVybWlzc2lvbnMuY2FuUHVibGlzaERhdGEgJiYgKGNvbnRyb2xzID09IG51bGwgPyB2b2lkIDAgOiBjb250cm9scy5jaGF0KTtcbiAgfVxuICBjb25zdCBzaG93SWNvbiA9IFJlYWN0MTA1LnVzZU1lbW8oXG4gICAgKCkgPT4gdmFyaWF0aW9uID09PSBcIm1pbmltYWxcIiB8fCB2YXJpYXRpb24gPT09IFwidmVyYm9zZVwiLFxuICAgIFt2YXJpYXRpb25dXG4gICk7XG4gIGNvbnN0IHNob3dUZXh0ID0gUmVhY3QxMDUudXNlTWVtbyhcbiAgICAoKSA9PiB2YXJpYXRpb24gPT09IFwidGV4dE9ubHlcIiB8fCB2YXJpYXRpb24gPT09IFwidmVyYm9zZVwiLFxuICAgIFt2YXJpYXRpb25dXG4gICk7XG4gIGNvbnN0IGJyb3dzZXJTdXBwb3J0c1NjcmVlblNoYXJpbmcgPSBzdXBwb3J0c1NjcmVlblNoYXJpbmcoKTtcbiAgY29uc3QgW2lzU2NyZWVuU2hhcmVFbmFibGVkLCBzZXRJc1NjcmVlblNoYXJlRW5hYmxlZF0gPSBSZWFjdDEwNS51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IG9uU2NyZWVuU2hhcmVDaGFuZ2UgPSBSZWFjdDEwNS51c2VDYWxsYmFjayhcbiAgICAoZW5hYmxlZCkgPT4ge1xuICAgICAgc2V0SXNTY3JlZW5TaGFyZUVuYWJsZWQoZW5hYmxlZCk7XG4gICAgfSxcbiAgICBbc2V0SXNTY3JlZW5TaGFyZUVuYWJsZWRdXG4gICk7XG4gIGNvbnN0IGh0bWxQcm9wcyA9IG1lcmdlUHJvcHMyKHsgY2xhc3NOYW1lOiBcImxrLWNvbnRyb2wtYmFyXCIgfSwgcHJvcHMpO1xuICBjb25zdCB7XG4gICAgc2F2ZUF1ZGlvSW5wdXRFbmFibGVkLFxuICAgIHNhdmVWaWRlb0lucHV0RW5hYmxlZCxcbiAgICBzYXZlQXVkaW9JbnB1dERldmljZUlkLFxuICAgIHNhdmVWaWRlb0lucHV0RGV2aWNlSWRcbiAgfSA9IHVzZVBlcnNpc3RlbnRVc2VyQ2hvaWNlcyh7IHByZXZlbnRTYXZlOiAhc2F2ZVVzZXJDaG9pY2VzMiB9KTtcbiAgY29uc3QgbWljcm9waG9uZU9uQ2hhbmdlID0gUmVhY3QxMDUudXNlQ2FsbGJhY2soXG4gICAgKGVuYWJsZWQsIGlzVXNlckluaXRpYXRlZCkgPT4gaXNVc2VySW5pdGlhdGVkID8gc2F2ZUF1ZGlvSW5wdXRFbmFibGVkKGVuYWJsZWQpIDogbnVsbCxcbiAgICBbc2F2ZUF1ZGlvSW5wdXRFbmFibGVkXVxuICApO1xuICBjb25zdCBjYW1lcmFPbkNoYW5nZSA9IFJlYWN0MTA1LnVzZUNhbGxiYWNrKFxuICAgIChlbmFibGVkLCBpc1VzZXJJbml0aWF0ZWQpID0+IGlzVXNlckluaXRpYXRlZCA/IHNhdmVWaWRlb0lucHV0RW5hYmxlZChlbmFibGVkKSA6IG51bGwsXG4gICAgW3NhdmVWaWRlb0lucHV0RW5hYmxlZF1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBodG1sUHJvcHMpLCB2aXNpYmxlQ29udHJvbHMubWljcm9waG9uZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXBcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChcbiAgICBUcmFja1RvZ2dsZSxcbiAgICB7XG4gICAgICBzb3VyY2U6IFRyYWNrMTAuU291cmNlLk1pY3JvcGhvbmUsXG4gICAgICBzaG93SWNvbixcbiAgICAgIG9uQ2hhbmdlOiBtaWNyb3Bob25lT25DaGFuZ2VcbiAgICB9LFxuICAgIHNob3dUZXh0ICYmIFwiTWljcm9waG9uZVwiXG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cC1tZW51XCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA1LmNyZWF0ZUVsZW1lbnQoXG4gICAgTWVkaWFEZXZpY2VNZW51LFxuICAgIHtcbiAgICAgIGtpbmQ6IFwiYXVkaW9pbnB1dFwiLFxuICAgICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IChfa2luZCwgZGV2aWNlSWQpID0+IHNhdmVBdWRpb0lucHV0RGV2aWNlSWQoZGV2aWNlSWQgIT0gbnVsbCA/IGRldmljZUlkIDogXCJcIilcbiAgICB9XG4gICkpKSwgdmlzaWJsZUNvbnRyb2xzLmNhbWVyYSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXBcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChUcmFja1RvZ2dsZSwgeyBzb3VyY2U6IFRyYWNrMTAuU291cmNlLkNhbWVyYSwgc2hvd0ljb24sIG9uQ2hhbmdlOiBjYW1lcmFPbkNoYW5nZSB9LCBzaG93VGV4dCAmJiBcIkNhbWVyYVwiKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA1LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLW1lbnVcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChcbiAgICBNZWRpYURldmljZU1lbnUsXG4gICAge1xuICAgICAga2luZDogXCJ2aWRlb2lucHV0XCIsXG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKF9raW5kLCBkZXZpY2VJZCkgPT4gc2F2ZVZpZGVvSW5wdXREZXZpY2VJZChkZXZpY2VJZCAhPSBudWxsID8gZGV2aWNlSWQgOiBcIlwiKVxuICAgIH1cbiAgKSkpLCB2aXNpYmxlQ29udHJvbHMuc2NyZWVuU2hhcmUgJiYgYnJvd3NlclN1cHBvcnRzU2NyZWVuU2hhcmluZyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChcbiAgICBUcmFja1RvZ2dsZSxcbiAgICB7XG4gICAgICBzb3VyY2U6IFRyYWNrMTAuU291cmNlLlNjcmVlblNoYXJlLFxuICAgICAgY2FwdHVyZU9wdGlvbnM6IHsgYXVkaW86IHRydWUsIHNlbGZCcm93c2VyU3VyZmFjZTogXCJpbmNsdWRlXCIgfSxcbiAgICAgIHNob3dJY29uLFxuICAgICAgb25DaGFuZ2U6IG9uU2NyZWVuU2hhcmVDaGFuZ2VcbiAgICB9LFxuICAgIHNob3dUZXh0ICYmIChpc1NjcmVlblNoYXJlRW5hYmxlZCA/IFwiU3RvcCBzY3JlZW4gc2hhcmVcIiA6IFwiU2hhcmUgc2NyZWVuXCIpXG4gICksIHZpc2libGVDb250cm9scy5jaGF0ICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNS5jcmVhdGVFbGVtZW50KENoYXRUb2dnbGUsIG51bGwsIHNob3dJY29uICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNS5jcmVhdGVFbGVtZW50KENoYXRJY29uX2RlZmF1bHQsIG51bGwpLCBzaG93VGV4dCAmJiBcIkNoYXRcIiksIHZpc2libGVDb250cm9scy5sZWF2ZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChEaXNjb25uZWN0QnV0dG9uLCBudWxsLCBzaG93SWNvbiAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChMZWF2ZUljb25fZGVmYXVsdCwgbnVsbCksIHNob3dUZXh0ICYmIFwiTGVhdmVcIiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNS5jcmVhdGVFbGVtZW50KFN0YXJ0TWVkaWFCdXR0b24sIG51bGwpKTtcbn1cblxuLy8gc3JjL3ByZWZhYnMvVmlkZW9Db25mZXJlbmNlLnRzeFxuZnVuY3Rpb24gVmlkZW9Db25mZXJlbmNlKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgY2hhdE1lc3NhZ2VGb3JtYXR0ZXIsXG4gICAgY2hhdE1lc3NhZ2VEZWNvZGVyLFxuICAgIGNoYXRNZXNzYWdlRW5jb2RlclxuICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJjaGF0TWVzc2FnZUZvcm1hdHRlclwiLFxuICAgIFwiY2hhdE1lc3NhZ2VEZWNvZGVyXCIsXG4gICAgXCJjaGF0TWVzc2FnZUVuY29kZXJcIlxuICBdKTtcbiAgdmFyIF9hMiwgX2IyO1xuICBjb25zdCBbd2lkZ2V0U3RhdGUsIHNldFdpZGdldFN0YXRlXSA9IFJlYWN0MTA2LnVzZVN0YXRlKHtcbiAgICBzaG93Q2hhdDogZmFsc2UsXG4gICAgdW5yZWFkTWVzc2FnZXM6IDBcbiAgfSk7XG4gIGNvbnN0IGxhc3RBdXRvRm9jdXNlZFNjcmVlblNoYXJlVHJhY2sgPSBSZWFjdDEwNi51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHRyYWNrcyA9IHVzZVRyYWNrcyhcbiAgICBbXG4gICAgICB7IHNvdXJjZTogVHJhY2sxMS5Tb3VyY2UuQ2FtZXJhLCB3aXRoUGxhY2Vob2xkZXI6IHRydWUgfSxcbiAgICAgIHsgc291cmNlOiBUcmFjazExLlNvdXJjZS5TY3JlZW5TaGFyZSwgd2l0aFBsYWNlaG9sZGVyOiBmYWxzZSB9XG4gICAgXSxcbiAgICB7IHVwZGF0ZU9ubHlPbjogW1Jvb21FdmVudDMuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkXSwgb25seVN1YnNjcmliZWQ6IGZhbHNlIH1cbiAgKTtcbiAgY29uc3Qgd2lkZ2V0VXBkYXRlID0gKHN0YXRlKSA9PiB7XG4gICAgbG9nMTMuZGVidWcoXCJ1cGRhdGluZyB3aWRnZXQgc3RhdGVcIiwgc3RhdGUpO1xuICAgIHNldFdpZGdldFN0YXRlKHN0YXRlKTtcbiAgfTtcbiAgY29uc3QgbGF5b3V0Q29udGV4dCA9IHVzZUNyZWF0ZUxheW91dENvbnRleHQoKTtcbiAgY29uc3Qgc2NyZWVuU2hhcmVUcmFja3MgPSB0cmFja3MuZmlsdGVyKGlzVHJhY2tSZWZlcmVuY2U0KS5maWx0ZXIoKHRyYWNrKSA9PiB0cmFjay5wdWJsaWNhdGlvbi5zb3VyY2UgPT09IFRyYWNrMTEuU291cmNlLlNjcmVlblNoYXJlKTtcbiAgY29uc3QgZm9jdXNUcmFjayA9IChfYTIgPSB1c2VQaW5uZWRUcmFja3MobGF5b3V0Q29udGV4dCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTJbMF07XG4gIGNvbnN0IGNhcm91c2VsVHJhY2tzID0gdHJhY2tzLmZpbHRlcigodHJhY2spID0+ICFpc0VxdWFsVHJhY2tSZWYodHJhY2ssIGZvY3VzVHJhY2spKTtcbiAgUmVhY3QxMDYudXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgX2EzLCBfYjMsIF9jLCBfZDtcbiAgICBpZiAoc2NyZWVuU2hhcmVUcmFja3Muc29tZSgodHJhY2spID0+IHRyYWNrLnB1YmxpY2F0aW9uLmlzU3Vic2NyaWJlZCkgJiYgbGFzdEF1dG9Gb2N1c2VkU2NyZWVuU2hhcmVUcmFjay5jdXJyZW50ID09PSBudWxsKSB7XG4gICAgICBsb2cxMy5kZWJ1ZyhcIkF1dG8gc2V0IHNjcmVlbiBzaGFyZSBmb2N1czpcIiwgeyBuZXdTY3JlZW5TaGFyZVRyYWNrOiBzY3JlZW5TaGFyZVRyYWNrc1swXSB9KTtcbiAgICAgIChfYjMgPSAoX2EzID0gbGF5b3V0Q29udGV4dC5waW4pLmRpc3BhdGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2IzLmNhbGwoX2EzLCB7IG1zZzogXCJzZXRfcGluXCIsIHRyYWNrUmVmZXJlbmNlOiBzY3JlZW5TaGFyZVRyYWNrc1swXSB9KTtcbiAgICAgIGxhc3RBdXRvRm9jdXNlZFNjcmVlblNoYXJlVHJhY2suY3VycmVudCA9IHNjcmVlblNoYXJlVHJhY2tzWzBdO1xuICAgIH0gZWxzZSBpZiAobGFzdEF1dG9Gb2N1c2VkU2NyZWVuU2hhcmVUcmFjay5jdXJyZW50ICYmICFzY3JlZW5TaGFyZVRyYWNrcy5zb21lKFxuICAgICAgKHRyYWNrKSA9PiB7XG4gICAgICAgIHZhciBfYTQsIF9iNDtcbiAgICAgICAgcmV0dXJuIHRyYWNrLnB1YmxpY2F0aW9uLnRyYWNrU2lkID09PSAoKF9iNCA9IChfYTQgPSBsYXN0QXV0b0ZvY3VzZWRTY3JlZW5TaGFyZVRyYWNrLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYTQucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYjQudHJhY2tTaWQpO1xuICAgICAgfVxuICAgICkpIHtcbiAgICAgIGxvZzEzLmRlYnVnKFwiQXV0byBjbGVhcmluZyBzY3JlZW4gc2hhcmUgZm9jdXMuXCIpO1xuICAgICAgKF9kID0gKF9jID0gbGF5b3V0Q29udGV4dC5waW4pLmRpc3BhdGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2QuY2FsbChfYywgeyBtc2c6IFwiY2xlYXJfcGluXCIgfSk7XG4gICAgICBsYXN0QXV0b0ZvY3VzZWRTY3JlZW5TaGFyZVRyYWNrLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgfSwgW1xuICAgIHNjcmVlblNoYXJlVHJhY2tzLm1hcCgocmVmKSA9PiBgJHtyZWYucHVibGljYXRpb24udHJhY2tTaWR9XyR7cmVmLnB1YmxpY2F0aW9uLmlzU3Vic2NyaWJlZH1gKS5qb2luKCksXG4gICAgKF9iMiA9IGZvY3VzVHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGZvY3VzVHJhY2sucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYjIudHJhY2tTaWRcbiAgXSk7XG4gIHVzZVdhcm5BYm91dE1pc3NpbmdTdHlsZXMoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHsgY2xhc3NOYW1lOiBcImxrLXZpZGVvLWNvbmZlcmVuY2VcIiB9LCBwcm9wcyksIGlzV2ViKCkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmNyZWF0ZUVsZW1lbnQoXG4gICAgTGF5b3V0Q29udGV4dFByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiBsYXlvdXRDb250ZXh0LFxuICAgICAgb25XaWRnZXRDaGFuZ2U6IHdpZGdldFVwZGF0ZVxuICAgIH0sXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstdmlkZW8tY29uZmVyZW5jZS1pbm5lclwiIH0sICFmb2N1c1RyYWNrID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstZ3JpZC1sYXlvdXQtd3JhcHBlclwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNi5jcmVhdGVFbGVtZW50KEdyaWRMYXlvdXQsIHsgdHJhY2tzIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNi5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50VGlsZSwgbnVsbCkpKSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWZvY3VzLWxheW91dC13cmFwcGVyXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmNyZWF0ZUVsZW1lbnQoRm9jdXNMYXlvdXRDb250YWluZXIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNi5jcmVhdGVFbGVtZW50KENhcm91c2VsTGF5b3V0LCB7IHRyYWNrczogY2Fyb3VzZWxUcmFja3MgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmNyZWF0ZUVsZW1lbnQoUGFydGljaXBhbnRUaWxlLCBudWxsKSksIGZvY3VzVHJhY2sgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmNyZWF0ZUVsZW1lbnQoRm9jdXNMYXlvdXQsIHsgdHJhY2tSZWY6IGZvY3VzVHJhY2sgfSkpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmNyZWF0ZUVsZW1lbnQoQ29udHJvbEJhciwgeyBjb250cm9sczogeyBjaGF0OiB0cnVlIH0gfSkpLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNi5jcmVhdGVFbGVtZW50KFxuICAgICAgQ2hhdCxcbiAgICAgIHtcbiAgICAgICAgc3R5bGU6IHsgZGlzcGxheTogd2lkZ2V0U3RhdGUuc2hvd0NoYXQgPyBcImdyaWRcIiA6IFwibm9uZVwiIH0sXG4gICAgICAgIG1lc3NhZ2VGb3JtYXR0ZXI6IGNoYXRNZXNzYWdlRm9ybWF0dGVyLFxuICAgICAgICBtZXNzYWdlRW5jb2RlcjogY2hhdE1lc3NhZ2VFbmNvZGVyLFxuICAgICAgICBtZXNzYWdlRGVjb2RlcjogY2hhdE1lc3NhZ2VEZWNvZGVyXG4gICAgICB9XG4gICAgKVxuICApLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDYuY3JlYXRlRWxlbWVudChSb29tQXVkaW9SZW5kZXJlciwgbnVsbCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNi5jcmVhdGVFbGVtZW50KENvbm5lY3Rpb25TdGF0ZVRvYXN0LCBudWxsKSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL0F1ZGlvQ29uZmVyZW5jZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTA3IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgVHJhY2sgYXMgVHJhY2sxMiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gQXVkaW9Db25mZXJlbmNlKF9hKSB7XG4gIHZhciBwcm9wcyA9IF9fb2JqUmVzdChfYSwgW10pO1xuICBjb25zdCBbd2lkZ2V0U3RhdGUsIHNldFdpZGdldFN0YXRlXSA9IFJlYWN0MTA3LnVzZVN0YXRlKHtcbiAgICBzaG93Q2hhdDogZmFsc2UsXG4gICAgdW5yZWFkTWVzc2FnZXM6IDBcbiAgfSk7XG4gIGNvbnN0IGF1ZGlvVHJhY2tzID0gdXNlVHJhY2tzKFtUcmFjazEyLlNvdXJjZS5NaWNyb3Bob25lXSk7XG4gIHVzZVdhcm5BYm91dE1pc3NpbmdTdHlsZXMoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNy5jcmVhdGVFbGVtZW50KExheW91dENvbnRleHRQcm92aWRlciwgeyBvbldpZGdldENoYW5nZTogc2V0V2lkZ2V0U3RhdGUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoeyBjbGFzc05hbWU6IFwibGstYXVkaW8tY29uZmVyZW5jZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYXVkaW8tY29uZmVyZW5jZS1zdGFnZVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNy5jcmVhdGVFbGVtZW50KFRyYWNrTG9vcCwgeyB0cmFja3M6IGF1ZGlvVHJhY2tzIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNy5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50QXVkaW9UaWxlLCBudWxsKSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDcuY3JlYXRlRWxlbWVudChcbiAgICBDb250cm9sQmFyLFxuICAgIHtcbiAgICAgIGNvbnRyb2xzOiB7IG1pY3JvcGhvbmU6IHRydWUsIHNjcmVlblNoYXJlOiBmYWxzZSwgY2FtZXJhOiBmYWxzZSwgY2hhdDogdHJ1ZSB9XG4gICAgfVxuICApLCB3aWRnZXRTdGF0ZS5zaG93Q2hhdCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDcuY3JlYXRlRWxlbWVudChDaGF0LCBudWxsKSkpO1xufVxuXG4vLyBzcmMvaW5kZXgudHNcbmltcG9ydCB7IHNldExvZ0xldmVsLCBzZXRMb2dFeHRlbnNpb24sIGlzVHJhY2tSZWZlcmVuY2UgYXMgaXNUcmFja1JlZmVyZW5jZTUgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5leHBvcnQge1xuICBBdWRpb0NvbmZlcmVuY2UsXG4gIEF1ZGlvVHJhY2ssXG4gIEF1ZGlvVmlzdWFsaXplcixcbiAgQ2FtZXJhRGlzYWJsZWRJY29uX2RlZmF1bHQgYXMgQ2FtZXJhRGlzYWJsZWRJY29uLFxuICBDYW1lcmFJY29uX2RlZmF1bHQgYXMgQ2FtZXJhSWNvbixcbiAgQ2Fyb3VzZWxMYXlvdXQsXG4gIENhcm91c2VsVmlldyxcbiAgQ2hhdCxcbiAgQ2hhdENsb3NlSWNvbl9kZWZhdWx0IGFzIENoYXRDbG9zZUljb24sXG4gIENoYXRFbnRyeSxcbiAgQ2hhdEljb25fZGVmYXVsdCBhcyBDaGF0SWNvbixcbiAgQ2hhdFRvZ2dsZSxcbiAgQ2hldnJvbl9kZWZhdWx0IGFzIENoZXZyb24sXG4gIENsZWFyUGluQnV0dG9uLFxuICBDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvcixcbiAgQ29ubmVjdGlvblN0YXRlMyBhcyBDb25uZWN0aW9uU3RhdGUsXG4gIENvbm5lY3Rpb25TdGF0ZVRvYXN0LFxuICBDb250cm9sQmFyLFxuICBEaXNjb25uZWN0QnV0dG9uLFxuICBGb2N1c0xheW91dCxcbiAgRm9jdXNMYXlvdXRDb250YWluZXIsXG4gIEZvY3VzVG9nZ2xlLFxuICBGb2N1c1RvZ2dsZUljb25fZGVmYXVsdCBhcyBGb2N1c1RvZ2dsZUljb24sXG4gIEdlYXJJY29uX2RlZmF1bHQgYXMgR2Vhckljb24sXG4gIEdyaWRMYXlvdXQsXG4gIExLRmVhdHVyZUNvbnRleHQsXG4gIExheW91dENvbnRleHQsXG4gIExheW91dENvbnRleHRQcm92aWRlcixcbiAgTGVhdmVJY29uX2RlZmF1bHQgYXMgTGVhdmVJY29uLFxuICBMaXZlS2l0Um9vbSxcbiAgTG9ja0xvY2tlZEljb25fZGVmYXVsdCBhcyBMb2NrTG9ja2VkSWNvbixcbiAgTWVkaWFEZXZpY2VNZW51LFxuICBNZWRpYURldmljZVNlbGVjdCxcbiAgTWljRGlzYWJsZWRJY29uX2RlZmF1bHQgYXMgTWljRGlzYWJsZWRJY29uLFxuICBNaWNJY29uX2RlZmF1bHQgYXMgTWljSWNvbixcbiAgUGFydGljaXBhbnRBdWRpb1RpbGUsXG4gIFBhcnRpY2lwYW50Q29udGV4dCxcbiAgUGFydGljaXBhbnRDb250ZXh0SWZOZWVkZWQsXG4gIFBhcnRpY2lwYW50TG9vcCxcbiAgUGFydGljaXBhbnROYW1lLFxuICBQYXJ0aWNpcGFudFBsYWNlaG9sZGVyX2RlZmF1bHQgYXMgUGFydGljaXBhbnRQbGFjZWhvbGRlcixcbiAgUGFydGljaXBhbnRUaWxlLFxuICBQcmVKb2luLFxuICBRdWFsaXR5RXhjZWxsZW50SWNvbl9kZWZhdWx0IGFzIFF1YWxpdHlFeGNlbGxlbnRJY29uLFxuICBRdWFsaXR5R29vZEljb25fZGVmYXVsdCBhcyBRdWFsaXR5R29vZEljb24sXG4gIFF1YWxpdHlQb29ySWNvbl9kZWZhdWx0IGFzIFF1YWxpdHlQb29ySWNvbixcbiAgUXVhbGl0eVVua25vd25JY29uX2RlZmF1bHQgYXMgUXVhbGl0eVVua25vd25JY29uLFxuICBSb29tQXVkaW9SZW5kZXJlcixcbiAgUm9vbUNvbnRleHQsXG4gIFJvb21OYW1lLFxuICBTY3JlZW5TaGFyZUljb25fZGVmYXVsdCBhcyBTY3JlZW5TaGFyZUljb24sXG4gIFNjcmVlblNoYXJlU3RvcEljb25fZGVmYXVsdCBhcyBTY3JlZW5TaGFyZVN0b3BJY29uLFxuICBTcGlubmVySWNvbl9kZWZhdWx0IGFzIFNwaW5uZXJJY29uLFxuICBTdGFydEF1ZGlvLFxuICBUb2FzdCxcbiAgVHJhY2tDb250ZXh0LFxuICBUcmFja0xvb3AsXG4gIFRyYWNrTXV0ZWRJbmRpY2F0b3IsXG4gIFRyYWNrUmVmQ29udGV4dCxcbiAgVHJhY2tUb2dnbGUsXG4gIFVuZm9jdXNUb2dnbGVJY29uX2RlZmF1bHQgYXMgVW5mb2N1c1RvZ2dsZUljb24sXG4gIFZpZGVvQ29uZmVyZW5jZSxcbiAgVmlkZW9UcmFjayxcbiAgZm9ybWF0Q2hhdE1lc3NhZ2VMaW5rcyxcbiAgaXNUcmFja1JlZmVyZW5jZTUgYXMgaXNUcmFja1JlZmVyZW5jZSxcbiAgc2V0TG9nRXh0ZW5zaW9uLFxuICBzZXRMb2dMZXZlbCxcbiAgdXNlQXVkaW9QbGF5YmFjayxcbiAgdXNlQ2hhdCxcbiAgdXNlQ2hhdFRvZ2dsZSxcbiAgdXNlQ2xlYXJQaW5CdXR0b24sXG4gIHVzZUNvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yLFxuICB1c2VDb25uZWN0aW9uU3RhdGUsXG4gIHVzZUNyZWF0ZUxheW91dENvbnRleHQsXG4gIHVzZURhdGFDaGFubmVsLFxuICB1c2VEaXNjb25uZWN0QnV0dG9uLFxuICB1c2VFbnN1cmVDcmVhdGVMYXlvdXRDb250ZXh0LFxuICB1c2VFbnN1cmVMYXlvdXRDb250ZXh0LFxuICB1c2VFbnN1cmVQYXJ0aWNpcGFudCxcbiAgdXNlRW5zdXJlUm9vbSxcbiAgdXNlRW5zdXJlVHJhY2tSZWYsXG4gIHVzZUVuc3VyZVRyYWNrUmVmZXJlbmNlLFxuICB1c2VGYWNpbmdNb2RlLFxuICB1c2VGZWF0dXJlQ29udGV4dCxcbiAgdXNlRm9jdXNUb2dnbGUsXG4gIHVzZUdyaWRMYXlvdXQsXG4gIHVzZUlzRW5jcnlwdGVkLFxuICB1c2VJc011dGVkLFxuICB1c2VJc1NwZWFraW5nLFxuICB1c2VMYXlvdXRDb250ZXh0LFxuICB1c2VMaXZlS2l0Um9vbSxcbiAgdXNlTG9jYWxQYXJ0aWNpcGFudCxcbiAgdXNlTG9jYWxQYXJ0aWNpcGFudFBlcm1pc3Npb25zLFxuICB1c2VNYXliZUxheW91dENvbnRleHQsXG4gIHVzZU1heWJlUGFydGljaXBhbnRDb250ZXh0LFxuICB1c2VNYXliZVJvb21Db250ZXh0LFxuICB1c2VNYXliZVRyYWNrQ29udGV4dCxcbiAgdXNlTWF5YmVUcmFja1JlZkNvbnRleHQsXG4gIHVzZU1lZGlhRGV2aWNlU2VsZWN0LFxuICB1c2VNZWRpYURldmljZXMsXG4gIHVzZU1lZGlhVHJhY2ssXG4gIHVzZU1lZGlhVHJhY2tCeU5hbWUsXG4gIHVzZU11bHRpYmFuZFRyYWNrVm9sdW1lLFxuICB1c2VQYWdpbmF0aW9uLFxuICB1c2VQYXJ0aWNpcGFudENvbnRleHQsXG4gIHVzZVBhcnRpY2lwYW50SW5mbyxcbiAgdXNlUGFydGljaXBhbnRQZXJtaXNzaW9ucyxcbiAgdXNlUGFydGljaXBhbnRUaWxlLFxuICB1c2VQYXJ0aWNpcGFudHMsXG4gIHVzZVBlcnNpc3RlbnRVc2VyQ2hvaWNlcyxcbiAgdXNlUGlubmVkVHJhY2tzLFxuICB1c2VQcmV2aWV3RGV2aWNlLFxuICB1c2VQcmV2aWV3VHJhY2tzLFxuICB1c2VSZW1vdGVQYXJ0aWNpcGFudCxcbiAgdXNlUmVtb3RlUGFydGljaXBhbnRzLFxuICB1c2VSb29tQ29udGV4dCxcbiAgdXNlUm9vbUluZm8sXG4gIHVzZVNvcnRlZFBhcnRpY2lwYW50cyxcbiAgdXNlU3BlYWtpbmdQYXJ0aWNpcGFudHMsXG4gIHVzZVN0YXJ0QXVkaW8sXG4gIHVzZVN0YXJ0VmlkZW8sXG4gIHVzZVN3aXBlLFxuICB1c2VUb2tlbixcbiAgdXNlVHJhY2ssXG4gIHVzZVRyYWNrQnlOYW1lLFxuICB1c2VUcmFja0NvbnRleHQsXG4gIHVzZVRyYWNrTXV0ZWRJbmRpY2F0b3IsXG4gIHVzZVRyYWNrUmVmQ29udGV4dCxcbiAgdXNlVHJhY2tUb2dnbGUsXG4gIHVzZVRyYWNrVm9sdW1lLFxuICB1c2VUcmFja3MsXG4gIHVzZVZpc3VhbFN0YWJsZVVwZGF0ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/index.mjs\n");

/***/ })

};
;